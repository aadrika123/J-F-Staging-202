import{c as Rs,d as Bs,x as Is,b as Ms,o as As,j as s,F as Fs,C as Ss,Z as Ls,y as Ps,B as _s,g as v,_ as N,s as ks,a0 as d,D as i,a1 as u,a2 as f,a3 as b,I as h,a4 as g,z as Ys,k as zs}from"./index-DM7OnLOQ.js";import{P as $s}from"./index-DWmfyQt7.js";import{g as Os}from"./services-KQnp_8oA.js";import{R as Us}from"./refresh-ccw-BuWRhwig.js";import{I as Es}from"./info-DGAUMFEO.js";import{p as qs}from"./profile-B9PrzW7y.js";import{M as Hs}from"./move-right-Cth-RJmZ.js";const Qs=Rs().shape({comment:Bs().required("Write comment")});function Ws({complaintData:r}){const t=Is({}),c=Ms({resolver:As(Qs)}),j=async a=>{var x,o;let n={complaintId:(o=(x=r==null?void 0:r.data)==null?void 0:x.data)==null?void 0:o._id,comment:a==null?void 0:a.comment};try{const l=await t.mutateAsync({api:v.reopenComplaint,data:n});l.data.success?(N.success(l.data.message),r==null||r.refetch()):N.error(l.data.message)}catch(l){N.error(Os(l))}};return s.jsx(Fs,{methods:c,onSubmit:c.handleSubmit(j),children:s.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[s.jsxs("div",{children:[s.jsx(Ss,{className:"text-2xl flex items-center font-bold mb-6 justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-7 h-7 bg-amber-600 rounded-full bg-red-5500 text-white justify-center items-center mr-2 flex ",children:s.jsx(Us,{className:"inline"})})," Re-Open Complaint"]})}),s.jsxs(Ls,{className:"opacity-70 flex items-center",children:[s.jsx("div",{children:s.jsx(Es,{size:20,className:"inline mr-1"})}),s.jsx("div",{children:"Enter, why do you want to reopen this complaint?"})]}),s.jsx(Ps,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),s.jsx("div",{className:"mt-4",children:s.jsx(_s,{isLoading:c.formState.isSubmitting,type:"submit",className:" w-full",children:"Submit Re-Open"})})]})})}function Gs(){var x,o,l,p,y,m,w,C,k,S,T,R,B,I,M,A,F,L,P,_,Y,z,$,O,U,E,q,H,Q,W,G,Z,J,K,V,X,D,ss,es,as,ds,ls,rs,cs,ns,xs,os,ts,is,hs,js,Ns,us,fs,bs,gs,vs;const t=new URLSearchParams(zs().search),c=t.get("complaintRefNo"),j=t.get("complaintId"),a=ks({api:`${v.getComplaintDetailsByComplaintNo}/${c}`,key:"ComplaintDetails",options:{enabled:!0}}),n=ks({api:`${v.complaintApplicationLog}/${j}`,key:"complaintApplicationLog",options:{enabled:!0}});return s.jsx("div",{className:"",children:s.jsx("div",{className:"min-h-screen",children:s.jsxs("div",{className:"max-w-7xl mx-auto bg-background shadow-lg rounded-lg p-8",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("h1",{className:"text-xl font-bold text-blue-800 mb-6 uppercase",children:["Complaint No : ",(o=(x=a==null?void 0:a.data)==null?void 0:x.data)==null?void 0:o.complaintRefNo]}),((y=(p=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:p.workflow)==null?void 0:y.workFlowName)&&s.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[s.jsx("span",{className:"opacity-60",children:"Current Stage : "}),(C=(w=(m=a==null?void 0:a.data)==null?void 0:m.data)==null?void 0:w.workflow)==null?void 0:C.workFlowName," Workflow"]}),!((T=(S=(k=a==null?void 0:a.data)==null?void 0:k.data)==null?void 0:S.workflow)!=null&&T.workFlowName)&&s.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[s.jsx("span",{className:"opacity-60",children:"Current Stage : "}),"State GRO"]}),s.jsx("h1",{className:"text-md font-bold  mb-6 flex items-center",children:s.jsxs("span",{children:["Status -",((B=(R=a==null?void 0:a.data)==null?void 0:R.data)==null?void 0:B.wf_status)===0&&s.jsx(d,{className:"bg-yellow-500 ml-2",children:"Pending"}),((M=(I=a==null?void 0:a.data)==null?void 0:I.data)==null?void 0:M.wf_status)===1&&s.jsx(d,{className:"bg-green-500 ml-2",children:"Resolved"}),((F=(A=a==null?void 0:a.data)==null?void 0:A.data)==null?void 0:F.wf_status)===2&&s.jsx(d,{className:"bg-red-500 ml-2",children:"Rejected"}),((P=(L=a==null?void 0:a.data)==null?void 0:L.data)==null?void 0:P.wf_status)===3&&s.jsx(d,{className:"bg-yellow-500 ml-2",children:"Pending(re-opened)"})]})})]}),s.jsxs("p",{className:"text-gray-600 mb-2",children:["Registered on ",i((Y=(_=a==null?void 0:a.data)==null?void 0:_.data)==null?void 0:Y.createdAt).format("DD-MM-YYYY")]}),s.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),s.jsxs("div",{className:"mt-4  grid grid-cols-1 md:grid-cols-3   space-y-4",children:[s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Full Name : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:($=(z=a==null?void 0:a.data)==null?void 0:z.data)==null?void 0:$.citizenName})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Mobile No : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(U=(O=a==null?void 0:a.data)==null?void 0:O.data)==null?void 0:U.mobileNo})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Email : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(q=(E=a==null?void 0:a.data)==null?void 0:E.data)==null?void 0:q.email})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"ULB : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(W=(Q=(H=a==null?void 0:a.data)==null?void 0:H.data)==null?void 0:Q.ulb)==null?void 0:W.ulbName})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Module : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(J=(Z=(G=a==null?void 0:a.data)==null?void 0:G.data)==null?void 0:Z.module)==null?void 0:J.moduleName})," "]})]}),((V=(K=a==null?void 0:a.data)==null?void 0:K.data)==null?void 0:V.fixedNo)&&s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsxs("div",{className:"font-semibold",children:[(D=(X=a==null?void 0:a.data)==null?void 0:X.data)==null?void 0:D.fixedNoLabel," : "]}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(es=(ss=a==null?void 0:a.data)==null?void 0:ss.data)==null?void 0:es.fixedNo})," "]})]}),((ds=(as=a==null?void 0:a.data)==null?void 0:as.data)==null?void 0:ds.tempNo)&&s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsxs("div",{className:"font-semibold",children:[(rs=(ls=a==null?void 0:a.data)==null?void 0:ls.data)==null?void 0:rs.tempNoLabel," : "]}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(ns=(cs=a==null?void 0:a.data)==null?void 0:cs.data)==null?void 0:ns.tempNo})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Pending From : "}),s.jsxs("div",{children:[s.jsxs("p",{className:"opacity-90",children:[i().diff(i((os=(xs=a==null?void 0:a.data)==null?void 0:xs.data)==null?void 0:os.createdAt),"days")," days"]})," "]})]}),s.jsx("div",{className:"col-span-3 border-b my-20 border-[#99B37C]"}),s.jsxs("div",{className:"col-span-2 flex flex-col",children:[s.jsx("div",{className:"font-semibold",children:"Title : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(is=(ts=a==null?void 0:a.data)==null?void 0:ts.data)==null?void 0:is.complaintTitle})," "]})]}),s.jsxs("div",{className:"col-span-2 flex flex-col",children:[s.jsx("div",{className:"font-semibold",children:"Description : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(js=(hs=a==null?void 0:a.data)==null?void 0:hs.data)==null?void 0:js.complaintDescription})," "]})]}),s.jsxs("div",{className:"col-span-3 flex flex-col",children:[s.jsx("div",{className:"font-semibold",children:"Complaint Document"}),s.jsxs(u,{children:[s.jsx(f,{}),s.jsx(b,{className:"sm:max-w-[500px]",children:s.jsx("div",{className:"py-4",children:s.jsx(h,{src:"/images/slider.png",className:"w-80"})})}),s.jsx(g,{asChild:!0,children:s.jsx("div",{className:"cursor-pointer ",children:s.jsx(h,{src:"/images/slider.png",className:"w-40"})})})]})]})]}),s.jsxs("section",{className:"mt-8",children:[(((us=(Ns=a==null?void 0:a.data)==null?void 0:Ns.data)==null?void 0:us.wf_status)===1||((bs=(fs=a==null?void 0:a.data)==null?void 0:fs.data)==null?void 0:bs.wf_status)===2)&&s.jsxs(u,{children:[s.jsx(f,{}),s.jsxs(b,{className:"sm:max-w-[500px]",children:[s.jsx(Ss,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:"Complaint Re-Open"}),s.jsx("div",{className:"py-4",children:s.jsx(Ws,{complaintData:a})})]}),s.jsx(g,{asChild:!0,children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:s.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"Complaint Flow History"})}),s.jsx("div",{children:s.jsx(Ys,{variant:"secondary",children:"Re-Open Complaint"})})]})})]}),s.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),s.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:(vs=(gs=n==null?void 0:n.data)==null?void 0:gs.data)==null?void 0:vs.map((e,Ts)=>{var ps,ys,ms,ws,Cs;return s.jsxs("div",{className:"flex space-x-4 items-center",children:[s.jsx("div",{children:Ts+1}),s.jsxs("div",{children:[(e==null?void 0:e.actionStatus)===0&&s.jsx(d,{className:"bg-gray-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===1&&s.jsx(d,{className:"bg-green-400 text-white",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===2&&s.jsx(d,{className:"bg-red-400 text-white",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===3&&s.jsx(d,{children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===4&&s.jsx(d,{className:"bg-amber-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===5&&s.jsx(d,{className:"bg-cyan-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===6&&s.jsx(d,{className:"bg-cyan-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===7&&s.jsx(d,{className:"bg-cyan-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===8&&s.jsx(d,{className:"bg-cyan-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===9&&s.jsx(d,{className:"bg-cyan-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===10&&s.jsx(d,{className:"bg-cyan-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===11&&s.jsx(d,{className:"bg-cyan-200 text-dark",children:e==null?void 0:e.statusText}),(e==null?void 0:e.actionStatus)===12&&s.jsx(d,{className:"bg-cyan-200 text-dark",children:e==null?void 0:e.statusText}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold mt-1",children:i((ys=(ps=a==null?void 0:a.data)==null?void 0:ps.data)==null?void 0:ys.createdAt).format("DD-MM-YYYY hh:mm a")})]}),s.jsx(Hs,{}),s.jsxs("div",{children:[s.jsxs(u,{children:[s.jsx(f,{}),s.jsx(b,{className:"sm:max-w-[500px]",children:s.jsx("div",{className:"py-4",children:s.jsx(h,{src:(ms=e==null?void 0:e.actionBy)==null?void 0:ms.fullImgUrl,className:"w-60"})})}),s.jsx(g,{asChild:!0,children:s.jsx("div",{className:"w-10 h-10 rounded-full border overflow-hidden cursor-pointer",children:s.jsx(h,{src:((ws=e==null?void 0:e.actionBy)==null?void 0:ws.fullImgUrl)||qs,className:"w-10 cursor-pointer hover:scale-105"})})})]}),s.jsxs("div",{className:"text-xs text-gray-700",children:["Action by  ",s.jsx("span",{className:"font-semibold text-black text-md",children:(e==null?void 0:e.actionByUserId)===null?"Direct Citizen":(Cs=e==null?void 0:e.actionBy)==null?void 0:Cs.fullName})]})]})]})})})]})]})})})}function ee(){return s.jsx($s,{title:"Complaint Details",subTitle:"Manage all the Complaint here",children:s.jsx("div",{className:"",children:s.jsx(Gs,{})})})}export{ee as default};
