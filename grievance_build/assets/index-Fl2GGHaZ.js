import{r as c,u as G,s as U,g as P,j as e,a1 as V,a2 as Y,a3 as E,C as A,L as B,aR as K,aS as L,aT as W,aU as J,aV as X,aW as O,aX as Q,B as Z,z as m,aY as D,a4 as k,t as ee,w as se,I,S as ae,_ as R,A as F}from"./index-BDeOXFDy.js";import{P as te}from"./index-DFSBr6Zv.js";import{S as ne}from"./index-c6F1X9m0.js";import{S as re}from"./Spinner-loUg1-vv.js";import{C as z}from"./chevron-right-DhgLjnxu.js";function ie(){var u,j,f,g,N,v,y,C,w;const[d,M]=c.useState(1),[x,_]=c.useState(10),[p,H]=c.useState(""),[n,i]=c.useState(0),[s,o]=c.useState({}),[T,$]=c.useState({}),h=G({}),a=U({api:`${P.getAllComplaintDirect}?page=${d}&limit=${x}&q=${p}`,key:"SeachCitizenComplaints",value:[d,x],options:{enabled:!0}}),q=async()=>{var t,b,S;try{const r=new FormData;r.append("citizenName",s==null?void 0:s.name),r.append("email",s==null?void 0:s.email),r.append("mobileNo",s==null?void 0:s.mobileNo),r.append("complaintTitle",s==null?void 0:s.complaintTitle),r.append("complaintDescription",s==null?void 0:s.complaintDescription),r.append("moduleId",s==null?void 0:s.module),r.append("ulbId",s==null?void 0:s.ulb),r.append("imageUrl",s==null?void 0:s.complaintDocument);const l=await h.mutateAsync({api:P.createComplaintApplication,data:r});(t=l.data)!=null&&t.success?($((b=l==null?void 0:l.data)==null?void 0:b.data),o({}),R.success((S=l==null?void 0:l.data)==null?void 0:S.message),i(6)):R.error("Complaint not created successfully")}catch(r){console.log(r)}};return e.jsxs(V,{children:[e.jsx(Y,{}),e.jsxs(E,{className:"sm:max-w-[500px] z-50",children:[e.jsxs(A,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:["Complaint Registration ",e.jsx(B,{to:"/grievance/citizen/complaint-registration-info",target:"_blank",children:e.jsx("span",{className:"text-amber-600 underline cursor-pointer",children:"Know How it works?"})})," "]}),e.jsxs("div",{className:"py-4",children:[n<5&&e.jsx(K,{status:n-1}),n===1&&e.jsx(L,{setcomplaintData:o,complaintData:s,setformStep:i}),n===2&&e.jsx(W,{setcomplaintData:o,complaintData:s,setformStep:i}),n===3&&e.jsx(J,{setcomplaintData:o,complaintData:s,setformStep:i}),n===4&&e.jsx(X,{setcomplaintData:o,complaintData:s,setformStep:i}),n===5&&e.jsx(O,{complaintData:s}),n===6&&e.jsx(Q,{formResponse:T}),n===5&&e.jsx("div",{className:"px-10 mb-5",children:e.jsx(Z,{isLoading:h.isPending,onClick:q,className:"w-full flex justify-center items-center",children:e.jsx("span",{className:"text-xs",children:"Submit"})})}),n<6&&e.jsx("div",{className:"px-10",children:e.jsxs(m,{onClick:()=>i(n-1),variant:"outline",className:"w-full flex justify-center items-center",children:[e.jsx(D,{size:20,className:"inline mr-2"})," ",e.jsx("span",{className:"text-xs",children:"Go Back"})]})})]})]}),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4",children:[e.jsxs("div",{className:"flex w-full justify-between gap-2",children:[e.jsx("div",{children:e.jsx(ne,{search:p,setSearch:H,refetch:a.refetch,isFetching:a.isLoading})}),e.jsx("div",{children:e.jsx(k,{onClick:()=>i(1),asChild:!0,children:e.jsxs(m,{className:"flex justify-center items-center",children:[e.jsx("span",{className:"text-xs",children:"Register Custom Complaint"}),e.jsx(z,{size:15,className:"inline"})]})})})]}),e.jsx(ee,{className:"shadow-none border-none rounded-none",children:e.jsx(se,{children:a.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(re,{})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col justify-center w-full px-4",children:(f=(j=(u=a==null?void 0:a.data)==null?void 0:u.data)==null?void 0:j.docs)==null?void 0:f.map(t=>e.jsxs("div",{className:"w-full px-8 py-2 bg-white rounded-md shadow-lg mb-2 relative",children:[e.jsxs("div",{className:"flex mt-6  pr-10",children:[e.jsx(I,{className:"flex-initial object-cover mx-2 rounded-full w-14 h-14",src:"https://images.unsplash.com/photo-1488508872907-592763824245?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"}),e.jsxs("div",{className:"mx-2 flex-1",children:[e.jsx("h1",{className:"font-semibold text-gray-800 dark:text-white",children:t==null?void 0:t.titleName}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t==null?void 0:t.description})]})]}),e.jsx(k,{onClick:()=>i(1),asChild:!0,children:e.jsxs(m,{className:"absolute right-0 bottom-0 flex justify-center items-center",variant:"secondary",children:[e.jsx("span",{className:"text-xs",children:"Register"}),e.jsx(z,{size:15,className:"inline"})]})})]},`complaint${t==null?void 0:t._id}`))}),e.jsx(ae,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(te,{page:d,perPage:x,totalPage:(N=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:N.totalDocs,hasNextPage:(y=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:y.hasNextPage,hasPrevPage:(w=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:w.hasPrevPage,setPage:M,setPerPage:_})})]})})})]})})]})}function me(){return e.jsxs("div",{className:"grid grid-cols-4 h-screen",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4 h-screen overflow-hidden",children:[e.jsx(A,{className:"text-xl text-primary font-bold",children:"Search existing Complaint or Register custom complaint"}),e.jsx(I,{src:"/images/complain_boy.png",className:"w-40"}),e.jsx(F,{className:"text-center",children:"Fill the form to process your complaint."}),e.jsxs(F,{className:"text-center",children:["You can register your grievance here or you can visit our nearest ",e.jsx(B,{target:"_blank",className:"underline hover:text-primary",to:"https://maps.app.goo.gl/ncVp959LoSja4uAh8",children:"Jan Seva Kendra"})," for further query. & Feel free to contact us on +918458697845"]})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-10 bg-gray-50 h-screen",children:e.jsx(ie,{})})]})}export{me as default};
