import{b4 as O,b as Q,o as U,j as e,F as W,C as K,Z as X,R as M,B as ee,t as ae,v as se,A as n,w as ce,a0 as d,L as Y,z as le,c as re,d as de,g as ie,_ as G,I as ne}from"./index-DM7OnLOQ.js";import{T as te,a as me,b as J,c,d as oe,e as l}from"./table-DZNEA4zA.js";import{S as xe}from"./Spinner-CtQw-0Oe.js";const he=re().shape({complaintNo:de().required("Complaint No. is Required")});function je(){var t,m,o,x,h,j,N,b,g,p,f,u,v,y,C,w,S,R,T,F,k,_,L,B,I,P,$,z,H,A,q;const a=O(),r=Q({resolver:U(he)}),Z=async i=>{var V,D,E;try{const s=await a.mutateAsync({api:`${ie.getComplaintDetailsByComplaintNo}/${i==null?void 0:i.complaintNo}`});(V=s.data)!=null&&V.success?G.success((D=s==null?void 0:s.data)==null?void 0:D.message):G.error((E=s==null?void 0:s.data)==null?void 0:E.message),r.reset({ulbId:"",moduleId:""})}catch(s){console.log(s)}};return console.log("onSubmit ==",(m=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:m.success),e.jsxs(e.Fragment,{children:[e.jsx(W,{methods:r,onSubmit:r.handleSubmit(Z),children:e.jsxs("div",{className:"md:px-24 space-y-4",children:[e.jsx(K,{className:"text-xl text-primary font-bold",children:"Track Complaint"}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"complaintNo",children:"Complaint Number"}),e.jsx(M,{className:"bg-background",name:"complaintNo",placeholder:""})]}),e.jsx("div",{className:"col-span-3",children:e.jsx(ee,{isLoading:r.formState.isSubmitting,type:"submit",className:" w-auto rounded-xl px-10 float-right",children:"Submit"})})]})}),((x=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:x.success)&&e.jsx("div",{className:"mt-20 md:px-24",children:e.jsxs(ae,{children:[e.jsx(se,{className:"px-7",children:e.jsx(n,{children:"Complaint List"})}),e.jsx(ce,{children:a.isPending?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(xe,{})}):e.jsxs(te,{children:[e.jsx(me,{children:e.jsxs(J,{children:[e.jsx(c,{className:"",children:"Complaint No."}),e.jsx(c,{className:"",children:"Citizen Name"}),e.jsx(c,{className:"",children:"Mobile No."}),e.jsx(c,{className:"",children:"Status"}),e.jsx(c,{className:"",children:"View"})]})}),e.jsx(oe,{children:e.jsxs(J,{children:[e.jsx(l,{children:(N=(j=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:j.data)==null?void 0:N.complaintRefNo}),e.jsx(l,{children:(p=(g=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:g.data)==null?void 0:p.citizenName}),e.jsx(l,{children:(v=(u=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:u.data)==null?void 0:v.mobileNo}),e.jsxs(l,{children:[((w=(C=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:C.data)==null?void 0:w.wf_status)===3&&e.jsx(d,{className:"bg-amber-400 text-white",children:"Pending(re-opened)"}),((T=(R=(S=a==null?void 0:a.data)==null?void 0:S.data)==null?void 0:R.data)==null?void 0:T.wf_status)===2&&e.jsx(d,{variant:"destructive",children:"Rejected"}),((_=(k=(F=a==null?void 0:a.data)==null?void 0:F.data)==null?void 0:k.data)==null?void 0:_.wf_status)===1&&e.jsx(d,{variant:"success",children:"Resolved"}),((I=(B=(L=a==null?void 0:a.data)==null?void 0:L.data)==null?void 0:B.data)==null?void 0:I.wf_status)===0&&e.jsx(d,{variant:"secondary",children:"Pending"})]}),e.jsx(l,{children:e.jsx(Y,{to:`/grievance/citizen/complaint-details?complaintRefNo=${(z=($=(P=a==null?void 0:a.data)==null?void 0:P.data)==null?void 0:$.data)==null?void 0:z.complaintRefNo}
                         &complaintId=${(q=(A=(H=a==null?void 0:a.data)==null?void 0:H.data)==null?void 0:A.data)==null?void 0:q._id}`,children:e.jsx(le,{className:"bg-primary",onClick:()=>{},children:"View"})})})]})})]})})]})})]})}function pe(){return e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4",children:[e.jsx(K,{className:"text-xl text-primary font-bold",children:"Track your complaint here"}),e.jsx(ne,{src:"/images/complain_boy.png",className:"w-40"}),e.jsx(n,{className:"text-center",children:"Fee free to give us your feedback"}),e.jsxs(n,{className:"text-center",children:["Your feedback is very important for us to enhance our system, Please feel free to give us your valuable feedback.",e.jsx(Y,{target:"_blank",className:"underline hover:text-primary",to:"https://maps.app.goo.gl/ncVp959LoSja4uAh8",children:"Jan Seva Kendra"})," for further query. & Feel free to contact us on +918458697845"]})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-10 bg-gray-50 h-screen",children:e.jsx(je,{})})]})}export{pe as default};
