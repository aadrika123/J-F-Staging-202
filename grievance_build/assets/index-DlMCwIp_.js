import{r as de,b as xe,o as je,s as c,g as i,j as e,F as be,S as oe,Z as r,R as f,G as p,B as ge,t as Ne,v as ye,A as fe,w as we,L as ve,z as Te,c as Ie,d as n}from"./index-0_eOYziX.js";import{T as Ae,a as Ce,b as re,c as d,d as Se,e as o}from"./table-COa44yxU.js";import{P as Pe}from"./index-u3PxukHO.js";import{S as $e}from"./Spinner-BmvVMya1.js";import{P as ke}from"./index-DThTelrn.js";const Fe="/assets/csv1-D7gXXuPV.png",De="/assets/xcl-CsJ75Zye.png",Re="/assets/pdf-DRnJaAAA.png",Le=Ie().shape({ulbId:n(),moduleId:n(),complaintTypeId:n(),priorityId:n(),targetTypeId:n(),complaintSourceTypeId:n(),fDate:n(),toDate:n(),complaintRefNo:n()});function _e(){var w,v,T,I,A,C,S,P,$,k,F,D,R,L,_,M,U,B,H,z,E,V,J,X,Z,G,W,Y,q,K,O,Q,ee,ae;const[j,ne]=de.useState(1),[h,ce]=de.useState(10),t=xe({resolver:je(Le),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}});console.log("methods");const ie=async()=>{s.refetch()},s=c({api:`${i.complaintReport}?page=${j}&limit=${h}&priority=${t.watch("priorityId")}&ulb=${t.watch("ulbId")}&complaintType=${t.watch("complaintTypeId")}&module=${t.watch("moduleId")}&source=${t.watch("complaintSourceTypeId")}&fDate=${t.watch("fDate")}&toDate=${t.watch("toDate")}&complaintRefNo=${t.watch("complaintRefNo")}`,key:"searchAllComplaints",value:[j,h],options:{enabled:!0}}),ue=c({api:`${(w=i)==null?void 0:w.getAllUlb}?page=1&limit=10000`,key:"getAllUlb",options:{enabled:!0}}),pe=c({api:`${(v=i)==null?void 0:v.getAllModule}?page=1&limit=10000`,key:"geAllModules",options:{enabled:!0}}),b=c({api:`${(T=i)==null?void 0:T.getAllComplaintType}?page=1&limit=10000`,key:"getAllComplaintTypes",options:{enabled:!0}}),g=c({api:`${(I=i)==null?void 0:I.getAllPriority}?page=1&limit=10000`,key:"getAllPriority",options:{enabled:!0}}),N=c({api:`${(A=i)==null?void 0:A.getAllTarget}?page=1&limit=10000`,key:"getAllTargetTypes",options:{enabled:!0}}),y=c({api:`${i.getAllComplaintSource}?page=1&limit=10000`,key:"getAllComplaintSource",options:{enabled:!0}}),he=a=>{var m,x,le;const l=window.open("","_blank");l&&(l.document.write("<html><head><title>Print</title>"),l.document.write("<style>"),l.document.write("table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }"),l.document.write("th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }"),l.document.write("th { background-color: #f2f2f2; }"),l.document.write("tr:nth-child(even) { background-color: #f2f2f2; }"),l.document.write("</style></head><body>"),l.document.write("<table>"),l.document.write("<tr>"),l.document.write("<th>#</th>"),l.document.write("<th>Complaint No.</th>"),l.document.write("<th>ULB Name</th>"),l.document.write("<th>Module</th>"),l.document.write("<th>Citizen Name</th>"),l.document.write("<th>Mobile No.</th>"),l.document.write("<th>Resolve Status</th>"),l.document.write("</tr>"),(le=(x=(m=a==null?void 0:a.data)==null?void 0:m.data)==null?void 0:x.docs)==null||le.forEach((u,me)=>{var se,te;l.document.write("<tr>"),l.document.write("<td>"+(me+1)+"</td>"),l.document.write("<td>"+(u.complaintRefNo||"N/A")+"</td>"),l.document.write("<td>"+(((se=u.ulb)==null?void 0:se.ulbName)||"N/A")+"</td>"),l.document.write("<td>"+(((te=u.module)==null?void 0:te.moduleName)||"N/A")+"</td>"),l.document.write("<td>"+(u.citizenName||"N/A")+"</td>"),l.document.write("<td>"+(u.mobileNo||"N/A")+"</td>"),l.document.write("<td>"+(u.resolveStatus===0?"Pending":"Resolved")+"</td>"),l.document.write("</tr>")}),l.document.write("</table>"),l.document.write("</body></html>"),l.document.close(),l.print())};return e.jsxs(e.Fragment,{children:[e.jsx(be,{methods:t,onSubmit:t.handleSubmit(ie),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background px-10 py-4",children:[e.jsx("h1",{className:"text-xl font-bold text-blue-800 uppercase col-span-4",children:"Search Your Complaint "}),e.jsx(oe,{className:"col-span-4"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"complaintRefNo",children:"Complaint No."}),e.jsx(f,{name:"complaintRefNo",className:"",placeholder:"Enter complaint number"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"fDate",children:"From Date"}),e.jsx(f,{name:"fDate",type:"date",className:""})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"toDate",children:"Upto Date"}),e.jsx(f,{name:"toDate",type:"date",className:""})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"ulbId",children:"ULB"}),e.jsx(p,{className:"bg-background cursor-pointer",name:"ulbId",data:((P=(S=(C=ue.data)==null?void 0:C.data)==null?void 0:S.docs)==null?void 0:P.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.ulbName})))??[]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"moduleId",children:"Module"}),e.jsx(p,{className:"bg-background cursor-pointer",name:"moduleId",data:((F=(k=($=pe.data)==null?void 0:$.data)==null?void 0:k.docs)==null?void 0:F.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.moduleName})))??[]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"complaintTypeId",children:"Complaint Type"}),e.jsx(p,{className:"bg-background cursor-pointer",name:"complaintTypeId",data:((L=(R=(D=b==null?void 0:b.data)==null?void 0:D.data)==null?void 0:R.docs)==null?void 0:L.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.complaintTypeName})))??[]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"priorityId",children:"Priority"}),e.jsx(p,{className:"bg-background cursor-pointer",name:"priorityId",data:((U=(M=(_=g==null?void 0:g.data)==null?void 0:_.data)==null?void 0:M.docs)==null?void 0:U.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.priorityName})))??[]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"targetTypeId",children:"Target Type"}),e.jsx(p,{className:"bg-background cursor-pointer",name:"targetTypeId",data:((z=(H=(B=N==null?void 0:N.data)==null?void 0:B.data)==null?void 0:H.docs)==null?void 0:z.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.targetType})))??[]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"complaintSourceTypeId",children:"Complaint Source Type"}),e.jsx(p,{className:"bg-background cursor-pointer",name:"complaintSourceTypeId",data:((J=(V=(E=y==null?void 0:y.data)==null?void 0:E.data)==null?void 0:V.docs)==null?void 0:J.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.source})))??[]})]}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{className:"mt-6",children:e.jsx(ge,{isLoading:t.formState.isSubmitting,type:"submit",className:" w-auto  px-10 float-right",children:"Search"})})]})}),e.jsx("div",{className:"mt-2",children:e.jsxs(Ne,{children:[e.jsx(ye,{className:"px-7",children:e.jsxs(fe,{className:"flex justify-between",children:[e.jsxs("h1",{children:["Complaint List (",(Z=(X=s.data)==null?void 0:X.data)==null?void 0:Z.totalDocs,")"]}),e.jsxs("h1",{className:"flex gap-2 ",children:[e.jsx("div",{className:"w-8 cursor-pointer",children:e.jsx("img",{src:Fe,alt:"csv"})}),e.jsx("div",{className:"w-8 cursor-pointer",children:e.jsx("img",{src:De,alt:"xcl"})}),e.jsx("button",{className:"w-8 ",onClick:()=>he(s),children:e.jsx("img",{src:Re,alt:"pdf"})})]})]})}),e.jsx(we,{children:s.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx($e,{})}):e.jsxs("div",{children:[e.jsxs(Ae,{children:[e.jsx(Ce,{children:e.jsxs(re,{children:[e.jsx(d,{className:"",children:"#"}),e.jsx(d,{className:"",children:"Complaint No."}),e.jsx(d,{className:"",children:"Complaint Title"}),e.jsx(d,{className:"",children:"Date"}),e.jsx(d,{className:"",children:"Date"}),e.jsx(d,{className:"",children:"Ulb Name"}),e.jsx(d,{className:"",children:"Module"}),e.jsx(d,{className:"",children:"Citizen Name"}),e.jsx(d,{className:"",children:"Mobile No."}),e.jsx(d,{className:"",children:"Resolve Status"}),e.jsx(d,{className:"",children:"View"})]})}),e.jsx(Se,{children:(Y=(W=(G=s==null?void 0:s.data)==null?void 0:G.data)==null?void 0:W.docs)==null?void 0:Y.map((a,l)=>{var m,x;return e.jsxs(re,{children:[e.jsx(o,{children:j*h-h+l+1}),e.jsx(o,{children:a.complaintRefNo}),e.jsx(o,{children:a.complaintTitle}),e.jsx(o,{children:a.fDate||"N/A"}),e.jsx(o,{children:a.toDate||"N/A"}),e.jsx(o,{children:((m=a.ulb)==null?void 0:m.ulbName)||"N/A"}),e.jsx(o,{children:((x=a.module)==null?void 0:x.moduleName)||"N/A"}),e.jsx(o,{children:a.citizenName}),e.jsx(o,{children:a.mobileNo}),e.jsx(o,{children:a.resolveStatus==0?"Pending":"Resolved"}),e.jsx(o,{children:e.jsx(ve,{to:`/grievance/dashboard/management-complaint-details?complaintRefNo=${a==null?void 0:a.complaintRefNo}
                         &complaintId=${a==null?void 0:a._id}`,children:e.jsx(Te,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},a._id)})})]}),e.jsx(oe,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(Pe,{page:j,perPage:h,totalPage:(K=(q=s==null?void 0:s.data)==null?void 0:q.data)==null?void 0:K.totalDocs,hasNextPage:(Q=(O=s==null?void 0:s.data)==null?void 0:O.data)==null?void 0:Q.hasNextPage,hasPrevPage:(ae=(ee=s==null?void 0:s.data)==null?void 0:ee.data)==null?void 0:ae.hasPrevPage,setPage:ne,setPerPage:ce})})]})})]})})]})}function Ee(){return e.jsx(ke,{title:"",subTitle:"",children:e.jsx("div",{className:"",children:e.jsx(_e,{})})})}export{Ee as default};
