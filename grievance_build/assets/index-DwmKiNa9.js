import{c as E,a as f,u as j,r as i,b as M,d as R,o as D,j as e,D as B,B as v,F as _,R as q,_ as l,e as H,g as V}from"./index-fTDQSGTw.js";import{C as G}from"./CaptchaComponent-CdXZdvCV.js";import{g as w}from"./services-KQnp_8oA.js";import{R as O}from"./RHFPasswordField-Bh2MQ-jP.js";const T=E({email:f().email("Please enter a valid email address").required("Email is required"),password_123:f().min(8,"Password must be at least 8 characters").required("Password is required")}),$=()=>{const b=j({}),N=j({}),[y,o]=i.useState(!1),[m,x]=i.useState(!1),[I,k]=i.useState(!1),[n,h]=i.useState(""),[c,u]=i.useState({value:"",isValid:!1,error:""}),{login:C}=M(),d=R({defaultValues:{email:"",password_123:""},resolver:D(T)}),P=(a,t)=>{u(s=>({...s,value:a,isValid:t,error:s.error&&t?"":s.error}))},S=()=>!c.isValid||!c.value.trim()?(u(a=>({...a,error:"Please enter the correct captcha code"})),!1):!0,g=a=>{a.preventDefault(),l.error("Pasting is not allowed in this field.")},L=async a=>{var s,p;if(console.log("Form data:",a),!S())return;const t={email:a.email,password:a.password_123,captcha:c.value};try{const r=await b.mutateAsync({api:H.login,data:t});console.log("Login response:",r==null?void 0:r.data),(s=r==null?void 0:r.data)!=null&&s.success?(await C(r),l.success(r.data.message||"Login successful!")):l.error(((p=r==null?void 0:r.data)==null?void 0:p.message)||"Login failed")}catch(r){console.error("Login error:",r),l.error(w(r.message)||"An error occurred during login")}},F=async()=>{var a,t;if(!n.trim()){l.error("Please enter your email address");return}x(!0);try{const s=await N.mutateAsync({api:V.forgetPassword,data:{email:n}});(a=s==null?void 0:s.data)!=null&&a.success?(o(!1),h(""),l.success(s.data.message||"Password reset link sent successfully!")):l.error(((t=s==null?void 0:s.data)==null?void 0:t.message)||"Failed to send reset link")}catch(s){console.error("Forgot password error:",s),l.error(w(s.message)||"An error occurred")}finally{x(!1)}},A=a=>{h(a.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx(B,{open:y,setOpen:o,title:"Reset Your Password",setEdit:k,children:e.jsx("div",{className:"p-4",children:e.jsx("form",{onSubmit:a=>a.preventDefault(),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"reset-email",value:n,onChange:A,type:"email",placeholder:"Enter your email address",className:"w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsx(v,{type:"button",onClick:F,disabled:m||!n.trim(),className:"w-full rounded-xl py-3 px-4",variant:"outline",children:m?"Sending...":"Send Reset Link"})]})})})}),e.jsx("header",{className:"h-[7vh] w-full border-b border-gray-200 bg-white darks:bg-gray-800 darks:border-gray-800",children:e.jsx("div",{className:"container mx-auto xl:max-w-6xl",children:e.jsx("nav",{className:"",id:"desktop-menu",children:e.jsx("a",{className:"",href:"",children:e.jsx("div",{className:"mt-6",children:e.jsx("span",{className:"font-bold text-xl uppercase",children:"Login - Grievance Management System"})})})})})}),e.jsx("main",{className:"h-[80vh] bg-gray-100 flex justify-center items-center",children:e.jsx("div",{className:"bg-gray-100 darks:bg-gray-900 darks:bg-opacity-40",children:e.jsx("div",{className:"container mx-auto px-4 xl:max-w-6xl",children:e.jsxs("div",{className:"flex flex-wrap -mx-4 flex-row",children:[e.jsx("div",{className:"flex-shrink max-w-full px-4 w-full lg:w-1/2",children:e.jsx("div",{className:"max-w-full w-full px-2 sm:px-12 lg:pr-20 mb-12 lg:mb-0",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"p-6 sm:py-8 sm:px-12 rounded-lg bg-white darks:bg-gray-800 shadow-xl",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("h1",{className:"text-2xl leading-normal font-bold text-gray-800 darks:text-gray-300 Ttext-center mb-0",children:"Welcome Back"}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"border-b w-10 border border-black mb-7"})})]}),e.jsx(_,{methods:d,onSubmit:d.handleSubmit(L),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"password",name:"fake-password",autoComplete:"new-password",style:{display:"none"},"aria-hidden":"true"}),e.jsx("div",{className:"space-y-2",children:e.jsx(q,{className:"py-5 px-5 w-full bg-background",name:"email",inputValidation:["removeSpace"],placeholder:"Enter your email",onPaste:g,autoComplete:"off"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(O,{className:"py-5 px-5 w-full bg-background",name:"password_123",placeholder:"Enter your password",onPaste:g,autoComplete:"off"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 darks:text-gray-300",children:"Security Verification"}),e.jsx(G,{onCaptchaChange:P,error:c.error,length:6,width:250,height:30,placeholder:"Enter captcha code",className:"w-full",inputClassName:"px-5",refreshButtonClassName:"hover:bg-blue-50"})]}),e.jsx("div",{children:e.jsxs(v,{type:"submit",isLoading:d.formState.isSubmitting,className:"w-full py-5 px-4 mt-2 shadow-none",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"inline-block w-4 h-4 mr-1 ltr:mr-2 rtl:ml-2 bi bi-box-arrow-in-right",viewBox:"0 0 16 16",children:[e.jsx("path",{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}),e.jsx("path",{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]}),"Login"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("hr",{className:"flex-1"}),e.jsx("span",{children:"or"}),e.jsx("hr",{className:"flex-1"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"text-sm text-primary hover:underline",type:"button",onClick:()=>o(!0),children:"Forgot password?"})})]})})]})})})}),e.jsx("div",{className:"flex-shrink max-w-full px-4 w-full lg:w-1/2",children:e.jsxs("div",{className:"text-center mt-6 lg:mt-0",children:[e.jsx("img",{src:"/images/mob.png",alt:"Grievance Management System",className:"h-68 rounded-lg mx-auto"}),e.jsxs("div",{className:"px-4 mt-4",children:[e.jsx("h1",{className:"font-semibold text-2xl",children:"Manage Grievance with Ease of Access"}),e.jsx("p",{className:"text-base mb-4 text-gray-500",children:"Easily manage grievance applications with simplified workflows."})]})]})})]})})})}),e.jsx("footer",{className:"h-[10vh] w-full bg-white py-6 border-t border-gray-200 darks:bg-gray-800 darks:border-gray-800",children:e.jsx("div",{className:"container mx-auto px-4 xl:max-w-6xl w-full",children:e.jsx("div",{className:"mx-auto px-4",children:e.jsxs("div",{className:"flex flex-wrap flex-row -mx-4",children:[e.jsx("div",{className:"flex-shrink max-w-full px-4 w-full md:w-1/2 text-center md:ltr:text-left md:rtl:text-right",children:e.jsxs("ul",{className:"ltr:pl-0 rtl:pr-0 space-x-4",children:[e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Support |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Help Center |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Privacy |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Terms of Service"})})]})}),e.jsx("div",{className:"flex-shrink max-w-full px-4 w-full md:w-1/2 text-center md:ltr:text-right md:rtl:text-left",children:e.jsxs("p",{className:"mb-0 mt-3 md:mt-0",children:[e.jsx("a",{href:"#",className:"hover:text-indigo-500",children:"UD&HD"})," ","| All right reserved"]})})]})})})})]})},z=$;function K(){return e.jsx("div",{className:"",children:e.jsx(z,{})})}export{K as default};
