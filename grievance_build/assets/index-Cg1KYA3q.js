import{f as P,r as d,u as m,b as O,o as S,j as e,B as u,F as E,R as L,L as x,c as F,d as l,h as T,g as p,_ as t}from"./index-DIPmLGEc.js";import{G as k,L as I}from"./GoogleLogin-BW-VPxfR.js";import{D as R}from"./index-BJsrHZlS.js";import{g as h}from"./services-KQnp_8oA.js";import{R as f}from"./RHFPasswordField-DIDbd7if.js";import"./Spinner-Bj7Waocv.js";const q=F({email:l().required("Email is required").email("Invalid email"),password:l().min(3).required("Password is required"),roleId:l(),confirmPassword:l().oneOf([T("password")],"Passwords must match").required("Confirm password is required").min(3,"Password must be at least 3 characters")});function A(){const g=P(),[j,n]=d.useState(!1),[o,w]=d.useState(""),b=m({}),v=m({}),i=O({defaultValues:{email:"",roleId:"66d2a49adcdbb5c654b983cc",password:"",confirmPassword:""},resolver:S(q)}),y=async s=>{var r,c;try{const a=await b.mutateAsync({api:p.citizenRegistration,data:{email:s.email,roleId:s.roleId,password:s.password}});(r=a==null?void 0:a.data)!=null&&r.success?(n(!0),t.success("OTP sent to your email.")):t.error((c=a==null?void 0:a.data)==null?void 0:c.message)}catch(a){t.error(h(a)),console.log("Error sending OTP",a)}},N=async()=>{var s;try{const r=await v.mutateAsync({api:p.verifyOtp,data:{otp:o,email:i.getValues("email")}});(s=r==null?void 0:r.data)!=null&&s.success?(g("/grievance/citizen-dashboard/home"),t.success("Sing Up successful!")):t.error("Invalid OTP.")}catch(r){t.error(h(r.message))}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{open:j,setOpen:n,title:"OTP Verification",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Enter OTP"}),e.jsxs("form",{onSubmit:s=>s.preventDefault(),children:[e.jsx("input",{value:o,onChange:s=>w(s.target.value),type:"text",placeholder:"Enter OTP",className:"input-field w-full border border-gray-300 rounded-md p-2"}),e.jsx("div",{children:e.jsx(u,{type:"button",onClick:N,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Verify OTP"})})]})]})}),e.jsx(E,{methods:i,onSubmit:i.handleSubmit(y),children:e.jsxs("div",{className:"space-y-4 max-w-sm mx-auto",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(L,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"email",inputValidation:["removeSpace"],placeholder:"Enter your Email"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(f,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"password",placeholder:"Enter your password"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(f,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"confirmPassword",placeholder:"Enter your confirm password"})}),e.jsx("div",{children:e.jsx(u,{type:"submit",isLoading:i.formState.isSubmitting,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Sign Up"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("hr",{className:"flex-1"}),e.jsx("span",{children:"or"}),e.jsx("hr",{className:"flex-1"})]}),e.jsx("div",{children:e.jsx(k,{})}),e.jsx("div",{children:e.jsx(x,{to:"https://epramaan.meripehchaan.gov.in/",children:e.jsx("div",{className:"flex cursor-pointer text-lg font-medium text-white bg-white shadow-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:e.jsx("span",{className:"border px-2 w-full justify-center bg-[rgb(38,204,204)] flex items-center text-white py-1.5",children:"Sign up with ePramaan"})})})}),e.jsx("div",{className:"text-center  flex justify-center",children:e.jsx(x,{to:"/grievance/auth/citizen-login",children:e.jsxs("span",{className:"text-base flex",children:["Already have a Account!   ",e.jsx("p",{className:"text-blue-800 ml-1  text-base",children:" Login"})]})})})]})})]})}function G(){return e.jsx("div",{className:"bg-gradient-to-r from-blue-200 via-blue-300 to-blue-400 min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/90 xl:mx-56 border shadow-lg mx-auto rounded-lg w-full max-w-6xl p-6 md:p-8 lg:p-12 backdrop-blur-lg",children:[e.jsx("h2",{className:"text-3xl font-bold text-center pb-6 text-gray-800",children:"Sign up to the Grievance Redressal System"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full",children:[e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(A,{})})}),e.jsx("div",{className:"flex-1 flex justify-center items-center bg-gray-100 rounded-lg p-6 shadow-inner sm:block hidden",children:e.jsx("div",{className:"w-full max-w-md text-center",children:e.jsx(I,{})})})]})]})})}export{G as default};
