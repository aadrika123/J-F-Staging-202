import{N as br,j as e,I as G,x as P,z as $,b as V,o as Q,F as X,C as L,a1 as yr,a9 as W,a0 as J,A as Z,B as D,c as ee,d as se,g as y,_ as x,s as B,S as mr,G as I,r as M,aa as Ar,ab as kr,a2 as u,a3 as z,a4 as q,a5 as Y,a6 as A,L as vr,t as Ur,w as Lr,K as Or,k as Br,P as gr}from"./index-Bu3j6dEl.js";import{P as Gr}from"./index-YnEkN_ar.js";import{p as wr,M as H,F as Pr,a as Wr,b as $r,c as Kr,d as Fr,e as zr,f as qr,g as Yr,h as Hr,i as Vr,j as Qr,k as Xr,l as Jr,m as Zr,n as Dr}from"./module.config-DBJ27752.js";import{g as O}from"./services-KQnp_8oA.js";import{I as Tr}from"./info-LICU40u0.js";import{T as Ir,a as _r,b as K,c as k,d as Er,e as U}from"./table-C3t3jtj8.js";import{C as ea}from"./chevron-down-Rowhc7Ht.js";import{M as sa}from"./move-right-CHcS3pZe.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=br("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=br("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function aa({commentData:a}){var r,f,n;return e.jsx("div",{children:e.jsxs("div",{className:"max-w-lg mx-auto border px-6 py-2 rounded-lg mb-2",children:[e.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[e.jsx(G,{src:((r=a==null?void 0:a.userId)==null?void 0:r.fullImgUrl)||wr,alt:"Student",className:"h-6 w-6 rounded-full"})," ",e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-800 font-semibold",children:((f=a==null?void 0:a.userId)==null?void 0:f.fullName)||""}),e.jsx("div",{className:"text-xs italic text-gray-500",children:`(${(n=a==null?void 0:a.roleId)==null?void 0:n.roleName})`||""}),e.jsx("div",{className:"text-xs text-gray-500",children:P(a==null?void 0:a.timeStamp).format("DD-MM-YYYY hh:mm a")})]})]}),e.jsx("p",{className:"text-sm leading-relaxed mb-6",children:a==null?void 0:a.comment})]})})}const la=ee().shape({comment:se().required("Write comment")});function ca({setisDialogOpen:a,complaintData:r,actionPermissions:f}){const n=$({}),i=V({resolver:Q(la)}),N=async o=>{var g,t;let w={complaintId:(t=(g=r==null?void 0:r.data)==null?void 0:g.data)==null?void 0:t._id,comment:o==null?void 0:o.comment};try{const l=await n.mutateAsync({api:y.resolveComplaint,data:w});l.data.success?(x.success(l.data.message),f.refetch(),r==null||r.refetch(),a(!1)):x.error(l.data.message)}catch(l){x.error(O(l))}};return e.jsx(X,{methods:i,onSubmit:i.handleSubmit(N),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsxs(L,{className:"text-2xl flex items-center justify-between font-bold mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"w-7 h-7 bg-green-600 rounded-full bg-red-5500 text-white inline-flex justify-center items-center mr-2",children:e.jsx(yr,{className:"inline"})})," Resolve Grievance"]}),e.jsx("div",{children:e.jsx(W,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>a(!1)})})]}),e.jsxs(J,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(Tr,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"This comment will be visible to citizen."})]}),e.jsx(Z,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(D,{isLoading:i.formState.isSubmitting,type:"submit",className:" w-full",children:"Resolve"})})]})})}const na=ee().shape({comment:se().required("Select comment")});function ta({setisDialogOpen:a,complaintData:r,actionPermissions:f}){const n=$({}),i=V({resolver:Q(na)}),N=async o=>{var g,t;let w={complaintId:(t=(g=r==null?void 0:r.data)==null?void 0:g.data)==null?void 0:t._id,comment:o==null?void 0:o.comment};try{const l=await n.mutateAsync({api:y.rejectComplaint,data:w});l.data.success?(x.success(l.data.message),f.refetch(),r==null||r.refetch(),a(!1)):x.error(l.data.message)}catch(l){x.error(O(l))}};return e.jsx(X,{methods:i,onSubmit:i.handleSubmit(N),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsxs(L,{className:"text-2xl flex items-center justify-between font-bold mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"w-7 h-7 bg-red-600 rounded-full bg-red-5500 text-white inline-flex justify-center items-center mr-2",children:e.jsx(W,{})})," Reject Grievance"]}),e.jsx("div",{children:e.jsx(W,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>a(!1)})})]}),e.jsxs(J,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(Tr,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"This comment will be visible to citizen."})]}),e.jsx(Z,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(D,{isLoading:i.formState.isSubmitting,type:"submit",className:" w-full",children:"Reject"})})]})})}function ia({setisDialogOpen:a,complaintData:r,actionPermissions:f}){var o,w,g,t,l;const n=$({}),i=B({api:`${y.getAllWFUserMappingToTransfer}?workflowId=${(w=(o=r==null?void 0:r.data)==null?void 0:o.data)==null?void 0:w.wf_currentWorkflowId}`,key:"getWorkflowMembers",value:[],options:{enabled:!0}}),N=async h=>{var T,s,c;let R={complaintId:(s=(T=r==null?void 0:r.data)==null?void 0:T.data)==null?void 0:s._id,workflowId:null,userId:h};try{const _=await n.mutateAsync({api:(c=y)==null?void 0:c.transferComplaintToUlb,data:R});_.data.success?(x.success(_.data.message),r==null||r.refetch(),f.refetch(),a(!1)):x.error(_.data.message)}catch(_){x.error(O(_))}};return e.jsx("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:e.jsxs("div",{children:[e.jsxs(L,{className:"text-2xl flex items-center justify-between font-bold mb-6",children:[e.jsx("div",{children:"Transfer to any Members"}),e.jsx("div",{children:e.jsx(W,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>a(!1)})})]}),i.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(mr,{})}):e.jsx(e.Fragment,{children:e.jsxs(Ir,{children:[e.jsx(_r,{children:e.jsxs(K,{children:[e.jsx(k,{className:"",children:"#"}),e.jsx(k,{className:"",children:"Member"}),e.jsx(k,{className:"",children:"Workflow Role"}),e.jsx(k,{children:"Action"})]})}),e.jsx(Er,{children:(l=(t=(g=i==null?void 0:i.data)==null?void 0:g.data)==null?void 0:t.docs)==null?void 0:l.map((h,R)=>e.jsxs(K,{children:[e.jsx(U,{children:R+1}),e.jsx(U,{children:h==null?void 0:h.UserName}),e.jsx(U,{children:h==null?void 0:h.workflowRoleName}),e.jsx(U,{className:"space-x-2",children:e.jsx(I,{name:"bts",type:"button",className:"mr-4",onClick:()=>N(h==null?void 0:h.userId),children:"Transfer"})})]},h._id))})]})})]})})}function xa({setisDialogOpen:a,complaintData:r}){var N,o,w,g,t;const f=$({}),n=B({api:`${(N=y)==null?void 0:N.getAllUlbDirect}?page=1&limit=10000`,key:"getAllUlbDirect",options:{enabled:!0}}),i=async l=>{var h,R,T;try{let s={complaintId:(R=(h=r==null?void 0:r.data)==null?void 0:h.data)==null?void 0:R._id,ulbId:l};const c=await f.mutateAsync({api:(T=y)==null?void 0:T.transferComplaintToUlbSpecific,data:s});c.data.success?(x.success(c.data.message),r.refetch(),a(!1)):x.error(c.data.message)}catch(s){x.error(O(s))}};return e.jsx("div",{className:"gap-x-2 gap-y-4 px-10 py-10 h-[600px] overflow-y-scroll",children:e.jsxs("div",{children:[e.jsxs(L,{className:"text-2xl flex items-center justify-between font-bold mb-6",children:[e.jsxs("div",{children:["Transfer to ULB(",(w=(o=n==null?void 0:n.data)==null?void 0:o.data)==null?void 0:w.length,")"]}),e.jsx("div",{children:e.jsx(W,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>a(!1)})})]}),n.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(mr,{})}):e.jsx(e.Fragment,{children:e.jsxs(Ir,{children:[e.jsx(_r,{children:e.jsxs(K,{children:[e.jsx(k,{className:"",children:"#"}),e.jsx(k,{className:"",children:"ULB"}),e.jsx(k,{children:"Action"})]})}),e.jsx(Er,{children:(t=(g=n==null?void 0:n.data)==null?void 0:g.data)==null?void 0:t.map((l,h)=>e.jsxs(K,{children:[e.jsx(U,{children:h+1}),e.jsx(U,{children:l==null?void 0:l.ulbName}),e.jsx(U,{className:"space-x-2",children:e.jsx(I,{name:"bts",type:"button",className:"mr-4",onClick:()=>i(l==null?void 0:l._id),children:"Transfer"})})]},l._id))})]})})]})})}const oa="https://jharkhandegovernance.com/property/search/fresh/direct/direct",ha="https://jharkhandegovernance.com/water/waterApplicationSearch",ua="",ja="",fa="",Na="",va="",ga="",ba="",ya="",ma="",wa="",Ta="",Ia="",_a="",Ea=ee().shape({comment:se().required("Comment is required")});function Sa({setsearchLink:a,setsearchLabel:r}){var de,re,ae,le,ce,ne,te,ie,xe,oe,he,ue,je,fe,Ne,ve,ge,be,ye,me,we,Te,Ie,_e,Ee,Se,pe,Ce,Me,Re,Ae,ke,Ue,Le,Oe,Be,Ge,Pe,We,$e,Ke,Fe,ze,qe,Ye,He,Ve,Qe,Xe,Je,Ze,De,es,ss,ds,rs,as,ls,cs,ns,ts,is,xs,os,hs,us,js,fs,Ns,vs,gs,bs,ys,ms,ws,Ts,Is,_s,Es,Ss,ps,Cs,Ms,Rs,As,ks,Us,Ls,Os,Bs,Gs,Ps,Ws,$s,Ks,Fs,zs,qs,Ys,Hs,Vs,Qs,Xs,Js,Zs,Ds,ed,sd,dd,rd,ad,ld,cd,nd,td,id,xd,od,hd,ud,jd,fd,Nd,vd,gd,bd,yd,md,wd,Td,Id,_d,Ed,Sd,pd,Cd,Md,Rd,Ad,kd,Ud,Ld,Od,Bd,Gd,Pd,Wd,$d,Kd,Fd,zd,qd,Yd,Hd,Vd;const[f,n]=M.useState(!1),[i,N]=M.useState(0),[o,w]=M.useState(!1),[g,t]=M.useState(!1),l=$({}),T=new URLSearchParams(Br().search).get("complaintId"),s=B({api:`${y.getComplaintDetailsById}/${T}`,key:"ComplaintDetails",options:{enabled:!0}}),c=B({api:`${y.checkWfActions}/${T}`,key:"actionPermission",options:{enabled:!0}}),_=B({api:`${y.complaintApplicationLog}/${T}`,key:"complaintApplicationLog",options:{enabled:!0}}),E=B({api:`${y.getAllCommentsByComplaintId}/${T}`,key:"getAllComments",options:{enabled:!0}}),F=V({defaultValues:{comment:""},resolver:Q(Ea)}),{handleSubmit:Sr}=F,pr=async(d,v)=>{var S,p;const b=v.nativeEvent.submitter.name;let j="";b==="comment"&&(j=y.openComment);let m={comment:d.comment,complaintId:(p=(S=s==null?void 0:s.data)==null?void 0:S.data)==null?void 0:p._id};try{const C=await l.mutateAsync({api:j,data:m});C.data.success?(x.success(C.data.message),s==null||s.refetch(),E==null||E.refetch(),c.refetch(),F.reset()):x.error(C.data.message)}catch(C){x.error(O(C))}},Cr=async()=>{gr("Are you sure?","Do you want to move this Grievance to your panel",async()=>{var v,b;let d={complaintId:(b=(v=s==null?void 0:s.data)==null?void 0:v.data)==null?void 0:b._id,comment:""};try{const j=await l.mutateAsync({api:y.moveComplaintToMe,data:d});j.data.success?(n(!0),s==null||s.refetch(),E==null||E.refetch(),c.refetch()):x.error(j.data.message)}catch(j){x.error(O(j))}})},Mr=async d=>{gr("Are you sure?",`Do you want to ${d.target.checked?"Escalate":"De-Escalate"} this complaint`,async()=>{var b,j;let v={complaintId:(j=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:j._id};try{const m=await l.mutateAsync({api:y.escalateAction,data:v});m.data.success?(n(!0),s.refetch()):x.error(m.data.message)}catch(m){x.error(O(m))}})},Rr=()=>{var d,v,b,j,m,S,p,C,Qd,Xd,Jd,Zd,Dd,er,sr,dr,rr,ar,lr,cr,nr,tr,ir,xr,or,hr,ur,jr,fr,Nr;((v=(d=s==null?void 0:s.data)==null?void 0:d.data)==null?void 0:v.moduleId)===Wr&&(a(oa),r("Search Property Details")),((j=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:j.moduleId)===$r&&(a(ha),r("Search Water Details")),((S=(m=s==null?void 0:s.data)==null?void 0:m.data)==null?void 0:S.moduleId)===Kr&&(a(ua),r("Search Trade Details")),((C=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:C.moduleId)===Fr&&(a(ja),r("Search Pet Registration Details")),((Xd=(Qd=s==null?void 0:s.data)==null?void 0:Qd.data)==null?void 0:Xd.moduleId)===H&&(a(fa),r("Search Other Details")),((Zd=(Jd=s==null?void 0:s.data)==null?void 0:Jd.data)==null?void 0:Zd.moduleId)===zr&&(a(Na),r("Search Grievance Details")),((er=(Dd=s==null?void 0:s.data)==null?void 0:Dd.data)==null?void 0:er.moduleId)===qr&&(a(va),r("Search SWM Details")),((dr=(sr=s==null?void 0:s.data)==null?void 0:sr.data)==null?void 0:dr.moduleId)===Yr&&(a(ga),r("Search Water Tanker Details")),((ar=(rr=s==null?void 0:s.data)==null?void 0:rr.data)==null?void 0:ar.moduleId)===Hr&&(a(ba),r("Search Advertisement Details")),((cr=(lr=s==null?void 0:s.data)==null?void 0:lr.data)==null?void 0:cr.moduleId)===Vr&&(a(ya),r("Search Septic Tank Details")),((tr=(nr=s==null?void 0:s.data)==null?void 0:nr.data)==null?void 0:tr.moduleId)===Qr&&(a(ma),r("Search Lodge/Banquet Details")),((xr=(ir=s==null?void 0:s.data)==null?void 0:ir.data)==null?void 0:xr.moduleId)===Xr&&(a(wa),r("Search Marriage Details")),((hr=(or=s==null?void 0:s.data)==null?void 0:or.data)==null?void 0:hr.moduleId)===Jr&&(a(Ta),r("Search Public Transport Details")),((jr=(ur=s==null?void 0:s.data)==null?void 0:ur.data)==null?void 0:jr.moduleId)===Zr&&(a(Ia),r("Search Parking Details")),((Nr=(fr=s==null?void 0:s.data)==null?void 0:fr.data)==null?void 0:Nr.moduleId)===Dr&&(a(_a),r("Search Rig Details"))};return M.useEffect(()=>{Rr()},[s==null?void 0:s.data]),M.useEffect(()=>{setTimeout(()=>{n(!1)},1600)},[f]),e.jsxs("main",{className:"grid flex-1 items-start",children:[f&&e.jsx("div",{style:{zIndex:1001},className:"w-full h-full fixed top-0 left-0 bg-white z-50 flex justify-center items-center",children:e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx(Ar,{className:"w-24",animationData:kr,loop:!0}),e.jsx("div",{className:"font-semibold",children:"Grievance Moved successfully."})]})}),e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-8 lg:col-span-2",children:[e.jsx("div",{className:"",children:e.jsx("div",{className:" bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto  shadow-lg rounded-lg p-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-blue-800 mb-6 uppercase",children:["Grievance No : ",(re=(de=s==null?void 0:s.data)==null?void 0:de.data)==null?void 0:re.complaintRefNo]}),((ce=(le=(ae=s==null?void 0:s.data)==null?void 0:ae.data)==null?void 0:le.workflow)==null?void 0:ce.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),(ie=(te=(ne=s==null?void 0:s.data)==null?void 0:ne.data)==null?void 0:te.workflow)==null?void 0:ie.workFlowName]}),!((he=(oe=(xe=s==null?void 0:s.data)==null?void 0:xe.data)==null?void 0:oe.workflow)!=null&&he.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),((je=(ue=s==null?void 0:s.data)==null?void 0:ue.data)==null?void 0:je.currentUser)&&`${(ve=(Ne=(fe=s==null?void 0:s.data)==null?void 0:fe.data)==null?void 0:Ne.currentUser)==null?void 0:ve.fullName} `,((be=(ge=s==null?void 0:s.data)==null?void 0:ge.data)==null?void 0:be.currentWorkflow)&&`(${(we=(me=(ye=s==null?void 0:s.data)==null?void 0:ye.data)==null?void 0:me.currentWorkflow)==null?void 0:we.workFlowName})`,!((Ie=(Te=s==null?void 0:s.data)==null?void 0:Te.data)!=null&&Ie.currentWorkflow)&&!((Ee=(_e=s==null?void 0:s.data)==null?void 0:_e.data)!=null&&Ee.currentUser)&&((pe=(Se=s==null?void 0:s.data)==null?void 0:Se.data)==null?void 0:pe.moduleId)===H&&"State GRO",!((Me=(Ce=s==null?void 0:s.data)==null?void 0:Ce.data)!=null&&Me.currentWorkflow)&&!((Ae=(Re=s==null?void 0:s.data)==null?void 0:Re.data)!=null&&Ae.currentUser)&&((Ue=(ke=s==null?void 0:s.data)==null?void 0:ke.data)==null?void 0:Ue.moduleId)!==H&&"ULB GRO"]}),e.jsx("h1",{className:"text-md font-bold  mb-6 flex items-center",children:e.jsxs("span",{children:["Status -",((Oe=(Le=s==null?void 0:s.data)==null?void 0:Le.data)==null?void 0:Oe.wf_status)===0&&e.jsx(u,{className:"bg-yellow-500 ml-2",children:"Pending"}),((Ge=(Be=s==null?void 0:s.data)==null?void 0:Be.data)==null?void 0:Ge.wf_status)===1&&e.jsx(u,{className:"bg-green-500 ml-2",children:"Resolved"}),((We=(Pe=s==null?void 0:s.data)==null?void 0:Pe.data)==null?void 0:We.wf_status)===2&&e.jsx(u,{className:"bg-red-500 ml-2",children:"Rejected"}),((Ke=($e=s==null?void 0:s.data)==null?void 0:$e.data)==null?void 0:Ke.wf_status)===3&&e.jsx(u,{className:"bg-yellow-500 ml-2",children:"Pending(re-opened)"}),((ze=(Fe=s==null?void 0:s.data)==null?void 0:Fe.data)==null?void 0:ze.wf_status)===4&&e.jsx(u,{variant:"destructive",children:"Closed"})]})})]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Registered on ",P((Ye=(qe=s==null?void 0:s.data)==null?void 0:qe.data)==null?void 0:Ye.createdAt).format("DD-MM-YYYY")]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsxs("div",{className:"mt-4  grid grid-cols-1 md:grid-cols-3   space-y-4",children:[e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Full Name : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ve=(He=s==null?void 0:s.data)==null?void 0:He.data)==null?void 0:Ve.citizenName})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Mobile No : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Xe=(Qe=s==null?void 0:s.data)==null?void 0:Qe.data)==null?void 0:Xe.mobileNo})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Email : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ze=(Je=s==null?void 0:s.data)==null?void 0:Je.data)==null?void 0:Ze.email})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"ULB : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(ss=(es=(De=s==null?void 0:s.data)==null?void 0:De.data)==null?void 0:es.ulb)==null?void 0:ss.ulbName})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Module : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(as=(rs=(ds=s==null?void 0:s.data)==null?void 0:ds.data)==null?void 0:rs.module)==null?void 0:as.moduleName})," "]})]}),((cs=(ls=s==null?void 0:s.data)==null?void 0:ls.data)==null?void 0:cs.fixedNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(ts=(ns=s==null?void 0:s.data)==null?void 0:ns.data)==null?void 0:ts.fixedNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(xs=(is=s==null?void 0:s.data)==null?void 0:is.data)==null?void 0:xs.fixedNo})," "]})]}),((hs=(os=s==null?void 0:s.data)==null?void 0:os.data)==null?void 0:hs.tempNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(js=(us=s==null?void 0:s.data)==null?void 0:us.data)==null?void 0:js.tempNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ns=(fs=s==null?void 0:s.data)==null?void 0:fs.data)==null?void 0:Ns.tempNo})," "]})]}),(((gs=(vs=s==null?void 0:s.data)==null?void 0:vs.data)==null?void 0:gs.wf_status)===0||((ys=(bs=s==null?void 0:s.data)==null?void 0:bs.data)==null?void 0:ys.wf_status)===3)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Pending From : "}),e.jsxs("div",{children:[e.jsxs("p",{className:"opacity-90",children:[P().diff(P((ws=(ms=s==null?void 0:s.data)==null?void 0:ms.data)==null?void 0:ws.createdAt),"days")," days"]})," "]})]}),((Is=(Ts=s==null?void 0:s.data)==null?void 0:Ts.data)==null?void 0:Is.priorityType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Priority Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ss=(Es=(_s=s==null?void 0:s.data)==null?void 0:_s.data)==null?void 0:Es.priorityType)==null?void 0:Ss.priorityName})," "]})]}),((Cs=(ps=s==null?void 0:s.data)==null?void 0:ps.data)==null?void 0:Cs.targetType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Target Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(As=(Rs=(Ms=s==null?void 0:s.data)==null?void 0:Ms.data)==null?void 0:Rs.targetType)==null?void 0:As.targetType})," "]})]}),((Us=(ks=s==null?void 0:s.data)==null?void 0:ks.data)==null?void 0:Us.complaintType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Bs=(Os=(Ls=s==null?void 0:s.data)==null?void 0:Ls.data)==null?void 0:Os.complaintType)==null?void 0:Bs.complaintTypeName})," "]})]}),e.jsx("div",{className:"col-span-3 border-b my-20 border-[#99B37C]"}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Title : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ps=(Gs=s==null?void 0:s.data)==null?void 0:Gs.data)==null?void 0:Ps.complaintTitle})," "]})]}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Description : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:($s=(Ws=s==null?void 0:s.data)==null?void 0:Ws.data)==null?void 0:$s.complaintDescription})," "]})]}),((Fs=(Ks=s==null?void 0:s.data)==null?void 0:Ks.data)==null?void 0:Fs.customAddress)&&e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Address : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(qs=(zs=s==null?void 0:s.data)==null?void 0:zs.data)==null?void 0:qs.customAddress})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Document"}),e.jsxs(z,{children:[e.jsx(q,{}),e.jsx(Y,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:(Hs=(Ys=s==null?void 0:s.data)==null?void 0:Ys.data)!=null&&Hs.imgUrl&&((Qs=(Vs=s==null?void 0:s.data)==null?void 0:Vs.data)!=null&&Qs.imgUrl.includes(".pdf"))?e.jsx("iframe",{src:(Js=(Xs=s==null?void 0:s.data)==null?void 0:Xs.data)==null?void 0:Js.imgUrl,width:"100%",height:"400px",title:"Document Preview"}):e.jsx(G,{src:(Ds=(Zs=s==null?void 0:s.data)==null?void 0:Zs.data)==null?void 0:Ds.imgUrl,className:"w-80"})})}),e.jsx(A,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer",children:(sd=(ed=s==null?void 0:s.data)==null?void 0:ed.data)!=null&&sd.imgUrl&&((rd=(dd=s==null?void 0:s.data)==null?void 0:dd.data)!=null&&rd.imgUrl.includes(".pdf"))?e.jsxs("div",{className:"w-20 h-20  flex justify-center items-center",children:["  ",e.jsx(Pr,{className:"w-20 h-20 "})]}):e.jsx(G,{src:(ld=(ad=s==null?void 0:s.data)==null?void 0:ad.data)==null?void 0:ld.imgUrl,className:"w-40"})})})]})]})]}),e.jsxs("section",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800",children:["Grievance Flow History ",e.jsxs("span",{onClick:()=>w(!o),className:"cursor-pointer",children:[!o&&e.jsxs("span",{className:"text-gray-400 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg ",children:["Show ",e.jsx(da,{size:15,className:"inline"})]}),o&&e.jsxs("span",{className:"text-gray-400 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg ",children:["Hide ",e.jsx(ea,{size:15,className:"inline"})]})]})," "]}),((nd=(cd=c==null?void 0:c.data)==null?void 0:cd.permission)==null?void 0:nd.canMoveComplaint)&&e.jsx(I,{onClick:Cr,children:"Move Grievance to my Panel"}),((id=(td=c==null?void 0:c.data)==null?void 0:td.permission)==null?void 0:id.canUpdate)&&e.jsx(vr,{to:`/grievance/dashboard/management-complaint-form?complaintId=${(od=(xd=s==null?void 0:s.data)==null?void 0:xd.data)==null?void 0:od._id}`,children:e.jsx(I,{children:"Update Details"})})]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),o&&e.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:(ud=(hd=_==null?void 0:_.data)==null?void 0:hd.data)==null?void 0:ud.map((d,v)=>{var b,j,m,S,p;return e.jsxs("div",{className:"flex space-x-4 items-center",children:[e.jsx("div",{children:v+1}),e.jsxs("div",{children:[(d==null?void 0:d.actionStatus)===0&&e.jsx(u,{className:"bg-gray-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===1&&e.jsx(u,{className:"bg-green-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===2&&e.jsx(u,{className:"bg-red-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===3&&e.jsx(u,{children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===4&&e.jsx(u,{className:"bg-amber-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===5&&e.jsx(u,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===6&&e.jsx(u,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===7&&e.jsx(u,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===8&&e.jsx(u,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===9&&e.jsx(u,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===10&&e.jsx(u,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===11&&e.jsx(u,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===12&&e.jsx(u,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),e.jsx("div",{className:"text-xs text-gray-600 font-semibold mt-1",children:P((j=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:j.createdAt).format("DD-MM-YYYY hh:mm a")})]}),e.jsx(sa,{}),e.jsxs("div",{children:[e.jsxs(z,{children:[e.jsx(q,{}),e.jsx(Y,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:e.jsx(G,{src:(m=d==null?void 0:d.actionBy)==null?void 0:m.fullImgUrl,className:"w-60"})})}),e.jsx(A,{asChild:!0,children:e.jsx("div",{className:"w-10 h-10 rounded-full border overflow-hidden cursor-pointer",children:e.jsx(G,{src:((S=d==null?void 0:d.actionBy)==null?void 0:S.fullImgUrl)||wr,className:"w-10 cursor-pointer hover:scale-105"})})})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:["Action by  ",e.jsx("span",{className:"font-semibold text-black text-md",children:(d==null?void 0:d.actionByUserId)===null?"Direct Citizen":(p=d==null?void 0:d.actionBy)==null?void 0:p.fullName})]})]})]},`flow${v}`)})})]})]})})}),e.jsx(Ur,{"x-chunk":"dashboard-05-chunk-3",children:e.jsxs(Lr,{className:"grid grid-cols-3 py-10",children:[e.jsx("div",{className:"col-span-2 pr-10",children:e.jsxs(X,{methods:F,onSubmit:Sr(pr),children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:e.jsx("div",{className:"col-span-4",children:e.jsx(Z,{className:"bg-background border w-full rounded-lg p-4",label:"Comment",name:"comment",placeholder:"Enter comment"})})}),e.jsxs(z,{open:g,children:[e.jsx(q,{}),e.jsx(Y,{className:"sm:max-w-[500px]",children:e.jsxs("div",{className:"py-4",children:[i===1&&e.jsx(ca,{setisDialogOpen:t,actionPermissions:c,complaintData:s}),i===2&&e.jsx(ta,{setisDialogOpen:t,actionPermissions:c,complaintData:s}),i===3&&e.jsx(ia,{setisDialogOpen:t,complaintData:s,actionPermissions:c}),i===4&&e.jsx(xa,{setisDialogOpen:t,complaintData:s})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 flex-wrap",children:[e.jsxs("div",{className:"mr-10",children:[((fd=(jd=s==null?void 0:s.data)==null?void 0:jd.data)==null?void 0:fd.wf_status)===1&&e.jsxs(L,{className:"flex items-center mb-4",children:[e.jsx(yr,{className:"inline text-green-500 mr-2"}),"Grievance Resolved"]}),((vd=(Nd=s==null?void 0:s.data)==null?void 0:Nd.data)==null?void 0:vd.wf_status)===2&&e.jsxs(L,{className:"flex items-center mb-4",children:[e.jsx(ra,{className:"inline text-red-500 mr-2"}),"Grievance Rejected"]}),(((bd=(gd=s==null?void 0:s.data)==null?void 0:gd.data)==null?void 0:bd.wf_status)===0||((md=(yd=s==null?void 0:s.data)==null?void 0:yd.data)==null?void 0:md.wf_status)===3)&&e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Or,{checked:(Td=(wd=s==null?void 0:s.data)==null?void 0:wd.data)==null?void 0:Td.isEscalated,onChange:d=>Mr(d),className:"cursor-pointer h-5 w-5",type:"checkbox",name:"isTransactionIssue",placeholder:""}),e.jsx(J,{className:"text-amber-700 opacity-80",children:(_d=(Id=s==null?void 0:s.data)==null?void 0:Id.data)!=null&&_d.isEscalated?"De-Escalate":"Escalate"})]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{className:"col-span-4",children:e.jsx(D,{variant:"secondary",name:"comment",className:"mr-4",type:"submit",disabled:l.isPending,isLoading:l.isPending,children:"Direct Comment"})}),(((Sd=(Ed=s==null?void 0:s.data)==null?void 0:Ed.data)==null?void 0:Sd.wf_status)===0||((Cd=(pd=s==null?void 0:s.data)==null?void 0:pd.data)==null?void 0:Cd.wf_status)===3)&&e.jsxs(e.Fragment,{children:[((Rd=(Md=c==null?void 0:c.data)==null?void 0:Md.permission)==null?void 0:Rd.isNeededMoreDocuments)&&e.jsx("div",{className:"col-span-4",children:e.jsx(A,{onClick:()=>{t(!0),N(1)},asChild:!0,children:e.jsx(I,{variant:"secondary",name:"bts",className:"mr-4",disabled:l.isPending,children:"Need More Documents"})})}),((kd=(Ad=c==null?void 0:c.data)==null?void 0:Ad.permission)==null?void 0:kd.canResolve)&&e.jsx("div",{className:"col-span-4",children:e.jsx(A,{onClick:()=>{t(!0),N(1)},asChild:!0,children:e.jsx(I,{variant:"secondary",name:"bts",className:"mr-4",disabled:l.isPending,children:"Resolve"})})}),((Ld=(Ud=c==null?void 0:c.data)==null?void 0:Ud.permission)==null?void 0:Ld.canReject)&&e.jsx("div",{className:"col-span-4",children:e.jsx(A,{onClick:()=>{t(!0),N(2)},asChild:!0,children:e.jsx(I,{variant:"secondary",name:"reject",className:"mr-4",disabled:l.isPending,children:"Reject"})})}),((Bd=(Od=c==null?void 0:c.data)==null?void 0:Od.permission)==null?void 0:Bd.canTransferToMember)&&e.jsx("div",{className:"col-span-4",children:e.jsx(A,{onClick:()=>{t(!0),N(3)},asChild:!0,children:e.jsx(I,{name:"approve",disabled:l.isPending,className:"mr-4",children:"Transfer to Current Member"})})}),((Pd=(Gd=c==null?void 0:c.data)==null?void 0:Gd.permission)==null?void 0:Pd.canSendToUlb)&&e.jsx("div",{className:"col-span-4",children:e.jsx(A,{onClick:()=>{t(!0),N(4)},asChild:!0,children:e.jsx(I,{name:"approve",disabled:l.isPending,type:"button",className:"mr-4",children:"Transfer to Ulb"})})}),(($d=(Wd=c==null?void 0:c.data)==null?void 0:Wd.permission)==null?void 0:$d.canTransferToWorkflow)&&e.jsx("div",{className:"col-span-4",children:e.jsx(vr,{to:`/grievance/dashboard/transfer-complaint?parentId=null&levelSerial=1&complaintId=${(Fd=(Kd=s==null?void 0:s.data)==null?void 0:Kd.data)==null?void 0:Fd._id}&complaintRefNo=${(qd=(zd=s==null?void 0:s.data)==null?void 0:zd.data)==null?void 0:qd.complaintRefNo}`,children:e.jsx(I,{name:"approve",disabled:l.isPending,type:"button",children:"Transfer to Workflow"})})})]})]})]})]})]})}),e.jsxs("div",{className:"col-span-1 h-80 overflow-y-scroll md:px-4",children:[e.jsx(L,{className:"mb-2",children:"Comments"}),(Vd=(Hd=(Yd=E==null?void 0:E.data)==null?void 0:Yd.data)==null?void 0:Hd.data)==null?void 0:Vd.map((d,v)=>e.jsx(aa,{commentData:d},`comment${v}`))]})]})})]})]})}function Oa(){const[a,r]=M.useState(""),[f,n]=M.useState("");return e.jsx(Gr,{title:"Workflow Details",subTitle:"",searchLink:a,searchLabel:f,children:e.jsx("div",{className:"",children:e.jsx(Sa,{setsearchLink:r,setsearchLabel:n})})})}export{Oa as default};
