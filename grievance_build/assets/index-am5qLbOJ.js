import{K as ms,c as C,d as _,x as S,b as Y,o as k,j as e,F as R,C as h,a6 as f,Z as L,y as M,B as T,g,_ as c,r as y,s as hs,a1 as xs,a2 as os,a3 as b,D as u,z as p,a4 as v,a0 as j,I as w,L as js,k as fs}from"./index-DM7OnLOQ.js";import{g as B}from"./services-KQnp_8oA.js";import{R as E}from"./refresh-ccw-BuWRhwig.js";import{I as N}from"./info-DGAUMFEO.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ms("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ns=C().shape({comment:_().required("Write comment")});function bs({setisDialogOpen:t,complaintData:i,setreOpenStatus:r}){const d=S({}),n=Y({resolver:k(Ns)}),a=async x=>{var l,s;let o={complaintId:(s=(l=i==null?void 0:i.data)==null?void 0:l.data)==null?void 0:s._id,comment:x==null?void 0:x.comment};try{const m=await d.mutateAsync({api:g.reopenComplaint,data:o});m.data.success?(c.success(m.data.message),r(!1),i==null||i.refetch(),t(!1)):c.error(m.data.message)}catch(m){c.error(B(m))}};return e.jsx(R,{methods:n,onSubmit:n.handleSubmit(a),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsxs(h,{className:"text-2xl flex items-center font-bold mb-6 justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-7 h-7 bg-amber-600 rounded-full bg-red-5500 text-white justify-center items-center mr-2 flex ",children:e.jsx(E,{className:"inline"})})," Re-Open Complaint"]}),e.jsx("div",{children:e.jsx("span",{onClick:()=>r(!1),className:"cursor-pointer hover:bg-red-100 p-1 rounded-lg",children:e.jsx(f,{className:"inline"})})})]}),e.jsxs(L,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(N,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"Enter, why do you want to reopen this complaint?"})]}),e.jsx(M,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(T,{isLoading:n.formState.isSubmitting,type:"submit",className:" w-full",children:"Submit Re-Open"})})]})})}const vs=C().shape({comment:_().required("Write comment")});function gs({setisDialogOpen:t,complaintData:i}){const r=S({}),d=Y({resolver:k(vs)}),n=async a=>{var o,l;let x={complaintId:(l=(o=i==null?void 0:i.data)==null?void 0:o.data)==null?void 0:l._id,comment:a==null?void 0:a.comment};try{const s=await r.mutateAsync({api:g.closeComplaint,data:x});s.data.success?(c.success(s.data.message),i==null||i.refetch(),t(!1)):c.error(s.data.message)}catch(s){c.error(B(s))}};return e.jsx(R,{methods:d,onSubmit:d.handleSubmit(n),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-2xl flex items-center font-bold mb-6 justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-7 h-7 bg-amber-600 rounded-full bg-red-5500 text-white justify-center items-center mr-2 flex ",children:e.jsx(E,{className:"inline"})})," Close This Complaint"]})}),e.jsxs(L,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(N,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"Enter, Why do you want to close this complaint?"})]}),e.jsx(M,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(T,{isLoading:d.formState.isSubmitting,type:"submit",className:" w-full",children:"Confirm Close Complaint"})})]})})}const ys=C().shape({comment:_().required("Write comment")});function ps({setisDialogOpen:t,complaintData:i}){const r=S({}),d=Y({resolver:k(ys)}),n=async a=>{var o,l;let x={complaintId:(l=(o=i==null?void 0:i.data)==null?void 0:o.data)==null?void 0:l._id,comment:a==null?void 0:a.comment};try{const s=await r.mutateAsync({api:g.openCommentDirect,data:x});s.data.success?(c.success(s.data.message),i==null||i.refetch(),t(!1)):c.error(s.data.message)}catch(s){c.error(B(s))}};return e.jsx(R,{methods:d,onSubmit:d.handleSubmit(n),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-2xl flex items-center font-bold mb-6 justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-7 h-7 bg-amber-600 rounded-full bg-red-5500 text-white justify-center items-center mr-2 flex ",children:e.jsx(E,{className:"inline"})})," Send Comment"]})}),e.jsxs(L,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(N,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"Enter the comment you want to send?"})]}),e.jsx(M,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(T,{isLoading:d.formState.isSubmitting,type:"submit",className:" w-full",children:"Send Comment"})})]})})}function ws(){var m,I,O,z,A,q,P,F,W,$,H,K,Q,U,J,V,X,Z,G,D,ee,se,ie,ae,de,te,re,le,ne,ce,xe,oe,me,he,je,fe,ue,Ne,be,ve,ge,ye,pe,we,Ce,_e,Se,Ye,ke,Re,Le,Me,Te,Be,Ee,Ie,Oe,ze,Ae,qe,Pe,Fe,We,$e,He,Ke,Qe,Ue,Je,Ve,Xe,Ze,Ge,De,es,ss,is,as,ds,ts,rs,ls,ns,cs;const[t,i]=y.useState(!1),[r,d]=y.useState(""),[n,a]=y.useState(!1),l=new URLSearchParams(fs().search).get("complaintRefNo"),s=hs({api:`${g.getComplaintDetailsByComplaintNo}/${l}`,key:"ComplaintDetails",options:{enabled:!0}});return e.jsx("div",{className:"",children:e.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto bg-white shadow-lg rounded-lg p-8",children:[e.jsxs(xs,{open:n,children:[e.jsx(os,{}),r==="DETAILS"&&e.jsxs(b,{className:"sm:max-w-[500px]",children:[e.jsxs(h,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:[e.jsx("div",{children:!t&&e.jsxs(h,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:[((I=(m=s==null?void 0:s.data)==null?void 0:m.data)==null?void 0:I.wf_status)===1&&e.jsx("span",{className:"text-green-500",children:"| Resolution Details"}),((z=(O=s==null?void 0:s.data)==null?void 0:O.data)==null?void 0:z.wf_status)===2&&e.jsx("span",{className:"text-red-500",children:"| Rejection Details"})]})}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(f,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>a(!1)})})})]}),e.jsxs("div",{className:"py-4",children:[!t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex space-x-4  items-center",children:[((q=(A=s==null?void 0:s.data)==null?void 0:A.data)==null?void 0:q.wf_status)===1&&e.jsx("span",{children:"Resolution Date"}),((F=(P=s==null?void 0:s.data)==null?void 0:P.data)==null?void 0:F.wf_status)===2&&e.jsx("span",{children:"Rejection Date"}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:u(($=(W=s==null?void 0:s.data)==null?void 0:W.data)==null?void 0:$.wf_resolutionDate).format("DD-MM-YYYY")})," "]})]}),e.jsxs("div",{className:"flex flex-col mt-4",children:[e.jsx("div",{className:"font-semibold",children:"Details : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(K=(H=s==null?void 0:s.data)==null?void 0:H.data)==null?void 0:K.wf_finalCommentToCitizen})," "]})]})]}),e.jsx("section",{style:{height:t?"400px":"0px",transition:"height 0.3s ease",overflow:"hidden"},children:e.jsx(bs,{setisDialogOpen:a,setreOpenStatus:i,complaintData:s})}),!t&&e.jsxs("section",{className:"mt-8",children:[e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsxs("p",{className:"text-gray-800 mt-2",children:[e.jsx("span",{className:"font-semibold italic font-serif",children:"Note : "}),"If you are not satisfied with the resolution of complaint, You can re-open complaint anytime."]}),e.jsxs("div",{className:"flex justify-center items-center mt-6",children:[" ",e.jsx(p,{onClick:()=>i(!t),variant:"secondary",className:"mt-2",children:"Re-Open this Complaint"})]})]})]})]}),r==="COMMENT"&&e.jsxs(b,{className:"sm:max-w-[500px]",children:[e.jsxs(h,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:[e.jsx("div",{children:"| Send Comment"}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(f,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>a(!1)})})})]}),e.jsx("div",{className:"py-4",children:e.jsx("section",{style:{height:"400px",transition:"height 0.3s ease",overflow:"hidden"},children:e.jsx(ps,{setisDialogOpen:a,complaintData:s})})})]}),r==="CLOSE_COMPLAINT"&&e.jsxs(b,{className:"sm:max-w-[500px]",children:[e.jsxs(h,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:[e.jsx("div",{children:"| Close Complaint"}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(f,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>a(!1)})})})]}),e.jsx("div",{className:"py-4",children:e.jsx("section",{style:{height:"400px",transition:"height 0.3s ease",overflow:"hidden"},children:e.jsx(gs,{setisDialogOpen:a,complaintData:s})})})]}),e.jsxs("div",{className:"flex",children:[((U=(Q=s==null?void 0:s.data)==null?void 0:Q.data)==null?void 0:U.wf_status)===0&&e.jsxs("div",{className:"text-gray-600 mb-2 font-semibold flex space-x-2",children:[e.jsx(N,{className:"inline text-amber-500"}),e.jsx("span",{className:"opacity-70",children:"We are working on this complaint, You will be informed soon."})," "]}),((V=(J=s==null?void 0:s.data)==null?void 0:J.data)==null?void 0:V.wf_status)===1&&e.jsxs("div",{className:"text-gray-600 mb-2 font-semibold flex space-x-2",children:[e.jsx(us,{className:"inline text-green-500"}),e.jsx("span",{className:"opacity-70",children:"This complaint has been resolved, You can reopen this complaint if not satisfied."})," "]}),((Z=(X=s==null?void 0:s.data)==null?void 0:X.data)==null?void 0:Z.wf_status)===2&&e.jsxs("div",{className:"text-gray-600 mb-2 font-semibold flex space-x-2",children:[e.jsx(f,{className:"inline text-red-500"}),e.jsx("span",{className:"opacity-70",children:"This complaint has been rejected, Please re-register complaint if not satisfied with this."})," "]}),((D=(G=s==null?void 0:s.data)==null?void 0:G.data)==null?void 0:D.wf_status)===4&&e.jsxs("div",{className:"text-gray-600 mb-2 font-semibold flex space-x-2",children:[e.jsx(f,{className:"inline text-red-500"}),e.jsx("span",{className:"opacity-70",children:"This complaint has been closed by you."})," "]}),((se=(ee=s==null?void 0:s.data)==null?void 0:ee.data)==null?void 0:se.wf_status)===3&&e.jsxs("div",{className:"text-gray-600 mb-2 font-semibold flex space-x-2",children:[e.jsx(N,{className:"inline text-amber-500"}),e.jsx("span",{className:"opacity-70",children:"This complaint has been re-opened, We are working on this complaint, You will be informed soon."})," "]}),(((ae=(ie=s==null?void 0:s.data)==null?void 0:ie.data)==null?void 0:ae.wf_status)===0||((te=(de=s==null?void 0:s.data)==null?void 0:de.data)==null?void 0:te.wf_status)===3)&&e.jsxs("div",{className:"text-gray-600 mb-2 font-semibold flex space-x-2",children:["   ",e.jsx(v,{onClick:()=>{a(!0),d("COMMENT"),i(!1)},asChild:!0,children:e.jsx(p,{className:"ml-2",size:"sm",variant:"secondary",children:"Send Comment"})}),e.jsx(v,{onClick:()=>{a(!0),d("CLOSE_COMPLAINT"),i(!1)},asChild:!0,children:e.jsx(p,{className:"ml-2",size:"sm",variant:"destructive",children:"Close Complaint"})})]}),(((le=(re=s==null?void 0:s.data)==null?void 0:re.data)==null?void 0:le.wf_status)===1||((ce=(ne=s==null?void 0:s.data)==null?void 0:ne.data)==null?void 0:ce.wf_status)===2)&&e.jsx(v,{onClick:()=>{a(!0),d("DETAILS"),i(!1)},asChild:!0,children:e.jsx(j,{className:"ml-2 cursor-pointer hover:bg-primary hover:text-white",variant:"secondary",children:"View Details"})})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-blue-800 mb-6 uppercase",children:"Complaint Details"}),e.jsx("h1",{className:"text-xl font-bold  mb-6 ",children:e.jsxs("span",{children:["Complaint No - ",(oe=(xe=s==null?void 0:s.data)==null?void 0:xe.data)==null?void 0:oe.complaintRefNo]})})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"text-gray-600 mb-2 flex-1",children:["Registered on : ",u((he=(me=s==null?void 0:s.data)==null?void 0:me.data)==null?void 0:he.createdAt).format("DD-MM-YYYY")]}),e.jsxs("div",{className:"text-gray-600 mb-2 flex-1 text-right",children:["Status :Â ",((fe=(je=s==null?void 0:s.data)==null?void 0:je.data)==null?void 0:fe.wf_status)===4&&e.jsx(j,{variant:"destructive",children:"Closed"}),((Ne=(ue=s==null?void 0:s.data)==null?void 0:ue.data)==null?void 0:Ne.wf_status)===3&&e.jsx(j,{className:"bg-amber-400 text-white",variant:"secondary",children:"Pending(re-opened)"}),((ve=(be=s==null?void 0:s.data)==null?void 0:be.data)==null?void 0:ve.wf_status)===2&&e.jsx(j,{variant:"destructive",children:"Rejected"}),((ye=(ge=s==null?void 0:s.data)==null?void 0:ge.data)==null?void 0:ye.wf_status)===1&&e.jsx(j,{variant:"success",children:"Resolved"}),((we=(pe=s==null?void 0:s.data)==null?void 0:pe.data)==null?void 0:we.wf_status)===0&&e.jsx(j,{className:"bg-amber-400 text-white",variant:"secondary",children:"Pending"})]}),((_e=(Ce=s==null?void 0:s.data)==null?void 0:Ce.data)==null?void 0:_e.wf_status)===4&&e.jsxs("div",{className:"text-gray-600 mb-2 flex-1 text-right",children:[e.jsx("span",{children:"Closed on : "})," ",u((Ye=(Se=s==null?void 0:s.data)==null?void 0:Se.data)==null?void 0:Ye.wf_resolutionDate).format("DD-MM-YYYY")," "]}),((Re=(ke=s==null?void 0:s.data)==null?void 0:ke.data)==null?void 0:Re.wf_status)===2&&e.jsxs("div",{className:"text-gray-600 mb-2 flex-1 text-right",children:[e.jsx("span",{children:"Rejected on : "})," ",u((Me=(Le=s==null?void 0:s.data)==null?void 0:Le.data)==null?void 0:Me.wf_resolutionDate).format("DD-MM-YYYY")," "]}),((Be=(Te=s==null?void 0:s.data)==null?void 0:Te.data)==null?void 0:Be.wf_status)===1&&e.jsxs("div",{className:"text-gray-600 mb-2 flex-1 text-right",children:[e.jsx("span",{children:"Resolved on : "})," ",u((Ie=(Ee=s==null?void 0:s.data)==null?void 0:Ee.data)==null?void 0:Ie.wf_resolutionDate).format("DD-MM-YYYY")," "]})]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3   space-y-4",children:[e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Full Name : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(ze=(Oe=s==null?void 0:s.data)==null?void 0:Oe.data)==null?void 0:ze.citizenName})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Mobile No : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(qe=(Ae=s==null?void 0:s.data)==null?void 0:Ae.data)==null?void 0:qe.mobileNo})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Email : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Fe=(Pe=s==null?void 0:s.data)==null?void 0:Pe.data)==null?void 0:Fe.email})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"ULB : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(He=($e=(We=s==null?void 0:s.data)==null?void 0:We.data)==null?void 0:$e.ulb)==null?void 0:He.ulbName})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Module : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ue=(Qe=(Ke=s==null?void 0:s.data)==null?void 0:Ke.data)==null?void 0:Qe.module)==null?void 0:Ue.moduleName})," "]})]}),((Ve=(Je=s==null?void 0:s.data)==null?void 0:Je.data)==null?void 0:Ve.fixedNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(Ze=(Xe=s==null?void 0:s.data)==null?void 0:Xe.data)==null?void 0:Ze.fixedNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(De=(Ge=s==null?void 0:s.data)==null?void 0:Ge.data)==null?void 0:De.fixedNo})," "]})]}),((ss=(es=s==null?void 0:s.data)==null?void 0:es.data)==null?void 0:ss.tempNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(as=(is=s==null?void 0:s.data)==null?void 0:is.data)==null?void 0:as.tempNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(ts=(ds=s==null?void 0:s.data)==null?void 0:ds.data)==null?void 0:ts.tempNo})," "]})]}),e.jsx("div",{className:"col-span-3 border-b my-20 border-[#99B37C]"}),e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("div",{className:"font-semibold",children:"Title : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(ls=(rs=s==null?void 0:s.data)==null?void 0:rs.data)==null?void 0:ls.complaintTitle})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col ",children:[e.jsx("div",{className:"font-semibold",children:"Description : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(cs=(ns=s==null?void 0:s.data)==null?void 0:ns.data)==null?void 0:cs.complaintDescription})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Complaint Document"}),e.jsxs(xs,{children:[e.jsx(os,{}),e.jsx(b,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:e.jsx(w,{src:"/images/slider.png",className:"w-80"})})}),e.jsx(v,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer ",children:e.jsx(w,{src:"/images/slider.png",className:"w-40"})})})]})]})]}),e.jsxs("section",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"Complaint Resolution Time"}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsx("p",{className:"text-gray-800 mt-2",children:"Your complaint will be resolved under 10 working days. You can further reopen your complaint if not satisfied with the complaint resolution."}),e.jsxs("p",{className:"text-gray-800 mt-2 flex items-center space-x-2",children:["Feel free to connect with us at +91912325398. You can also visit",e.jsxs(js,{to:"https://maps.app.goo.gl/HFBxeoz9qYmKWE3z8",target:"_blank",className:"inline-flex items-center hover:underline ml-2",children:[e.jsx(w,{className:"w-5 inline",src:"/images/pin.svg",alt:"Location Pin"})," ",e.jsx("span",{className:"mx-2",children:"nearest Jan Seva Kendra "})]}),"for further queries."]})]})]})})})}function ks(){return e.jsx(ws,{})}export{ks as default};
