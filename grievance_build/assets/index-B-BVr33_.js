import{a as w,r as l,k as W,u as z,aQ as g,c as K,d as Y,b as Q,o as J,j as e,_ as c,g as X}from"./index-D2OA7_Oe.js";const m={property:"http://172.18.1.108:8000/api/property/details/get-owner-details",water:"http://172.18.1.108:8000/api/water/consumer/get-owner-details",trade_License:"http://172.18.1.108:8000/api/trade/application-search/get-owner-details",septic_Tank_Cleaning:"http://172.18.1.108:8000/api/septic/details",pet_Registration:"http://172.18.1.108:8000/api/pet/details",water_Tanker_Booking:"http://172.18.1.108:8000/api/water/tanker",advertisement_Tax:"http://172.18.1.108:8000/api/advertisement/tax",lodge_And_Banquet_Registration:"http://172.18.1.108:8000/api/lodge/details",solid_Waste_User_Charge:"http://172.18.1.108:8000/api/solidwaste/details",marriage_Registration:"http://172.18.1.108:8000/api/marriage/details",public_Transport_City_Bus:"http://172.18.1.108:8000/api/transport/details",parking_Management:"http://172.18.1.108:8000/api/parking/details",Rig_Machine_Registration:"http://172.18.1.108:8000/api/rig/details",hrms_And_Payroll:"http://172.18.1.108:8000/api/hrms/details"};function Z(){const{currentLanguage:t}=w();l.useState(null);const n=new URLSearchParams(W().search).get("type"),[ee,N]=l.useState(null),E=z({}),[x,S]=l.useState(""),[f,A]=l.useState([]),[R,U]=l.useState(!1),[b,y]=l.useState(""),[C,h]=l.useState(!1),[s,M]=l.useState(null),[u,d]=l.useState(!1),[B,k]=l.useState((s==null?void 0:s.prop_address)||"");l.useEffect(()=>{n&&m[n]&&F(n)},[n]);const F=async a=>{d(!0);try{const i=await g.get(m[a]);N(i.data)}catch(i){console.error("Error fetching user details:",i)}finally{d(!1)}},I=async a=>{if(M(a),h(!0),n&&m[n]){d(!0);try{const i=await g.get(m[n]);N(i.data)}catch(i){console.error("Error fetching data:",i)}finally{d(!1)}}},D=async()=>{if(!x.trim()){alert("Please enter a valid search query.");return}const a={MOBILE_NUMBER:"mobileNo",HOLDING_NUMBER:"holdingNo",SAF_NUMBER:"safNo",CONSUMER_NUMBER:"consumerNo",APPLICATION_NUMBER:"applicationNo",LICENSE_NUMBER:"licenseNo"};d(!0);try{const p=(await g.post(m[n],{filterBy:a[b],filterValue:x})).data.data||[];A(p),U(!0),p.length>0?c.success("Fetched successfully.!"):c.info("No results found for the given query.")}catch{c.error("No data found for the given  reference number..")}finally{d(!1)}},L=a=>{y({property:"HOLDING_NUMBER",water:"CONSUMER_NUMBER",trade_License:"LICENSE_NUMBER"}[a]||"MOBILE_NUMBER")};l.useEffect(()=>{L(n)},[n]);const P=a=>{k(a.target.value)},O=K().shape({description:Y().required("Description is required")}),{register:G,handleSubmit:q,reset:H,formState:{errors:j}}=Q({resolver:J(O)});console.log(s,"selectedTool=====>");const $=async a=>{var i,p,v,_;try{const r=new FormData;r.append("citizenName",(s==null?void 0:s.owner_name)||(s==null?void 0:s.applicant_name)||""),r.append("email",""),r.append("mobileNo",(s==null?void 0:s.mobile_no)||""),r.append("complaintTitle",""),r.append("complaintDescription",a.description||""),r.append("moduleName",""),r.append("ulbName",(s==null?void 0:s.ulb_name)||""),r.append("ulbId","66f3fdb76609dc9d192199d1"),r.append("customAddress",""),r.append("complaintTypeId",""),r.append("imageUrl",void 0),r.append("isTransactionIssue","false"),r.append("transactionNo",""),r.append("isCitizen","1"),r.append("wardNo",""),r.append("area",""),r.append("latitude",""),r.append("longitude",""),r.append("holdingNo",""),r.append("safNo",""),r.append("consumerNo",""),r.append("grievanceLocation","");const o=await E.mutateAsync({api:X.createComplaintApplicationDirect,data:r});(i=o.data)!=null&&i.success?(c.success(((p=o==null?void 0:o.data)==null?void 0:p.message)||"Grievance created successfully"),setFormResponse((v=o==null?void 0:o.data)==null?void 0:v.data),setFormStep(5)):c.error(((_=o==null?void 0:o.data)==null?void 0:_.message)||"Grievance not created successfully"),H({description:""}),h(!1)}catch(r){console.error("Error in onSubmit:",r),c.error("An error occurred while processing the grievance")}},V=()=>n==="property"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Holding Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.holding_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SAF Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.saf_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):n==="water"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Consumer Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.consumer_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):n==="trade_License"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"License Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.license_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):n==="solid_Waste_User_Charge"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"License Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.license_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):null;return console.log(u,"loading=====>"),e.jsxs("div",{children:[e.jsx("div",{className:"min-h-screen bg-gray-100 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto bg-white rounded-lg p-4 md:p-8",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs("h1",{className:"text-lg md:text-xl font-bold text-blue-800 mb-4 md:mb-6 uppercase",children:["TRACK YOUR ",n?n.replace(/_/g," "):""," DETAILS"]})}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs("select",{value:b,onChange:a=>y(a.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",children:[n==="property"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"HOLDING_NUMBER",children:"Holding Number"}),e.jsx("option",{value:"SAF_NUMBER",children:"SAF Number"})]}),n==="solid_Waste_User_Charge"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"CONSUMER_NUMBER",children:"Consumer Number"}),e.jsx("option",{value:"HOLDING_NUMBER",children:"Holding Number"})]}),n==="water"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"CONSUMER_NUMBER",children:"Consumer Number"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),n==="trade_License"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"LICENSE_NUMBER",children:"License Number"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]})]}),e.jsx("input",{type:"text",value:x,onChange:a=>S(a.target.value),placeholder:`Enter your ${b.replace(/_/g," ").toLowerCase()}`,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500 uppercase"}),e.jsx("button",{type:"button",onClick:D,disabled:u===!0,className:`px-4 py-2 ${u===!0?"bg-gray-500":"bg-amber-500 hover:bg-amber-600"}  text-white font-semibold rounded-lg transition`,children:u?"Loading...":"Search"})]}),R&&(f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-6 py-3 text-left",children:"Grievance No."}),e.jsx("th",{className:"border border-gray-300 px-6 py-3 text-left",children:(t==null?void 0:t.USER_NAME)||"User Name"}),e.jsx("th",{className:"border border-gray-300 px-6 py-3 text-left",children:(t==null?void 0:t.MOBILE_NUMBER)||"Mobile Number"}),e.jsx("th",{className:"border border-gray-300 px-6 py-3 text-left",children:(t==null?void 0:t.ADDRESS)||"Address"}),e.jsx("th",{className:"border border-gray-300 px-6 py-3 text-left",children:(t==null?void 0:t.STATUS)||"Status"}),e.jsx("th",{className:"border border-gray-300 px-6 py-3 text-left",children:"Action"}),e.jsx("th",{className:"border border-gray-300 px-6 py-3 text-left",children:"View"})]})}),e.jsx("tbody",{children:f.map((a,i)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-all duration-300 ease-in-out",children:[e.jsx("td",{className:"border border-gray-300 px-6 py-4 text-sm text-gray-700",children:a.consumer_id||i+1}),e.jsx("td",{className:"border border-gray-300 px-6 py-4 text-sm text-gray-700",children:a.owner_name&&a.applicant_name?`${a.owner_name} | ${a.applicant_name}`:a.owner_name||a.applicant_name||"N/A"}),e.jsx("td",{className:"border border-gray-300 px-6 py-4 text-sm text-gray-700",children:a.mobile_no||"N/A"}),e.jsx("td",{className:"border border-gray-300 px-6 py-4 text-sm text-gray-700",children:a.prop_address||"N/A"}),e.jsx("td",{className:"border border-gray-300 px-6 py-4 text-sm text-gray-700",children:a.status==="Active"?"Active":"Deactive"}),e.jsx("td",{className:"border border-gray-300 px-6 py-4",children:e.jsx("button",{className:"rounded-lg bg-blue-500 px-5 py-2 text-sm font-semibold text-white transition transform hover:bg-blue-600 hover:scale-105",onClick:()=>I(a),children:"Proceed At Grievance"})}),e.jsx("td",{className:"border border-gray-300 px-6 py-4",children:e.jsx("button",{className:"rounded-lg bg-gray-500 px-5 py-2 text-sm font-semibold text-white transition transform hover:bg-gray-600 hover:scale-105",onClick:()=>handleView(a),children:"View"})})]},a.id||i))})]})}):e.jsx("div",{className:"text-base md:text-lg font-semibold text-gray-600"}))]})]})}),C&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-4xl w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Proceed with Grievance"}),e.jsxs("form",{onSubmit:q($),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"User Name"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.owner_name)||(s==null?void 0:s.applicant_name)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.mobile_no)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",value:B,onChange:P,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",placeholder:"Enter Address"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ULB Name"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.ulb_name)||"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ULB ID"}),e.jsx("input",{type:"text",value:"66f3fdb76609dc9d192199d1",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),V()]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{...G("description",{required:!0}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-amber-500",placeholder:"Enter your description here"}),j.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.description.message})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg hover:bg-gray-400 transition",children:"No"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-amber-500 text-white font-semibold rounded-lg hover:bg-amber-600 transition",children:"Proceed"})]})]})]})})]})}function ae(){const{currentLanguage:t}=w();return e.jsxs("div",{className:"grid sm:grid-cols-4 grid-cols-1 gap-6",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex flex-col items-center px-4 md:px-6 py-6 bg-white rounded-2xl shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-primary mb-4",children:t==null?void 0:t.TRACK_GR}),e.jsx("div",{className:"w-32 h-32 mb-4",children:e.jsx("img",{src:"/images/complain_boy.png",alt:"Complaint Boy",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-sm text-gray-600 text-center leading-relaxed",children:t==null?void 0:t.FF_FB}),e.jsx("p",{className:"text-sm text-gray-600 text-center leading-relaxed mt-2",children:t==null?void 0:t.YF_FB})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-4 md:p-6 bg-gray-100 rounded-2xl shadow-lg",children:e.jsx("div",{className:"bg-white rounded-lg p-4 md:p-6 shadow-sm",children:e.jsx(Z,{})})})]})}export{ae as default};
