import{l as r,v as x,W as M,I as O,y as T,z as N,B as $,m as z,q as _,A as R,k as l,o as U,j as e,D as G,G as I,H as J}from"./index-27314172.js";function re(){const[s,v]=r.useState();x();const[K,c]=r.useState(!1),[Q,u]=r.useState(),[X,n]=r.useState(),[w,d]=r.useState(!1),[S,Y]=r.useState(1);r.useState("");const[B,Z]=r.useState(5),[A,ee]=r.useState(""),[C,ae]=r.useState(0);r.useState(10);const{api_waterSearchActiveApplication:h,header:te}=M(),{filterBy:H,parameter:E}=x();O("Water Application Search");const[p,F]=r.useState(null),[L,k]=r.useState(null),q=T({filterBy:N().required("This is a required field !"),entry:N().required("This is a required field !")}),t=$({initialValues:{filterBy:"",entry:""},onSubmit:a=>{var i;F({filterBy:a==null?void 0:a.filterBy,parameter:(i=t==null?void 0:t.values)==null?void 0:i.entry}),m(a),k(o=>o+1)},validationSchema:q}),D=z();r.useEffect(()=>{C>0&&m()},[H,E]);const P=()=>{window.history.pushState(null,"",`/water/waterViewApplication/${t.values.filterBy}/${t.values.parameter} `)},m=a=>{d(!0),c(!1);const i={filterBy:a?a.filterBy:t.values.filterBy,parameter:a?a.entry:t.values.entry,pages:B,page:S,search:A};console.log("before fetch applied application..",i),_.post(h,i,R()).then(o=>{var g,f,y,b;console.log("applied application. in ...",(f=(g=o==null?void 0:o.data)==null?void 0:g.data)==null?void 0:f.data),(y=o==null?void 0:o.data)!=null&&y.status?(v((b=o==null?void 0:o.data)==null?void 0:b.data),c(!0)):(u(o.data.message),notify("No data found","error")),d(!1)}).catch(o=>{console.log("Error while fetching Filter Data",o),c(!1),d(!1)})};console.log("readymadeListData.data",s==null?void 0:s.data);const V=a=>{t.values.filterBy=a.target.value,a.target.value=="holdingNo"&&n("Enter Holding No."),a.target.value=="safNo"&&n("Enter SAF No."),a.target.value=="newConnection"&&n("Enter Application No."),a.target.value=="regularization"&&n("Enter Application No."),a.target.value=="name"&&n("Enter Owner Name"),a.target.value=="mobileNo"&&n("Enter Mobile No.")},W=()=>{u(),t.values&&n(t.values.filterBy)},j=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Application No",accessor:"application_no"},{Header:" Holding No",accessor:"holding_no"},{Header:"Applicant Name",accessor:"applicantname"},{Header:"Address",accessor:"address"},{Header:"Mobile No",accessor:"mobileno"},{Header:"Action",accessor:"id",Cell:({cell:a})=>e("button",{onClick:()=>{P(),D(`/waterViewApplication/${a.row.values.id}`,{replace:!0})},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}];return console.log("readymadeListData.data",s==null?void 0:s.data),l(U,{children:[w&&e(G,{}),l("div",{className:"border shadow-xl bg-white mt-6",children:[e("div",{className:"flex ml-5 mt-2 ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Applied Applications"})}),e("form",{onChange:W,onSubmit:t.handleSubmit,children:l("div",{className:"flex max-sm:flex-col justify-center space-x-8 max-sm:space-x-0 max-sm:space-y-5 my-5 m-10",children:[l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Application Type",e("span",{className:"text-red-500",children:"*"})]}),l("select",{name:"filterBy",onChange:V,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"newConnection",children:"New Connection"}),e("option",{value:"regularization",children:"Regularization"}),e("option",{value:"discConnection",children:"Disconnection"}),e("option",{value:"name",children:"Name"}),e("option",{value:"safNo",children:"SAF No"}),e("option",{value:"holdingNo",children:"Holding No"})]}),e("p",{className:"text-red-500 text-xs",children:t.touched.filterBy&&t.errors.filterBy?t.errors.filterBy:null})]}),l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Searching Parameter",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"entry",onChange:t.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:t.touched.entry&&t.errors.entry?t.errors.entry:null})]}),e("div",{className:"mt-4",children:l("button",{type:"submit",className:"w-full border border-indigo-600 bg-indigo-600 hover:bg-indigo-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 max-sm:m-0 py-1",children:[" ",l("p",{className:"flex justify-center",children:[" ",l("span",{className:"mt-1",children:[" ",e(I,{})," "]})," ","Search record"]})]})})]})}),e("div",{className:" rounded-md  mt-10",children:p!=null&&e(J,{columns:j,requestBody:p,changeData:L,api:h})})]})]})}export{re as default};
