import{r as o,x as v,l as q,W as O,A as D,u as E,o as T,q as w,s as V,a as r,F as R,j as e,B as P,Z as U,$ as I,L as Z,f as z}from"./index-eec7ba48.js";function K(){const[S,c]=o.useState(),[G,m]=o.useState(!1),{type:i}=v(),[B,h]=o.useState(!1),[l,C]=o.useState(),[g,u]=o.useState(!1),{notify:b}=o.useContext(q),[A,d]=o.useState(),{api_waterSearchConsumer:F}=O(),{filterBy:n,parameter:f}=v(),H=()=>{n!=null&&n!=""&&(console.log("This is What i need ",n,f),x({filterBy:n,parameter:f}))};o.useEffect(()=>{H()},[n,f]);const k=D(),W=E(),L=()=>{window.history.pushState(null,"",`/water/waterConsumerSearch/${s.values.filterBy}/${s.values.parameter} `)},x=a=>{console.log("data",a),d(),u(!1),h(!0);const p={filterBy:a.filterBy,parameter:a.parameter};console.log("th paypayload",p),console.log("before fetch holding details....",p),z.post(F,p,k).then(t=>{var y,N;console.log("search property list",t==null?void 0:t.data),(y=t==null?void 0:t.data)!=null&&y.status?(C((N=t==null?void 0:t.data)==null?void 0:N.data),u(!0)):(d(t.data.message),b("No data found","error")),h(!1)}).catch(t=>{console.log("Error while fetching Filter Data",t),b("Something went wrong!!","error"),h(!1),d("Something Went Wrong"),u(!1)})},M=T({filterBy:w().required("This is a required field !"),parameter:w().required("This is a required field !")}),s=V({initialValues:{filterBy:"",parameter:""},onSubmit:a=>{x(a)},validationSchema:M}),_=a=>{s.values.filterBy=a.target.value,a.target.value=="holdingNo"&&(c("Holding No"),m(!0)),a.target.value=="ownerDetails"&&(c("Owner Details"),m(!1)),a.target.value=="address"&&(c("Address"),m(!1))},$=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Owner's Name",accessor:"applicant_name"},{Header:"Consumer No",accessor:"consumer_no"},{Header:"Holding No",accessor:"holding_no"},{Header:"SAF No",accessor:"saf_no"},{Header:"Mobile No",accessor:"mobile_no"},{Header:"Address",accessor:"address"},{Header:"Action",accessor:"id",Cell:({cell:a})=>e("button",{onClick:()=>{L(),W(`/waterViewConsumer/${a.row.values.id}`)},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}],j=()=>{d()};return r(R,{children:[B&&e(P,{}),(i=="re"||i=="mu")&&r("div",{className:"bg-amber-50 px-4 py-4 mb-4 text-lg rounded-lg shadow-lg text-amber-600 inline-block",children:[e(U,{className:"inline mr-2 text-3xl"}),"For ",e("span",{className:"font-semibold",children:i=="re"?"Re-Assessment":"Mutation"})," of property search the property and then apply for ",i=="re"?"Re-Assessment":"Mutation"]}),r("div",{className:"border shadow-xl bg-white mt-6",children:[e("div",{className:"flex ml-5 mt-2 ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Consumer"})}),e("form",{onChange:j,onSubmit:s.handleSubmit,children:r("div",{className:"flex justify-center space-x-8 my-5 m-10",children:[r("div",{children:[r("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",e("span",{className:"text-red-500",children:"*"})]}),r("select",{name:"filterBy",onChange:_,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"consumerNo",children:"Consumer No"}),e("option",{value:"holdingNo",children:"Holding No"}),e("option",{value:"safNo",children:"SAF No"}),e("option",{value:"applicantName",children:"Applicant Name"}),e("option",{value:"mobileNo",children:"Mobile No"})]}),e("p",{className:"text-red-500 text-xs",children:s.touched.filterBy&&s.errors.filterBy?s.errors.filterBy:null})]}),r("div",{children:[r("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By ",S," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"parameter",onChange:s.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:s.touched.parameter&&s.errors.parameter?s.errors.parameter:null})]}),e("div",{className:"mt-4",children:e("button",{type:"submit",className:"w-full border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 py-1",children:r("p",{className:"flex",children:[r("span",{className:"mt-1 mr-2",children:[" ",e(I,{})," "]})," Search record "]})})})]})}),e("div",{className:"flex justify-center text-red-600 mb-2 font-semibold",children:A})]}),r("div",{className:"mt-10",children:[g&&(l==null?void 0:l.length)!=0&&e(Z,{columns:$,dataList:l}),g&&(l==null?void 0:l.length)==0&&e("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"}),e("div",{className:"w-full h-40"})]})]})}export{K as default};
