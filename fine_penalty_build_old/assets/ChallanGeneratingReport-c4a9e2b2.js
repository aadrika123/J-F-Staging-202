import{z,r as n,d as P,c as $,a as E,G as f,u as G,j as t,R as U,T as O,U as B,P as I,J as r,V as M,A as J,k as W}from"./index-111b296d.js";const Q=()=>{z("Challan Generated Report");const{api_ChallanGeneratingReport:y,api_getUserList:b}=I(),[w,j]=n.useState([]),v=P(),C=[{Header:"Sl.No.",Cell:({row:e})=>t.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Officer Name",accessor:"user_name",Cell:({cell:e})=>{var a;return r((a=e.row.original)==null?void 0:a.user_name)}},{Header:"Name",accessor:"full_name",Cell:({cell:e})=>{var a;return r((a=e.row.original)==null?void 0:a.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:e})=>{var a;return r((a=e.row.original)==null?void 0:a.mobile)}},{Header:"Challan Type",accessor:"challan_type",Cell:({cell:e})=>{var a;return r((a=e.row.original)==null?void 0:a.challan_type)}},{Header:"Challan Category",accessor:"challan_category",Cell:({cell:e})=>{var a;return r((a=e.row.original)==null?void 0:a.challan_category)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:e})=>{var a;return t.jsx("div",{className:"underline cursor-pointer",onClick:()=>{var o,l,c,d;return((l=(o=e==null?void 0:e.row)==null?void 0:o.original)==null?void 0:l.challan_id)&&v(`/challan/${(d=(c=e==null?void 0:e.row)==null?void 0:c.original)==null?void 0:d.challan_id}`)},children:r((a=e.row.original)==null?void 0:a.challan_no)})}},{Header:"Violation Made",accessor:"violation_name",Cell:({cell:e})=>{var a;return r((a=e.row.original)==null?void 0:a.violation_name)}},{Header:"Violation Section",accessor:"violation_section",Cell:({cell:e})=>{var a;return r((a=e.row.original)==null?void 0:a.violation_section)}},{Header:"Violation Place",accessor:"violation_place",Cell:({cell:e})=>{var a;return r((a=e.row.original)==null?void 0:a.violation_place)}},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:e})=>{var a;return M((a=e.row.original)==null?void 0:a.total_amount)}}],[h,m]=n.useState({}),[_,N]=n.useState(0),[S,D]=n.useState(!1),[k,p]=n.useState(!1),H="text-gray-800 text-sm",x="border focus:outline-none drop-shadow-sm focus:drop-shadow-md px-4 py-1 text-gray-700 shadow-black placeholder:text-sm",i=[{title:"From Date",key:"fromDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Upto Date",key:"uptoDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Users",key:"users",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:w,okey:"id",ovalue:"user_name"},{title:"Challan Type",key:"challanType",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:[{id:"Via Verification",value:"Via Verification"},{id:"On Spot",value:"On Spot"}],okey:"id",ovalue:"value"}],L=(e,a="",o,l="",c="",d=!1,u=[],A="",q="")=>t.jsxs("div",{className:`flex flex-col ${l} `,children:[a!=""&&t.jsxs("label",{htmlFor:e,className:H,children:[a," ",d&&t.jsx("span",{className:"text-red-500 text-xs font-bold",children:"*"})," : "]}),o!="select"&&o!="file"&&t.jsx("input",{...s.getFieldProps(e),type:o,className:x+` ${s.touched[e]&&s.errors[e]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,name:e,id:"",placeholder:c}),o=="select"&&t.jsx("select",{...s.getFieldProps(e),className:x+` ${s.touched[e]&&s.errors[e]?" border-red-200 placeholder:text-red-400 text-red-400":" focus:border-zinc-300 border-zinc-200 "}`,children:k?t.jsx("option",{children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",children:"All"}),u==null?void 0:u.map(g=>t.jsx("option",{className:"",value:g[A],children:g[q]}))]})})]}),R=$().shape([...i].reduce((e,a)=>(a!=null&&a.required&&(e[a.key]=E().required(a==null?void 0:a.hint)),e),{})),T={fromDate:f(),uptoDate:f(),users:"",challanType:"",challanCategory:""},s=G({initialValues:T,enableReinitialize:!0,validationSchema:R,onSubmit:e=>{F(e)}}),V=()=>{p(!0),J.post(b,{},W()).then(e=>{var a,o;(a=e==null?void 0:e.data)!=null&&a.status&&j((o=e==null?void 0:e.data)==null?void 0:o.data),console.log("fp violation list response => ",e)}).catch(e=>{console.log("error fp violation list => ",e)}).finally(()=>{p(!1)})},F=e=>{m({fromDate:e==null?void 0:e.fromDate,uptoDate:e==null?void 0:e.uptoDate,userId:e==null?void 0:e.users,challanType:e==null?void 0:e.challanType}),N(a=>a+1)};return n.useEffect(()=>{V()},[]),t.jsxs(t.Fragment,{children:[t.jsxs("form",{onSubmit:s.handleSubmit,onChange:s.handleChange,className:"bg-white poppins p-4 mb-8",children:[t.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Challan Generated Report"}),t.jsxs("section",{className:"flex gap-4 flex-wrap my-6",children:[i==null?void 0:i.map(e=>L(e==null?void 0:e.key,e==null?void 0:e.title,e==null?void 0:e.type,e==null?void 0:e.width,e==null?void 0:e.hint,e==null?void 0:e.required,e==null?void 0:e.options,e==null?void 0:e.okey,e==null?void 0:e.ovalue)),t.jsx("div",{className:"mt-4 w-full md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-4",children:t.jsx("div",{className:" ",children:S?t.jsx(t.Fragment,{children:t.jsx("div",{className:"flex justify-center",children:t.jsx(U,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):t.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[t.jsx("span",{className:"",children:t.jsx(O,{fontSize:""})}),t.jsx("span",{children:"Search Record"})]})})})]})]}),Object.keys(h).length!==0&&t.jsx(B,{api:y,columns:C,requestBody:h,changeData:_,search:!1,loader:e=>D(e)})]})};export{Q as default};
