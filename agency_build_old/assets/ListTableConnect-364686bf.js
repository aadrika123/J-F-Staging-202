import{j as n,r as u,C as Z,L as _,a as O,A as E}from"./index-1a86ca5c.js";const $=()=>n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex flex-col bg-white p-4 space-y-4 rounded-md",children:[n.jsx("div",{className:"bg-gray-200 w-full h-10 flex justify-center items-center p-4 animate"}),n.jsx("div",{className:"bg-gray-200 w-full h-10 flex justify-center items-center p-4 animate"}),n.jsx("div",{className:"bg-gray-200 w-full h-10 flex justify-center items-center p-4 animate"}),n.jsx("div",{className:"bg-gray-200 w-full h-10 flex justify-center items-center p-4 animate"})]})}),ee=e=>{const[y,S]=u.useState(10),[v,d]=u.useState(1),[r,q]=u.useState(0),[N,B]=u.useState(0),[f,I]=u.useState(0),[w,H]=u.useState(),[A,C]=u.useState(!1),[R,x]=u.useState(!1),[P,T]=u.useState([]),[o,l]=u.useState(!1),[L,V]=u.useState(10),D=()=>{x(!1),l(!0),Object.keys(e==null?void 0:e.requestBody).length!==0&&typeof e.loader=="function"&&e.loader(!0),O.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:y,page:v},E()).then(t=>{var i,s,g,b,m,a,F,c,h,j;((i=t==null?void 0:t.data)==null?void 0:i.status)==!0?(e!=null&&e.getData&&(e==null||e.allData((s=t==null?void 0:t.data)==null?void 0:s.data)),T((b=(g=t==null?void 0:t.data)==null?void 0:g.data)==null?void 0:b.data),I((a=(m=t==null?void 0:t.data)==null?void 0:m.data)==null?void 0:a.total),q((c=(F=t==null?void 0:t.data)==null?void 0:F.data)==null?void 0:c.currentPage),B((j=(h=t==null?void 0:t.data)==null?void 0:h.data)==null?void 0:j.lastPage),x(!1)):(console.log("false error while getting list => ",t),x(!0))}).catch(t=>(console.log("error while getting list => ",t),x(!0))).finally(()=>{l(!1),Object.keys(e==null?void 0:e.requestBody).length!==0&&typeof e.loader=="function"&&e.loader(!1),x(!1)})},z=()=>{d(r+1)},G=()=>{d(r-1)},J=t=>{let i=parseInt(f/t),s=parseInt(f%t);if(s==0){i<r&&d(i),S(t);return}if(s!=0){i+1<r&&d(i+1),S(t);return}},K=()=>{d(1)},M=()=>{d(N)},Q=t=>{d(t)},U=t=>t==null?void 0:t.map((s,g)=>{var m;const b=(m=e==null?void 0:e.columns)==null?void 0:m.map((a,F)=>{var h,j;var c=s[a==null?void 0:a.accessor];if(a!=null&&a.option&&((h=a==null?void 0:a.option)==null?void 0:h.length)>0){const k=(j=a==null?void 0:a.option)==null?void 0:j.find(Y=>Y.hasOwnProperty(s[a==null?void 0:a.accessor]));k?c=k[s[a==null?void 0:a.accessor]]:c=s[a==null?void 0:a.accessor]}return(a==null?void 0:a.Header.toLowerCase())!="action"&&{[a==null?void 0:a.Header]:a!=null&&a.accessor?c:g+1}});return Object.assign({},...b)}),W=()=>{l(!0),C(!1),O.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:f},E()).then(t=>{var i,s,g;((i=t==null?void 0:t.data)==null?void 0:i.status)==!0&&(H(U((g=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:g.data)),X()),l(!1)}).catch(t=>{l(!1)})},X=()=>{C(!0)};return u.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(d(1),S(10),D())},[e==null?void 0:e.changeData]),u.useEffect(()=>{l(!0),D()},[v,y]),n.jsxs(n.Fragment,{children:[R&&n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Sorry! "}),n.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),n.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),A&&n.jsx(Z,{data:w}),o&&n.jsx($,{}),!o&&(P==null?void 0:P.length)>0?n.jsx("div",{className:"mb-10",children:n.jsx(_,{search:e==null?void 0:e.search,currentPage:r,lastPage:N,goFirst:K,goLast:M,count1:f,columns:e==null?void 0:e.columns,dataList:P,exportStatus:e==null?void 0:e.exportStatus,perPage:y,perPageC:J,totalCount:f,nextPage:z,prevPage:G,exportDataF:W,exportData:w,gotoPage:t=>Q(t),perPageData:L,setPerPageData:V})}):n.jsx(n.Fragment,{children:!o&&n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[n.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),n.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})};export{ee as default};
