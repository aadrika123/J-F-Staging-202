import{l as n,x as C,v as H,m as O,H as $,W as G,q as p,y as J,z as g,B as K,h as i,k as a,o as f,j as e,D as Q,M as P}from"./index-7349853a.js";const Z=()=>{var k,M,A;const[o,Y]=n.useState(),[S,m]=n.useState(!1),[d,U]=n.useState(),[w,D]=n.useState(),{notify:y}=n.useContext(C),[s,N]=n.useState(),[b,F]=n.useState(),[x,R]=n.useState(),{id:h}=H();O(),$("Water Demand Payment");const{api_waterApprovedApplicationDetails:E,api_waterListDemand:L,api_waterDemandCalculation:T,api_waterDemandPayment:B,header:u}=G();n.useEffect(()=>{W(),_()},[h]),n.useEffect(()=>{V()},[x,b]);const V=()=>{if(x==""||b=="")return N();m(!0);const r={consumerId:h,demandFrom:b,demandUpto:x};p.post(T,r,u).then(function(l){N(l.data.data),m(!1)}).catch(function(l){m(!1)})},W=()=>{m(!0),p.post(E,{id:h},u).then(function(r){Y(r.data.data),m(!1)}).catch(function(r){m(!1)})},_=()=>{p.post(L,{ConsumerId:h},u).then(r=>{U(r.data.data)}).catch(r=>{})},I=r=>{const l={consumerId:h,demandFrom:b,demandUpto:x,amount:s==null?void 0:s.totalPayAmount,paymentMode:r.paymentMode,remarks:r.remarks,chequeDate:r.cheque_dd_date,bankName:r.bankName,branchName:r.branchName,chequeNo:r.cheque_dd_no};p.post(B,l,u).then(c=>{var q;c.data.status?(_(),y("Demand Paid Successfully","success")):y((q=c==null?void 0:c.data)==null?void 0:q.message,"error")}).catch(c=>{y("Error while Demand payment","error")})},j=J({monthFrom:g().required("Require Field"),monthUpto:g().required("Require Field"),remarks:g().required("Require Field"),paymentMode:g().required("Require Field")}),t=K({enableReinitialize:!0,initialValues:{monthFrom:"",monthUpto:"",penalty:"",rebate:"",advanced:"",paymentMode:"",remarks:"",bankName:"",branchName:"",cheque_dd_no:"",cheque_dd_date:""},onSubmit:(r,l)=>{I(r)},validationSchema:j}),z=r=>{let l=r.target.name,c=r.target.value;l=="paymentMode"&&D(c),l=="monthFrom"&&F(c),l=="monthUpto"&&R(c),l=="paymentMode"&&(t.setFieldValue("bankName",""),t.setFieldValue("branchName",""),t.setFieldValue("cheque_dd_no",""),t.setFieldValue("cheque_dd_date",""))},v=(k=d==null?void 0:d.consumerDemands)==null?void 0:k.filter(r=>i(r.demand_upto,"YYYY-MM-DD").format("yy-MM").toString()>=i(b,"YYYY-MM-DD").format("yy-MM"));return a(f,{children:[S&&e(Q,{}),e("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-2 container mx-auto w-full",children:a("div",{className:"col-span-12 rounded-lg p-4",children:[e("div",{className:"p-4",children:a("div",{className:"",children:[a("h1",{className:"px-1 font-semibold font-serif  text-gray-500",children:[e(P,{className:"inline"})," Basic Details"]}),e("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-xl p-4",children:a("div",{className:"flex space-x-5 pl-4 ",children:[a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-sm",children:o!=null&&o.ulb_name?o==null?void 0:o.ulb_name:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"ULB Name"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:o!=null&&o.ward_name?o==null?void 0:o.ward_name:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:o!=null&&o.consumer_no?o==null?void 0:o.consumer_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Consumer No"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:o!=null&&o.connection_through?o==null?void 0:o.connection_through:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Connection Through"})]}),(o==null?void 0:o.connection_through)=="SAF"?a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:o!=null&&o.saf_no?o==null?void 0:o.saf_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"SAF No"})]}):a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:o!=null&&o.holding_no?o==null?void 0:o.holding_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Holding No"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:o!=null&&o.owner_char_type?o==null?void 0:o.owner_char_type:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]})]})})]})}),e(f,{children:a("div",{className:"mt-5 p-4",children:[a("h1",{className:"px-1 font-semibold font-serif text-gray-500",children:[e(P,{className:"inline"}),"Due Demand Details"]}),a("table",{className:"min-w-full leading-normal mt-2 bg-white rounded-lg shadow-xl p-4",children:[e("thead",{className:"font-bold text-left text-sm border text-gray-800 bg-white",children:a("tr",{children:[e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"#"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand From"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand Upto"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand Amount"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Penalty"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Connection Type"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Payable Amount "})]})}),e("tbody",{className:"text-sm",children:e(f,{children:(M=d==null?void 0:d.consumerDemands)==null?void 0:M.map((r,l)=>a("tr",{className:"bg-white shadow-xl border-b border-gray-200",children:[e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:l+1}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:r!=null&&r.demand_from?i(r==null?void 0:r.demand_from,"YYYY-MM-DD").format("DD-MMM-yy"):"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:r!=null&&r.demand_upto?i(r==null?void 0:r.demand_upto,"YYYY-MM-DD").format("DD-MMM-yy"):"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:r!=null&&r.balance_amount?r==null?void 0:r.balance_amount:"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:r!=null&&r.penalty?r==null?void 0:r.penalty:"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:r!=null&&r.connection_type?r==null?void 0:r.connection_type:"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:r!=null&&r.amount?"₹ "+(r==null?void 0:r.amount):"N/A"})]}))})})]})]})}),e("div",{className:"col-span-12 rounded-lg p-4",children:e("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-xl border border-y-gray-200 p-4",children:e("form",{onSubmit:t.handleSubmit,onChange:z,className:"p-4 relative",children:a("div",{className:"grid grid-cols-12",children:[a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Select Month From"]}),a("select",{...t.getFieldProps("monthFrom"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),(A=d==null?void 0:d.consumerDemands)==null?void 0:A.map((r,l)=>e("option",{value:r.demand_from,children:i(r.demand_from,"YYYY-MM-DD").format("MMM-yy")},l))]}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.monthFrom&&t.errors.monthFrom?t.errors.monthFrom:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Select Month Upto"]}),a("select",{...t.getFieldProps("monthUpto"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),v==null?void 0:v.map((r,l)=>e("option",{value:r.demand_upto,children:i(r.demand_upto,"YYYY-MM-DD").format("MMM-yy")},l))]}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.monthUpto&&t.errors.monthUpto?t.errors.monthUpto:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Total Demand"}),e("input",{...t.getFieldProps("amount"),value:(s==null?void 0:s.totalDemand)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.amount&&t.errors.amount?t.errors.amount:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Penalty"}),e("input",{...t.getFieldProps("penalty"),value:(s==null?void 0:s.totalPenalty)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.penalty&&t.errors.penalty?t.errors.penalty:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Rebate"}),e("input",{...t.getFieldProps("rebate"),value:(s==null?void 0:s.totalRebate)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.rebate&&t.errors.rebate?t.errors.rebate:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Advanced"}),e("input",{...t.getFieldProps("advanced"),value:(s==null?void 0:s.totalAdvance)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.advanced&&t.errors.advanced?t.errors.advanced:null})]}),e("div",{className:"form-group mb-4 col-span-12 md:col-span-6 md:px-4",children:a("p",{children:["Remain Advance : ",e("span",{className:"text-orange-700 font-semibold",children:(s==null?void 0:s.remaningAdvanceAmount)||0})]})}),e("div",{className:"form-group mb-4 col-span-12 md:col-span-6 md:px-4",children:a("p",{children:[" Payable Amount : ",e("span",{className:"text-green-700 font-semibold",children:s!=null&&s.totalPayAmount?"₹"+(s==null?void 0:s.totalPayAmount):0})]})}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Mode"]}),a("select",{...t.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"Cash",children:"Cash"}),e("option",{value:"Cheque",children:"Cheque"}),e("option",{value:"DD",children:"DD"}),e("option",{value:"online",children:"Online"})]}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.paymentMode&&t.errors.paymentMode?t.errors.paymentMode:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Remarks"]}),e("input",{...t.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.remarks&&t.errors.remarks?t.errors.remarks:null})]}),(w=="Cheque"||w=="DD")&&a(f,{children:[a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Bank Name"]}),e("input",{...t.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.bankName&&t.errors.bankName?t.errors.bankName:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Branch Name"]}),e("input",{...t.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.branchName&&t.errors.branchName?t.errors.branchName:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD No"]}),e("input",{...t.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.cheque_dd_no&&t.errors.cheque_dd_no?t.errors.cheque_dd_no:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD Date"]}),e("input",{...t.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:t.touched.cheque_dd_date&&t.errors.cheque_dd_date?t.errors.cheque_dd_date:null})]})]}),e("div",{className:"col-span-12"}),a("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:[e("div",{className:""}),e("div",{className:"md:pl-10 text-right",children:e("button",{type:"submit",className:" px-6 py-2.5 bg-green-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"Pay Tax"})})]})]})})})})]})})]})};export{Z as default};
