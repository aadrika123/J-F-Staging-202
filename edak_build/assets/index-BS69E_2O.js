import{a as fa,r as n,s as Na,j as a,C as ua,S as w,L as o,J as i,t as y,v as C,w as S,x as k,y as m,H as R,z as ga}from"./index-C7Qmp3X4.js";import{P as va}from"./index-D4AxPV9X.js";import{T as A,a as $,b as j,c as s,d as I,e as d}from"./table-2ZsI8_OD.js";import{P as E}from"./index-BmcDOBoc.js";import{S as B}from"./index-BKVyGoSq.js";import{d as ba,e as Fa,b as V,c as _}from"./tabs-Dyj5z4PL.js";import"./badge--fM6-KmL.js";import"./index-Cu2hPi9W.js";import"./circle-check-big-BWXbiUCR.js";import"./pagination-BG4fBVib.js";function Ta(){var J,O,U,W,q,K,M,Q,X,Y,Z,L,aa,ea,la,sa,da,ca,ra,na,xa,ha,ta,oa,ia,ja;const{user:c}=fa(),N=c==null?void 0:c._id,[x,p]=n.useState(1),[h,f]=n.useState(10),[u,v]=n.useState(""),[g,b]=n.useState(!0),[H,D]=n.useState(""),[F,T]=n.useState(`${c==null?void 0:c._id}`),[pa,z]=n.useState(""),[P,G]=n.useState(!1),l=Na({api:`${ga.getDraftFile}?page=${x}&limit=${h}&draft=${g}&createdBy=${F}`,key:"filesDraftList",value:[x,h],options:{enabled:!0}}),t=Na({api:`${ga.getFile}?page=${x}&limit=${h}&draft=${g}&createdBy=${F}&sendTo=${H}&receivedFrom=${pa}`,key:"filesList",value:[x,h],options:{enabled:!0}});return n.useEffect(()=>{(async()=>{G(!0);try{await t.refetch(),g&&await l.refetch()}catch(r){console.error("API call failed:",r)}finally{G(!1)}})()},[g,H,F,N]),a.jsx("main",{className:"grid items-start",children:a.jsxs(ba,{defaultValue:"DRAFT",className:"w-full",children:[a.jsxs("div",{className:"flex",children:[a.jsx(ua,{className:"flex-1 text-2xl font-bold",children:"File List"}),a.jsx("div",{className:"flex flex-1 justify-end",children:a.jsxs(Fa,{className:"flex gap-5",children:[a.jsx(a.Fragment,{children:(c==null?void 0:c.roleId)!==w&&a.jsx(V,{value:"DRAFT",onClick:()=>{b(!0),T(N)},children:"File Draft List"})}),(c==null?void 0:c.roleId)!==w&&a.jsx(V,{value:"RECIEVED",onClick:()=>{b(!1),T(""),z(""),D(N)},children:"File Received List"}),(c==null?void 0:c.roleId)!==w&&a.jsx(V,{value:"SENT",onClick:()=>{b(!1),D(""),T(""),z(N)},children:"File Sent List"})]})})]}),a.jsx(_,{value:"DRAFT",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(B,{search:u,setSearch:v,refetch:l.refetch,isFetching:l.isLoading})}),a.jsx("div",{children:a.jsx(o,{to:"/e-dak/dashboard/create-file",children:a.jsx(i,{className:"bg-primary",onClick:()=>{},children:"Create New File"})})})]}),a.jsxs(y,{children:[a.jsx(C,{className:"px-7",children:a.jsxs(S,{children:["File Draft List(",(J=l.data)==null?void 0:J.totalDocs,")"]})}),a.jsx(k,{children:P?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(m,{})}):a.jsx(a.Fragment,{children:(O=l==null?void 0:l.data)!=null&&O.data&&l.data.data.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(A,{children:[a.jsx($,{children:a.jsxs(j,{children:[a.jsx(s,{className:"",children:"S No"}),a.jsx(s,{className:"",children:"Ref No"}),a.jsx(s,{className:"",children:"Title"}),a.jsx(s,{className:"",children:"Created By"}),a.jsx(s,{className:"",children:"Sent To"}),a.jsx(s,{className:"",children:"Department"}),a.jsx(s,{className:"",children:"Date"}),a.jsx(s,{className:"",children:"Status"}),a.jsx(s,{children:"Action"})]})}),a.jsx(I,{children:l.data.data.map((e,r)=>a.jsxs(j,{children:[a.jsx(d,{children:r+1}),a.jsx(d,{children:e==null?void 0:e.fileRefNo}),a.jsx(d,{children:e==null?void 0:e.title}),a.jsx(d,{children:e==null?void 0:e.receivedFromFullName}),a.jsx(d,{children:e==null?void 0:e.sendToFullName}),a.jsx(d,{children:e==null?void 0:e.department}),a.jsx(d,{children:e==null?void 0:e.createdAt.split("T")[0]}),a.jsx(d,{className:"font-bold text-green-500",children:e==null?void 0:e.sendToFullName}),a.jsx(d,{children:a.jsx(o,{to:`/e-dak/dashboard/file-workflow-details?refNo=${e==null?void 0:e.fileRefNo}&page=draft`,children:a.jsx(i,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},r))})]}),a.jsx(R,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(E,{page:x,perPage:h,totalPage:(W=(U=l==null?void 0:l.data)==null?void 0:U.pagination)==null?void 0:W.totalPages,hasNextPage:(K=(q=l==null?void 0:l.data)==null?void 0:q.pagination)==null?void 0:K.hasNextPage,hasPrevPage:(Q=(M=l==null?void 0:l.data)==null?void 0:M.pagination)==null?void 0:Q.hasPrevPage,setPage:p,setPerPage:f})})]}):a.jsx("div",{className:"text-center",children:"No Data Available"})})})]})]})}),a.jsx(_,{value:"SENT",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(B,{search:u,setSearch:v,refetch:t.refetch,isFetching:t.isLoading})}),a.jsx("div",{children:a.jsx(o,{to:"/e-dak/dashboard/create-file",children:a.jsx(i,{className:"bg-primary",onClick:()=>{},children:"Create New FIle"})})})]}),a.jsxs(y,{children:[a.jsx(C,{className:"px-7",children:a.jsxs(S,{children:["File Sent List (",(Y=(X=t.data)==null?void 0:X.data)==null?void 0:Y.totalDocs,")"]})}),a.jsx(k,{children:P?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(m,{})}):a.jsx(a.Fragment,{children:(Z=l==null?void 0:l.data)!=null&&Z.data&&l.data.data.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(A,{children:[a.jsx($,{children:a.jsxs(j,{children:[a.jsx(s,{className:"",children:"S No"}),a.jsx(s,{className:"",children:"Ref No"}),a.jsx(s,{className:"",children:"Title"}),a.jsx(s,{className:"",children:"Created By"}),a.jsx(s,{className:"",children:"Sent To"}),a.jsx(s,{className:"",children:"Department"}),a.jsx(s,{className:"",children:"Date"}),a.jsx(s,{className:"",children:"Status"}),a.jsx(s,{children:"Action"})]})}),a.jsx(I,{children:l.data.data.map((e,r)=>a.jsxs(j,{children:[a.jsx(d,{children:r+1}),a.jsx(d,{children:e==null?void 0:e.fileRefNo}),a.jsx(d,{children:e==null?void 0:e.title}),a.jsx(d,{children:e==null?void 0:e.receivedFromFullName}),a.jsx(d,{children:e==null?void 0:e.sendToFullName}),a.jsx(d,{children:e==null?void 0:e.department}),a.jsx(d,{children:e==null?void 0:e.createdAt.split("T")[0]}),a.jsx(d,{className:"font-bold text-green-500",children:e==null?void 0:e.sendToFullName}),a.jsx(d,{children:a.jsx(o,{to:`/e-dak/dashboard/file-workflow-details?refNo=${e==null?void 0:e.fileRefNo}&page=draft`,children:a.jsx(i,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},r))})]}),a.jsx(R,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(E,{page:x,perPage:h,totalPage:(aa=(L=l==null?void 0:l.data)==null?void 0:L.pagination)==null?void 0:aa.totalPages,hasNextPage:(la=(ea=l==null?void 0:l.data)==null?void 0:ea.pagination)==null?void 0:la.hasNextPage,hasPrevPage:(da=(sa=l==null?void 0:l.data)==null?void 0:sa.pagination)==null?void 0:da.hasPrevPage,setPage:p,setPerPage:f})})]}):a.jsx("div",{className:"text-center",children:"No Data Available"})})})]})]})}),a.jsx(_,{value:"RECIEVED",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(B,{search:u,setSearch:v,refetch:t.refetch,isFetching:t.isLoading})}),a.jsx("div",{children:a.jsx(o,{to:"/e-dak/dashboard/create-file",children:a.jsx(i,{className:"bg-primary",onClick:()=>{},children:"Create New FIle"})})})]}),a.jsxs(y,{children:[a.jsx(C,{className:"px-7",children:a.jsxs(S,{children:["File Received List (",(ra=(ca=t.data)==null?void 0:ca.data)==null?void 0:ra.totalDocs,")"]})}),a.jsx(k,{children:P?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(m,{})}):a.jsx(a.Fragment,{children:(na=l==null?void 0:l.data)!=null&&na.data&&l.data.data.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(A,{children:[a.jsx($,{children:a.jsxs(j,{children:[a.jsx(s,{className:"",children:"S No"}),a.jsx(s,{className:"",children:"Ref No"}),a.jsx(s,{className:"",children:"Title"}),a.jsx(s,{className:"",children:"Created By"}),a.jsx(s,{className:"",children:"Sent To"}),a.jsx(s,{className:"",children:"Department"}),a.jsx(s,{className:"",children:"Date"}),a.jsx(s,{className:"",children:"Status"}),a.jsx(s,{children:"Action"})]})}),a.jsx(I,{children:l.data.data.map((e,r)=>a.jsxs(j,{children:[a.jsx(d,{children:r+1}),a.jsx(d,{children:e==null?void 0:e.fileRefNo}),a.jsx(d,{children:e==null?void 0:e.title}),a.jsx(d,{children:e==null?void 0:e.receivedFromFullName}),a.jsx(d,{children:e==null?void 0:e.sendToFullName}),a.jsx(d,{children:e==null?void 0:e.department}),a.jsx(d,{children:e==null?void 0:e.createdAt.split("T")[0]}),a.jsx(d,{className:"font-bold text-green-500",children:e==null?void 0:e.sendToFullName}),a.jsx(d,{children:a.jsx(o,{to:`/e-dak/dashboard/file-workflow-details?refNo=${e==null?void 0:e.fileRefNo}&page=draft`,children:a.jsx(i,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},r))})]}),a.jsx(R,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(E,{page:x,perPage:h,totalPage:(ha=(xa=l==null?void 0:l.data)==null?void 0:xa.pagination)==null?void 0:ha.totalPages,hasNextPage:(oa=(ta=l==null?void 0:l.data)==null?void 0:ta.pagination)==null?void 0:oa.hasNextPage,hasPrevPage:(ja=(ia=l==null?void 0:l.data)==null?void 0:ia.pagination)==null?void 0:ja.hasPrevPage,setPage:p,setPerPage:f})})]}):a.jsx("div",{className:"text-center",children:"No Data Available"})})})]})]})})]})})}function Ia(){return a.jsx(va,{title:"",subTitle:"",children:a.jsx("div",{className:"pb-12",children:a.jsx(Ta,{})})})}export{Ia as default};
