import{j as e}from"../vendor/data-layer-CuYvUO5a.js";import{d as a,r as t}from"./router-qp3icywG.js";import{a as r}from"./useCustomQuery-Ckq4GHs7.js";import{u as i,a as s,B as n}from"../assets/index-DxhtFciF.js";import"../vendor/react-core-HnKmhvXM.js";import"./radix-overlays-D0gjv8DZ.js";import"./radix-forms-BZOWgBNM.js";import"./radix-core-Bbsnxr-s.js";import"../vendor/styling-Cj_bvvWu.js";import"./ui-components-DbfDOA1C.js";import"./utils-Chh2F0W5.js";function o(){const{ePramaan:o,loginWithEPramaan:c}=i(),l=a(),d=new URLSearchParams(window.location.search).get("code"),{data:m,isFetching:x,error:f}=r({api:s?.ePramanRedirect,key:"redirectEpramaan",config:{type:"citizen-page",code:d,nonce:o?.nonce,codeVerifier:o?.codeVerifier},value:[d],options:{enabled:!!d}});return t.useEffect(()=>{(async()=>{m&&!x&&(m?.status?await c(m):l("/citizen-page"))})()},[m,x,c,l]),t.useEffect(()=>{f&&!x&&l("/citizen-page")},[f,x,l]),x?e.jsx("div",{className:"fixed inset-0 z-[9999] flex justify-center items-center bg-gray-800 bg-opacity-70",children:e.jsxs("div",{className:"flex flex-col items-center gap-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-500 to-orange-400 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-3xl font-bold text-white",children:"e"})}),e.jsxs("div",{className:"text-white",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-500 to-orange-400 bg-clip-text text-transparent",children:"e-Pramaan"}),e.jsx("p",{className:"text-sm opacity-90",children:"A National Single Sign On"})]})]}),e.jsx("div",{className:"w-15 h-15 border-4 border-white border-opacity-20 border-l-orange-500 rounded-full animate-spin"}),e.jsx("div",{className:"text-white text-lg animate-pulse",children:"Loading..."})]})}):e.jsx("div",{className:"flex flex-col h-28",children:e.jsx("div",{className:"flex flex-col flex-1 items-center justify-center",children:e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(n,{color:"blue",onClick:()=>l("/citizen"),children:"Go back to E-Praman Login"})})})})}export{o as default};
