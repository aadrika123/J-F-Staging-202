var nt=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var i=(s,t,e)=>(nt(s,t,"read from private field"),e?e.call(s):t.get(s)),o=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},u=(s,t,e,r)=>(nt(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);var d=(s,t,e)=>(nt(s,t,"access private method"),e);import{S as Qt,s as X,t as Kt,v as Ot,w as St,x as Bt,y as kt,z as qt,A as Et,D as Z,E as wt,F as Wt,G as Ut,H as tt,u as Ht,j as K,J as _t}from"./index-CJanrnS1.js";import{r as p}from"./router-DLL89Qev.js";var v,c,k,y,M,D,O,q,T,A,Q,U,w,L,P,B,W,at,H,ot,_,ht,z,ut,G,ct,V,lt,$,dt,Y,Pt,It,zt=(It=class extends Qt{constructor(t,e){super();o(this,P);o(this,W);o(this,H);o(this,_);o(this,z);o(this,G);o(this,V);o(this,$);o(this,Y);o(this,v,void 0);o(this,c,void 0);o(this,k,void 0);o(this,y,void 0);o(this,M,void 0);o(this,D,void 0);o(this,O,void 0);o(this,q,void 0);o(this,T,void 0);o(this,A,void 0);o(this,Q,void 0);o(this,U,void 0);o(this,w,void 0);o(this,L,new Set);this.options=e,u(this,v,t),u(this,O,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,c).addObserver(this),xt(i(this,c),this.options)?d(this,P,B).call(this):this.updateResult(),d(this,z,ut).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ft(i(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ft(i(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,G,ct).call(this),d(this,V,lt).call(this),i(this,c).removeObserver(this)}setOptions(t,e){const r=this.options,n=i(this,c);if(this.options=i(this,v).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");d(this,$,dt).call(this),i(this,c).setOptions(this.options),r._defaulted&&!X(this.options,r)&&i(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,c),observer:this});const h=this.hasListeners();h&&Ft(i(this,c),n,this.options,r)&&d(this,P,B).call(this),this.updateResult(e),h&&(i(this,c)!==n||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&d(this,W,at).call(this);const a=d(this,H,ot).call(this);h&&(i(this,c)!==n||this.options.enabled!==r.enabled||a!==i(this,w))&&d(this,_,ht).call(this,a)}getOptimisticResult(t){const e=i(this,v).getQueryCache().build(i(this,v),t),r=this.createResult(e,t);return Vt(this,r)&&(u(this,y,r),u(this,D,this.options),u(this,M,i(this,c).state)),r}getCurrentResult(){return i(this,y)}trackResult(t,e){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e==null||e(n),t[n])})}),r}trackProp(t){i(this,L).add(t)}getCurrentQuery(){return i(this,c)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=i(this,v).defaultQueryOptions(t),r=i(this,v).getQueryCache().build(i(this,v),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return d(this,P,B).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,y)))}createResult(t,e){var Ct;const r=i(this,c),n=this.options,h=i(this,y),a=i(this,M),f=i(this,D),S=t!==r?t.state:i(this,k),{state:b}=t;let l={...b},yt=!1,C;if(e._optimisticResults){const R=this.hasListeners(),rt=!R&&xt(t,e),jt=R&&Ft(t,r,e,n);(rt||jt)&&(l={...l,...qt(b.data,t.options)}),e._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:vt,errorUpdatedAt:mt,status:I}=l;if(e.select&&l.data!==void 0)if(h&&l.data===(a==null?void 0:a.data)&&e.select===i(this,q))C=i(this,T);else try{u(this,q,e.select),C=e.select(l.data),C=Et(h==null?void 0:h.data,C,e),u(this,T,C),u(this,O,null)}catch(R){u(this,O,R)}else C=l.data;if(e.placeholderData!==void 0&&C===void 0&&I==="pending"){let R;if(h!=null&&h.isPlaceholderData&&e.placeholderData===(f==null?void 0:f.placeholderData))R=h.data;else if(R=typeof e.placeholderData=="function"?e.placeholderData((Ct=i(this,A))==null?void 0:Ct.state.data,i(this,A)):e.placeholderData,e.select&&R!==void 0)try{R=e.select(R),u(this,O,null)}catch(rt){u(this,O,rt)}R!==void 0&&(I="success",C=Et(h==null?void 0:h.data,R,e),yt=!0)}i(this,O)&&(vt=i(this,O),C=i(this,T),mt=Date.now(),I="error");const et=l.fetchStatus==="fetching",st=I==="pending",it=I==="error",gt=st&&et,Rt=C!==void 0;return{status:I,fetchStatus:l.fetchStatus,isPending:st,isSuccess:I==="success",isError:it,isInitialLoading:gt,isLoading:gt,data:C,dataUpdatedAt:l.dataUpdatedAt,error:vt,errorUpdatedAt:mt,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>S.dataUpdateCount||l.errorUpdateCount>S.errorUpdateCount,isFetching:et,isRefetching:et&&!st,isLoadingError:it&&!Rt,isPaused:l.fetchStatus==="paused",isPlaceholderData:yt,isRefetchError:it&&Rt,isStale:bt(t,e),refetch:this.refetch}}updateResult(t){const e=i(this,y),r=this.createResult(i(this,c),this.options);if(u(this,M,i(this,c).state),u(this,D,this.options),i(this,M).data!==void 0&&u(this,A,i(this,c)),X(r,e))return;u(this,y,r);const n={},h=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,f=typeof a=="function"?a():a;if(f==="all"||!f&&!i(this,L).size)return!0;const g=new Set(f??i(this,L));return this.options.throwOnError&&g.add("error"),Object.keys(i(this,y)).some(S=>{const b=S;return i(this,y)[b]!==e[b]&&g.has(b)})};(t==null?void 0:t.listeners)!==!1&&h()&&(n.listeners=!0),d(this,Y,Pt).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,z,ut).call(this)}},v=new WeakMap,c=new WeakMap,k=new WeakMap,y=new WeakMap,M=new WeakMap,D=new WeakMap,O=new WeakMap,q=new WeakMap,T=new WeakMap,A=new WeakMap,Q=new WeakMap,U=new WeakMap,w=new WeakMap,L=new WeakMap,P=new WeakSet,B=function(t){d(this,$,dt).call(this);let e=i(this,c).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Kt)),e},W=new WeakSet,at=function(){if(d(this,G,ct).call(this),Ot||i(this,y).isStale||!St(this.options.staleTime))return;const e=Bt(i(this,y).dataUpdatedAt,this.options.staleTime)+1;u(this,Q,setTimeout(()=>{i(this,y).isStale||this.updateResult()},e))},H=new WeakSet,ot=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,c)):this.options.refetchInterval)??!1},_=new WeakSet,ht=function(t){d(this,V,lt).call(this),u(this,w,t),!(Ot||this.options.enabled===!1||!St(i(this,w))||i(this,w)===0)&&u(this,U,setInterval(()=>{(this.options.refetchIntervalInBackground||kt.isFocused())&&d(this,P,B).call(this)},i(this,w)))},z=new WeakSet,ut=function(){d(this,W,at).call(this),d(this,_,ht).call(this,d(this,H,ot).call(this))},G=new WeakSet,ct=function(){i(this,Q)&&(clearTimeout(i(this,Q)),u(this,Q,void 0))},V=new WeakSet,lt=function(){i(this,U)&&(clearInterval(i(this,U)),u(this,U,void 0))},$=new WeakSet,dt=function(){const t=i(this,v).getQueryCache().build(i(this,v),this.options);if(t===i(this,c))return;const e=i(this,c);u(this,c,t),u(this,k,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Y=new WeakSet,Pt=function(t){Z.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(i(this,y))}),i(this,v).getQueryCache().notify({query:i(this,c),type:"observerResultsUpdated"})})},It);function Gt(s,t){return t.enabled!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function xt(s,t){return Gt(s,t)||s.state.data!==void 0&&ft(s,t,t.refetchOnMount)}function ft(s,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(s):e;return r==="always"||r!==!1&&bt(s,t)}return!1}function Ft(s,t,e,r){return(s!==t||r.enabled===!1)&&(!e.suspense||s.state.status!=="error")&&bt(s,e)}function bt(s,t){return t.enabled!==!1&&s.isStaleByTime(t.staleTime)}function Vt(s,t){return!X(s.getCurrentResult(),t)}var x,F,m,E,j,N,J,pt,Mt,$t=(Mt=class extends Qt{constructor(t,e){super();o(this,j);o(this,J);o(this,x,void 0);o(this,F,void 0);o(this,m,void 0);o(this,E,void 0);u(this,x,t),this.setOptions(e),this.bindMethods(),d(this,j,N).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=i(this,x).defaultMutationOptions(t),X(this.options,e)||i(this,x).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,m),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&wt(e.mutationKey)!==wt(this.options.mutationKey)?this.reset():((r=i(this,m))==null?void 0:r.state.status)==="pending"&&i(this,m).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,m))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,j,N).call(this),d(this,J,pt).call(this,t)}getCurrentResult(){return i(this,F)}reset(){var t;(t=i(this,m))==null||t.removeObserver(this),u(this,m,void 0),d(this,j,N).call(this),d(this,J,pt).call(this)}mutate(t,e){var r;return u(this,E,e),(r=i(this,m))==null||r.removeObserver(this),u(this,m,i(this,x).getMutationCache().build(i(this,x),this.options)),i(this,m).addObserver(this),i(this,m).execute(t)}},x=new WeakMap,F=new WeakMap,m=new WeakMap,E=new WeakMap,j=new WeakSet,N=function(){var e;const t=((e=i(this,m))==null?void 0:e.state)??Wt();u(this,F,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},J=new WeakSet,pt=function(t){Z.batch(()=>{var e,r,n,h,a,f,g,S;if(i(this,E)&&this.hasListeners()){const b=i(this,F).variables,l=i(this,F).context;(t==null?void 0:t.type)==="success"?((r=(e=i(this,E)).onSuccess)==null||r.call(e,t.data,b,l),(h=(n=i(this,E)).onSettled)==null||h.call(n,t.data,null,b,l)):(t==null?void 0:t.type)==="error"&&((f=(a=i(this,E)).onError)==null||f.call(a,t.error,b,l),(S=(g=i(this,E)).onSettled)==null||S.call(g,void 0,t.error,b,l))}this.listeners.forEach(b=>{b(i(this,F))})})},Mt),Dt=p.createContext(!1),Jt=()=>p.useContext(Dt);Dt.Provider;function Nt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Xt=p.createContext(Nt()),Yt=()=>p.useContext(Xt);function Tt(s,t){return typeof s=="function"?s(...t):!!s}function Zt(){}var te=(s,t)=>{(s.suspense||s.throwOnError)&&(t.isReset()||(s.retryOnMount=!1))},ee=s=>{p.useEffect(()=>{s.clearReset()},[s])},se=({result:s,errorResetBoundary:t,throwOnError:e,query:r})=>s.isError&&!t.isReset()&&!s.isFetching&&r&&Tt(e,[s.error,r]),ie=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},re=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,ne=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function ae(s,t,e){const r=Ut(),n=Jt(),h=Yt(),a=r.defaultQueryOptions(s);a._optimisticResults=n?"isRestoring":"optimistic",ie(a),te(a,h),ee(h);const[f]=p.useState(()=>new t(r,a)),g=f.getOptimisticResult(a);if(p.useSyncExternalStore(p.useCallback(S=>{const b=n?()=>{}:f.subscribe(Z.batchCalls(S));return f.updateResult(),b},[f,n]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),p.useEffect(()=>{f.setOptions(a,{listeners:!1})},[a,f]),re(a,g))throw ne(a,f,h);if(se({result:g,errorResetBoundary:h,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw g.error;return a.notifyOnChangeProps?g:f.trackResult(g)}function At(s,t){return ae(s,zt)}function Lt(s,t){const e=Ut(),[r]=p.useState(()=>new $t(e,s));p.useEffect(()=>{r.setOptions(s)},[r,s]);const n=p.useSyncExternalStore(p.useCallback(a=>r.subscribe(Z.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),h=p.useCallback((a,f)=>{r.mutate(a,f).catch(Zt)},[r]);if(n.error&&Tt(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:h,mutateAsync:n.mutate}}const oe=async(s,t)=>(await tt.get(s,{...t})).data;function ye({key:s,api:t,options:e,value:r,config:n}){return At({queryKey:[s??t,...r??[]],queryFn:async()=>oe(t,n),refetchOnReconnect:"always",refetchOnWindowFocus:!1,...e})}function ve({key:s,api:t,options:e,value:r,config:n}){return At({queryKey:[s??t,...r??[]],queryFn:async()=>(await tt.post(t,{...n})).data,refetchOnReconnect:"always",refetchOnWindowFocus:!1,...e})}const he=(s,t)=>tt.post(s,t),me=({options:s})=>Lt({mutationFn:({api:t,data:e})=>he(t,e),...s}),ue=(s,t)=>tt.get(s,t),ge=({options:s})=>Lt({mutationFn:({api:t,data:e})=>ue(t,e),...s});function ce(s=""){const{setTitle:t}=Ht();return p.useEffect(()=>{t(s)},[s]),null}const le=p.forwardRef(({children:s,title:t="",meta:e,...r},n)=>(ce(t),p.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t]),K.jsxs(K.Fragment,{children:[K.jsxs(_t,{children:[K.jsx("title",{children:`${t} | Parking`}),e]}),K.jsx("div",{ref:n,...r,children:s})]}))),Re=le;export{Re as P,ge as a,ve as b,ye as c,me as u};
