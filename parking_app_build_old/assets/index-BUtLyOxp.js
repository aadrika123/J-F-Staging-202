import{j as e,B as f,p as u,C as N,_ as i}from"./index-BnXRY-Ni.js";import{P as v}from"./index-Dc-eSCVp.js";import{u as g,b as _}from"./useCustomQuery-B_kJ_PS9.js";import{h as x}from"./moment-BjLXg0w5.js";import{u as k,b}from"./router-DLL89Qev.js";import"./axios-DmypytPv.js";import"./headlessui-DXpdh5LM.js";function H(){var n,o;const h=k(),p=b(),j=g({}),t=new URLSearchParams(p.search),s=t.get("receipt_no"),l=t.get("out_time"),y=t.get("in_time"),c=t.get("vehicle_type"),r=_({api:`${u.calculateAmount}`,key:"calculateAmount",config:{receipt_no:s,out_time:l},options:{enabled:!!s}}),w=async()=>{var m,d;if(await N("Are you sure you want to pay ticket?",{title:"Please Confirm",subTitle:"You will be redirected to receipt page",buttonTitle:"Yes, I am sure"}))try{const a=await j.mutateAsync({api:(m=u)==null?void 0:m.outTicket,data:{receipt_no:s,out_time:l,out_amount:(d=r.data)==null?void 0:d.data.amount,payment_mode:"cash"}});a!=null&&a.data?(i.success("Successfully Paid"),h(`/parking-app/out-receipt?receipt_no=${s}`,{replace:!0})):i.error("Failed to pay ticket")}catch{i.error("Failed to pay ticket")}};return e.jsxs(v,{title:"Generate Ticket",children:[e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center  flex-col gap-2",children:e.jsx("div",{className:"flex flex-1 justify-center items-center flex-row py-4",children:e.jsxs("div",{className:"flex flex-1 justify-center items-center flex-row gap-6",children:[e.jsxs("div",{className:"flex justify-center items-center flex-row gap-1",children:[e.jsx("input",{type:"radio",id:"twoWheeler",name:"vehicleType",value:"two_wheeler",className:"w-5 h-5",checked:c==="two_wheeler",onChange:()=>{}}),e.jsx("label",{htmlFor:"twoWheeler",className:"text-white",children:"Two Wheeler"})]}),e.jsxs("div",{className:"flex justify-center items-center flex-row gap-1",children:[e.jsx("input",{type:"radio",id:"fourWheeler",name:"vehicleType",value:"four_wheeler",className:"w-5 h-5",checked:c==="four_wheeler",onChange:()=>{}}),e.jsx("label",{htmlFor:"fourWheeler",className:"text-white",children:"Four Wheeler"})]})]})})})}),e.jsxs("div",{className:"bg-white py-4",children:[e.jsxs("div",{className:"flex justify-center items-center flex-col gap-2",children:[e.jsx("div",{className:"flex flex-1 justify-center items-center flex-row py-4 mt-8",children:e.jsx("div",{className:"flex flex-col mt-2",children:e.jsxs("div",{className:"flex flex-1 flex-row py-6",children:[e.jsx("h1",{className:"font-bold",style:{fontSize:"2rem"},children:"â‚¹"}),e.jsx("div",{className:"flex justify-center items-center flex-row text-4xl",children:e.jsx("h1",{className:"font-semibold",style:{fontSize:"4.5rem"},children:((o=(n=r.data)==null?void 0:n.data)==null?void 0:o.amount)??0})})]})})}),e.jsx("div",{className:"flex justify-center items-center flex-row",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"flex flex-row",children:e.jsxs("h1",{className:"font-semibold text-gray-500",children:["Duration:"," ",x(l,"HH:mm").diff(x(y,"HH:mm"),"minutes")," ","mins"]})})})})]}),e.jsxs("div",{className:"px-8 mt-6 w-full flex gap-3",children:[e.jsx(f,{onClick:w,variant:"default",className:"h-12 mt-6 w-full rounded-sm",size:"lg",children:"Cash"}),e.jsx(f,{variant:"default",className:"h-12 mt-6 w-full rounded-sm",size:"lg",children:"Online"})]})]})]})}export{H as default};
