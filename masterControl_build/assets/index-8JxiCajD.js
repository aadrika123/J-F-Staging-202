import{r as t,j as e,m as T,_ as F,B as O}from"./index-Bs1F9iUM.js";import{a as ve}from"./index-BpROZVKR.js";import{C as se,d as ae,b as he,a as Se,c as Ie}from"./card-CSz_dOYV.js";import{S as W,a as te,T as le,b as ne,c as H,d as V,e as de,f as D}from"./Spinner-BF75C_xA.js";import{u as J,b as U,a as Pe}from"./useCustomQuery-BteEXXuU.js";import{a as Y,o as G,F as Q,S as je,B as re,c as X,b as A}from"./SelectField-r_nDzxb3.js";import"./input-ChiS0aSI.js";import{L as Me}from"./label-DPJ12QZo.js";import{F as oe,a as we,P as ce,b as ue,D as ge,c as fe,d as Ne,X as be}from"./dialog-BMsqYB0e.js";import{R as z}from"./RHFTextField-CEF_SS4x.js";import{g as K}from"./services-KQnp_8oA.js";import{D as ie}from"./index-CIXe5y_c.js";import{T as Ce,a as _e,b as Le,c as pe,d as Ee,e as ke,f as me,g as xe}from"./tabs-duDlaNnP.js";import"./createLucideIcon-7P1lNL3O.js";const Te=X().shape({menuName:A().required("menu name is required"),serial:A(),route:A(),parentId:A()});function Ae({open:s,setOpen:E,title:R,edit:n,setEdit:d,menuMasterList:w,moduleList:b,id:i,paginatedMenuList:v,menuId:y,editData:c}){var u,k,_,M,L,B;const C=J({}),g=Y({defaultValues:{menuName:"",serial:"",route:""},resolver:G(Te)}),{reset:f}=g;t.useEffect(()=>{s&&f(n&&i?c?{menuName:c.menu_string||"",serial:c.serial||"",route:c.route||"",parentId:c.parent_id||""}:{menuName:"",serial:"",route:"",parentId:""}:{menuName:"",serial:"",route:"",parentId:""})},[s,n,i,f,c]);const N=async o=>{var q,m,P,x,r;try{const p=n&&i?{...o,moduleId:i,id:y}:{...o,moduleId:i},h=n?(q=T)==null?void 0:q.editMenuDetailsByModule:(m=T)==null?void 0:m.addMenuByModule,a=await C.mutateAsync({api:h,data:p});(P=a==null?void 0:a.data)!=null&&P.status?(F.success((x=a==null?void 0:a.data)==null?void 0:x.message),E(!1),d(!1),w.refetch(),l.refetch()):F.error((r=a==null?void 0:a.data)==null?void 0:r.message)}catch(p){F.error(K(p))}};console.log("paginatedMenuList",v),console.log("paginatedMenuList",i),console.log("paginatedMenuList",y);const l=U({api:(u=T)==null?void 0:u.parentMenuList,key:"parentMenuListByModule",config:{moduleId:String(i)},options:{enabled:!0}}),S=U({api:(k=T)==null?void 0:k.workFlowByModule,key:"getWorkFlowByModule",config:{moduleId:String(i)},options:{enabled:!0}});return console.log(c),e.jsx(ie,{open:s,setOpen:E,title:R,setEdit:d,edit:n,children:e.jsx(Q,{methods:g,onSubmit:g.handleSubmit(N),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(je,{label:"Parent Menu Name",name:"parentId",data:((M=(_=l==null?void 0:l.data)==null?void 0:_.data)==null?void 0:M.map(o=>({label:String(o==null?void 0:o.menu_string),value:String(o==null?void 0:o.id)})))||[]})}),e.jsx("div",{children:e.jsx(z,{label:"Menu Name",name:"menuName",placeholder:"Enter menu name"})}),e.jsx("div",{children:e.jsx(z,{label:"Menu Route",name:"route",placeholder:"Enter menu url "})}),e.jsx("div",{children:e.jsx(z,{label:"Serial No.",name:"serial",placeholder:"Enter Serial No."})}),e.jsx("div",{children:e.jsx(je,{label:e.jsxs(e.Fragment,{children:["Workflow ",e.jsx("span",{className:"text-sm",children:"(select module to get workflow list)"})]}),name:"workflowId",data:((B=(L=S==null?void 0:S.data)==null?void 0:L.data)==null?void 0:B.map(o=>({label:String(o==null?void 0:o.workflow_name),value:String(o==null?void 0:o.id)})))||[]})}),e.jsx(W,{}),e.jsx("div",{children:e.jsx(re,{isLoading:g.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:n?"Update":"Submit"})})]})})})}function Re({id:s,mid:E}){var m,P,x,r,p,h,a;const[R,n]=t.useState(1),[d,w]=t.useState(10),[b,i]=t.useState(!1),[v,y]=t.useState(!1),[c,C]=t.useState(null),[g,f]=t.useState(null),N=J({}),l=U({api:(m=T)==null?void 0:m.getMenuMasterList,key:"menuMasterList",options:{enabled:!0}}),S=U({api:(P=T)==null?void 0:P.getMenuDetailsByModule,key:"getMenuDetailsForEdit",config:{menuId:String(g)},value:[g],options:{enabled:!!g}}),u=U({api:(x=T)==null?void 0:x.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}}),k=((p=(r=l==null?void 0:l.data)==null?void 0:r.data)==null?void 0:p.filter(I=>(I==null?void 0:I.module_id)==s))??[],_=k.slice((R-1)*d,R*d),M=I=>n(I),L=I=>{w(I),n(1)},B=I=>{f(I),y(!0),i(!0)},o=U({api:(h=T)==null?void 0:h.parentMenuList,key:"parentMenuListByModule",config:{moduleId:String(s)},options:{enabled:!0}}),q=async()=>{var I,$,Z,ee;try{const j=await N.mutateAsync({api:(I=T)==null?void 0:I.deleteMenu,data:{id:c}});($=j==null?void 0:j.data)!=null&&$.status?(F.success((Z=j==null?void 0:j.data)==null?void 0:Z.message),i(!1),y(!1),C(null),l.refetch(),u.refetch(),o.refetch()):(F.error((ee=j==null?void 0:j.data)==null?void 0:ee.message),C(null))}catch(j){console.error("Error deleting menu:",j),alert("An error occurred while deleting the menu. Please try again.")}};return e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{type:"button",className:"flex items-center gap-2",onClick:()=>{f(null),y(!1),i(!0)},children:"Add Menu List"})}),e.jsx(Ae,{open:b,setOpen:i,title:v?"Edit Menu":"Add Menu",id:E,edit:v,setEdit:y,paginatedMenuList:_,refetch:l==null?void 0:l.refetch,menuMasterList:l,menuId:g,editData:(a=S==null?void 0:S.data)==null?void 0:a.data}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 h-screen ",children:e.jsxs("div",{className:"bg-white py-6 px-8 w-[30%] rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-center items-center text-lg font-medium mb-4",children:"Are you sure you want to delete?"}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-2",children:[e.jsx(O,{variant:"destructive",size:"sm",onClick:()=>q(),children:"Yes"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>C(null),children:"No"})]})]})}),e.jsx(se,{children:e.jsx(ae,{children:l.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):l.isError?e.jsx("div",{className:"text-center text-red-500",children:"Failed to load menu list. Please try again."}):e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ne,{children:e.jsxs(H,{children:[e.jsx(V,{children:"#"}),e.jsx(V,{children:"Parent Menu"}),e.jsx(V,{children:"Menu"}),e.jsx(V,{children:"Path"}),e.jsx(V,{children:"Serial"}),e.jsx(V,{children:"Actions"})]})}),e.jsx(de,{children:_==null?void 0:_.map((I,$)=>e.jsxs(H,{children:[e.jsx(D,{children:R*d-d+$+1}),e.jsx(D,{children:I.parentName||"#"}),e.jsx(D,{children:I.menu_string}),e.jsx(D,{children:I.route}),e.jsx(D,{children:I.serial}),e.jsxs(D,{children:[e.jsxs(O,{variant:"secondary",onClick:()=>B(I.id),children:[e.jsx(oe,{})," Edit"]}),e.jsx(O,{className:"ml-2",variant:"secondary",onClick:()=>C(I.id),children:e.jsx(we,{})})]})]},I.id))})]}),e.jsx(W,{className:"my-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(ce,{currentPage:R,totalItems:k.length,itemsPerPage:d,onPageChange:M,onItemsPerPageChange:L})})]})})})]})})}const Fe=X().shape({serviceName:A().required("menu name is required"),path:A().required("path is required")});function Ve({open:s,setOpen:E,title:R,edit:n,setEdit:d,serviceList:w,id:b,paginatedMenuList:i,moduleId:v}){const y=J({}),c=Y({defaultValues:{serviceName:""},resolver:G(Fe)}),{reset:C}=c;t.useEffect(()=>{var f,N;if(s)if(n&&b){const l=(N=(f=w==null?void 0:w.data)==null?void 0:f.data)==null?void 0:N.find(S=>S.id==b);l&&C({serviceName:l.service_name||"",path:l.path||""})}else C({serviceName:"",path:""})},[s,n,b,C]);const g=async f=>{var N,l,S,u,k;try{const _=n?(N=T)==null?void 0:N.updateServiceByModule:(l=T)==null?void 0:l.addServiceByModule,M=n?{...f,id:b}:{...f,moduleId:v},L=await y.mutateAsync({api:_,data:M});(S=L==null?void 0:L.data)!=null&&S.status?(F.success((u=L==null?void 0:L.data)==null?void 0:u.message),E(!1),d(!1),w.refetch()):F.error((k=L==null?void 0:L.data)==null?void 0:k.message)}catch(_){F.error(K(_))}};return console.log("paginatedMenuList",b),console.log(v),e.jsx(ie,{open:s,setOpen:E,title:R,setEdit:d,edit:n,children:e.jsx(Q,{methods:c,onSubmit:c.handleSubmit(g),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(z,{label:"Service Name",name:"serviceName",placeholder:"Enter menu name"})}),e.jsx("div",{children:e.jsx(z,{label:"service Path",name:"path",placeholder:"Enter path"})}),e.jsx(W,{}),e.jsx("div",{children:e.jsx(re,{isLoading:c.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const De=X().shape({ulbId:A(),moduleId:A(),complaintRefNo:A()});function qe(s){var m,P,x;const[E,R]=t.useState(1),[n,d]=t.useState(10),[w,b]=t.useState(!1),[i,v]=t.useState(""),[y,c]=t.useState(!1),[C,g]=t.useState(!1),[f,N]=t.useState(null),{moduleId:l}=s,[S,u]=t.useState(1),[k,_]=t.useState(10),M=100,L=r=>{u(r)},B=r=>{_(r),u(1)};console.log(s==null?void 0:s.id,"props id"),console.log(l,"props id"),Y({resolver:G(De),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}});const o=U({api:(m=T)==null?void 0:m.serviceList,key:"serviceMasterList",config:{moduleId:s==null?void 0:s.mId},options:{enabled:!0}});console.log("the servicemId",s==null?void 0:s.mId);const q=r=>{N(r),g(!0)};return e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsx("div",{className:"flex justify-end ",children:e.jsx(O,{type:"button",className:"flex items-center gap-2",onClick:()=>{v(""),c(!1),b(!0)},children:"Add Service List"})})}),e.jsx(Ve,{open:w,setOpen:b,title:y?"Edit Service":"Add Service",id:i,edit:y,setEdit:c,moduleId:s==null?void 0:s.id,serviceList:o}),e.jsx(se,{children:e.jsx(ae,{children:o.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ne,{children:e.jsxs(H,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Service Name"}),e.jsx(V,{className:"",children:"Service Path"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(de,{children:(x=(P=o==null?void 0:o.data)==null?void 0:P.data)==null?void 0:x.map((r,p)=>e.jsxs(H,{children:[e.jsx(D,{children:E*n-n+p+1}),e.jsx(D,{children:r==null?void 0:r.service_name}),e.jsx(D,{children:r==null?void 0:r.path}),e.jsxs(D,{children:[e.jsxs(O,{variant:"secondary",onClick:()=>{v(r==null?void 0:r.id),c(!0),b(!0)},children:[e.jsx(oe,{})," Edit"]}),e.jsxs(O,{onClick:()=>q(r),className:"ml-2",variant:"secondary",children:[e.jsx(ue,{})," View"]})]})]},r==null?void 0:r.id))})]}),e.jsx(W,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(ce,{currentPage:S,totalItems:M,itemsPerPage:k,onPageChange:L,onItemsPerPageChange:B})})]})})})]})})}const $e=X().shape({module_name:A().required("module name is required"),module_id:A().required("Module ID is required"),module_url:A().required("Module URL is required")});function Be({open:s,setOpen:E,title:R,edit:n,setEdit:d,serviceList:w,moduleList:b,id:i}){const v=J({}),y=Y({defaultValues:{module_name:"",module_id:"",module_url:""},resolver:G($e)}),{reset:c}=y;t.useEffect(()=>{var g,f;if(s)if(n&&i){const N=(f=(g=b==null?void 0:b.data)==null?void 0:g.data)==null?void 0:f.find(l=>l.id==i);N&&c({module_name:N.module_name||"",module_id:N.id||"",module_url:N.url||""})}else c({module_name:"",module_id:"",module_url:""})},[s,n,i,b,c]);const C=async g=>{var f,N,l;try{const S=n?"EditModuleList":"AddmoduleList",u=await v.mutateAsync({api:S,data:g});(f=u==null?void 0:u.data)!=null&&f.success?(F.success((N=u==null?void 0:u.data)==null?void 0:N.message),E(!1),d(!1),w.refetch()):F.error((l=u==null?void 0:u.data)==null?void 0:l.message)}catch(S){F.error(K(S))}};return e.jsx(ie,{open:s,setOpen:E,title:R,setEdit:d,edit:n,children:e.jsx(Q,{methods:y,onSubmit:y.handleSubmit(C),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(z,{label:"Module Name",name:"module_name",placeholder:"Enter module name"})}),e.jsx("div",{children:e.jsx(z,{label:"Module ID",name:"module_id",placeholder:"Enter module id "})}),e.jsx("div",{children:e.jsx(z,{label:"Module URL",name:"module_url",placeholder:"Enter module url "})}),e.jsx(W,{}),e.jsx("div",{children:e.jsx(re,{isLoading:y.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Oe=X().shape({menuRoleName:A().required("menu name is required")});function Ue({open:s,setOpen:E,title:R,edit:n,setEdit:d,id:w,menuRoleList:b,moduleId:i}){const v=J({}),y=Y({defaultValues:{menuRoleName:""},resolver:G(Oe)}),{reset:c}=y;console.log(i,"id"),t.useEffect(()=>{var g,f;if(s)if(n&&w){const N=(f=(g=b==null?void 0:b.data)==null?void 0:g.data)==null?void 0:f.find(l=>l.id===w);N&&c({menuRoleName:N.menu_role_name||""})}else c({menuRoleName:""})},[s,n,w,b,c]);const C=async g=>{var f,N,l,S,u;try{const k=n?(f=T)==null?void 0:f.editMenuList:(N=T)==null?void 0:N.addMenuList,_=n&&w?{...g,id:w}:{...g,moduleId:i},M=await v.mutateAsync({api:k,data:_});(l=M==null?void 0:M.data)!=null&&l.status?(F.success((S=M==null?void 0:M.data)==null?void 0:S.message),E(!1),d(!1),b.refetch()):F.error((u=M==null?void 0:M.data)==null?void 0:u.message)}catch(k){F.error(K(k))}};return e.jsx(ie,{open:s,setOpen:E,title:R,setEdit:d,edit:n,children:e.jsx(Q,{methods:y,onSubmit:y.handleSubmit(C),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(z,{label:"Service Name",name:"menuRoleName",placeholder:"Enter menu name"})}),e.jsx(W,{}),e.jsx("div",{children:e.jsx(re,{isLoading:y.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const He=X().shape({service_name:A().required("menu name is required")});function ze({open:s,setOpen:E,title:R,edit:n,setEdit:d,serviceList:w,moduleList:b,id:i,menuRoleList:v,moduleId:y,menuRoleId:c,moduleName:C}){var _,M,L,B,o,q;const g=J({}),f=J({}),N=Y({defaultValues:{service_name:""},resolver:G(He)}),{reset:l}=N;console.log(y,"id"),t.useEffect(()=>{var m,P;if(s)if(n&&i){const x=(P=(m=v==null?void 0:v.data)==null?void 0:m.data)==null?void 0:P.find(r=>r.id===i);x&&l({service_name:x.menu_role_name||""})}else l({service_name:""})},[s,n,i,v,l]);const S=async m=>{var P,x,r;try{const p=n?"EditModuleList":"AddmoduleList",h=n&&i?{...m,moduleId:i}:{...m,moduleId:y},a=await g.mutateAsync({api:p,data:h});(P=a==null?void 0:a.data)!=null&&P.success?(F.success((x=a==null?void 0:a.data)==null?void 0:x.message),E(!1),d(!1),w.refetch()):F.error((r=a==null?void 0:a.data)==null?void 0:r.message)}catch(p){F.error(K(p))}},u=U({api:(_=T)==null?void 0:_.getPermitedMenuList,key:"permitedMenuList",config:{menuRoleId:c,moduleId:y},options:{enabled:!0}}),k=async(m,P,x)=>{var r,p,h,a;console.log(x);try{const I={isSuspended:x,menuId:m,menuRoleId:c},$=await f.mutateAsync({api:(r=T)==null?void 0:r.addRemoveMenuPermission,data:I});(p=$==null?void 0:$.data)!=null&&p.status?(F.success(((h=$==null?void 0:$.data)==null?void 0:h.message)||"Permission updated successfully"),u.refetch()):F.error(((a=$==null?void 0:$.data)==null?void 0:a.message)||"Failed to update permission")}catch(I){F.error(K(I))}};return console.log(C),console.log((L=(M=u==null?void 0:u.data)==null?void 0:M.data)==null?void 0:L[C],"permitedMenuList"),e.jsx(ie,{open:s,setOpen:E,title:R,setEdit:d,edit:n,children:e.jsx(Q,{methods:N,onSubmit:N.handleSubmit(S),children:e.jsx("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Sl."}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Menu Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Permission"})]})}),e.jsx("tbody",{children:((q=(o=(B=u==null?void 0:u.data)==null?void 0:B.data)==null?void 0:o[C])==null?void 0:q.map((m,P)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:P+1}),e.jsx("td",{className:`border border-gray-300 px-4 py-2 ${m.is_suspended?"text-black":"text-green-600"}`,children:m.menu_string}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:m.is_suspended?e.jsx("button",{className:"text-green-600 bg-green-200 hover:bg-green-100 px-2 py-1 rounded-md text-xs font-bold",onClick:()=>k(m.id,m.menu_role_id,!m.is_suspended),children:"Add"}):e.jsx("button",{className:"text-red-600  bg-red-200 hover:bg-red-100 px-2 py-1 rounded-md text-xs font-bold",onClick:()=>k(m.id,m.menu_role_id,!m.is_suspended),children:"Remove"})})]},m.id)))||e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-4",children:"No data available"})})})]})})})})})}X().shape({ulbId:A(),moduleId:A(),complaintRefNo:A()});function We(s){var m,P,x,r,p,h;const[E,R]=t.useState(1),[n,d]=t.useState(10),[w,b]=t.useState(!1),[i,v]=t.useState(""),[y,c]=t.useState(!1),[C,g]=t.useState(!1),[f,N]=t.useState(null),[l,S]=t.useState(1),[u,k]=t.useState(10),_=100,M=a=>{S(a)},L=a=>{k(a),S(1)},B=U({api:(m=T)==null?void 0:m.getMenuMasterList,key:"menuMasterList",options:{enabled:!0}}),o=U({api:(P=T)==null?void 0:P.getPermitedMenuList,key:"permitedMenuList",config:{menuRoleId:s==null?void 0:s.id,moduleId:s==null?void 0:s.moduleId},options:{enabled:!0}}),q=a=>{N(a),g(!0)};return console.log(s==null?void 0:s.moduleName),e.jsx("main",{className:"grid items-start ",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsx("div",{className:"flex justify-end ",children:e.jsx(O,{type:"button",className:"flex items-center gap-2",onClick:()=>{v(""),c(!1),b(!0)},children:"Add More Menu Permission"})})}),e.jsx(ze,{open:w,setOpen:b,title:y?"Edit Menu":"Add Menu",id:i,edit:y,setEdit:c,moduleId:s==null?void 0:s.moduleId,menuRoleId:s==null?void 0:s.id,moduleName:s==null?void 0:s.moduleName}),e.jsx(se,{className:"",children:e.jsx(ae,{children:B.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ne,{children:e.jsxs(H,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Menu"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(de,{children:(h=(p=(r=(x=o==null?void 0:o.data)==null?void 0:x.data)==null?void 0:r[s==null?void 0:s.moduleName])==null?void 0:p.filter(a=>(a==null?void 0:a.menu_role_id)==(s==null?void 0:s.id)))==null?void 0:h.map((a,I)=>e.jsxs(H,{children:[e.jsx(D,{children:E*n-n+I+1}),e.jsx(D,{children:a==null?void 0:a.menu_string}),e.jsxs(D,{children:[e.jsxs(O,{variant:"secondary",onClick:()=>{v(a==null?void 0:a.id),c(!0),b(!0)},children:[e.jsx(oe,{})," Edit"]}),e.jsxs(O,{onClick:()=>q(a),className:"ml-2",variant:"secondary",children:[e.jsx(ue,{})," View"]})]})]},a==null?void 0:a.id))})]}),e.jsx(W,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(ce,{currentPage:l,totalItems:_,itemsPerPage:u,onPageChange:M,onItemsPerPageChange:L})})]})})})]})})}const Xe=X().shape({ulbId:A(),moduleId:A(),complaintRefNo:A()});function Ye(s){var x,r,p;const[E,R]=t.useState(1),[n,d]=t.useState(10),[w,b]=t.useState(!1),[i,v]=t.useState(""),[y,c]=t.useState(!1);t.useState(!1),t.useState(null);const[C,g]=t.useState(!1),[f,N]=t.useState(!1),[l,S]=t.useState(1),[u,k]=t.useState(10),_=100,{moduleId:M}=s,L=h=>{S(h)},B=h=>{k(h),S(1)};console.log(s==null?void 0:s.moduleId,"props id"),console.log(M,"props id"),Y({resolver:G(Xe),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}});const o=U({api:(x=T)==null?void 0:x.serviceList,key:"serviceMasterList",config:{moduleId:s==null?void 0:s.mId},options:{enabled:!0}}),q=U({api:(r=T)==null?void 0:r.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}});console.log(i);const P=(((p=q==null?void 0:q.data)==null?void 0:p.data.filter(h=>(h==null?void 0:h.module_id)==(s==null?void 0:s.moduleId)))||[]).slice((l-1)*u,l*u);return console.log("the service maste rlist..",s==null?void 0:s.moduleName),e.jsx("main",{className:"grid items-start ",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2 ",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end ",children:e.jsx(O,{type:"button",className:"flex items-center gap-2",onClick:()=>{v(""),c(!1),b(!0)},children:"Add Role List"})}),e.jsx(Ue,{open:w,setOpen:b,title:y?"Edit Role":"Add Role",id:i,edit:y,setEdit:c,menuRoleList:q,moduleId:s==null?void 0:s.moduleId})]}),e.jsxs(ge,{open:f,children:[e.jsx(fe,{}),e.jsxs(Ne,{className:"sm:max-w-[1200px] h-[700px] max-h-[700px] overflow-scroll",children:[e.jsx(he,{className:" text-xl text-gray-500 font-bold flex justify-between",children:e.jsxs("div",{children:["Module : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:s==null?void 0:s.moduleName})]})}),e.jsxs(he,{className:" text-xl text-gray-500 font-bold flex justify-between",children:[e.jsxs("div",{children:["Role : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:C==null?void 0:C.menu_role_name})]}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(be,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>N(!1)})})})]}),e.jsxs(Ce,{defaultValue:"MENULIST",className:"w-full",children:[e.jsx("div",{className:"py-4 flex justify-between",children:e.jsx(_e,{className:"grid w-auto grid-cols-2",children:e.jsx(Le,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white rounded-lg px-2",value:"MENULIST",children:"Permitted Menu List"})})}),e.jsx(pe,{value:"MENULIST",children:e.jsx(We,{moduleId:s==null?void 0:s.moduleId,id:i,moduleName:s==null?void 0:s.moduleName})})]})]})]}),e.jsx(se,{children:e.jsx(ae,{children:o.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ne,{children:e.jsxs(H,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Role Name"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(de,{children:P.map((h,a)=>e.jsxs(H,{children:[e.jsx(D,{children:E*n-n+a+1}),e.jsx(D,{children:h==null?void 0:h.menu_role_name}),e.jsxs(D,{children:[e.jsxs(O,{variant:"secondary",onClick:()=>{v(h==null?void 0:h.id),c(!0),b(!0)},children:[e.jsx(oe,{})," Edit"]}),e.jsxs(O,{onClick:()=>{g(h),N(!0),v(h==null?void 0:h.id)},className:"ml-2",variant:"secondary",children:[e.jsx(ue,{})," View"]})]})]},h==null?void 0:h.id))})]}),e.jsx(W,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(ce,{currentPage:l,totalItems:_,itemsPerPage:u,onPageChange:L,onItemsPerPageChange:B})})]})})})]})})}const Ge=X().shape({ulbId:A(),moduleId:A(),complaintRefNo:A()});function Je(){var r,p,h,a,I,$,Z,ee;const[s,E]=t.useState(1),[R,n]=t.useState(10),[d,w]=t.useState(!1),[b,i]=t.useState(!1),[v,y]=t.useState(""),[c,C]=t.useState(""),[g,f]=t.useState(!1),[N,l]=t.useState(1),[S,u]=t.useState(10),[k,_]=t.useState(!1),M=100,L=j=>{l(j)},B=j=>{u(j),l(1)},o=Y({resolver:G(Ge),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),q=async j=>{x==null||x.refetch()},m=U({api:(r=T)==null?void 0:r.userManagementModuleList,key:"moduleMasterList",options:{enabled:!0}}),P=U({api:(p=T)==null?void 0:p.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}}),x=Pe({api:`${(h=T)==null?void 0:h.serviceList}?module=${(a=o==null?void 0:o.watch())==null?void 0:a.moduleId}`,key:"serviceList",options:{enabled:!0}});return console.log(d==null?void 0:d.id,"id"),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsxs(ge,{open:k,children:[e.jsx(fe,{}),e.jsxs(Ne,{className:"sm:max-w-[1200px] h-auto max-h-[700px]  overflow-scroll",children:[e.jsxs(he,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:[e.jsxs("div",{children:["Module : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:d==null?void 0:d.module_name})]}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(be,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>_(!1)})})})]}),e.jsxs(Ee,{defaultValue:"MENULIST",className:"w-full",children:[e.jsx("div",{className:"py-4 flex justify-between",children:e.jsxs(ke,{className:"grid w-auto grid-cols-3",children:[e.jsx(me,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"MENULIST",children:"Menu List Master"}),e.jsx(me,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"SERVICE_LIST",children:"Service List Master"}),e.jsx(me,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"ROLE_LIST",children:"Role List Master"})]})}),e.jsx(xe,{value:"MENULIST",children:e.jsx(Re,{id:v,mid:d==null?void 0:d.id,setEdit:f,setOpen:i,edit:g,refetch:x==null?void 0:x.refetch,serviceList:x,moduleName:c,moduleId:d==null?void 0:d.id,menuRoleList:P})}),e.jsx(xe,{value:"SERVICE_LIST",children:e.jsx(qe,{id:v,setEdit:f,setOpen:i,edit:g,refetch:x==null?void 0:x.refetch,serviceList:x,moduleId:d==null?void 0:d.id,mId:v})}),e.jsx(xe,{value:"ROLE_LIST",children:e.jsx(Ye,{id:v,setEdit:f,setOpen:i,edit:g,refetch:P==null?void 0:P.refetch,serviceList:P,moduleId:d==null?void 0:d.id,moduleName:c,mId:v})})]})]})]}),e.jsxs(se,{children:[e.jsx(Q,{methods:o,onSubmit:o.handleSubmit(q),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background px-10 pt-4",children:[e.jsxs("div",{children:[e.jsx(Me,{htmlFor:"moduleId",children:"Module name"}),e.jsx(je,{className:"cursor-pointer bg-background",name:"moduleId",data:(($=(I=m.data)==null?void 0:I.data)==null?void 0:$.map(j=>({value:j==null?void 0:j.id,label:j==null?void 0:j.module_name})))??[]})]}),e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsx(re,{variant:"secondary",isLoading:o.formState.isSubmitting,type:"submit",className:"float-right w-auto px-10",children:"Search"})}),e.jsx("div",{className:"mt-6 flex justify-end "}),e.jsx(Be,{open:b,setOpen:i,title:g?"Edit Module":"Add Module",id:v,edit:g,setEdit:f,serviceList:x,moduleList:m})]})}),e.jsx(Se,{className:"px-7",children:e.jsx(Ie,{})}),e.jsx(ae,{children:x.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ne,{children:e.jsxs(H,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Module"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(de,{children:(ee=(Z=m==null?void 0:m.data)==null?void 0:Z.data)==null?void 0:ee.map((j,ye)=>e.jsxs(H,{children:[e.jsx(D,{children:s*R-R+ye+1}),e.jsx(D,{children:j==null?void 0:j.module_name}),e.jsx(D,{children:e.jsxs(O,{variant:"secondary",onClick:()=>{y(j==null?void 0:j.id),C(j==null?void 0:j.module_name),w(j),_(!0)},className:"ml-2",children:[e.jsx(ue,{})," View"]})})]},j==null?void 0:j.id))})]}),e.jsx(W,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(ce,{currentPage:N,totalItems:M,itemsPerPage:S,onPageChange:L,onItemsPerPageChange:B})})]})})]})]})})}function us(){return e.jsx(ve,{title:"Module List (master)",subTitle:"Control all Module here",children:e.jsx("div",{children:e.jsx(Je,{})})})}export{us as default};
