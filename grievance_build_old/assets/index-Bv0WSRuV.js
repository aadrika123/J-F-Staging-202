import{c as $e,d as We,z as ze,b as Ee,o as He,j as e,F as qe,C as Oe,a0 as Qe,A as Je,B as Ke,g as y,_ as N,s as _e,a2 as a,x as o,a3 as u,a4 as f,a5 as v,I as t,a6 as b,G as Ve,k as Xe}from"./index-D3GDLqYi.js";import{P as Ze}from"./index-CSE_xvp-.js";import{g as De}from"./services-KQnp_8oA.js";import{R as sd}from"./refresh-ccw-8n0GGT3H.js";import{I as ed}from"./info-Hm5aYUYE.js";import{M as Pe,F as dd,p as ad}from"./module.config-CjWrXZ7V.js";import{M as rd}from"./move-right-DlWuD7uF.js";const ld=$e().shape({comment:We().required("Write comment")});function cd({complaintData:l}){const h=ze({}),c=Ee({resolver:He(ld)}),j=async s=>{var n,i;let x={complaintId:(i=(n=l==null?void 0:l.data)==null?void 0:n.data)==null?void 0:i._id,comment:s==null?void 0:s.comment};try{const r=await h.mutateAsync({api:y.reopenComplaint,data:x});r.data.success?(N.success(r.data.message),l==null||l.refetch()):N.error(r.data.message)}catch(r){N.error(De(r))}};return e.jsx(qe,{methods:c,onSubmit:c.handleSubmit(j),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsx(Oe,{className:"text-2xl flex items-center font-bold mb-6 justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-7 h-7 bg-amber-600 rounded-full bg-red-5500 text-white justify-center items-center mr-2 flex ",children:e.jsx(sd,{className:"inline"})})," Re-Open Grievance"]})}),e.jsxs(Qe,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(ed,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"Enter, why do you want to reopen this grievance?"})]}),e.jsx(Je,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(Ke,{isLoading:c.formState.isSubmitting,type:"submit",className:" w-full",children:"Submit Re-Open"})})]})})}function xd(){var n,i,r,g,w,p,m,T,k,A,S,C,R,U,B,G,F,I,L,M,_,P,O,Y,$,W,z,E,H,q,Q,J,K,V,X,Z,D,ss,es,ds,as,rs,ls,cs,xs,ns,is,hs,os,ts,js,Ns,us,fs,vs,bs,ys,gs,ws,ps,ms,Ts,ks,As,Ss,Cs,Rs,Us,Bs,Gs,Fs,Is,Ls,Ms,_s,Ps,Os,Ys,$s,Ws,zs,Es,Hs,qs,Qs,Js,Ks,Vs,Xs,Zs,Ds,se,ee,de,ae,re,le,ce,xe,ne,ie,he,oe,te,je,Ne,ue,fe,ve,be,ye,ge,we,pe,me,Te,ke,Ae,Se,Ce,Re,Ue,Be;const h=new URLSearchParams(Xe().search),c=h.get("complaintRefNo"),j=h.get("complaintId"),s=_e({api:`${y.getComplaintDetailsByComplaintNo}/${c}`,key:"ComplaintDetails",options:{enabled:!0}}),x=_e({api:`${y.complaintApplicationLog}/${j}`,key:"complaintApplicationLog",options:{enabled:!0}});return e.jsx("div",{className:"",children:e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto bg-background shadow-lg rounded-lg p-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-blue-800 mb-6 uppercase",children:["Grievance No : ",(i=(n=s==null?void 0:s.data)==null?void 0:n.data)==null?void 0:i.complaintRefNo]}),((w=(g=(r=s==null?void 0:s.data)==null?void 0:r.data)==null?void 0:g.workflow)==null?void 0:w.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),(T=(m=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:m.workflow)==null?void 0:T.workFlowName," Workflow"]}),!((S=(A=(k=s==null?void 0:s.data)==null?void 0:k.data)==null?void 0:A.workflow)!=null&&S.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),((R=(C=s==null?void 0:s.data)==null?void 0:C.data)==null?void 0:R.currentUser)&&`${(G=(B=(U=s==null?void 0:s.data)==null?void 0:U.data)==null?void 0:B.currentUser)==null?void 0:G.fullName} `,((I=(F=s==null?void 0:s.data)==null?void 0:F.data)==null?void 0:I.currentWorkflow)&&`(${(_=(M=(L=s==null?void 0:s.data)==null?void 0:L.data)==null?void 0:M.currentWorkflow)==null?void 0:_.workFlowName})`,!((O=(P=s==null?void 0:s.data)==null?void 0:P.data)!=null&&O.currentWorkflow)&&!(($=(Y=s==null?void 0:s.data)==null?void 0:Y.data)!=null&&$.currentUser)&&((z=(W=s==null?void 0:s.data)==null?void 0:W.data)==null?void 0:z.moduleId)===Pe&&"State GRO",!((H=(E=s==null?void 0:s.data)==null?void 0:E.data)!=null&&H.currentWorkflow)&&!((Q=(q=s==null?void 0:s.data)==null?void 0:q.data)!=null&&Q.currentUser)&&((K=(J=s==null?void 0:s.data)==null?void 0:J.data)==null?void 0:K.moduleId)!==Pe&&"ULB GRO"]}),e.jsx("h1",{className:"text-md font-bold  mb-6 flex items-center",children:e.jsxs("span",{children:["Status -",((X=(V=s==null?void 0:s.data)==null?void 0:V.data)==null?void 0:X.wf_status)===0&&e.jsx(a,{className:"bg-yellow-500 ml-2",children:"Pending"}),((D=(Z=s==null?void 0:s.data)==null?void 0:Z.data)==null?void 0:D.wf_status)===1&&e.jsx(a,{className:"bg-green-500 ml-2",children:"Resolved"}),((es=(ss=s==null?void 0:s.data)==null?void 0:ss.data)==null?void 0:es.wf_status)===2&&e.jsx(a,{className:"bg-red-500 ml-2",children:"Rejected"}),((as=(ds=s==null?void 0:s.data)==null?void 0:ds.data)==null?void 0:as.wf_status)===3&&e.jsx(a,{className:"bg-yellow-500 ml-2",children:"Pending(re-opened)"})]})})]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Registered on ",o((ls=(rs=s==null?void 0:s.data)==null?void 0:rs.data)==null?void 0:ls.createdAt).format("DD-MM-YYYY")]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsxs("div",{className:"mt-4  grid grid-cols-1 md:grid-cols-3   space-y-4",children:[e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Full Name : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((xs=(cs=s==null?void 0:s.data)==null?void 0:cs.data)==null?void 0:xs.citizenName)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Mobile No : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((is=(ns=s==null?void 0:s.data)==null?void 0:ns.data)==null?void 0:is.mobileNo)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Email : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((os=(hs=s==null?void 0:s.data)==null?void 0:hs.data)==null?void 0:os.email)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"ULB : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((Ns=(js=(ts=s==null?void 0:s.data)==null?void 0:ts.data)==null?void 0:js.ulb)==null?void 0:Ns.ulbName)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Module : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((vs=(fs=(us=s==null?void 0:s.data)==null?void 0:us.data)==null?void 0:fs.module)==null?void 0:vs.moduleName)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((gs=(ys=(bs=s==null?void 0:s.data)==null?void 0:bs.data)==null?void 0:ys.problemType)==null?void 0:gs.problem)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Word No. : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((ps=(ws=s==null?void 0:s.data)==null?void 0:ws.data)==null?void 0:ps.wardNo)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Area : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((Ts=(ms=s==null?void 0:s.data)==null?void 0:ms.data)==null?void 0:Ts.area)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Consumer No : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((As=(ks=s==null?void 0:s.data)==null?void 0:ks.data)==null?void 0:As.consumerNo)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Location : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((Cs=(Ss=s==null?void 0:s.data)==null?void 0:Ss.data)==null?void 0:Cs.grievanceLocation)||"N/A"})," "]})]}),((Us=(Rs=s==null?void 0:s.data)==null?void 0:Rs.data)==null?void 0:Us.fixedNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(Gs=(Bs=s==null?void 0:s.data)==null?void 0:Bs.data)==null?void 0:Gs.fixedNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Is=(Fs=s==null?void 0:s.data)==null?void 0:Fs.data)==null?void 0:Is.fixedNo})," "]})]}),((Ms=(Ls=s==null?void 0:s.data)==null?void 0:Ls.data)==null?void 0:Ms.tempNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(Ps=(_s=s==null?void 0:s.data)==null?void 0:_s.data)==null?void 0:Ps.tempNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ys=(Os=s==null?void 0:s.data)==null?void 0:Os.data)==null?void 0:Ys.tempNo})," "]})]}),(((Ws=($s=s==null?void 0:s.data)==null?void 0:$s.data)==null?void 0:Ws.wf_status)===0||((Es=(zs=s==null?void 0:s.data)==null?void 0:zs.data)==null?void 0:Es.wf_status)===3)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Pending From : "}),e.jsxs("div",{children:[e.jsxs("p",{className:"opacity-90",children:[o().diff(o((qs=(Hs=s==null?void 0:s.data)==null?void 0:Hs.data)==null?void 0:qs.createdAt),"days")," days"]})," "]})]}),((Js=(Qs=s==null?void 0:s.data)==null?void 0:Qs.data)==null?void 0:Js.priorityType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Priority Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((Xs=(Vs=(Ks=s==null?void 0:s.data)==null?void 0:Ks.data)==null?void 0:Vs.priorityType)==null?void 0:Xs.priorityName)||"N/A"})," "]})]}),((Ds=(Zs=s==null?void 0:s.data)==null?void 0:Zs.data)==null?void 0:Ds.targetType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Target Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((de=(ee=(se=s==null?void 0:s.data)==null?void 0:se.data)==null?void 0:ee.targetType)==null?void 0:de.targetType)||"N/A"})," "]})]}),((re=(ae=s==null?void 0:s.data)==null?void 0:ae.data)==null?void 0:re.complaintType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((xe=(ce=(le=s==null?void 0:s.data)==null?void 0:le.data)==null?void 0:ce.complaintType)==null?void 0:xe.complaintTypeName)||"N/A"})," "]})]}),e.jsx("div",{className:"col-span-3 border-b my-20 border-[#99B37C]"}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Title : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((ie=(ne=s==null?void 0:s.data)==null?void 0:ne.data)==null?void 0:ie.complaintTitle)||"N/A"})," "]})]}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Description : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((oe=(he=s==null?void 0:s.data)==null?void 0:he.data)==null?void 0:oe.complaintDescription)||"N/A"})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Document"}),e.jsxs(u,{children:[e.jsx(f,{}),e.jsx(v,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:(je=(te=s==null?void 0:s.data)==null?void 0:te.data)!=null&&je.imgUrl&&((ue=(Ne=s==null?void 0:s.data)==null?void 0:Ne.data)!=null&&ue.imgUrl.includes(".pdf"))?e.jsx("iframe",{src:(ve=(fe=s==null?void 0:s.data)==null?void 0:fe.data)==null?void 0:ve.imgUrl,width:"100%",height:"400px",title:"Document Preview"}):e.jsx(t,{src:(ye=(be=s==null?void 0:s.data)==null?void 0:be.data)==null?void 0:ye.imgUrl,className:"w-80"})})}),e.jsx(b,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer",children:(we=(ge=s==null?void 0:s.data)==null?void 0:ge.data)!=null&&we.imgUrl&&((me=(pe=s==null?void 0:s.data)==null?void 0:pe.data)!=null&&me.imgUrl.includes(".pdf"))?e.jsxs("div",{className:"w-20 h-20  flex justify-center items-center",children:["  ",e.jsx(dd,{className:"w-20 h-20 "})]}):e.jsx(t,{src:(ke=(Te=s==null?void 0:s.data)==null?void 0:Te.data)==null?void 0:ke.imgUrl,className:"w-40"})})})]})]})]}),e.jsxs("section",{className:"mt-8",children:[(((Se=(Ae=s==null?void 0:s.data)==null?void 0:Ae.data)==null?void 0:Se.wf_status)===1||((Re=(Ce=s==null?void 0:s.data)==null?void 0:Ce.data)==null?void 0:Re.wf_status)===2)&&e.jsxs(u,{children:[e.jsx(f,{}),e.jsxs(v,{className:"sm:max-w-[500px]",children:[e.jsx(Oe,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:"Grievance Re-Open"}),e.jsx("div",{className:"py-4",children:e.jsx(cd,{complaintData:s})})]}),e.jsx(b,{asChild:!0,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"Grievance Flow History"})}),e.jsx("div",{children:e.jsx(Ve,{variant:"secondary",children:"Re-Open Grievance"})})]})})]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:(Be=(Ue=x==null?void 0:x.data)==null?void 0:Ue.data)==null?void 0:Be.map((d,Ye)=>{var Ge,Fe,Ie,Le,Me;return e.jsxs("div",{className:"flex space-x-4 items-center",children:[e.jsx("div",{children:Ye+1}),e.jsxs("div",{children:[(d==null?void 0:d.actionStatus)===0&&e.jsx(a,{className:"bg-gray-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===1&&e.jsx(a,{className:"bg-green-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===2&&e.jsx(a,{className:"bg-red-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===3&&e.jsx(a,{children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===4&&e.jsx(a,{className:"bg-amber-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===5&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===6&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===7&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===8&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===9&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===10&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===11&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===12&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),e.jsx("div",{className:"text-xs text-gray-600 font-semibold mt-1",children:o((Fe=(Ge=s==null?void 0:s.data)==null?void 0:Ge.data)==null?void 0:Fe.createdAt).format("DD-MM-YYYY hh:mm a")})]}),e.jsx(rd,{}),e.jsxs("div",{children:[e.jsxs(u,{children:[e.jsx(f,{}),e.jsx(v,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:e.jsx(t,{src:(Ie=d==null?void 0:d.actionBy)==null?void 0:Ie.fullImgUrl,className:"w-60"})})}),e.jsx(b,{asChild:!0,children:e.jsx("div",{className:"w-10 h-10 rounded-full border overflow-hidden cursor-pointer",children:e.jsx(t,{src:((Le=d==null?void 0:d.actionBy)==null?void 0:Le.fullImgUrl)||ad,className:"w-10 cursor-pointer hover:scale-105"})})})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:["Action by ",e.jsx("span",{className:"font-semibold text-black text-md",children:(d==null?void 0:d.actionByUserId)===null?"Direct Citizen":(Me=d==null?void 0:d.actionBy)==null?void 0:Me.fullName})]})]})]})})})]})]})})})}function ud(){return e.jsx(Ze,{title:"Grievance Details",subTitle:"Manage all the Grievance here",children:e.jsx("div",{className:"",children:e.jsx(xd,{})})})}export{ud as default};
