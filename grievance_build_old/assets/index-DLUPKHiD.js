import{r as c,u as q,s as V,g as P,j as e,a4 as Y,a5 as E,a6 as K,C as z,L as A,aV as L,aW as U,aX as W,aY as J,aZ as X,a_ as Z,a$ as O,B as Q,G as m,b0 as D,a7 as k,t as ee,w as se,S as ae,I,y as te,_ as F,H as R}from"./index-DCRt_GeZ.js";import{P as ne}from"./index-CBvlB0Ik.js";import{S as re}from"./index-wXt1s6xm.js";import{C as B}from"./chevron-right-L8piQ2n7.js";function ie(){var u,j,f,g,N,v,y,C,w;const[d,_]=c.useState(1),[x,H]=c.useState(10),[p,M]=c.useState(""),[t,i]=c.useState(0),[s,o]=c.useState({}),[$,G]=c.useState({}),h=q({}),a=V({api:`${P.getAllComplaintDirect}?page=${d}&limit=${x}&q=${p}`,key:"SeachCitizenComplaints",value:[d,x],options:{enabled:!0}}),T=async()=>{var n,b,S;try{const r=new FormData;r.append("citizenName",s==null?void 0:s.name),r.append("email",s==null?void 0:s.email),r.append("mobileNo",s==null?void 0:s.mobileNo),r.append("complaintTitle",s==null?void 0:s.complaintTitle),r.append("complaintDescription",s==null?void 0:s.complaintDescription),r.append("moduleId",s==null?void 0:s.module),r.append("ulbId",s==null?void 0:s.ulb),r.append("imageUrl",s==null?void 0:s.complaintDocument);const l=await h.mutateAsync({api:P.createComplaintApplication,data:r});(n=l.data)!=null&&n.success?(G((b=l==null?void 0:l.data)==null?void 0:b.data),o({}),F.success((S=l==null?void 0:l.data)==null?void 0:S.message),i(6)):F.error("Complaint not created successfully")}catch(r){console.log(r)}};return e.jsxs(Y,{children:[e.jsx(E,{}),e.jsxs(K,{className:"sm:max-w-[500px] z-50",children:[e.jsxs(z,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:["Complaint Registration ",e.jsx(A,{to:"/grievance/citizen/complaint-registration-info",target:"_blank",children:e.jsx("span",{className:"text-amber-600 underline cursor-pointer",children:"Know How it works?"})})," "]}),e.jsxs("div",{className:"py-4",children:[t<5&&e.jsx(L,{status:t-1}),t===1&&e.jsx(U,{setcomplaintData:o,complaintData:s,setformStep:i}),t===2&&e.jsx(W,{setcomplaintData:o,complaintData:s,setformStep:i}),t===3&&e.jsx(J,{setcomplaintData:o,complaintData:s,setformStep:i}),t===4&&e.jsx(X,{setcomplaintData:o,complaintData:s,setformStep:i}),t===5&&e.jsx(Z,{complaintData:s}),t===6&&e.jsx(O,{formResponse:$}),t===5&&e.jsx("div",{className:"px-10 mb-5",children:e.jsx(Q,{isLoading:h.isPending,onClick:T,className:"w-full flex justify-center items-center",children:e.jsx("span",{className:"text-xs",children:"Submit"})})}),t<6&&t>1&&e.jsx("div",{className:"px-10",children:e.jsxs(m,{onClick:()=>i(t-1),variant:"outline",className:"w-full flex justify-center items-center",children:[e.jsx(D,{size:20,className:"inline mr-2"})," ",e.jsx("span",{className:"text-xs",children:"Go Back"})]})})]})]}),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4",children:[e.jsxs("div",{className:"flex w-full justify-between gap-2",children:[e.jsx("div",{children:e.jsx(re,{search:p,setSearch:M,refetch:a.refetch,isFetching:a.isLoading})}),e.jsx("div",{children:e.jsx(k,{onClick:()=>i(1),asChild:!0,children:e.jsxs(m,{className:"flex justify-center items-center",children:[e.jsx("span",{className:"text-xs",children:"Register Custom Complaint"}),e.jsx(B,{size:15,className:"inline"})]})})})]}),e.jsx(ee,{className:"shadow-none border-none rounded-none",children:e.jsx(se,{children:a.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(ae,{})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col justify-center w-full px-4",children:(f=(j=(u=a==null?void 0:a.data)==null?void 0:u.data)==null?void 0:j.docs)==null?void 0:f.map(n=>e.jsxs("div",{className:"w-full px-8 py-2 bg-white rounded-md shadow-lg mb-2 relative",children:[e.jsxs("div",{className:"flex mt-6  pr-10",children:[e.jsx(I,{className:"flex-initial object-cover mx-2 rounded-full w-14 h-14",src:"https://images.unsplash.com/photo-1488508872907-592763824245?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"}),e.jsxs("div",{className:"mx-2 flex-1",children:[e.jsx("h1",{className:"font-semibold text-gray-800 dark:text-white",children:n==null?void 0:n.titleName}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:n==null?void 0:n.description})]})]}),e.jsx(k,{onClick:()=>i(1),asChild:!0,children:e.jsxs(m,{className:"absolute right-0 bottom-0 flex justify-center items-center",variant:"secondary",children:[e.jsx("span",{className:"text-xs",children:"Register"}),e.jsx(B,{size:15,className:"inline"})]})})]},`complaint${n==null?void 0:n._id}`))}),e.jsx(te,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(ne,{page:d,perPage:x,totalPage:(N=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:N.totalDocs,hasNextPage:(y=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:y.hasNextPage,hasPrevPage:(w=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:w.hasPrevPage,setPage:_,setPerPage:H})})]})})})]})})]})}function xe(){return e.jsxs("div",{className:"grid grid-cols-4 h-screen",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4 h-screen overflow-hidden",children:[e.jsx(z,{className:"text-xl text-primary font-bold",children:"Search existing Complaint or Register custom complaint"}),e.jsx(I,{src:"/images/complain_boy.png",className:"w-40"}),e.jsx(R,{className:"text-center",children:"Fill the form to process your complaint."}),e.jsxs(R,{className:"text-center",children:["You can register your grievance here or you can visit our nearest ",e.jsx(A,{target:"_blank",className:"underline hover:text-primary",to:"https://maps.app.goo.gl/ncVp959LoSja4uAh8",children:"Jan Seva Kendra"})," for further query. & Feel free to contact us on +918458697845"]})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-10 bg-gray-50 h-screen",children:e.jsx(ie,{})})]})}export{xe as default};
