import{c as Ne,d as fe,z as be,b as ge,o as ve,j as e,F as ye,C as je,a0 as we,A as Ce,B as pe,g as v,_ as u,s as he,a2 as a,x as h,a3 as N,a4 as f,a5 as b,I as i,a6 as g,G as ke,k as Se}from"./index-DrjUvYfC.js";import{P as me}from"./index-CzjjUeyo.js";import{g as Te}from"./services-KQnp_8oA.js";import{R as Re}from"./refresh-ccw-73cmfVNc.js";import{I as Ue}from"./info-C5AKxJT-.js";import{M as ie,F as Be,p as Fe}from"./module.config-C80cmjAU.js";import{M as Ie}from"./move-right-QEuJ1FYn.js";const Me=Ne().shape({comment:fe().required("Write comment")});function _e({complaintData:l}){const t=be({}),c=ge({resolver:ve(Me)}),j=async s=>{var n,o;let x={complaintId:(o=(n=l==null?void 0:l.data)==null?void 0:n.data)==null?void 0:o._id,comment:s==null?void 0:s.comment};try{const r=await t.mutateAsync({api:v.reopenComplaint,data:x});r.data.success?(u.success(r.data.message),l==null||l.refetch()):u.error(r.data.message)}catch(r){u.error(Te(r))}};return e.jsx(ye,{methods:c,onSubmit:c.handleSubmit(j),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsx(je,{className:"text-2xl flex items-center font-bold mb-6 justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-7 h-7 bg-amber-600 rounded-full bg-red-5500 text-white justify-center items-center mr-2 flex ",children:e.jsx(Re,{className:"inline"})})," Re-Open Complaint"]})}),e.jsxs(we,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(Ue,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"Enter, why do you want to reopen this complaint?"})]}),e.jsx(Ce,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(pe,{isLoading:c.formState.isSubmitting,type:"submit",className:" w-full",children:"Submit Re-Open"})})]})})}function Ae(){var n,o,r,y,w,C,p,k,S,m,T,R,U,B,F,I,M,_,A,L,P,O,Y,$,z,E,W,H,q,G,Q,J,K,V,X,Z,D,ss,es,ds,as,rs,ls,cs,xs,ns,os,ts,hs,is,js,us,Ns,fs,bs,gs,vs,ys,ws,Cs,ps,ks,Ss,ms,Ts,Rs,Us,Bs,Fs,Is,Ms,_s,As,Ls,Ps,Os,Ys,$s,zs,Es,Ws,Hs,qs,Gs,Qs,Js,Ks,Vs,Xs,Zs,Ds,se,ee,de,ae,re,le;const t=new URLSearchParams(Se().search),c=t.get("complaintRefNo"),j=t.get("complaintId"),s=he({api:`${v.getComplaintDetailsByComplaintNo}/${c}`,key:"ComplaintDetails",options:{enabled:!0}}),x=he({api:`${v.complaintApplicationLog}/${j}`,key:"complaintApplicationLog",options:{enabled:!0}});return e.jsx("div",{className:"",children:e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto bg-background shadow-lg rounded-lg p-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-blue-800 mb-6 uppercase",children:["Complaint No : ",(o=(n=s==null?void 0:s.data)==null?void 0:n.data)==null?void 0:o.complaintRefNo]}),((w=(y=(r=s==null?void 0:s.data)==null?void 0:r.data)==null?void 0:y.workflow)==null?void 0:w.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),(k=(p=(C=s==null?void 0:s.data)==null?void 0:C.data)==null?void 0:p.workflow)==null?void 0:k.workFlowName," Workflow"]}),!((T=(m=(S=s==null?void 0:s.data)==null?void 0:S.data)==null?void 0:m.workflow)!=null&&T.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),((U=(R=s==null?void 0:s.data)==null?void 0:R.data)==null?void 0:U.currentUser)&&`${(I=(F=(B=s==null?void 0:s.data)==null?void 0:B.data)==null?void 0:F.currentUser)==null?void 0:I.fullName} `,((_=(M=s==null?void 0:s.data)==null?void 0:M.data)==null?void 0:_.currentWorkflow)&&`(${(P=(L=(A=s==null?void 0:s.data)==null?void 0:A.data)==null?void 0:L.currentWorkflow)==null?void 0:P.workFlowName})`,!((Y=(O=s==null?void 0:s.data)==null?void 0:O.data)!=null&&Y.currentWorkflow)&&!((z=($=s==null?void 0:s.data)==null?void 0:$.data)!=null&&z.currentUser)&&((W=(E=s==null?void 0:s.data)==null?void 0:E.data)==null?void 0:W.moduleId)===ie&&"State GRO",!((q=(H=s==null?void 0:s.data)==null?void 0:H.data)!=null&&q.currentWorkflow)&&!((Q=(G=s==null?void 0:s.data)==null?void 0:G.data)!=null&&Q.currentUser)&&((K=(J=s==null?void 0:s.data)==null?void 0:J.data)==null?void 0:K.moduleId)!==ie&&"ULB GRO"]}),e.jsx("h1",{className:"text-md font-bold  mb-6 flex items-center",children:e.jsxs("span",{children:["Status -",((X=(V=s==null?void 0:s.data)==null?void 0:V.data)==null?void 0:X.wf_status)===0&&e.jsx(a,{className:"bg-yellow-500 ml-2",children:"Pending"}),((D=(Z=s==null?void 0:s.data)==null?void 0:Z.data)==null?void 0:D.wf_status)===1&&e.jsx(a,{className:"bg-green-500 ml-2",children:"Resolved"}),((es=(ss=s==null?void 0:s.data)==null?void 0:ss.data)==null?void 0:es.wf_status)===2&&e.jsx(a,{className:"bg-red-500 ml-2",children:"Rejected"}),((as=(ds=s==null?void 0:s.data)==null?void 0:ds.data)==null?void 0:as.wf_status)===3&&e.jsx(a,{className:"bg-yellow-500 ml-2",children:"Pending(re-opened)"})]})})]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Registered on ",h((ls=(rs=s==null?void 0:s.data)==null?void 0:rs.data)==null?void 0:ls.createdAt).format("DD-MM-YYYY")]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsxs("div",{className:"mt-4  grid grid-cols-1 md:grid-cols-3   space-y-4",children:[e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Full Name : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(xs=(cs=s==null?void 0:s.data)==null?void 0:cs.data)==null?void 0:xs.citizenName})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Mobile No : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(os=(ns=s==null?void 0:s.data)==null?void 0:ns.data)==null?void 0:os.mobileNo})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Email : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(hs=(ts=s==null?void 0:s.data)==null?void 0:ts.data)==null?void 0:hs.email})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"ULB : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(us=(js=(is=s==null?void 0:s.data)==null?void 0:is.data)==null?void 0:js.ulb)==null?void 0:us.ulbName})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Module : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(bs=(fs=(Ns=s==null?void 0:s.data)==null?void 0:Ns.data)==null?void 0:fs.module)==null?void 0:bs.moduleName})," "]})]}),((vs=(gs=s==null?void 0:s.data)==null?void 0:gs.data)==null?void 0:vs.fixedNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(ws=(ys=s==null?void 0:s.data)==null?void 0:ys.data)==null?void 0:ws.fixedNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(ps=(Cs=s==null?void 0:s.data)==null?void 0:Cs.data)==null?void 0:ps.fixedNo})," "]})]}),((Ss=(ks=s==null?void 0:s.data)==null?void 0:ks.data)==null?void 0:Ss.tempNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(Ts=(ms=s==null?void 0:s.data)==null?void 0:ms.data)==null?void 0:Ts.tempNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Us=(Rs=s==null?void 0:s.data)==null?void 0:Rs.data)==null?void 0:Us.tempNo})," "]})]}),(((Fs=(Bs=s==null?void 0:s.data)==null?void 0:Bs.data)==null?void 0:Fs.wf_status)===0||((Ms=(Is=s==null?void 0:s.data)==null?void 0:Is.data)==null?void 0:Ms.wf_status)===3)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Pending From : "}),e.jsxs("div",{children:[e.jsxs("p",{className:"opacity-90",children:[h().diff(h((As=(_s=s==null?void 0:s.data)==null?void 0:_s.data)==null?void 0:As.createdAt),"days")," days"]})," "]})]}),e.jsx("div",{className:"col-span-3 border-b my-20 border-[#99B37C]"}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Title : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ps=(Ls=s==null?void 0:s.data)==null?void 0:Ls.data)==null?void 0:Ps.complaintTitle})," "]})]}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Description : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ys=(Os=s==null?void 0:s.data)==null?void 0:Os.data)==null?void 0:Ys.complaintDescription})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Complaint Document"}),e.jsxs(N,{children:[e.jsx(f,{}),e.jsx(b,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:(zs=($s=s==null?void 0:s.data)==null?void 0:$s.data)!=null&&zs.imgUrl&&((Ws=(Es=s==null?void 0:s.data)==null?void 0:Es.data)!=null&&Ws.imgUrl.includes(".pdf"))?e.jsx("iframe",{src:(qs=(Hs=s==null?void 0:s.data)==null?void 0:Hs.data)==null?void 0:qs.imgUrl,width:"100%",height:"400px",title:"Document Preview"}):e.jsx(i,{src:(Qs=(Gs=s==null?void 0:s.data)==null?void 0:Gs.data)==null?void 0:Qs.imgUrl,className:"w-80"})})}),e.jsx(g,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer",children:(Ks=(Js=s==null?void 0:s.data)==null?void 0:Js.data)!=null&&Ks.imgUrl&&((Xs=(Vs=s==null?void 0:s.data)==null?void 0:Vs.data)!=null&&Xs.imgUrl.includes(".pdf"))?e.jsxs("div",{className:"w-20 h-20  flex justify-center items-center",children:["  ",e.jsx(Be,{className:"w-20 h-20 "})]}):e.jsx(i,{src:(Ds=(Zs=s==null?void 0:s.data)==null?void 0:Zs.data)==null?void 0:Ds.imgUrl,className:"w-40"})})})]})]})]}),e.jsxs("section",{className:"mt-8",children:[(((ee=(se=s==null?void 0:s.data)==null?void 0:se.data)==null?void 0:ee.wf_status)===1||((ae=(de=s==null?void 0:s.data)==null?void 0:de.data)==null?void 0:ae.wf_status)===2)&&e.jsxs(N,{children:[e.jsx(f,{}),e.jsxs(b,{className:"sm:max-w-[500px]",children:[e.jsx(je,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:"Complaint Re-Open"}),e.jsx("div",{className:"py-4",children:e.jsx(_e,{complaintData:s})})]}),e.jsx(g,{asChild:!0,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"Complaint Flow History"})}),e.jsx("div",{children:e.jsx(ke,{variant:"secondary",children:"Re-Open Complaint"})})]})})]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:(le=(re=x==null?void 0:x.data)==null?void 0:re.data)==null?void 0:le.map((d,ue)=>{var ce,xe,ne,oe,te;return e.jsxs("div",{className:"flex space-x-4 items-center",children:[e.jsx("div",{children:ue+1}),e.jsxs("div",{children:[(d==null?void 0:d.actionStatus)===0&&e.jsx(a,{className:"bg-gray-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===1&&e.jsx(a,{className:"bg-green-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===2&&e.jsx(a,{className:"bg-red-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===3&&e.jsx(a,{children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===4&&e.jsx(a,{className:"bg-amber-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===5&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===6&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===7&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===8&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===9&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===10&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===11&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===12&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),e.jsx("div",{className:"text-xs text-gray-600 font-semibold mt-1",children:h((xe=(ce=s==null?void 0:s.data)==null?void 0:ce.data)==null?void 0:xe.createdAt).format("DD-MM-YYYY hh:mm a")})]}),e.jsx(Ie,{}),e.jsxs("div",{children:[e.jsxs(N,{children:[e.jsx(f,{}),e.jsx(b,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:e.jsx(i,{src:(ne=d==null?void 0:d.actionBy)==null?void 0:ne.fullImgUrl,className:"w-60"})})}),e.jsx(g,{asChild:!0,children:e.jsx("div",{className:"w-10 h-10 rounded-full border overflow-hidden cursor-pointer",children:e.jsx(i,{src:((oe=d==null?void 0:d.actionBy)==null?void 0:oe.fullImgUrl)||Fe,className:"w-10 cursor-pointer hover:scale-105"})})})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:["Action by ",e.jsx("span",{className:"font-semibold text-black text-md",children:(d==null?void 0:d.actionByUserId)===null?"Direct Citizen":(te=d==null?void 0:d.actionBy)==null?void 0:te.fullName})]})]})]})})})]})]})})})}function We(){return e.jsx(me,{title:"Complaint Details",subTitle:"Manage all the Complaint here",children:e.jsx("div",{className:"",children:e.jsx(Ae,{})})})}export{We as default};
