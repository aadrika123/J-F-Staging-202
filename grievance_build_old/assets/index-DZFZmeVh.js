import{b8 as w,b as y,o as C,s as S,g as j,j as e,t as U,v as A,H as F,F as H,a0 as I,J as R,B as T,w as $,G as D,c as B,d as M,_ as p}from"./index-DCRt_GeZ.js";import{T as _,a as k,b as g,c as d,d as G,e as t}from"./table-FTQgk3pn.js";const L=B().shape({ulbId:M().required("ulbId is Required")});function q(){var u,x,b,h,m;const N=w(),n=y({resolver:C(L)}),v=async a=>{var l,c,o,r;try{const s=await N.mutateAsync({api:`${(l=j)==null?void 0:l.citizenFindNewHolding}`,data:{ulbId:a==null?void 0:a.ulbId}});(c=s.data)!=null&&c.status?p.success((o=s==null?void 0:s.data)==null?void 0:o.message):p.error((r=s==null?void 0:s.data)==null?void 0:r.message),n.reset({oldHoldingNo:""})}catch(s){console.log(s)}},i=S({api:`${(u=j)==null?void 0:u.getAllUlbDirect}?page=1&limit=10000`,key:"getAllUlbDirect",options:{enabled:!0,refetchOnMount:!1}}),f=a=>{console.log("getAllUlbDirect",a);const l=a,c="Compalint registration",o=`Dear Sir,
    --Write your complaint here--`,r=encodeURIComponent(c),s=encodeURIComponent(o);window.open(`https://mail.google.com/mail/?view=cm&fs=1&to=${l}&su=${r}&body=${s}`,"_blank")};return e.jsxs("div",{className:"w-full md:w-8/12 p-2 mx-auto",children:[e.jsx("div",{className:"mt-4",children:e.jsx("h1",{className:"text-blue-800 font-bold text-2xl underline mb-2",children:"Ulb Wise Grievance via Email"})}),e.jsxs(U,{children:[e.jsx(A,{className:"px-7",children:e.jsx(F,{children:e.jsx(H,{methods:n,onSubmit:n.handleSubmit(v),children:e.jsx("div",{className:"md:px-24 space-y-4",children:e.jsxs("div",{className:"sm:flex  items-center justify-start gap-4",children:[e.jsx("div",{className:"sm:w-1/2",children:e.jsxs("div",{children:[e.jsx(I,{htmlFor:"ulbId",children:"Select Your Ulb"}),e.jsx(R,{className:"bg-background cursor-pointer",name:"ulbId",data:((b=(x=i.data)==null?void 0:x.data)==null?void 0:b.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.ulbName})))??[]})]})}),e.jsx("div",{className:"",children:e.jsx(T,{isLoading:n.formState.isSubmitting,type:"submit",className:"mt-4 w-auto rounded-xl px-10 py-5 float-right",children:"Search"})})]})})})})}),e.jsx($,{children:e.jsxs(_,{children:[e.jsx(k,{children:e.jsxs(g,{children:[e.jsx(d,{className:"",children:"#"}),e.jsx(d,{className:"",children:"Ulb Name"}),e.jsx(d,{className:"",children:"Mail"}),e.jsx(d,{className:"",children:"Action"})]})}),e.jsx(G,{children:(m=(h=i.data)==null?void 0:h.data)==null?void 0:m.map((a,l)=>e.jsxs(g,{children:[e.jsx(t,{children:l+1}),e.jsx(t,{children:a==null?void 0:a.ulbName}),e.jsx(t,{className:"",children:(a==null?void 0:a.email)||"N/A"}),e.jsx(t,{onClick:()=>{f(a==null?void 0:a.email)},children:e.jsx(D,{children:" Mail Now"})})]},a._id))})]})})]})]})}function P(){return e.jsx("div",{className:"",children:e.jsx(q,{})})}export{P as default};
