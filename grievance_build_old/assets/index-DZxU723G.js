import{r as t,a as pa,s as b,g as P,j as a,C as va,V as y,t as C,v as T,H as R,w as _,S,x as N,a2 as r,L as A,G as $,y as I,a8 as wa}from"./index-saLm0lmn.js";import{P as ba}from"./index-C-CbiPI7.js";import{T as O,a as k,b as u,c as e,d as B,e as c}from"./table-CLmBlTyG.js";import{P as G}from"./index-CGMc7V7k.js";import{S as Y}from"./index-T07KRYP7.js";import{T as Pa,a as ya,b as M,c as F}from"./tabs-ChlPtH_0.js";wa("http://localhost:8008");function Ca(){var E,U,V,X,H,q,z,L,W,J,K,Q,Z,D,m,aa,la,ea,ca,da,na,sa,ra,xa,ha,ja,oa,ia,Na,fa,ua,ga,ta;const[x,p]=t.useState(1),[h,v]=t.useState(10),[f,w]=t.useState(""),{user:j}=pa();t.useState([]);const d=b({api:`${P.getComplaintInbox}?page=${x}&limit=${h}&q=${f}`,key:"getComplaintInboxList",value:[x,h],options:{enabled:!0}}),n=b({api:`${P.getComplaintOutbox}?page=${x}&limit=${h}&q=${f}`,key:"getComplaintOutboxList",value:[x,h],options:{enabled:!0}}),s=b({api:`${P.getComplaintSpecial}?page=${x}&limit=${h}&q=${f}`,key:"getComplaintSpecialList",value:[x,h],options:{enabled:!0}});return a.jsx("main",{className:"grid items-start",children:a.jsxs(Pa,{defaultValue:"INBOX",className:"w-full",children:[a.jsxs("div",{className:"flex",children:[a.jsx(va,{className:"flex-1 text-2xl font-bold",children:"Registered Grievance List"}),a.jsx("div",{className:"flex-1 flex justify-end",children:a.jsxs(ya,{className:"grid w-auto grid-cols-3",children:[(j==null?void 0:j.roleId)!==y&&a.jsx(M,{value:"INBOX",children:"Grievance Inbox"}),(j==null?void 0:j.roleId)!==y&&a.jsx(M,{value:"OUTBOX",children:"Grievance Outbox"}),(j==null?void 0:j.roleId)!==y&&a.jsx(M,{value:"SPECIAL",children:"Special Grievances"})]})})]}),a.jsx(F,{value:"INBOX",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(Y,{search:f,setSearch:w,refetch:d.refetch,isFetching:d.isLoading})}),a.jsx("div",{})]}),a.jsxs(C,{children:[a.jsx(T,{className:"px-7",children:a.jsxs(R,{children:["Grievance List Inbox (",(U=(E=d.data)==null?void 0:E.data)==null?void 0:U.totalDocs,")"]})}),a.jsx(_,{children:d.isLoading?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(S,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(O,{children:[a.jsx(k,{children:a.jsxs(u,{children:[a.jsx(e,{className:"",children:"#"}),a.jsx(e,{className:"",children:"Name"}),a.jsx(e,{className:"",children:"Department"}),a.jsx(e,{className:"",children:"ULB"}),a.jsx(e,{className:"",children:"Grievance No."}),a.jsx(e,{className:"",children:"Module"}),a.jsx(e,{className:"",children:"Date"}),a.jsx(e,{className:"",children:"Status"}),a.jsx(e,{children:"Action"})]})}),a.jsx(B,{children:(H=(X=(V=d==null?void 0:d.data)==null?void 0:V.data)==null?void 0:X.docs)==null?void 0:H.map((l,g)=>{var o,i;return a.jsxs(u,{children:[a.jsx(c,{children:g+1}),a.jsx(c,{children:(l==null?void 0:l.citizenName)||"N/A"}),a.jsx(c,{className:"font-semibold",children:(l==null?void 0:l.complaintTitle)||"N/A"}),a.jsx(c,{children:((o=l==null?void 0:l.ulb)==null?void 0:o.ulbName)||"N/A"}),a.jsx(c,{children:(l==null?void 0:l.complaintRefNo)||"N/A"}),a.jsx(c,{children:((i=l==null?void 0:l.module)==null?void 0:i.moduleName)||"N/A"}),a.jsx(c,{children:N(l==null?void 0:l.createdAt).format("DD-MM-YYYY")}),a.jsxs(c,{children:[(l==null?void 0:l.wf_status)===4&&a.jsx(r,{variant:"destructive",children:"Closed"}),(l==null?void 0:l.wf_status)===3&&a.jsx(r,{className:"bg-amber-500 text-white",children:"Pending(Re-Opened)"}),(l==null?void 0:l.wf_status)===2&&a.jsx(r,{variant:"destructive",children:"Rejected"}),(l==null?void 0:l.wf_status)===1&&a.jsx(r,{variant:"success",children:"Resolved"}),(l==null?void 0:l.wf_status)===0&&a.jsx(r,{variant:"secondary",children:"Pending"})]}),a.jsx(c,{children:a.jsx(A,{to:`/grievance/dashboard/workflow-details?complaintRefNo=${l==null?void 0:l.complaintRefNo}&complaintId=${l==null?void 0:l._id}`,children:a.jsx($,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},l._id)})})]}),a.jsx(I,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(G,{page:x,perPage:h,totalPage:(z=(q=d==null?void 0:d.data)==null?void 0:q.data)==null?void 0:z.totalDocs,hasNextPage:(W=(L=d==null?void 0:d.data)==null?void 0:L.data)==null?void 0:W.hasNextPage,hasPrevPage:(K=(J=d==null?void 0:d.data)==null?void 0:J.data)==null?void 0:K.hasPrevPage,setPage:p,setPerPage:v})})]})})]})]})}),a.jsx(F,{value:"OUTBOX",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(Y,{search:f,setSearch:w,refetch:n.refetch,isFetching:n.isLoading})}),a.jsx("div",{})]}),a.jsxs(C,{children:[a.jsx(T,{className:"px-7",children:a.jsxs(R,{children:["Grievance List Outbox (",(Z=(Q=n.data)==null?void 0:Q.data)==null?void 0:Z.totalDocs,")"]})}),a.jsx(_,{children:n.isLoading?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(S,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(O,{children:[a.jsx(k,{children:a.jsxs(u,{children:[a.jsx(e,{className:"",children:"#"}),a.jsx(e,{className:"",children:"Name"}),a.jsx(e,{className:"",children:"Title"}),a.jsx(e,{className:"",children:"ULB"}),a.jsx(e,{className:"",children:"Grievance No."}),a.jsx(e,{className:"",children:"Module"}),a.jsx(e,{className:"",children:"Date"}),a.jsx(e,{className:"",children:"Status"}),a.jsx(e,{className:"",children:"Pending From"}),a.jsx(e,{children:"Action"})]})}),a.jsx(B,{children:(aa=(m=(D=n==null?void 0:n.data)==null?void 0:D.data)==null?void 0:m.docs)==null?void 0:aa.map((l,g)=>{var o,i;return a.jsxs(u,{children:[a.jsx(c,{children:g+1}),a.jsx(c,{children:l==null?void 0:l.citizenName}),a.jsx(c,{className:"font-semibold",children:l==null?void 0:l.complaintTitle}),a.jsx(c,{children:(o=l==null?void 0:l.ulb)==null?void 0:o.ulbName}),a.jsx(c,{children:l==null?void 0:l.complaintRefNo}),a.jsx(c,{children:(i=l==null?void 0:l.module)==null?void 0:i.moduleName}),a.jsx(c,{children:N(l==null?void 0:l.createdAt).format("DD-MM-YYYY")}),a.jsxs(c,{children:[(l==null?void 0:l.wf_status)===4&&a.jsx(r,{variant:"destructive",children:"Closed"}),(l==null?void 0:l.wf_status)===3&&a.jsx(r,{className:"bg-amber-500 text-white",children:"Pending(Re-Opened)"}),(l==null?void 0:l.wf_status)===2&&a.jsx(r,{variant:"destructive",children:"Rejected"}),(l==null?void 0:l.wf_status)===1&&a.jsx(r,{variant:"success",children:"Resolved"}),(l==null?void 0:l.wf_status)===0&&a.jsx(r,{variant:"secondary",children:"Pending"})]}),a.jsxs(c,{className:"flex justify-center items-center",children:[N().diff(N(l==null?void 0:l.createdAt),"days")," days"]}),a.jsx(c,{children:a.jsx(A,{to:`/grievance/dashboard/workflow-details?complaintRefNo=${l==null?void 0:l.complaintRefNo}&complaintId=${l==null?void 0:l._id}`,children:a.jsx($,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},l._id)})})]}),a.jsx(I,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(G,{page:x,perPage:h,totalPage:(ea=(la=n==null?void 0:n.data)==null?void 0:la.data)==null?void 0:ea.totalDocs,hasNextPage:(da=(ca=n==null?void 0:n.data)==null?void 0:ca.data)==null?void 0:da.hasNextPage,hasPrevPage:(sa=(na=n==null?void 0:n.data)==null?void 0:na.data)==null?void 0:sa.hasPrevPage,setPage:p,setPerPage:v})})]})})]})]})}),a.jsx(F,{value:"SPECIAL",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(Y,{search:f,setSearch:w,refetch:s.refetch,isFetching:s.isLoading})}),a.jsx("div",{})]}),a.jsxs(C,{children:[a.jsx(T,{className:"px-7",children:a.jsxs(R,{children:["Grievance List Special (",(xa=(ra=s.data)==null?void 0:ra.data)==null?void 0:xa.totalDocs,") - ",a.jsx("span",{className:"text-amber-500",children:"This list contains special complaints"})]})}),a.jsx(_,{children:s.isLoading?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(S,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(O,{children:[a.jsx(k,{children:a.jsxs(u,{children:[a.jsx(e,{className:"",children:"#"}),a.jsx(e,{className:"",children:"Name"}),a.jsx(e,{className:"",children:"Title"}),a.jsx(e,{className:"",children:"ULB"}),a.jsx(e,{className:"",children:"Grievance No."}),a.jsx(e,{className:"",children:"Module"}),a.jsx(e,{className:"",children:"Date"}),a.jsx(e,{className:"",children:"Status"}),a.jsx(e,{className:"",children:"Pending From"}),a.jsx(e,{children:"Action"})]})}),a.jsx(B,{children:(oa=(ja=(ha=s==null?void 0:s.data)==null?void 0:ha.data)==null?void 0:ja.docs)==null?void 0:oa.map((l,g)=>{var o,i;return a.jsxs(u,{children:[a.jsx(c,{children:g+1}),a.jsx(c,{children:l==null?void 0:l.citizenName}),a.jsx(c,{className:"font-semibold",children:l==null?void 0:l.complaintTitle}),a.jsx(c,{children:(o=l==null?void 0:l.ulb)==null?void 0:o.ulbName}),a.jsx(c,{children:l==null?void 0:l.complaintRefNo}),a.jsx(c,{children:(i=l==null?void 0:l.module)==null?void 0:i.moduleName}),a.jsx(c,{children:N(l==null?void 0:l.createdAt).format("DD-MM-YYYY")}),a.jsxs(c,{children:[(l==null?void 0:l.wf_status)===4&&a.jsx(r,{variant:"destructive",children:"Closed"}),(l==null?void 0:l.wf_status)===3&&a.jsx(r,{className:"bg-amber-500 text-white",children:"Pending(Re-Opened)"}),(l==null?void 0:l.wf_status)===2&&a.jsx(r,{variant:"destructive",children:"Rejected"}),(l==null?void 0:l.wf_status)===1&&a.jsx(r,{variant:"success",children:"Resolved"}),(l==null?void 0:l.wf_status)===0&&a.jsx(r,{variant:"secondary",children:"Pending"})]}),a.jsxs(c,{className:"flex justify-center items-center",children:[N().diff(N(l==null?void 0:l.createdAt),"days")," days"]}),a.jsx(c,{children:a.jsx(A,{to:`/grievance/dashboard/workflow-details?complaintRefNo=${l==null?void 0:l.complaintRefNo}&complaintId=${l==null?void 0:l._id}`,children:a.jsx($,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},l._id)})})]}),a.jsx(I,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(G,{page:x,perPage:h,totalPage:(Na=(ia=s==null?void 0:s.data)==null?void 0:ia.data)==null?void 0:Na.totalDocs,hasNextPage:(ua=(fa=s==null?void 0:s.data)==null?void 0:fa.data)==null?void 0:ua.hasNextPage,hasPrevPage:(ta=(ga=s==null?void 0:s.data)==null?void 0:ga.data)==null?void 0:ta.hasPrevPage,setPage:p,setPerPage:v})})]})})]})]})})]})})}function Ia(){return a.jsx(ba,{title:"",subTitle:"",children:a.jsx("div",{className:"pb-12",children:a.jsx(Ca,{})})})}export{Ia as default};
