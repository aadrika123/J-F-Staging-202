import{K as H,j as e,I as B,D as P,x as $,b as Y,o as V,F as Q,C as R,$ as td,a6 as K,Z as X,y as J,B as Z,c as D,d as ee,g,_ as o,s as O,z as T,r as _,a7 as vd,a8 as yd,a0 as x,a1 as G,a2 as q,a3 as z,a4 as L,L as cd,t as pd,w as wd,H as Td,k as Ed,N as nd}from"./index-DM7OnLOQ.js";import{P as Id}from"./index-DWmfyQt7.js";import{p as od}from"./profile-B9PrzW7y.js";import{g as A}from"./services-KQnp_8oA.js";import{I as id}from"./info-DGAUMFEO.js";import{T as xd,a as hd,b as W,c as S,d as ud,e as M}from"./table-DZNEA4zA.js";import{S as jd}from"./Spinner-CtQw-0Oe.js";import{M as Cd}from"./move-right-Cth-RJmZ.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=H("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=H("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=H("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function Rd({commentData:l}){var a,j;return e.jsx("div",{children:e.jsxs("div",{className:"max-w-lg mx-auto border px-6 py-2 rounded-lg mb-2",children:[e.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[e.jsx(B,{src:((a=l==null?void 0:l.userId)==null?void 0:a.fullImgUrl)||od,alt:"Student",className:"h-6 w-6 rounded-full"})," ",e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-800 font-semibold",children:((j=l==null?void 0:l.userId)==null?void 0:j.fullName)||""}),e.jsx("div",{className:"text-xs text-gray-500",children:P(l==null?void 0:l.timeStamp).format("DD-MM-YYYY")})]})]}),e.jsx("p",{className:"text-sm leading-relaxed mb-6",children:l==null?void 0:l.comment})]})})}const Ad=D().shape({comment:ee().required("Write comment")});function kd({setisDialogOpen:l,complaintData:a,actionPermissions:j}){const n=$({}),h=Y({resolver:V(Ad)}),f=async i=>{var b,t;let y={complaintId:(t=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:t._id,comment:i==null?void 0:i.comment};try{const r=await n.mutateAsync({api:g.resolveComplaint,data:y});r.data.success?(o.success(r.data.message),j.refetch(),a==null||a.refetch(),l(!1)):o.error(r.data.message)}catch(r){o.error(A(r))}};return e.jsx(Q,{methods:h,onSubmit:h.handleSubmit(f),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"text-2xl flex items-center justify-between font-bold mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"w-7 h-7 bg-green-600 rounded-full bg-red-5500 text-white inline-flex justify-center items-center mr-2",children:e.jsx(td,{className:"inline"})})," Resolve Complaint"]}),e.jsx("div",{children:e.jsx(K,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>l(!1)})})]}),e.jsxs(X,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(id,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"This comment will be visible to citizen."})]}),e.jsx(J,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(Z,{isLoading:h.formState.isSubmitting,type:"submit",className:" w-full",children:"Resolve"})})]})})}const Ud=D().shape({comment:ee().required("Select comment")});function Ld({setisDialogOpen:l,complaintData:a,actionPermissions:j}){const n=$({}),h=Y({resolver:V(Ud)}),f=async i=>{var b,t;let y={complaintId:(t=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:t._id,comment:i==null?void 0:i.comment};try{const r=await n.mutateAsync({api:g.rejectComplaint,data:y});r.data.success?(o.success(r.data.message),j.refetch(),a==null||a.refetch(),l(!1)):o.error(r.data.message)}catch(r){o.error(A(r))}};return e.jsx(Q,{methods:h,onSubmit:h.handleSubmit(f),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"text-2xl flex items-center justify-between font-bold mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"w-7 h-7 bg-red-600 rounded-full bg-red-5500 text-white inline-flex justify-center items-center mr-2",children:e.jsx(K,{})})," Reject Complaint"]}),e.jsx("div",{children:e.jsx(K,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>l(!1)})})]}),e.jsxs(X,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(id,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"This comment will be visible to citizen."})]}),e.jsx(J,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(Z,{isLoading:h.formState.isSubmitting,type:"submit",className:" w-full",children:"Reject"})})]})})}function Od({setisDialogOpen:l,complaintData:a}){var f,i,y,b,t;const j=$({}),n=O({api:`${g.getAllWFUserMappingToTransfer}?workflowId=${(i=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:i.wf_currentWorkflowId}`,key:"getWorkflowMembers",value:[],options:{enabled:!0}}),h=async r=>{var k,p,s;let w={complaintId:(p=(k=a==null?void 0:a.data)==null?void 0:k.data)==null?void 0:p._id,workflowId:null,userId:r};try{const c=await j.mutateAsync({api:(s=g)==null?void 0:s.transferComplaintToUlb,data:w});c.data.success?(o.success(c.data.message),l(!1)):o.error(c.data.message)}catch(c){o.error(A(c))}};return e.jsx("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:e.jsxs("div",{children:[e.jsxs(R,{className:"text-2xl flex items-center justify-between font-bold mb-6",children:[e.jsx("div",{children:"Transfer to any Members"}),e.jsx("div",{children:e.jsx(K,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>l(!1)})})]}),n.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(jd,{})}):e.jsx(e.Fragment,{children:e.jsxs(xd,{children:[e.jsx(hd,{children:e.jsxs(W,{children:[e.jsx(S,{className:"",children:"#"}),e.jsx(S,{className:"",children:"Member"}),e.jsx(S,{className:"",children:"Workflow Role"}),e.jsx(S,{children:"Action"})]})}),e.jsx(ud,{children:(t=(b=(y=n==null?void 0:n.data)==null?void 0:y.data)==null?void 0:b.docs)==null?void 0:t.map((r,w)=>e.jsxs(W,{children:[e.jsx(M,{children:w+1}),e.jsx(M,{children:r==null?void 0:r.UserName}),e.jsx(M,{children:r==null?void 0:r.workflowRoleName}),e.jsx(M,{className:"space-x-2",children:e.jsx(T,{name:"bts",type:"button",className:"mr-4",onClick:()=>h(r==null?void 0:r.userId),children:"Transfer"})})]},r._id))})]})})]})})}function Bd({setisDialogOpen:l,complaintData:a}){var f,i,y,b,t;const j=$({}),n=O({api:`${(f=g)==null?void 0:f.getAllUlbDirect}?page=1&limit=10000`,key:"getAllUlbDirect",options:{enabled:!0}}),h=async r=>{var w,k,p;try{let s={complaintId:(k=(w=a==null?void 0:a.data)==null?void 0:w.data)==null?void 0:k._id,ulbId:r};const c=await j.mutateAsync({api:(p=g)==null?void 0:p.transferComplaintToUlbSpecific,data:s});c.data.success?(o.success(c.data.message),a.refetch(),l(!1)):o.error(c.data.message)}catch(s){o.error(A(s))}};return e.jsx("div",{className:"gap-x-2 gap-y-4 px-10 py-10 h-[600px] overflow-y-scroll",children:e.jsxs("div",{children:[e.jsxs(R,{className:"text-2xl flex items-center justify-between font-bold mb-6",children:[e.jsxs("div",{children:["Transfer to ULB(",(y=(i=n==null?void 0:n.data)==null?void 0:i.data)==null?void 0:y.length,")"]}),e.jsx("div",{children:e.jsx(K,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>l(!1)})})]}),n.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(jd,{})}):e.jsx(e.Fragment,{children:e.jsxs(xd,{children:[e.jsx(hd,{children:e.jsxs(W,{children:[e.jsx(S,{className:"",children:"#"}),e.jsx(S,{className:"",children:"ULB"}),e.jsx(S,{children:"Action"})]})}),e.jsx(ud,{children:(t=(b=n==null?void 0:n.data)==null?void 0:b.data)==null?void 0:t.map((r,w)=>e.jsxs(W,{children:[e.jsx(M,{children:w+1}),e.jsx(M,{children:r==null?void 0:r.ulbName}),e.jsx(M,{className:"space-x-2",children:e.jsx(T,{name:"bts",type:"button",className:"mr-4",onClick:()=>h(r==null?void 0:r._id),children:"Transfer"})})]},r._id))})]})})]})})}const Pd="66d30fc3244bfdc8fc34c7f8",Kd="66d30fc8244bfdc8fc34c7fb",$d="66d317939285f57005e7c4b5",Wd="66d5523f7741e5ef86ebc3c8",Fd="66d57034c965c99dbe57be6e",Gd="66d5b0f77be6a0da66671852",qd="66d5b1a87be6a0da66671876",zd="66ec16adc5186d091150d0e2",Hd="66ec22c112e1a6266fff9882",Yd="66f10277abec0c518979b0f6",Vd="66f102a2abec0c518979b0fe",Qd="66f102bfabec0c518979b106",Xd="66f102d5abec0c518979b10a",Jd="66f102e0abec0c518979b10e",Zd="66f102f3abec0c518979b112",Dd="https://jharkhandegovernance.com/property/search/fresh/direct/direct",ea="https://jharkhandegovernance.com/water/waterApplicationSearch",sa="",da="",aa="",ra="",la="",ca="",na="",ta="",oa="",ia="",xa="",ha="",ua="",ja=D().shape({comment:ee().required("Comment is required")});function fa({setsearchLink:l,setsearchLabel:a}){var de,ae,re,le,ce,ne,te,oe,ie,xe,he,ue,je,fe,Ne,be,me,ge,ve,ye,pe,we,Te,Ee,Ie,Ce,_e,Se,Me,Re,Ae,ke,Ue,Le,Oe,Be,Pe,Ke,$e,We,Fe,Ge,qe,ze,He,Ye,Ve,Qe,Xe,Je,Ze,De,es,ss,ds,as,rs,ls,cs,ns,ts,os,is,xs,hs,us,js,fs,Ns,bs,ms,gs,vs,ys,ps,ws,Ts,Es,Is,Cs,_s,Ss,Ms,Rs,As,ks,Us,Ls,Os,Bs;const[j,n]=_.useState(!1),[h,f]=_.useState(0),[i,y]=_.useState(!1),[b,t]=_.useState(!1),r=$({}),p=new URLSearchParams(Ed().search).get("complaintId"),s=O({api:`${g.getComplaintDetailsById}/${p}`,key:"ComplaintDetails",options:{enabled:!0}}),c=O({api:`${g.checkWfActions}/${p}`,key:"actionPermission",options:{enabled:!0}}),F=O({api:`${g.complaintApplicationLog}/${p}`,key:"complaintApplicationLog",options:{enabled:!0}}),U=O({api:`${g.getAllCommentsByComplaintId}/${p}`,key:"getAllComments",options:{enabled:!0}}),se=Y({defaultValues:{comment:""},resolver:V(ja)}),{handleSubmit:fd}=se,Nd=async(d,N)=>{var E,I;const m=N.nativeEvent.submitter.name;let u="";m==="comment"&&(u=g.openComment);let v={comment:d.comment,complaintId:(I=(E=s==null?void 0:s.data)==null?void 0:E.data)==null?void 0:I._id};try{const C=await r.mutateAsync({api:u,data:v});C.data.success?(o.success(C.data.message),s==null||s.refetch(),U==null||U.refetch(),c.refetch()):o.error(C.data.message)}catch(C){o.error(A(C))}},bd=async()=>{nd("Are you sure?","Do you want to move this complaint to your panel",async()=>{var N,m;let d={complaintId:(m=(N=s==null?void 0:s.data)==null?void 0:N.data)==null?void 0:m._id,comment:""};try{const u=await r.mutateAsync({api:g.moveComplaintToMe,data:d});u.data.success?n(!0):o.error(u.data.message)}catch(u){o.error(A(u))}})},md=async d=>{nd("Are you sure?",`Do you want to ${d.target.checked?"Escalate":"De-Escalate"} this complaint`,async()=>{var m,u;let N={complaintId:(u=(m=s==null?void 0:s.data)==null?void 0:m.data)==null?void 0:u._id};try{const v=await r.mutateAsync({api:g.escalateAction,data:N});v.data.success?(n(!0),s.refetch()):o.error(v.data.message)}catch(v){o.error(A(v))}})},gd=()=>{var d,N,m,u,v,E,I,C,Ps,Ks,$s,Ws,Fs,Gs,qs,zs,Hs,Ys,Vs,Qs,Xs,Js,Zs,Ds,ed,sd,dd,ad,rd,ld;((N=(d=s==null?void 0:s.data)==null?void 0:d.data)==null?void 0:N.moduleId)===Pd&&(l(Dd),a("Search Property Details")),((u=(m=s==null?void 0:s.data)==null?void 0:m.data)==null?void 0:u.moduleId)===Kd&&(l(ea),a("Search Water Details")),((E=(v=s==null?void 0:s.data)==null?void 0:v.data)==null?void 0:E.moduleId)===$d&&(l(sa),a("Search Trade Details")),((C=(I=s==null?void 0:s.data)==null?void 0:I.data)==null?void 0:C.moduleId)===Wd&&(l(da),a("Search Pet Registration Details")),((Ks=(Ps=s==null?void 0:s.data)==null?void 0:Ps.data)==null?void 0:Ks.moduleId)===Fd&&(l(aa),a("Search Other Details")),((Ws=($s=s==null?void 0:s.data)==null?void 0:$s.data)==null?void 0:Ws.moduleId)===Gd&&(l(ra),a("Search Grievance Details")),((Gs=(Fs=s==null?void 0:s.data)==null?void 0:Fs.data)==null?void 0:Gs.moduleId)===qd&&(l(la),a("Search SWM Details")),((zs=(qs=s==null?void 0:s.data)==null?void 0:qs.data)==null?void 0:zs.moduleId)===zd&&(l(ca),a("Search Water Tanker Details")),((Ys=(Hs=s==null?void 0:s.data)==null?void 0:Hs.data)==null?void 0:Ys.moduleId)===Hd&&(l(na),a("Search Advertisement Details")),((Qs=(Vs=s==null?void 0:s.data)==null?void 0:Vs.data)==null?void 0:Qs.moduleId)===Yd&&(l(ta),a("Search Septic Tank Details")),((Js=(Xs=s==null?void 0:s.data)==null?void 0:Xs.data)==null?void 0:Js.moduleId)===Vd&&(l(oa),a("Search Lodge/Banquet Details")),((Ds=(Zs=s==null?void 0:s.data)==null?void 0:Zs.data)==null?void 0:Ds.moduleId)===Qd&&(l(ia),a("Search Marriage Details")),((sd=(ed=s==null?void 0:s.data)==null?void 0:ed.data)==null?void 0:sd.moduleId)===Xd&&(l(xa),a("Search Public Transport Details")),((ad=(dd=s==null?void 0:s.data)==null?void 0:dd.data)==null?void 0:ad.moduleId)===Jd&&(l(ha),a("Search Parking Details")),((ld=(rd=s==null?void 0:s.data)==null?void 0:rd.data)==null?void 0:ld.moduleId)===Zd&&(l(ua),a("Search Rig Details"))};return _.useEffect(()=>{gd()},[s==null?void 0:s.data]),_.useEffect(()=>{setTimeout(()=>{n(!1)},1600)},[j]),e.jsxs("main",{className:"grid flex-1 items-start",children:[j&&e.jsx("div",{style:{zIndex:1001},className:"w-full h-full fixed top-0 left-0 bg-white z-50 flex justify-center items-center",children:e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx(vd,{className:"w-24",animationData:yd,loop:!0}),e.jsx("div",{className:"font-semibold",children:"Complaint Moved successfully."})]})}),e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-8 lg:col-span-2",children:[e.jsx("div",{className:"",children:e.jsx("div",{className:" bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto  shadow-lg rounded-lg p-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-blue-800 mb-6 uppercase",children:["Complaint No : ",(ae=(de=s==null?void 0:s.data)==null?void 0:de.data)==null?void 0:ae.complaintRefNo]}),((ce=(le=(re=s==null?void 0:s.data)==null?void 0:re.data)==null?void 0:le.workflow)==null?void 0:ce.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),(oe=(te=(ne=s==null?void 0:s.data)==null?void 0:ne.data)==null?void 0:te.workflow)==null?void 0:oe.workFlowName]}),!((he=(xe=(ie=s==null?void 0:s.data)==null?void 0:ie.data)==null?void 0:xe.workflow)!=null&&he.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),"State GRO"]}),e.jsx("h1",{className:"text-md font-bold  mb-6 flex items-center",children:e.jsxs("span",{children:["Status -",((je=(ue=s==null?void 0:s.data)==null?void 0:ue.data)==null?void 0:je.wf_status)===0&&e.jsx(x,{className:"bg-yellow-500 ml-2",children:"Pending"}),((Ne=(fe=s==null?void 0:s.data)==null?void 0:fe.data)==null?void 0:Ne.wf_status)===1&&e.jsx(x,{className:"bg-green-500 ml-2",children:"Resolved"}),((me=(be=s==null?void 0:s.data)==null?void 0:be.data)==null?void 0:me.wf_status)===2&&e.jsx(x,{className:"bg-red-500 ml-2",children:"Rejected"}),((ve=(ge=s==null?void 0:s.data)==null?void 0:ge.data)==null?void 0:ve.wf_status)===3&&e.jsx(x,{className:"bg-yellow-500 ml-2",children:"Pending(re-opened)"}),((pe=(ye=s==null?void 0:s.data)==null?void 0:ye.data)==null?void 0:pe.wf_status)===4&&e.jsx(x,{variant:"destructive",children:"Closed"})]})})]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Registered on ",P((Te=(we=s==null?void 0:s.data)==null?void 0:we.data)==null?void 0:Te.createdAt).format("DD-MM-YYYY")]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsxs("div",{className:"mt-4  grid grid-cols-1 md:grid-cols-3   space-y-4",children:[e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Full Name : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ie=(Ee=s==null?void 0:s.data)==null?void 0:Ee.data)==null?void 0:Ie.citizenName})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Mobile No : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(_e=(Ce=s==null?void 0:s.data)==null?void 0:Ce.data)==null?void 0:_e.mobileNo})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Email : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Me=(Se=s==null?void 0:s.data)==null?void 0:Se.data)==null?void 0:Me.email})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"ULB : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(ke=(Ae=(Re=s==null?void 0:s.data)==null?void 0:Re.data)==null?void 0:Ae.ulb)==null?void 0:ke.ulbName})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Module : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Oe=(Le=(Ue=s==null?void 0:s.data)==null?void 0:Ue.data)==null?void 0:Le.module)==null?void 0:Oe.moduleName})," "]})]}),((Pe=(Be=s==null?void 0:s.data)==null?void 0:Be.data)==null?void 0:Pe.fixedNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[($e=(Ke=s==null?void 0:s.data)==null?void 0:Ke.data)==null?void 0:$e.fixedNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Fe=(We=s==null?void 0:s.data)==null?void 0:We.data)==null?void 0:Fe.fixedNo})," "]})]}),((qe=(Ge=s==null?void 0:s.data)==null?void 0:Ge.data)==null?void 0:qe.tempNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(He=(ze=s==null?void 0:s.data)==null?void 0:ze.data)==null?void 0:He.tempNoLabel," : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ve=(Ye=s==null?void 0:s.data)==null?void 0:Ye.data)==null?void 0:Ve.tempNo})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Pending From : "}),e.jsxs("div",{children:[e.jsxs("p",{className:"opacity-90",children:[P().diff(P((Xe=(Qe=s==null?void 0:s.data)==null?void 0:Qe.data)==null?void 0:Xe.createdAt),"days")," days"]})," "]})]}),e.jsx("div",{className:"col-span-3 border-b my-20 border-[#99B37C]"}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Title : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ze=(Je=s==null?void 0:s.data)==null?void 0:Je.data)==null?void 0:Ze.complaintTitle})," "]})]}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Description : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(es=(De=s==null?void 0:s.data)==null?void 0:De.data)==null?void 0:es.complaintDescription})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Complaint Document"}),e.jsxs(G,{children:[e.jsx(q,{}),e.jsx(z,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:e.jsx(B,{src:"/images/slider.png",className:"w-80"})})}),e.jsx(L,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer ",children:e.jsx(B,{src:"/images/slider.png",className:"w-40"})})})]})]})]}),e.jsxs("section",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-800",children:["Complaint Flow History ",e.jsxs("span",{onClick:()=>y(!i),className:"cursor-pointer",children:[!i&&e.jsxs("span",{className:"text-gray-400 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg ",children:["Show ",e.jsx(Sd,{size:15,className:"inline"})]}),i&&e.jsxs("span",{className:"text-gray-400 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg ",children:["Hide ",e.jsx(_d,{size:15,className:"inline"})]})]})," "]}),((ds=(ss=c==null?void 0:c.data)==null?void 0:ss.permission)==null?void 0:ds.canMoveComplaint)&&e.jsx(T,{onClick:bd,children:"Move Complaint to my Panel"}),((rs=(as=c==null?void 0:c.data)==null?void 0:as.permission)==null?void 0:rs.canUpdate)&&e.jsx(cd,{to:`/grievance/dashboard/management-complaint-form?complaintId=${(cs=(ls=s==null?void 0:s.data)==null?void 0:ls.data)==null?void 0:cs._id}`,children:e.jsx(T,{children:"Update Details"})})]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),i&&e.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:(ts=(ns=F==null?void 0:F.data)==null?void 0:ns.data)==null?void 0:ts.map((d,N)=>{var m,u,v,E,I;return e.jsxs("div",{className:"flex space-x-4 items-center",children:[e.jsx("div",{children:N+1}),e.jsxs("div",{children:[(d==null?void 0:d.actionStatus)===0&&e.jsx(x,{className:"bg-gray-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===1&&e.jsx(x,{className:"bg-green-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===2&&e.jsx(x,{className:"bg-red-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===3&&e.jsx(x,{children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===4&&e.jsx(x,{className:"bg-amber-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===5&&e.jsx(x,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===6&&e.jsx(x,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===7&&e.jsx(x,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===8&&e.jsx(x,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===9&&e.jsx(x,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===10&&e.jsx(x,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===11&&e.jsx(x,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===12&&e.jsx(x,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),e.jsx("div",{className:"text-xs text-gray-600 font-semibold mt-1",children:P((u=(m=s==null?void 0:s.data)==null?void 0:m.data)==null?void 0:u.createdAt).format("DD-MM-YYYY hh:mm a")})]}),e.jsx(Cd,{}),e.jsxs("div",{children:[e.jsxs(G,{children:[e.jsx(q,{}),e.jsx(z,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:e.jsx(B,{src:(v=d==null?void 0:d.actionBy)==null?void 0:v.fullImgUrl,className:"w-60"})})}),e.jsx(L,{asChild:!0,children:e.jsx("div",{className:"w-10 h-10 rounded-full border overflow-hidden cursor-pointer",children:e.jsx(B,{src:((E=d==null?void 0:d.actionBy)==null?void 0:E.fullImgUrl)||od,className:"w-10 cursor-pointer hover:scale-105"})})})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:["Action by  ",e.jsx("span",{className:"font-semibold text-black text-md",children:(d==null?void 0:d.actionByUserId)===null?"Direct Citizen":(I=d==null?void 0:d.actionBy)==null?void 0:I.fullName})]})]})]},`flow${N}`)})})]})]})})}),e.jsx(pd,{"x-chunk":"dashboard-05-chunk-3",children:e.jsxs(wd,{className:"grid grid-cols-3 py-10",children:[e.jsx("div",{className:"col-span-2 pr-10",children:e.jsxs(Q,{methods:se,onSubmit:fd(Nd),children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:e.jsx("div",{className:"col-span-4",children:e.jsx(J,{className:"bg-background border w-full rounded-lg p-4",label:"Comment",name:"comment",placeholder:"Enter comment"})})}),e.jsxs(G,{open:b,children:[e.jsx(q,{}),e.jsx(z,{className:"sm:max-w-[500px]",children:e.jsxs("div",{className:"py-4",children:[h===1&&e.jsx(kd,{setisDialogOpen:t,actionPermissions:c,complaintData:s}),h===2&&e.jsx(Ld,{setisDialogOpen:t,actionPermissions:c,complaintData:s}),h===3&&e.jsx(Od,{setisDialogOpen:t,complaintData:s}),h===4&&e.jsx(Bd,{setisDialogOpen:t,complaintData:s})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"mr-10",children:[((is=(os=s==null?void 0:s.data)==null?void 0:os.data)==null?void 0:is.wf_status)===1&&e.jsxs(R,{className:"flex items-center mb-4",children:[e.jsx(td,{className:"inline text-green-500 mr-2"}),"Complaint Resolved"]}),((hs=(xs=s==null?void 0:s.data)==null?void 0:xs.data)==null?void 0:hs.wf_status)===2&&e.jsxs(R,{className:"flex items-center mb-4",children:[e.jsx(Md,{className:"inline text-red-500 mr-2"}),"Complaint Rejected"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Td,{checked:(js=(us=s==null?void 0:s.data)==null?void 0:us.data)==null?void 0:js.isEscalated,onChange:d=>md(d),className:"cursor-pointer h-5 w-5",type:"checkbox",name:"isTransactionIssue",placeholder:""}),e.jsx(X,{className:"text-amber-700 opacity-80",children:(Ns=(fs=s==null?void 0:s.data)==null?void 0:fs.data)!=null&&Ns.isEscalated?"De-Escalate":"Escalate"})]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("div",{className:"col-span-4",children:e.jsx(Z,{variant:"secondary",name:"comment",className:"mr-4",type:"submit",disabled:r.isPending,isLoading:r.isPending,children:"Direct Comment"})}),(((ms=(bs=s==null?void 0:s.data)==null?void 0:bs.data)==null?void 0:ms.wf_status)===0||((vs=(gs=s==null?void 0:s.data)==null?void 0:gs.data)==null?void 0:vs.wf_status)===3)&&e.jsxs(e.Fragment,{children:[((ps=(ys=c==null?void 0:c.data)==null?void 0:ys.permission)==null?void 0:ps.canResolve)&&e.jsx("div",{className:"col-span-4",children:e.jsx(L,{onClick:()=>{t(!0),f(1)},asChild:!0,children:e.jsx(T,{variant:"secondary",name:"bts",className:"mr-4",disabled:r.isPending,children:"Resolve"})})}),((Ts=(ws=c==null?void 0:c.data)==null?void 0:ws.permission)==null?void 0:Ts.canReject)&&e.jsx("div",{className:"col-span-4",children:e.jsx(L,{onClick:()=>{t(!0),f(2)},asChild:!0,children:e.jsx(T,{variant:"secondary",name:"reject",className:"mr-4",disabled:r.isPending,children:"Reject"})})}),((Is=(Es=c==null?void 0:c.data)==null?void 0:Es.permission)==null?void 0:Is.canTransferToMember)&&e.jsx("div",{className:"col-span-4",children:e.jsx(L,{onClick:()=>{t(!0),f(3)},asChild:!0,children:e.jsx(T,{name:"approve",disabled:r.isPending,className:"mr-4",children:"Transfer to Current Member"})})}),((_s=(Cs=c==null?void 0:c.data)==null?void 0:Cs.permission)==null?void 0:_s.canSendToUlb)&&e.jsx("div",{className:"col-span-4",children:e.jsx(L,{onClick:()=>{t(!0),f(4)},asChild:!0,children:e.jsx(T,{name:"approve",disabled:r.isPending,type:"button",className:"mr-4",children:"Transfer to Ulb"})})}),((Ms=(Ss=c==null?void 0:c.data)==null?void 0:Ss.permission)==null?void 0:Ms.canTransferToWorkflow)&&e.jsx("div",{className:"col-span-4",children:e.jsx(cd,{to:`/grievance/dashboard/transfer-complaint?parentId=null&levelSerial=1&complaintId=${(As=(Rs=s==null?void 0:s.data)==null?void 0:Rs.data)==null?void 0:As._id}&complaintRefNo=${(Us=(ks=s==null?void 0:s.data)==null?void 0:ks.data)==null?void 0:Us.complaintRefNo}`,children:e.jsx(T,{name:"approve",disabled:r.isPending,type:"button",children:"Transfer to Workflow"})})})]})]})]})]})]})}),e.jsxs("div",{className:"col-span-1 h-80 overflow-y-scroll md:px-4",children:[e.jsx(R,{className:"mb-2",children:"Comments"}),(Bs=(Os=(Ls=U==null?void 0:U.data)==null?void 0:Ls.data)==null?void 0:Os.data)==null?void 0:Bs.map((d,N)=>e.jsx(Rd,{commentData:d},`comment${N}`))]})]})})]})]})}function Ta(){const[l,a]=_.useState(""),[j,n]=_.useState("");return e.jsx(Id,{title:"Workflow Details",subTitle:"",searchLink:l,searchLabel:j,children:e.jsx("div",{className:"",children:e.jsx(fa,{setsearchLink:a,setsearchLabel:n})})})}export{Ta as default};
