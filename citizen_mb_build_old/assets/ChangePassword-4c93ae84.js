import{r as o,g,u as b,c as y,d as N,A as P,j as e,F as v,b as t,P as S}from"./index-ace27d6f.js";import{u as C}from"./formik.esm-70d5e597.js";import{c as F,a as d,f as j}from"./index.esm-70f5a44d.js";import{R as A}from"./Hourglass-eaf35b74.js";import{b as k}from"./PowerupFunctions-c5e50f78.js";import{u as E}from"./useSetTitle-0fab96ea.js";const _=$=>{const{notify:i}=o.useContext(g);E("Change Password");const[c,n]=o.useState(!1),{api_changePassword:w,api_forgotPassword:I}=S();b();const[u,L]=o.useState();o.useState(!1),o.useState("");const{type:x}=y(),h=F().shape({oldPassword:d().when([],{is:()=>x=="change",then:()=>d().required("Enter old password")}),newPassword:d().min(6,"Minimum six character !").max(50,"Too Long!").required("Enter new password !").matches(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password Must Contains (Capital, Smail, Number, Special) eg - Abc123#."),matchNewPassword:d().required("Confirm your new password").oneOf([j("newPassword"),null],"Password not match")}),s=C({initialValues:{oldPassword:"",newPassword:"",matchNewPassword:""},onSubmit:(r,l)=>{f(r)},validationSchema:h}),f=r=>{let l={password:r.oldPassword,newPassword:r.newPassword};n(!0),N.post(w,l,P()).then(a=>{var m,p;((m=a==null?void 0:a.data)==null?void 0:m.status)==!0&&(i("Password changed successfully !!!","success"),window.location.replace("/property/mobile-property-options")),((p=a==null?void 0:a.data)==null?void 0:p.status)==!1&&i("Please try after sometime !!!","error"),n(!1)}).catch(a=>{i("Please try after sometime !!!","error"),n(!1)})};return e(v,{children:e("div",{className:"flex justify-center items-center h-full pt-[15%]",children:e("form",{onChange:r=>{let l=r.target.name,a=r.target.value;l=="mobile"&&s.setFieldValue("mobile",k(a,s.values.mobile,10))},className:"w-[25rem] px-8 rounded-lg bg-white shadow-xl",children:e("div",{className:"grid grid-cols-12 px-4 md:px-0 ",children:e("div",{className:"w-full col-span-12 md:col-span-12 md:shadow-none py-10",children:t("div",{className:"w-full  py-6  text-gray-700",children:[e("h1",{className:"text-center text-md font-semibold my-1 capitalize w-full"}),e("h1",{className:"text-center font-semibold my-1 flex justify-center",children:e("span",{className:"px-1 text-indigo-500 text-semibold text-2xl poppins uppercase",children:"Change Password"})}),t("div",{className:"my-3 relative text-sm",children:[e("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"Old Password"}),t("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[e("input",{type:"password",...s.getFieldProps("oldPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Enter Your Old Password"}),e("div",{className:"w-full text-start",children:e("span",{className:"text-red-600 text-xs poppins text-start",children:s.touched.oldPassword&&s.errors.oldPassword?s.errors.oldPassword:null})})," "]})]}),t("div",{className:"my-3 relative text-sm",children:[e("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"New Password"}),t("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[e("input",{type:"password",...s.getFieldProps("newPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Enter Your New Password"}),e("div",{className:"w-full text-start",children:e("span",{className:"text-red-600 text-xs poppins text-start",children:s.touched.newPassword&&s.errors.newPassword?s.errors.newPassword:null})})," "]})]}),t("div",{className:"my-3 relative text-sm",children:[e("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"Confirm New Password"}),t("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[e("input",{type:"password",...s.getFieldProps("matchNewPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Confirm Your New Password"}),e("div",{className:"w-full text-start",children:e("span",{className:"text-red-600 text-xs poppins text-start",children:s.touched.matchNewPassword&&s.errors.matchNewPassword?s.errors.matchNewPassword:null})})," "]})]}),e("div",{className:" my-10"}),e("div",{className:"text-center mt-3 text-xs"}),t("div",{className:"my-5 relative",children:[t("div",{className:"text-red-600 text-sm font-semibold my-3 ",children:[" ",t("span",{className:"",children:[" ",u]})]}),c?e("div",{className:"flex w-full justify-center",children:e(A,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e("button",{type:"submit",onClick:s.handleSubmit,disabled:c,className:" bg-indigo-500 hover:bg-indigo-700 px-5 shadow-xl py-2 w-full  rounded-md text-white text-lg font-semibold",children:"Submit"})]})]})})})})})})};export{_ as default};
