import{e as I,r as f,u as H,j as a,b as t,M as G,c as Y,d as E,A as j,F as P,Q as _}from"./index-a5fcf8e9.js";import{T as Q}from"./ThemeStyle-994f51bc.js";import{u as W}from"./formik.esm-87560db8.js";import{c as X,a as z}from"./index.esm-de8323ef.js";import{l as Z,n as g}from"./PowerupFunctions-b533bb54.js";import{R as J}from"./RentalApiList-ef8d1e90.js";import{B as K}from"./index.esm-02f80419.js";import{a as D}from"./useCustomQuery-1acd3bcc.js";var F={},L=I&&I.__awaiter||function(n,o,l,i){function u(s){return s instanceof l?s:new l(function(m){m(s)})}return new(l||(l=Promise))(function(s,m){function b(p){try{e(i.next(p))}catch(N){m(N)}}function h(p){try{e(i.throw(p))}catch(N){m(N)}}function e(p){p.done?s(p.value):u(p.value).then(b,h)}e((i=i.apply(n,o||[])).next())})};Object.defineProperty(F,"__esModule",{value:!0});const v=f;class ee{constructor(o){this.options=o,typeof window<"u"&&(this.rzrpayInstannce=new window.Razorpay(this.options))}on(o,l){this.rzrpayInstannce.on(o,l)}open(){this.rzrpayInstannce.open()}}const ae=()=>{const n="https://checkout.razorpay.com/v1/checkout.js",o=(0,v.useMemo)(()=>typeof window<"u",[]),[l,i]=(0,v.useState)(!1),u=(0,v.useCallback)(()=>!(!o||!("Razorpay"in window)),[]),s=(0,v.useCallback)(m=>{if(o)return new Promise((b,h)=>{const e=document.createElement("script");e.src=m,e.onload=p=>{i(!0),b(p)},e.onerror=p=>h(p),document.body.appendChild(e)})},[]);return(0,v.useEffect)(()=>{u()||L(void 0,void 0,void 0,function*(){try{yield s(n)}catch(m){throw new Error(m)}})},[]),[ee,l]};var te=F.default=ae;function se(){const[n]=te();return{handleRzpPayment:f.useCallback(async l=>{const i={key:"rzp_test_NXHWEn0nSMDcnm",amount:"2000",currency:"INR",name:"Acme Corp",order_id:"order_DaaS6LOUAASb7Y",description:"Test Transaction",image:"https://example.com/your_logo",handler:function(s){alert(s.razorpay_payment_id)},prefill:{name:"Piyush Garg",email:"youremail@example.com",contact:"9999999999"},notes:{address:"Razorpay Corporate Office"},theme:{color:"#3399cc"}},u=new n(i);return u.open(),u},[n])}}function re({tollPaymentListData:n}){var l,i,u;const o=H();return n!=null&&n.isLoading?a("div",{className:"w-full h-32    flex justify-center items-center ",children:a("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):n!=null&&n.error?a("div",{className:"w-full h-32    flex justify-center items-center ",children:t("div",{className:"text-red-500",children:["Error: ",(l=n==null?void 0:n.error)==null?void 0:l.message]})}):a("div",{className:"p-5",children:(u=(i=n==null?void 0:n.data)==null?void 0:i.data)==null?void 0:u.map((s,m)=>t("div",{className:"w-full relative rounded-lg pb-2 mb-4 cursor-pointer shadow-lg ",children:[a("div",{className:"font-semibold bg-[#838FCE] px-4 py-2 text-white rounded-t-lg text-sm",children:"Toll Payment Details"}),a("div",{className:"w-full rounded-lg p-4 space-b-2",children:t("div",{className:"flex flex-row flex-wrap gap-x-4 gap-y-2 w-full",children:[t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[a("div",{className:"col-span-6 text-xs text-gray-600",children:"Vendor Name."}),a("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.vendor_name})]}),t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[a("div",{className:"col-span-6 text-xs text-gray-600",children:"Amount"}),a("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.amount})]}),t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[a("div",{className:"col-span-6 text-xs text-gray-600",children:"Payment Mode"}),a("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.pmt_mode})]}),t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[a("div",{className:"col-span-6 text-xs text-gray-600",children:"From Date"}),a("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.from_date})]}),t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[a("div",{className:"col-span-6 text-xs text-gray-600",children:"To Date"}),a("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.to_date})]})]})}),t("div",{onClick:()=>o(`/toll-payment-receipt/${s==null?void 0:s.id}`),className:"mb-2 mx-4 relative text-white px-2 2xl:px-4 py-[0.3rem] text-xs 2xl:text-sm md:absolute md:bottom-3 2xl:bottom-2 md:right-2 rounded-md bg-indigo-500 border-indigo-400 hover:border-indigo-600 hover:bg-indigo-600 hover:text-white shadow-sm  cursor-pointer poppins md:mt-0 w-max",children:["View Receipt",a(K,{className:"inline font-semibold text-xl"})]})]},m))})}G.setAppElement("#root");function he(){var A,T,k;const{handleRzpPayment:n}=se(),{id:o}=Y();console.log("id.....",o);const{api_tollDetailsById:l,api_tollTcPayment:i,api_list_shop_demand:u}=J(),{titleColor:s}=Q(),m=(r,c)=>{_.dismiss(),c=="success"&&_.success(r),c=="error"&&_.error(r)},[b,h]=f.useState(!1),[e,p]=f.useState();f.useState("");const[N,q]=f.useState(""),[O,U]=f.useState(""),[C,$]=f.useState("");f.useState(!1);const R=D({api:u,config:{tollId:o},options:{enabled:!!o}}),S=()=>{const r=new Date(O);return`${new Date(C).getDate()-r.getDate()+1}`},d=W({initialValues:{amount:"",fromDate:"",uptoDate:"",paymentMode:""},validationSchema:X({fromDate:z().required("Required"),uptoDate:z().required("Required"),paymentMode:z().required("Required")}),onSubmit:async(r,{resetForm:c})=>{if(console.log("shop data",r),r.paymentMode=="ONLINE"){const x={amount:`${e==null?void 0:e.rate}`*S(),order_id:"order_Ef",handler:w=>{console.log(w)}},y=await n(x);console.log("res",y)}else V(r,c)}}),B=r=>{console.log("target value",r.target.value),console.log("target value",r.target.name);let c=r.target.name,x=r.target.value;console.log("value to ...",x),c=="ddmmyy"&&q(x),c=="fromDate"&&U(x),c=="uptoDate"&&$(x)},V=(r,c)=>{h(!0);let x;x={tollId:o,dateFrom:r==null?void 0:r.fromDate,dateUpto:r==null?void 0:r.uptoDate,paymentMode:r==null?void 0:r.paymentMode},E.post(i,x,j()).then(y=>{var w;y.data.status&&(m((w=y==null?void 0:y.data)==null?void 0:w.message,"success"),M(),R.refetch(),c()),h(!1)}).catch(y=>{console.log(y),h(!1)})};f.useEffect(()=>{M()},[]);const M=()=>{h(!0);const r={tollId:o};E.post(l,r,j()).then(c=>{c.data.status&&p(c.data.data),h(!1)}).catch(c=>{console.log(c),h(!1)})};return t(P,{children:[b&&Z(),t("div",{className:"bg-[#eff2f0]",children:[t("div",{className:"col-span-12",children:[" ",a("h1",{className:`font-semibold  ${s} text-xl px-4 py-2 text-gray-600`,children:"Toll Details"})]}),a("div",{className:" flex justify-center items-center  overflow-hidden p-4 ",children:t("div",{class:"  w-full md:w-1/3 rounded-lg bg-[#fdfdfd] shadow-indigo-50 shadow-md",children:[t("div",{className:"bg-[#6c68f0] rounded-lg p-4 text-white",children:[t("p",{class:"text-sm text-center font-semibold ",children:["Toll No. : ",a("span",{children:g(e==null?void 0:e.toll_no)})]}),a("p",{class:"text-center py-1",children:t("span",{class:"text-sm justify-center text-gray-50 flex",children:[a("span",{className:"",children:"Payable Amount : "}),C?t("p",{children:["Rs. ",`${e==null?void 0:e.rate}`*S()]}):t("h1",{children:["Rs. ",e==null?void 0:e.rate]})]})}),t("form",{onSubmit:d.handleSubmit,onChange:B,children:[t("div",{className:"space-x-2 py-1",children:[t("select",{name:"paymentMode",className:"p-1 text-gray-800 border border-gray-300 rounded-sm w-full",onChange:d.handleChange,value:d.values.paymentMode,children:[a("option",{value:"",children:"Select Payment Mode"}),a("option",{value:"CASH",children:"Cash"}),a("option",{value:"ONLINE",children:"Online"})]}),a("span",{className:"text-red-400 text-sm",children:d.touched.paymentMode&&d.errors.paymentMode})]}),t("div",{className:"flex space-x-2 py-1  ",children:[t("div",{children:[a("p",{className:"capitalize text-xs",children:"date from"}),a("input",{type:"date",name:"fromDate",className:"px-2 text-gray-800 border border-gray-300 rounded-sm w-full",onChange:d.handleChange,value:d.values.fromDate,min:(k=(T=(A=e==null?void 0:e.payment_upto)==null?void 0:A.split("-"))==null?void 0:T.reverse())==null?void 0:k.join("-"),max:d.values.uptoDate}),a("span",{className:"text-red-400 text-sm",children:d.touched.fromDate&&d.errors.fromDate})]}),t("div",{className:"w-full",children:[a("p",{className:"capitalize text-xs",children:"date upto"}),a("input",{type:"date",disabled:!d.values.fromDate,name:"uptoDate",className:"px-2 text-gray-800 border border-gray-300 rounded-sm w-full",onChange:d.handleChange,value:d.values.uptoDate,min:d.values.fromDate}),a("span",{className:"text-red-400 text-sm",children:d.touched.uptoDate&&d.errors.uptoDate})]})]}),a("div",{className:"",children:a("button",{type:"submit",className:"bg-amber-500 mt-1 py-2 px-2 rounded-sm capitalize text-xs w-full ",children:"Pay Now"})})]})]}),a("div",{class:"bg-white shadow-lg rounded-lg  w-full mt-4",children:a("div",{children:t("ul",{children:[t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize  border-b shadow-sm",children:["vendor Name :",a("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(e==null?void 0:e.vendor_name)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Address :",a("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(e==null?void 0:e.address)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize  border-b shadow-sm",children:["Circle :",a("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(e==null?void 0:e.circle_name)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["market :",a("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(e==null?void 0:e.market_name)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Rate :",a("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(e==null?void 0:e.rate)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Last Payment date :",a("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(e==null?void 0:e.last_payment_date)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Last payment amt. :",a("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(e==null?void 0:e.last_payment_amount)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Payment Upto :",a("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(e==null?void 0:e.payment_upto)})]})]})})})]})})]}),a(re,{tollPaymentListData:R})]})}export{he as default};
