import{u as G,r as o,d as m,A as F,j as r,F as C,b as s,Q as x}from"./index-a5fcf8e9.js";import{u as J}from"./formik.esm-87560db8.js";import{T as K}from"./ThemeStyle-994f51bc.js";import{c as X,a as c}from"./index.esm-de8323ef.js";import{R as Y}from"./RentalApiList-ef8d1e90.js";import{A as q}from"./ApiHeader2-b363f7b8.js";function ue(){const{saveButtonColor:Z,inputStyle:d,labelStyle:i,headingStyle:D,titleStyle:ee,addButtonColor:le,formStyle:re,titleColor:P}=K(),{api_UlbCircleList:S,api_locationByCircleList:T,api_addToll:L,api_getTollRateList:V}=Y(),g=G();o.useState();const[I,u]=o.useState(!1);o.useState(),o.useState(""),o.useState(!1),o.useState("");const[te,b]=o.useState(""),[A,R]=o.useState(""),[B,_]=o.useState(""),[p,H]=o.useState();o.useState();const[f,j]=o.useState(),[h,U]=o.useState(),O=X({circle:c().required("This field is required"),market:c().required("This field is required"),vendorName:c().required("This field is required"),mobile:c().required("This field is required"),address:c().required("This field is required"),rate:c().required("This field is required"),remarks:c().required("This field is required"),photo1Path:c().required("This field is required"),photo2Path:c().required("This field is required"),longitude:c().required("This field is required"),latitude:c().required("This field is required")}),v=(e,t)=>{x.dismiss(),t=="success"&&x.success(e),t=="error"&&x.error(e)},l=J({initialValues:{circle:"",market:"",vendorName:"",mobile:"",address:"",rate:"",remarks:"",photo1Path:"",photo2Path:"",longitude:"",latitude:""},enableReinitialize:!0,onSubmit:e=>{console.log("shop data",e),M(e)},validationSchema:O}),E=e=>{console.log("target type",e.target.type),console.log("check box name",e.target.name);let t=e.target.name,a=e.target.value;t=="photo1Path"&&w(t,e.target.files[0]),t=="photo2Path"&&w(t,e.target.files[0]),t=="circle"&&W(a),b(file),t=="vendorName"&&l.setFieldValue("vendorName",allowCharacterInput(a,l.values.vendorName,50)),t=="mobile"&&l.setFieldValue("mobile",allowNumberInput(a,l.values.mobile,10)),t=="rate"&&l.setFieldValue("rate",allowNumberInput(a,l.values.rate,10)),t=="lastAmount"&&l.setFieldValue("lastAmount",allowNumberInput(a,l.values.lastAmount,10)),t=="presentLength"&&l.setFieldValue("presentLength",allowFloatInput(a,l.values.presentLength,10)),t=="presentBreadth"&&l.setFieldValue("presentBreadth",allowNumberInput(a,l.values.presentBreadth,10)),t=="presentHeight"&&l.setFieldValue("presentHeight",allowNumberInput(a,l.values.presentHeight,10)),t=="longitude"&&l.setFieldValue("longitude",allowFloatInput(a,l.values.longitude,10)),t=="latitude"&&l.setFieldValue("latitude",allowFloatInput(a,l.values.latitude,10))},w=(e,t)=>{console.log("name ,fileData ",e,t),b(t),e=="photo1Path"?l.setFieldValue("photo1Path",t):l.setFieldValue("photo2Path",t);const a=new FileReader;a.onloadend=()=>{e=="photo1Path"?R(a.result):_(a.result)},a.readAsDataURL(t)};console.log("form values",l.values);const M=e=>{console.log("data in form",e);let t,a;t=L,a={circleId:e==null?void 0:e.circle,marketId:e==null?void 0:e.market,vendorName:e==null?void 0:e.vendorName,address:e==null?void 0:e.address,rate:e==null?void 0:e.rate,mobile:e==null?void 0:e.mobile,photograph1:e==null?void 0:e.photo1Path,photograph2:e==null?void 0:e.photo2Path,longitude:e==null?void 0:e.longitude,latitude:e==null?void 0:e.latitude,remarks:e==null?void 0:e.remarks},console.log("request body",a),m.post(`${t}`,a,q()).then(function(n){var N,k,y,$;console.log("response after data submitted",(N=n==null?void 0:n.data)==null?void 0:N.message),((k=n==null?void 0:n.data)==null?void 0:k.status)===!0?(v("submitted successfully","success"),g(`/submitScreen/toll/${($=(y=n==null?void 0:n.data)==null?void 0:y.data)==null?void 0:$.tollNo}`)):(v("Failed to submit","error"),g("/municipal-rental"))}).catch(function(n){console.log("errorrr.... ",n)})},z=()=>{m.post(S,{},q()).then(e=>{console.log("circle list 1",e.data),H(e.data.data),u(!1)}).catch(e=>{console.log(e),u(!1)})};o.useEffect(()=>{z(),Q()},[]);const Q=()=>{m.post(V,{},F()).then(e=>{console.log("circle list 1",e.data),U(e.data.data),u(!1)}).catch(e=>{console.log(e),u(!1)})};console.log("rate data",h);const W=e=>{const t={circleId:e};m.post(T,t,F()).then(a=>{console.log("location list",a.data),a.data.status&&j(a.data.data)}).catch(a=>{console.log(a)})};return I?r(C,{children:r("div",{className:"min-h-screen"})}):r(C,{children:r("div",{className:" bg-[#eff2f0]",children:r("form",{onSubmit:l.handleSubmit,onChange:E,encType:"multipart/form-data",children:s("div",{className:"container mx-auto p-4",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 p-4 border-b",children:[s("div",{className:"col-span-6 flex space-x-3",children:[r("img",{src:"https://cdn-icons-png.flaticon.com/128/2981/2981313.png",className:"h-10 -mt-2"}),r("h1",{className:`font-semibold ${P} text-xl px-4 py-2 text-gray-600 -mt-2`,children:"Add Toll"})]}),r("div",{className:"col-span-6 flex space-x-3 justify-end"})]}),s("div",{className:"bg-[#fdfdfd]  rounded-2xl shadow-md p-2",children:[s("div",{className:"p-2",children:[s("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${i} inline-block mb-2 `,children:"Circle"}),s("select",{...l.getFieldProps("circle"),className:`${d} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),p==null?void 0:p.map(e=>r("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.circle_name}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.circle&&l.errors.circle?l.errors.circle:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${i} inline-block mb-2 `,children:"Market"}),s("select",{...l.getFieldProps("market"),className:`${d} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),f==null?void 0:f.map(e=>r("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.market_name}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.market&&l.errors.market?l.errors.market:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${i} inline-block mb-2`,children:"Vendor name"}),r("input",{type:"text",name:"vendorName",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.vendorName}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.vendorName&&l.errors.vendorName?l.errors.vendorName:null})]})]}),s("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${i} inline-block mb-2`,children:"Mobile no."}),r("input",{type:"text",name:"mobile",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.mobile}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.mobile&&l.errors.mobile?l.errors.mobile:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${i} inline-block mb-2 `,children:"Landmark"}),r("input",{type:"text",name:"address",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.address}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.address&&l.errors.address?l.errors.address:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${i} inline-block mb-2 `,children:"Rate"}),s("select",{...l.getFieldProps("rate"),className:`${d} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),h==null?void 0:h.map(e=>s("option",{value:e==null?void 0:e.id,children:[e==null?void 0:e.toll_type," (Rs.",e==null?void 0:e.rate,")"]}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.rate&&l.errors.rate?l.errors.rate:null})]})]}),s("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${i} inline-block mb-2`,children:"Longitude"}),r("input",{type:"text",name:"longitude",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.longitude}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.longitude&&l.errors.longitude?l.errors.longitude:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${i} inline-block mb-2`,children:"Latitude"}),r("input",{type:"text",name:"latitude",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.latitude}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.latitude&&l.errors.latitude?l.errors.latitude:null})]})]}),s("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${i} inline-block mb-2 `,children:"Photo1 path"}),r("input",{type:"file",name:"photo1Path",className:`${d} inline-block w-full relative`,onChange:l.handleChange}),r("img",{src:`${A}`,alt:"Upload img",className:"h-20"}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.photo1Path&&l.errors.photo1Path?l.errors.photo1Path:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${i} inline-block mb-2 `,children:"Photo2 path"}),r("input",{type:"file",name:"photo2Path",className:`${d} inline-block w-full relative`,onChange:l.handleChange}),r("img",{src:`${B}`,alt:"Upload img",className:"h-20"}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.photo2Path&&l.errors.photo2Path?l.errors.photo2Path:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${i} inline-block mb-2`,children:"Remarks"}),r("textarea",{name:"remarks",onChange:l.handleChange,value:l.values.remarks,className:"border  p-2 w-full h-24",placeholder:"Write your remark..."}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.remarks&&l.errors.remarks?l.errors.remarks:null})]})]})]}),r("div",{className:"pb-8",children:r("button",{type:"submit",className:"bg-green-500 px-7 py-2 text-white font-semibold rounded leading-5 shadow-lg w-full",children:"Save"})})]})]})})})})}export{ue as default};
