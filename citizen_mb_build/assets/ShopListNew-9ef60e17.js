import{u as se,r as m,j as a,F as H,b as s}from"./index-7d6593b7.js";import{u as re}from"./formik.esm-b76b3672.js";import{T as le}from"./ThemeStyle-994f51bc.js";import{R as J}from"./RentalApiList-74cf98b9.js";import"./Hourglass-7c698521.js";import{R as de}from"./RotatingLoader-d9d6a80d.js";import{a as ne,c as ce}from"./useCustomQuery-00158529.js";import{c as v}from"./createLucideIcon-c86e24a1.js";import{U as ie,M as oe,R as me,B as ue,E as he}from"./user-d55ea874.js";import"./hoist-non-react-statics.cjs-1b1be12d.js";import"./ApiHeader2-b363f7b8.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xe=v("ChevronLeft",ge);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fe=v("ChevronRight",pe);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ve=v("Search",Ne);function je(){var w,I,S,_,C,P,$,A,F,j,R,T,V,q,E,M,B,k,D,U,z,L,O,G;const{titleColor:g}=le(),K=se(),[l,b]=m.useState(1),[u]=m.useState(10),[x,Q]=m.useState(""),[i,W]=m.useState("");m.useEffect(()=>{const e=setTimeout(()=>{W(x)},500);return()=>clearTimeout(e)},[x]),m.useEffect(()=>{b(1)},[i]);const t=re({initialValues:{floorId:"",assetId:"",page:l,perPage:u,key:i},onSubmit:e=>{console.log(e)}});m.useEffect(()=>{t.setFieldValue("page",l),t.setFieldValue("perPage",u),t.setFieldValue("key",i)},[l,u,i]);const r=ne({api:`${(w=J())==null?void 0:w.api_shopListByLocation}`,config:{assetId:(I=t==null?void 0:t.values)==null?void 0:I.assetId,floorId:(S=t==null?void 0:t.values)==null?void 0:S.floorId,page:l,perPage:u,key:i},value:[(_=t==null?void 0:t.values)==null?void 0:_.floorId,l,i,(C=t==null?void 0:t.values)==null?void 0:C.assetId],options:{enabled:!!((P=t==null?void 0:t.values)!=null&&P.floorId)||!!(($=t==null?void 0:t.values)!=null&&$.assetId)}}),X=(e,c)=>!e||!c?"N/A":(parseFloat(e)*parseFloat(c)).toFixed(2),Y=e=>{console.log("Shop clicked:",e)},Z=e=>{Q(e.target.value)},p=e=>{b(e)},f=((F=(A=r==null?void 0:r.data)==null?void 0:A.data)==null?void 0:F.total)||0,o=Math.ceil(f/u),ee=((T=(R=(j=r==null?void 0:r.data)==null?void 0:j.data)==null?void 0:R.data)==null?void 0:T.length)||0,y=(l-1)*u+1,ae=y+ee-1,h=ce({api:J().assetsBuildingDropdown,options:{enabled:!0}}),te=()=>{const e=[];if(o<=5)for(let d=1;d<=o;d++)e.push(d);else{const d=Math.max(1,l-2),n=Math.min(o,d+5-1);d>1&&(e.push(1),d>2&&e.push("..."));for(let N=d;N<=n;N++)e.push(N);n<o&&(n<o-1&&e.push("..."),e.push(o))}return e};return r!=null&&r.isLoading?a(de,{}):a(H,{children:s("div",{className:"bg-[#eff2f0]",children:[a("div",{className:"col-span-12",children:a("h1",{className:`font-semibold ${g} text-xl px-4 py-2 text-gray-600`,children:"Shop List"})}),a("form",{onSubmit:t.handleSubmit,children:a("div",{className:"p-3 md:p-10 flex justify-center items-center overflow-hidden",children:s("div",{className:"grid grid-cols-12 bg-[#fdfdfd] w-full md:w-1/3 p-6 md:p-10 rounded-2xl shadow-md",children:[a("div",{className:"form-group mb-4 md:mb-6 col-span-12 mt-2 text-gray-600",children:s("div",{className:"",children:[a("h1",{className:`${g} text-sm py-2 text-gray-600`,children:"Select Circle"}),s("select",{...t.getFieldProps("assetId"),className:"border border-gray-100 w-full py-2 px-2 bg-white shadow-lg rounded-xl text-gray-600 font-normal",children:[a("option",{value:"",children:"select"}),(q=(V=h==null?void 0:h.data)==null?void 0:V.data)==null?void 0:q.map((e,c)=>a("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.building_name},c))]}),a("p",{className:"text-red-500 text-xs",children:t.touched.assetId&&t.errors.assetId?t.errors.assetId:null})]})}),a("div",{className:"form-group mb-4 md:mb-6 col-span-12 mt-1 text-gray-600",children:s("div",{className:"",children:[a("h1",{className:`${g} text-sm py-2 text-gray-600`,children:"Select floorId"}),s("select",{...t.getFieldProps("floorId"),className:"border border-gray-100 w-full py-2 px-2 bg-white shadow-lg rounded-xl text-gray-600 font-normal",children:[a("option",{value:"",children:"select"}),(M=(E=h==null?void 0:h.data)==null?void 0:E.data)==null?void 0:M.map(e=>{var c,d;if((e==null?void 0:e.id)==((c=t==null?void 0:t.values)==null?void 0:c.assetId))return(d=e==null?void 0:e.floor_data)==null?void 0:d.map(n=>a("option",{value:n==null?void 0:n.id,children:n==null?void 0:n.floor},n==null?void 0:n.id))})]}),a("p",{className:"text-red-500 text-xs",children:t.touched.floorId&&t.errors.floorId?t.errors.floorId:null})]})})]})})}),((B=t==null?void 0:t.values)==null?void 0:B.floorId)&&a("div",{className:"px-3 pb-3",children:a("div",{className:"max-w-md mx-auto",children:s("div",{className:"relative",children:[a(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a("input",{type:"text",value:x,onChange:Z,placeholder:"Search shops by shop number, allottee, or address...",className:"w-full pl-10 pr-4 py-2 border border-gray-100 rounded-xl bg-white shadow-lg text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})}),((k=t==null?void 0:t.values)==null?void 0:k.floorId)&&f>0&&a("div",{className:"px-3 pb-2",children:s("div",{className:"text-center text-sm text-gray-600",children:["Showing ",y," to ",ae," of ",f," shops",i&&s("span",{className:"ml-2 text-blue-600",children:['(filtered by "',i,'")']})]})}),a("div",{className:"p-3",children:((z=(U=(D=r==null?void 0:r.data)==null?void 0:D.data)==null?void 0:U.data)==null?void 0:z.length)>0?s(H,{children:[(G=(O=(L=r==null?void 0:r.data)==null?void 0:L.data)==null?void 0:O.data)==null?void 0:G.map((e,c)=>s("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-4 border border-gray-100 active:scale-95 transition-all duration-200 cursor-pointer",onClick:()=>Y(e),children:[s("div",{className:"flex justify-between items-start mb-3",children:[s("div",{className:"flex-1",children:[a("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:e.shop_no}),s("div",{className:"flex items-center text-gray-600 text-sm mb-2",children:[a(ie,{className:"w-4 h-4 mr-1"}),a("span",{children:e.allottee})]}),s("div",{className:"flex items-center text-gray-600 text-sm",children:[a(oe,{className:"w-4 h-4 mr-1"}),a("span",{className:"capitalize",children:e.address||"N/A"})]})]}),a("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium",children:e.assetId_name})]}),s("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s("div",{className:"bg-gray-50 rounded-lg p-3",children:[s("div",{className:"flex items-center text-gray-600 text-xs mb-1",children:[a(me,{className:"w-3 h-3 mr-1"}),a("span",{children:"Dimensions"})]}),a("div",{className:"text-sm font-semibold text-gray-900",children:e.present_length&&e.present_breadth?`${e.present_length} × ${e.present_breadth} ft`:"N/A"})]}),s("div",{className:"bg-gray-50 rounded-lg p-3",children:[s("div",{className:"flex items-center text-gray-600 text-xs mb-1",children:[a(ue,{className:"w-3 h-3 mr-1"}),a("span",{children:"Total Area"})]}),a("div",{className:"text-sm font-semibold text-gray-900",children:e.area?`${e.area} sq ft`:X(e.present_length,e.present_breadth)+" sq ft"})]})]}),s("div",{className:"flex justify-between items-center",children:[s("div",{className:"text-xs text-gray-500",children:["Building ID: ",e.market_id," • Shop #",e.id]}),s("div",{onClick:d=>{d.stopPropagation(),K(`/shop-details/${e==null?void 0:e.id}`)},className:"flex items-center text-blue-600 text-sm font-medium",children:[a(he,{className:"w-4 h-4 mr-1"}),a("span",{children:"View Details"})]})]}),a("div",{className:"mt-3 pt-3 border-t border-gray-100",children:s("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-600",children:[s("div",{children:[a("span",{className:"font-medium",children:"Present Occupier:"}),a("div",{className:"text-gray-800",children:e.present_occupier||"N/A"})]}),s("div",{children:[a("span",{className:"font-medium",children:"Rate:"}),s("div",{className:"text-gray-800",children:["₹",e.rate||"0"]})]}),s("div",{children:[a("span",{className:"font-medium",children:"Contact:"}),a("div",{className:"text-gray-800",children:e.contact_no||"N/A"})]}),s("div",{children:[a("span",{className:"font-medium",children:"Market:"}),a("div",{className:"text-gray-800",children:e.market_name||"N/A"})]})]})})]},e.id)),o>1&&a("div",{className:"flex justify-center items-center mt-6 mb-4",children:s("div",{className:"flex items-center space-x-2",children:[s("button",{onClick:()=>p(l-1),disabled:l===1,className:`flex items-center px-3 py-2 text-sm font-medium rounded-lg ${l===1?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:scale-95"} transition-all duration-200`,children:[a(xe,{className:"w-4 h-4 mr-1"}),"Previous"]}),a("div",{className:"flex space-x-1",children:te().map((e,c)=>a("button",{onClick:()=>e!=="..."&&p(e),disabled:e==="...",className:`px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${e===l?"bg-blue-600 text-white":e==="..."?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:scale-95"}`,children:e},c))}),s("button",{onClick:()=>p(l+1),disabled:l===o,className:`flex items-center px-3 py-2 text-sm font-medium rounded-lg ${l===o?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:scale-95"} transition-all duration-200`,children:["Next",a(fe,{className:"w-4 h-4 ml-1"})]})]})})]}):s("div",{className:"p-2 relative",children:[a("img",{src:"https://img.freepik.com/free-vector/people-using-search-box-query-engine-giving-result_74855-11000.jpg?w=1380&t=st=1689941552~exp=1689942152~hmac=2830199908ef781c2072c2c614b124d0656193ea00848ee3bc7b438e259e94ca",className:"mx-auto h-44 mt-6",alt:"No shops found"}),a("div",{className:"text-center mt-4 text-gray-600",children:i?`No shops found matching "${i}"`:"No shops found"})]})})]})})}export{je as default};
