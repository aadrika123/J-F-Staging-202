import{r as n,b as K,d as X,e as _,f as Y,a as h,m as N,j as a,aQ as Z,l as r,k as o,ap as p}from"./index-28e798bd.js";import{L as ee}from"./ListTable2-65ffb449.js";import{e as ae}from"./index.esm-868d8c90.js";import"./GlobalFilter-80129fa5.js";import"./index.esm-aea1e841.js";const de=()=>{const{get_MasterData:P,get_collectorList:I,searchArrearCurrentCollectionSummary:D}=p(),[g,L]=n.useState(),[j,k]=n.useState(),[m,R]=n.useState(),[q,d]=n.useState(!1);K("Arrear and Current Collection Summary");const x="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",T=X({fromDate:_().required("Field Required"),uptoDate:_().required("Field Required")}),t=Y({initialValues:{fromDate:"",uptoDate:"",wardId:"",userId:""},onSubmit:e=>{y(5),C(1),S()},validationSchema:T}),S=()=>{d(!0);let e={fromDate:t.values.fromDate,uptoDate:t.values.uptoDate,wardId:t.values.wardId,userId:t.values.userId,page:f,perPage:b};h.post(D,e,N()).then(l=>{var i,u,v,s,F;((i=l==null?void 0:l.data)==null?void 0:i.status)==!0?(console.log("search success => ",l),R((v=(u=l==null?void 0:l.data)==null?void 0:u.data)==null?void 0:v.items),U((F=(s=l==null?void 0:l.data)==null?void 0:s.data)==null?void 0:F.total)):console.log("error while search => ",l),d(!1),c(!1)}).catch(l=>(console.log("error while search => ",l),d(!1),c(!1)))};n.useEffect(()=>{E()},[]);const E=()=>{h.get(P,N()).then(e=>{var l,i,u;((l=e==null?void 0:e.data)==null?void 0:l.status)==!0&&L((u=(i=e==null?void 0:e.data)==null?void 0:i.data)==null?void 0:u.ward_master)}).catch(e=>console.log("error getting master list",e))},M=e=>{d(!0),h.post(I,{wardId:e.target.value},N()).then(l=>{var i,u;((i=l==null?void 0:l.data)==null?void 0:i.status)==!0&&(console.log("getting collector list => ",l),k((u=l==null?void 0:l.data)==null?void 0:u.data)),d(!1)}).catch(l=>(console.log("error getting collector list => ",l),d(!1)))},O=[{Header:"_",columns:[{Header:"S.No.",Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Tran. Date",accessor:"tran_date",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. No",accessor:"tran_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Holding No",accessor:"holding_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Unique House No",accessor:"new_holding_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Ward No",accessor:"ward_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}]},{Header:"Arrear Collection",columns:[{Header:"Owner Name",accessor:"owner_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Period",accessor:"period",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}]},{Header:"Current Collection",columns:[{Header:"Owner Name",accessor:"owner_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Period",accessor:"period",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}]},{Header:"_",columns:[{Header:"Collection",accessor:"collection",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Penalty",accessor:"penalty",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Rebate",accessor:"rebate",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Adv.",accessor:"mobile_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Adj.",accessor:"mobile_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}]},{Header:"_",columns:[{Header:"Total Collection",accessor:"total_collection",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}]}],[b,y]=n.useState(5),[f,C]=n.useState(1),[w,U]=n.useState(0),[A,W]=n.useState(),[V,H]=n.useState(!1),[$,c]=n.useState(!1),z=()=>{C(f+1)},B=()=>{C(f-1)},Q=e=>{y(e)};n.useEffect(()=>{c(!0),S()},[f,b]);const G=()=>{c(!0),H(!1);let e={fromDate:t.values.fromDate,uptoDate:t.values.uptoDate,wardId:t.values.wardId,userId:t.values.userId,page:"",perPage:w};h.post(D,e,N()).then(l=>{var i,u,v;((i=l==null?void 0:l.data)==null?void 0:i.status)==!0&&(W((v=(u=l==null?void 0:l.data)==null?void 0:u.data)==null?void 0:v.items),J()),c(!1)}).catch(l=>{c(!1)})},J=()=>{H(!0)};return a.jsxs(a.Fragment,{children:[V&&a.jsx(Z,{data:A}),$&&a.jsx(r,{}),a.jsxs("form",{onChange:t.handleChange,onSubmit:t.handleSubmit,className:"mb-4 bg-white shadow-lg rounded-md ",children:[a.jsx("h1",{className:"text-xl w-full font-bold px-8 pt-4 text-gray-700",children:"Search Collection Report"}),a.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"From Date :"}),a.jsx("div",{className:"col-span-6",children:a.jsx("input",{type:"date",name:"fromDate",id:"",className:x})}),a.jsx("div",{className:"col-span-12 text-end",children:t.touched.fromDate&&t.errors.fromDate&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:t.errors.fromDate})})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Upto Date :"}),a.jsx("div",{className:"col-span-6",children:a.jsx("input",{type:"date",name:"uptoDate",id:"",className:x})}),a.jsx("div",{className:"col-span-12 text-end",children:t.touched.uptoDate&&t.errors.uptoDate&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:t.errors.uptoDate})})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Ward No. :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"wardId",id:"",className:x,onChange:M,children:[a.jsx("option",{value:"",children:"All"}),g==null?void 0:g.map(e=>a.jsx(a.Fragment,{children:a.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.ward_name})}))]})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Collector Name :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"userId",id:"",className:x,children:[a.jsx("option",{value:"",children:"All"}),j==null?void 0:j.map(e=>a.jsx(a.Fragment,{children:a.jsxs("option",{value:e==null?void 0:e.id,children:[a.jsx("span",{className:"capitalize",children:e==null?void 0:e.user_name}),"Â ",a.jsxs("span",{className:"uppercase",children:["(",e==null?void 0:e.user_type,")"]})]})}))]})}),a.jsx("div",{className:"col-span-12 text-end text-xs text-red-500",children:"select ward no to get collector name list"})]}),a.jsx("div",{className:"w-full md:w-[20%] flex justify-start items-end",children:q?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex justify-start items-end",children:a.jsx(o,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):a.jsxs("button",{type:"submit",className:"flex flex-row items-center border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-sm font-semibold px-5 py-1 w-max",children:[" ",a.jsx("span",{className:"mr-2",children:a.jsx(ae,{})}),"Search"]})})]})]}),m!=null&&(m==null?void 0:m.length)!=0?a.jsx(a.Fragment,{children:a.jsx(ee,{count1:w,columns:O,dataList:m,exportStatus:!0,perPage:b,perPageC:Q,totalCount:w,nextPage:z,prevPage:B,exportDataF:G,exportData:A})}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"w-full my-4 text-center text-red-500 text-lg font-bold",children:"No Data Found"})}),a.jsx("div",{className:"h-[20vh]"})]})};export{de as default};
