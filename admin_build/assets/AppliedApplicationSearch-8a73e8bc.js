import{r as i,af as U,b as $,m as v,d as I,e as g,f as T,u as V,j as r,C as M,S as O,l as E,L as W,a as q,n as s,P as G}from"./index-28e798bd.js";import{e as z}from"./index.esm-868d8c90.js";import{s as J,c as K}from"./superNavigation-177b3a8b.js";function oe(){const[a,N]=i.useState(),[b,d]=i.useState(!1),[C,c]=i.useState();i.useState();const[B,p]=i.useState(),[Q,h]=i.useState(!1),[X,S]=i.useState(),[_,x]=i.useState(!1),[A,f]=i.useState(!1),{filterParam:m,searchByParam:y,searchValueParam:u}=U();$("Search Applications");const{api_getWardListByLogin:Y,api_filterPropertyDetails:Z,api_filterPropertyAppliedApplications:H}=G();v();const F=I({filterBy:g().required("Select filter by !"),searchBy:g().required("Select search by !"),entry:g().required("select value !")}),o=T({initialValues:{filterBy:"",searchBy:"",entry:""},onSubmit:e=>{w(e),S(e.filterBy)},validationSchema:F}),l=V(),w=e=>{f(!1),x(!0),d(!1);const n={filteredBy:e.filterBy,searchBy:e==null?void 0:e.searchBy,value:e.entry};console.log("before fetch applied application..",n),q.post(H,n,v()).then(t=>{var j;console.table("applied application. in at ...",t==null?void 0:t.data),e.filterBy=="saf"?c(P):e.filterBy=="gbsaf"?c(R):c(k),K(`/property/searchAppliedProperty/${encodeURIComponent(e==null?void 0:e.filterBy)}/${encodeURIComponent(e==null?void 0:e.searchBy)}/${encodeURIComponent(e==null?void 0:e.entry)}`),N((j=t==null?void 0:t.data)==null?void 0:j.data),d(!0),x(!1)}).catch(t=>{console.log("Error while fetching Filter Data",t),d(!1),f(!0),x(!1)})};console.log("datassssssssss",a);const L=e=>{o.values.filterBy=e.target.value,e.target.value=="holdingNo"&&(p("15 Digit Holding No"),h(!0)),e.target.value=="ownerDetails"&&(p("Owner Details"),h(!1)),e.target.value=="address"&&(p("Address"),h(!1))},P=[{Header:"Ward No.",Cell:({cell:e})=>r.jsx("span",{children:e.row.original.new_ward_no==""?s(e.row.original.old_ward_no):s(e.row.original.new_ward_no)})},{Header:"Application No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.saf_no)})},{Header:"Assessment Type",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.assessment_type)})},{Header:"First Owner",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.owner_name)})},{Header:"Mobile No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.mobile_no)})},{Header:"Applied By",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.appliedby)})},{Header:"Current Level",Cell:({cell:e})=>r.jsx("div",{className:"bg-red-200 text-black px-2 py-0.5 shadow-xl rounded-xl text-center",children:s(e.row.original.currentRole)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>l(`/propApplicationDetails/${e.row.values.id}`),className:"mr-4 text-white bg-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-600 hover:text-white",children:"View"}),e.row.original.payment_status==0&&r.jsx("button",{onClick:()=>l(`/viewDemand/${e.row.values.id}`),className:"ml-4 mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white",children:"Pay"})]})}],R=[{Header:"Ward No.",Cell:({cell:e})=>r.jsx("span",{children:e.row.original.new_ward_no==""?s(e.row.original.old_ward_no):s(e.row.original.new_ward_no)})},{Header:"Application No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.saf_no)})},{Header:"Officer's Name",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.officer_name)})},{Header:"Assessment Type",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.assessment_type)})},{Header:"Mobile No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.mobile_no)})},{Header:"Apply Date",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.updated_at)})},{Header:"Current Level",Cell:({cell:e})=>r.jsx("span",{className:"bg-red-200 text-black px-2 py-0.5 shadow-xl rounded-xl",children:s(e.row.original.currentRole)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>l(`/gbsaf-details/${e.row.values.id}`),className:"mr-4 text-white bg-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-600 hover:text-white",children:"View"}),e.row.original.payment_status==0&&r.jsx("button",{onClick:()=>l(`/viewDemand/${e.row.values.id}`),className:"ml-4 mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white",children:"Pay"})]})}],k=[{Header:"Ward No.",Cell:({cell:e})=>r.jsx("span",{children:e.row.original.new_ward_no==""?s(e.row.original.old_ward_no):s(e.row.original.new_ward_no)})},{Header:"Application No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.application_no)})},{Header:"Holding No.",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.new_holding_no)})},{Header:"Applicant Name",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.owner_name)})},{Header:"Mobile No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.mobile_no)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>r.jsx("button",{onClick:()=>{o.values.filterBy=="concession"&&l(`/concession-details/${e.row.values.id}`),o.values.filterBy=="objection"&&l(`/objection-details/${e.row.values.id}`),o.values.filterBy=="harvesting"&&l(`/harvesting-details/${e.row.values.id}`),o.values.filterBy=="holdingDeactivation"&&l(`/holding-deactivatioin-details/${e.row.values.id}`)},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}];i.useEffect(()=>{u!="direct"&&(console.log("filter param ",decodeURIComponent(m)),o.setFieldValue("filterBy",decodeURIComponent(m)),o.setFieldValue("searchBy",decodeURIComponent(y)),o.setFieldValue("entry",decodeURIComponent(u)),w({filterBy:decodeURIComponent(m),searchBy:decodeURIComponent(y),entry:decodeURIComponent(u)}))},[]);const D=e=>{let n=e.target.name;e.target.value,n=="filterBy"&&L(e)};return A?r.jsx(M,{children:r.jsx(O,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):r.jsxs(r.Fragment,{children:[_&&r.jsx(E,{}),r.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[r.jsxs("div",{className:"hidden sm:flex ml-5 mt-2 ",children:[r.jsx("img",{src:J,alt:"",className:"w-10 h-10"}),r.jsx("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Applied Applications"})]}),r.jsx("form",{onSubmit:o.handleSubmit,onChange:D,children:r.jsxs("div",{className:"flex-col sm:flex-row flex justify-center sm:space-x-8 my-5 m-10",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Application Type",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{...o.getFieldProps("filterBy"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"saf",children:"SAF"}),r.jsx("option",{value:"gbsaf",children:"GBSAF"}),r.jsx("option",{value:"concession",children:"Concession"}),r.jsx("option",{value:"objection",children:"Objection"}),r.jsx("option",{value:"harvesting",children:"Rainwater Harvesting"}),r.jsx("option",{value:"holdingDeactivation",children:"Holding Deactivation"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:o.touched.filterBy&&o.errors.filterBy?o.errors.filterBy:null})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{...o.getFieldProps("searchBy"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"applicationNo",children:"Application No."}),r.jsx("option",{value:"name",children:"Name"}),r.jsx("option",{value:"mobileNo",children:"Mobile No."}),r.jsx("option",{value:"ptn",children:"Holding No."}),r.jsx("option",{value:"holding",children:"PTN"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:o.touched.searchBy&&o.errors.searchBy?o.errors.searchBy:null})]}),r.jsxs("div",{className:"mt-5 sm:mt-0",children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","value ",B," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",...o.getFieldProps("entry"),className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:o.touched.entry&&o.errors.entry?o.errors.entry:null})]}),r.jsx("div",{className:"mt-6",children:r.jsxs("button",{type:"submit",className:"w-full border rounded-md border-indigo-500 bg-indigo-500 hover:bg-indigo-700 text-white  shadow-lg  text-base font-semibold px-5 sm:m-3 py-1",children:[" ",r.jsxs("p",{className:"flex",children:[" ",r.jsxs("span",{className:"mt-1 mr-2",children:[" ",r.jsx(z,{})," "]})," ","Search record"]})]})})]})}),r.jsxs("div",{className:"sm:m-10",children:[b&&(a==null?void 0:a.length)!=0&&r.jsx(W,{exportStatus:!1,columns:C,dataList:a}),b&&(a==null?void 0:a.length)==0&&r.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]})]})]})}export{oe as default};
