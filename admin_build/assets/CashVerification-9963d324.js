import{b as z,R as $,r as t,a as _,m as P,j as e,l as U,t as Q,M as Z,aS as G,n as o,ap as Y,Q as J,a7 as O,d as K,e as q,f as X,L as ee,aM as T}from"./index-28e798bd.js";import{P as re}from"./reactjs-popup.esm-c73af7eb.js";import{B as W}from"./BottomErrorCard-357ff292.js";import{n as h}from"./PowerupFunctions-7310c5f4.js";const ae={overlay:{background:"rgba(0, 0, 0, 0.5)",overflowY:"scroll"},content:{top:"60%",left:"55%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"transparent",border:"none",height:"maxHeight"}};function se(l){var N,g,f,w,v,C,S,d;z("Cash Verification");const{api_verifiedTcCollection:k,api_notVerifiedTcCollection:M,api_verifyTcCollection:u}=Y(),[A,c]=$.useState(!1),[s,E]=t.useState();t.useState(!1);const[V,b]=t.useState(!1),[I,D]=t.useState(!1),[y,L]=t.useState(null),[j,R]=t.useState([]);(N=l==null?void 0:l.data)==null||N.id,(g=l==null?void 0:l.data)==null||g.date,console.log("cash verification data => ",l==null?void 0:l.data),t.useEffect(()=>{var n,i;if(!l||!l.data)return;const r={date:(n=l==null?void 0:l.data)==null?void 0:n.date,userId:(i=l==null?void 0:l.data)==null?void 0:i.id};let a;(l==null?void 0:l.reportType)=="1"&&(a=M),(l==null?void 0:l.reportType)=="2"&&(a=k),_.post(a,r,P()).then(x=>{var H;console.log("response of te data in modal",x),E((H=x==null?void 0:x.data)==null?void 0:H.data)}).catch(x=>{console.log("Error while tc list data in modal",x),p(!0,"Some error occured. Please try again later.")})},[l==null?void 0:l.data]),console.log("getting data in cash verification modal => ",l==null?void 0:l.data),t.useEffect(()=>{l.openAddPopUP>0&&c(!0)},[l==null?void 0:l.openAddPopUP]);function F(){}function m(){c(!1),R([])}const B=()=>{const r={property:s.property,water:s.water,trade:s.trade};_.post(u,r,P()).then(a=>{console.log("Data After Verification",a),J.success("Verified Successfully !!!"),m()}).catch(a=>{console.log("Exception While Verifying Data",a),p(!0,"Some error occured. Please try again later.")}),console.log("Verify Data",r)},p=(r,a)=>{L(a),D(r)};return e.jsxs(e.Fragment,{children:[V&&e.jsx(U,{}),I&&e.jsx(W,{activateBottomErrorCard:p,errorTitle:y}),e.jsx(Q,{autoClose:2e3}),e.jsx(Z,{isOpen:A,onAfterOpen:F,onRequestClose:m,style:ae,contentLabel:"Example Modal",children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:" bg-white rounded-lg shadow-xl border-2 border-gray-50 p-2",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"float-right",children:e.jsxs("div",{onClick:m,className:"hover:bg-gray-100 rounded-full w-5 cursor-pointer mr-3",children:["  ",e.jsx(G,{size:20})]})}),e.jsx("div",{className:"float-left",children:e.jsx("h1",{className:"mb-3 text-2xl ml-5 font-semibold",children:"TC Collection Details"})})]}),e.jsx("p",{className:"border-b mt-10 mb-6 mx-5 border-gray-100"}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-4",children:e.jsxs("div",{className:"grid grid-cols-2 bg-yellow-300 rounded shadow p-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("p",{children:" Collector Name"}),e.jsx("p",{children:" Transaction Date"}),e.jsx("p",{children:" Total Amount"}),e.jsx("p",{children:" Number of Transaction"})]}),e.jsxs("div",{className:"col-span-1 font-semibold",children:[e.jsxs("p",{className:"uppercase",children:[": ",o(s==null?void 0:s.collectorName)]}),e.jsxs("p",{children:[": ",o(s==null?void 0:s.date)]}),e.jsxs("p",{children:[": ",h(parseFloat(s==null?void 0:s.totalAmount).toLocaleString("en-IN",{style:"currency",currency:"INR"}))]}),e.jsxs("p",{children:[": ",h(s==null?void 0:s.numberOfTransaction)]})]})]})}),e.jsx("div",{className:"col-span-8",children:e.jsxs("div",{className:"flex flex-wrap-reverse m-0",children:[e.jsxs("div",{className:"bg-emerald-500 shadow p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:h(parseFloat(s==null?void 0:s.Cash)).toLocaleString("en-IN",{style:"currency",currency:"INR"})}),e.jsx("p",{className:"text-lg font-semibold",children:"Cash"})]}),e.jsxs("div",{className:"bg-indigo-400 shadow p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:h(parseFloat(s==null?void 0:s.Cheque)).toLocaleString("en-IN",{style:"currency",currency:"INR"})}),e.jsx("p",{className:"text-lg font-semibold",children:"Cheque"})]}),e.jsxs("div",{className:"bg-cyan-400 shadow p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:h(parseFloat(s==null?void 0:s.DD)).toLocaleString("en-IN",{style:"currency",currency:"INR"})}),e.jsx("p",{className:"text-lg font-semibold",children:"DD"})]})]})})]}),e.jsx("p",{className:"border-b mt-5 mb-6 mx-5 border-gray-100"}),((f=s==null?void 0:s.property)==null?void 0:f.length)>0&&e.jsxs("div",{children:[e.jsx("p",{className:"uppercase",children:"Property Payment"}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"})]})}),e.jsx("tbody",{children:(w=s==null?void 0:s.property)==null?void 0:w.map((r,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:a+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:h(parseFloat(r==null?void 0:r.amount)).toLocaleString("en-IN",{style:"currency",currency:"INR"})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.tran_date)})]},a))})]})]}),e.jsx("p",{className:"py-2"}),((v=s==null?void 0:s.water)==null?void 0:v.length)>0&&e.jsxs("div",{children:[e.jsx("p",{className:"uppercase",children:"Water Payment"}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"})]})}),e.jsx("tbody",{children:(C=s==null?void 0:s.water)==null?void 0:C.map((r,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:a+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:h(parseFloat(r==null?void 0:r.amount)).toLocaleString("en-IN",{style:"currency",currency:"INR"})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.tran_date)})]},a))})]})]}),e.jsx("p",{className:"py-2"}),((S=s==null?void 0:s.trade)==null?void 0:S.length)>0&&e.jsxs("div",{children:[e.jsx("p",{className:"uppercase",children:"Trade Payment"}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"})]})}),e.jsx("tbody",{children:(d=s==null?void 0:s.trade)==null?void 0:d.map((r,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:a+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:h(parseFloat(r==null?void 0:r.amount)).toLocaleString("en-IN",{style:"currency",currency:"INR"})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:o(r==null?void 0:r.tran_date)})]},a))})]})]}),e.jsx("div",{className:"my-5",children:e.jsxs("div",{className:"flex justify-center pt-3 space-x-3",children:[(l==null?void 0:l.reportType)=="1"&&e.jsx(re,{trigger:e.jsx("button",{className:"w-full px-10 rounded bg-indigo-600 py-2 text-white sm:w-auto",children:" Verify "}),modal:!0,nested:!0,children:r=>e.jsx("div",{className:"h-screen w-screen flex-row justify-center items-center backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col justify-center h-max w-max absolute top-[40%] right-[40%] bg-indigo-50 px-4 py-2 rounde-md shadow-lg animate__animated animate__fadeInDown animate__faster",children:[e.jsx("button",{className:"close text-end text-lg",onClick:r,children:"×"}),e.jsx("div",{className:"text-md",children:"Are you sure ?"}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white shadow-md text-xs px-4 py-1 m-4 rounded-md",onClick:()=>{r(),B()},children:"Yes"}),e.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 shadow-md text-xs py-1 m-4 rounded-md",onClick:r,children:"No"})]})]})})}),e.jsx("button",{onClick:m,className:"w-full px-10 rounded bg-red-600 py-2 text-white sm:w-auto",children:" Close "})]})})]})})})]})}const de=l=>{const[k,M]=t.useState(0),[u,A]=t.useState(),[c,s]=t.useState(),[E,V]=t.useState(),[b,I]=t.useState(1),[D,y]=t.useState(),[L,j]=t.useState(!1),[R,F]=t.useState(!1),[m,B]=t.useState(null);let p=new Date().toLocaleDateString("in-IN"),N=O(p).format("YYYY-DD-MM");const{api_listofEmployees:g,api_listUnverifiedCashVerification:f,api_listVerifiedCashVerification:w}=Y();t.useEffect(()=>{b==1&&y(f),b==2&&y(w)},[b]);const v=(a,n,i)=>{V({id:a,date:n}),M(x=>x+1)};t.useEffect(()=>{_.post(g,{},P()).then(a=>{A(a.data.data)}).catch(a=>{console.log("Error while getting employee list",a)})},[]);const C=[{Header:"Sl.",Cell:({row:a})=>e.jsxs("div",{className:"px-2 font-semibold",children:[a.index+1,"."]})},{Header:"EmployeeName",Cell:({cell:a})=>{var n;return e.jsxs("span",{children:["  ",o((n=a.row.original)==null?void 0:n.user_name)]})}},{Header:"Property",Cell:({cell:a})=>{var n;return e.jsxs("span",{children:[" ",T((n=a.row.original)==null?void 0:n.property)]})}},{Header:"Water",Cell:({cell:a})=>{var n;return e.jsxs("span",{children:[" ",T((n=a.row.original)==null?void 0:n.water)]})}},{Header:"Trade",Cell:({cell:a})=>{var n;return e.jsxs("span",{children:[" ",T((n=a.row.original)==null?void 0:n.trade)]})}},{Header:"Total Amount",Cell:({cell:a})=>{var n;return e.jsxs("span",{children:[" ",T((n=a.row.original)==null?void 0:n.total)]})}},{Header:"Paid Date",Cell:({cell:a})=>{var n;return e.jsxs("span",{children:["  ",o((n=a.row.original)==null?void 0:n.date)]})}},{Header:"Action",Cell:({cell:a})=>e.jsx("button",{onClick:()=>v(a.row.original.id,a.row.original.date,a.row.original.user_name),className:"bg-blue-600 hover:bg-blue-400 py-1 px-3 text-white rounded-sm",children:"View"})}],S=a=>{j(!0);const n={date:a.collectionDate,id:a.empName};_.post(D,n,P()).then(i=>{j(!1),console.log("response list cash",i),s(i.data.data)}).catch(i=>{j(!1),r(!0,"Error occured while fetching cash verification list. Please try again later."),console.log("Error while list cash verification",i)})};K({collectionDate:q().required("Select Date"),empName:q().required("Select Employee")});const d=X({initialValues:{empName:"",collectionDate:O(new Date).format("yy-MM-DD"),reportType:"1"},enableReinitialize:!0,onSubmit:a=>{console.log("report type ",a.reportType),S(a)}}),r=(a,n)=>{B(n),F(a)};return e.jsxs(e.Fragment,{children:[L&&e.jsx(U,{}),R&&e.jsx(W,{activateBottomErrorCard:r,errorTitle:m}),e.jsx(se,{openAddPopUP:k,data:E,reportType:d.values.reportType}),e.jsxs("div",{className:"m-2 bg-white",children:[e.jsx("div",{className:"border border-gray-100 bg-indigo-100 shadow-md rounded",children:e.jsx("form",{onSubmit:d.handleSubmit,onChange:d.handleChange,children:e.jsxs("div",{className:"px-3 py-3",children:[e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"mb-3 text-2xl font-semibold",children:"Cash Verification"})}),e.jsxs("div",{className:"grid grid-cols-12 space-x-10",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{onChange:d.handleChange,name:"collectionDate",className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",type:"date",defaultValue:N}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",d.touched.collectionDate&&d.errors.collectionDate?d.errors.collectionDate:null]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Employee ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{onChange:d.handleChange,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"empName",children:[e.jsx("option",{value:"",children:"All"}),u==null?void 0:u.map((a,n)=>e.jsx("option",{value:a.id,children:a.user_name}))]}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",d.touched.empName&&d.errors.empName?d.errors.empName:null]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Report Type ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{onChange:a=>I(a.target.value),value:d.values.reportType,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"reportType",children:[e.jsx("option",{value:"1",children:"Not Verified"}),e.jsx("option",{value:"2",children:"Verified"})]})]}),e.jsx("div",{className:"col-span-3 mt-7 w-full",children:e.jsx("button",{type:"submit",class:"w-1/2 md:w-full py-2 px-4 inline-block text-center mb-3 rounded leading-5 text-gray-100 bg-indigo-500 border border-indigo-500 hover:text-white hover:bg-indigo-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0",children:"Search"})})]})]})})}),e.jsx("p",{className:" mx-10 py-5"}),e.jsx("div",{className:"my-5 mx-2",children:(c==null?void 0:c.length)==0?e.jsx("p",{className:"text-center font-semibold -mt-8",children:"No Data Found !"}):e.jsxs(e.Fragment,{children:[c?e.jsx(ee,{columns:C,dataList:c}):e.jsx("p",{className:"text-center font-semibold -mt-8",children:"Please Choose Date and User"})," "]})})]})]})};export{de as default};
