import{r as n,N as I,j as a,U as W,V as z,W as J,aQ as K,a as A,m as M}from"./index-28e798bd.js";import{L as X}from"./ListTable2v2-5a35eb15.js";import{B as Y}from"./BarLoader-18802a65.js";import{G as Z}from"./GlobalFilter-80129fa5.js";import{k as o}from"./index.esm-aea1e841.js";function r(e){console.log("enter in margin table");const[h,F]=n.useState("hidden"),v=n.useMemo(()=>e.columns,[]),P=n.useMemo(()=>e.dataList,[e.dataList,e==null?void 0:e.totalCount]),[b,k]=n.useState(1),[D,f]=n.useState(!0),[N,m]=n.useState(!0),[S,L]=n.useState(0);n.useEffect(()=>{k(1)},[e==null?void 0:e.totalCount]),n.useEffect(()=>{f(!0),m(!0);let l=(e==null?void 0:e.totalCount)/(e==null?void 0:e.perPage);(e==null?void 0:e.totalCount)%(e==null?void 0:e.perPage)!=0?B(parseInt(l)+1):B(parseInt(l)),i==b&&f(!1),(i==b||b==1)&&m(!1)},[e==null?void 0:e.totalCount,S]);const{getTableProps:Q,getTableBodyProps:s,headerGroups:x,page:O,nextPage:R,previousPage:d,canNextPage:H,canPreviousPage:_,prepareRow:q,pageOptions:G,gotoPage:V,pageCount:$,setPageSize:B,state:E,rows:T,setGlobalFilter:t}=I.useTable({columns:v,data:P,initialState:{pageIndex:0}},I.useGlobalFilter,I.useSortBy,I.usePagination),{globalFilter:g,pageIndex:u,pageSize:i}=E,w=()=>{(e==null?void 0:e.lastPage)!=(e==null?void 0:e.currentPage)&&(m(!0),e.nextPage()),(e==null?void 0:e.lastPage)==(e==null?void 0:e.currentPage)&&f(!1)},C=()=>{(e==null?void 0:e.currentPage)!=1&&(f(!0),e.prevPage()),(e==null?void 0:e.currentPage)==1&&m(!1)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex mb-2 pb-2",children:[a.jsx("div",{className:"flex-initial opacity-50",children:a.jsx(Z,{filter:g,setFilter:t})}),a.jsx("div",{className:"flex-initial ml-2",children:a.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>F(""),onMouseLeave:()=>F("hidden"),onClick:e.exportDataF,children:["Export",a.jsx("div",{className:h+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:a.jsx(W,{})})]})}),a.jsx("div",{className:"flex-1",children:e.children})]}),a.jsx("div",{className:"flex w-full",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"opacity-50",children:"Total Result : "}),a.jsx("span",{className:"font-semibold",children:e==null?void 0:e.totalCount})," "]})}),(e==null?void 0:e.feedback)!=null&&a.jsx("div",{children:a.jsxs("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[a.jsx(o,{className:"inline text-xs text-gray-400 mr-2"}),e.feedback]})}),a.jsx("div",{className:" py-2 overflow-x-auto bg-white",children:a.jsxs("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[a.jsxs("table",{...s,className:"min-w-full leading-normal",children:[a.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:x==null?void 0:x.map(l=>a.jsx("tr",{...l.getHeaderGroupProps(),children:l.headers.map(c=>a.jsxs("th",{...c.getHeaderProps(c.getSortByToggleProps()),className:(c==null?void 0:c.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[c.render("Header"),a.jsx("span",{children:c.isSorted?c.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),a.jsxs("tbody",{...s(),className:"text-sm",children:[T.map((l,c)=>{var j;return q(l),a.jsx("tr",{...l.getRowProps(),className:"bg-white shadow-lg border-[1px] border-gray-200",children:(j=l==null?void 0:l.cells)==null?void 0:j.map(y=>a.jsx("td",{...y.getCellProps(),className:"px-2 py-2 text-sm text-left border-[1px] border-gray-200",children:y.render("Cell")}))})}),a.jsx("tr",{children:a.jsx("td",{})})]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-12",children:[a.jsxs("div",{className:"col-span-2",children:["  ",a.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:S,onChange:l=>{L(Number(l.target.value)),e.perPageC(Number(l.target.value))},children:[5,10,25,50].map(l=>a.jsxs("option",{value:l,children:["show ",l]},l))})]}),a.jsxs("div",{className:"col-span-4 text-center col-start-5",children:["   ",a.jsxs("span",{children:["page ","",a.jsxs("strong",{children:[e==null?void 0:e.currentPage," of ",e==null?void 0:e.lastPage]}),""]})]}),a.jsxs("div",{className:"col-span-4 text-right",children:[a.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>(e==null||e.goFirst(),m(!1),f(!0)),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:[a.jsx(z,{})," "]}),a.jsx("button",{className:((e==null?void 0:e.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>C(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:"⬅️"}),a.jsx("button",{className:((e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>w(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:"➡️"}),a.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>(e==null||e.goLast(),f(!1),m(!0)),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:["  ",a.jsx(J,{})]})]})]})]})})]})}const ne=e=>{const[h,F]=n.useState(5),[v,P]=n.useState(1),[b,k]=n.useState(0),[D,f]=n.useState(0),[N,m]=n.useState(0),[S,L]=n.useState(),[Q,s]=n.useState(!1),[x,O]=n.useState(),[R,d]=n.useState(!1),H=()=>{d(!0),console.log("entered in new method..."),console.log(`data before hitting api (${(e==null?void 0:e.api)+"?page="+v}) => `,{...e==null?void 0:e.requestBody,perPage:h}),A.post((e==null?void 0:e.api)+"?page="+v,{...e==null?void 0:e.requestBody,perPage:h},M()).then(t=>{var g,u,i,w,C,l,c,j,y;((g=t==null?void 0:t.data)==null?void 0:g.status)==!0?(console.log("search success => ",t),O((i=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:i.data),m((C=(w=t==null?void 0:t.data)==null?void 0:w.data)==null?void 0:C.total),k((c=(l=t==null?void 0:t.data)==null?void 0:l.data)==null?void 0:c.current_page),f((y=(j=t==null?void 0:t.data)==null?void 0:j.data)==null?void 0:y.last_page)):console.log("error while search => ",t),d(!1)}).catch(t=>(console.log("error while search => ",t),d(!1)))},_=()=>{d(!0),console.log("entered in old method... data before hitting",e==null?void 0:e.requestBody),console.log(`data before hitting api (${e==null?void 0:e.api}) => `,{...e==null?void 0:e.requestBody,perPage:h,page:v}),A.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:h,page:v},M()).then(t=>{var g,u,i,w,C,l,c,j,y,U;((g=t==null?void 0:t.data)==null?void 0:g.status)==!0?(console.log("search success => ",t),e!=null&&e.getData&&(e==null||e.allData((u=t==null?void 0:t.data)==null?void 0:u.data)),O((w=(i=t==null?void 0:t.data)==null?void 0:i.data)==null?void 0:w.data),m((l=(C=t==null?void 0:t.data)==null?void 0:C.data)==null?void 0:l.total),k((j=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:j.current_page),f((U=(y=t==null?void 0:t.data)==null?void 0:y.data)==null?void 0:U.last_page)):console.log("error while search => ",t),d(!1)}).catch(t=>(console.log("error while search => ",t),d(!1)))};n.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(e==null?void 0:e.type)=="new"&&(console.log("calling new fun"),P(1),F(5),H()),(e==null?void 0:e.requestBody)!=null&&(e==null?void 0:e.type)=="old"&&(console.log("calling old fun"),P(1),F(5),_()),console.log("change data",e==null?void 0:e.changeData,"and requestBody => ",e==null?void 0:e.requestBody)},[e==null?void 0:e.changeData]);const q=()=>{P(b+1)},G=()=>{P(b-1)},V=t=>{F(t)};n.useEffect(()=>{d(!0),(e==null?void 0:e.type)=="new"&&H(),(e==null?void 0:e.type)=="old"&&_()},[v,h]);const $=()=>{P(1)},B=()=>{P(D)},E=()=>{d(!0),s(!1),(e==null?void 0:e.type)=="new"&&A.post((e==null?void 0:e.api)+"?page=1",{...e==null?void 0:e.requestBody,perPage:N},M()).then(t=>{var g,u,i;((g=t==null?void 0:t.data)==null?void 0:g.status)==!0&&(L((i=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:i.data),T()),d(!1)}).catch(t=>{d(!1)}),(e==null?void 0:e.type)=="old"&&A.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:N},M()).then(t=>{var g,u,i;((g=t==null?void 0:t.data)==null?void 0:g.status)==!0&&(L((i=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:i.data),T()),d(!1)}).catch(t=>{d(!1)})},T=()=>{s(!0)};return console.log("getting margin status",e==null?void 0:e.margin),a.jsxs(a.Fragment,{children:[Q&&a.jsx(K,{data:S}),R&&a.jsx(Y,{}),x!=null&&(x==null?void 0:x.length)!=0?a.jsx(a.Fragment,{children:e!=null&&e.margin?a.jsx(r,{currentPage:b,lastPage:D,goFirst:$,goLast:B,count1:N,columns:e==null?void 0:e.columns,dataList:x,exportStatus:!0,perPage:h,perPageC:V,totalCount:N,nextPage:q,prevPage:G,exportDataF:E,exportData:S}):a.jsx(X,{currentPage:b,lastPage:D,goFirst:$,goLast:B,count1:N,columns:e==null?void 0:e.columns,dataList:x,exportStatus:!0,perPage:h,perPageC:V,totalCount:N,nextPage:q,prevPage:G,exportDataF:E,exportData:S})}):a.jsx(a.Fragment,{children:!R&&a.jsx("div",{className:"w-full my-4 text-center text-red-500 text-lg font-bold",children:"No Data Found"})})]})};export{ne as default};
