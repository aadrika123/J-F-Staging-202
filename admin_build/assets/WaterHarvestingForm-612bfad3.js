import{af as $,u as M,r as l,d as q,e as z,f as Q,a as x,m as U,j as e,t as V,l as Y,P as G,Q as J}from"./index-28e798bd.js";import{b as K}from"./index.esm-868d8c90.js";import{A as X}from"./ApplicationSubmitScreen-63564d43.js";import{A as Z}from"./ApiHeader2-9c66ad2e.js";import{B as D}from"./BottomErrorCard-357ff292.js";import{b as p}from"./PowerupFunctions-7310c5f4.js";import"./index.esm-5a993d46.js";/* empty css             */function ge(ee){const n=$(),u=M();console.log("getting id => ",n==null?void 0:n.id),l.useState(!1);const[te,h]=l.useState(),[ae,b]=l.useState(),[oe,w]=l.useState(),[j,y]=l.useState(),[t,N]=l.useState();l.useState("");const[v,S]=l.useState(""),[C,f]=l.useState(!1),[_,I]=l.useState(),[g,se]=l.useState(0),[H,k]=l.useState(!1),[W,r]=l.useState(!1),[F,A]=l.useState(null),{api_postWaterHarvestindDocCode:E,api_postWaterHarvestingData:O,api_getHoldingDetails:P}=G(),R=q({dateOfCompletion:z().required("This is a required field")}),i=Q({initialValues:{isWaterHarvestingBefore:"",dateOfCompletion:"",rwhImage:""},onSubmit:(a,s)=>{console.log("waterHarvesting ",a),L(a)},validationSchema:R}),B=()=>{u(`/holdingPropertyDetails/${n==null?void 0:n.id}`)};l.useEffect(()=>{f(!1),r(!0),x.post(`${E}`,{},U()).then(function(a){var s,o,c,m;console.log("water harvesting doc code => ",a),(s=a==null?void 0:a.data)!=null&&s.status?I((m=(c=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:c.masters[0])==null?void 0:m.documentCode):d(!0,"Error occured in submittion. Please try again later."),r(!1)}).catch(function(a){console.log("water harvesting doc code errorrr.... ",a),d(!0,"Error occured in submittion. Please try again later."),r(!1)})},[]),l.useEffect(()=>{r(!0);let a=window.localStorage.getItem("token");console.log("token at basic details is  get method...",a);const s={headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}};x.post(P,{propertyId:n==null?void 0:n.id},s).then(o=>{var c;console.log("getting harvesting details => ",o),N((c=o==null?void 0:o.data)==null?void 0:c.data),r(!1)}).catch(o=>{console.log("getting harvesting details error => ",o),r(!1)})},[]);const L=a=>{r(!0);let s=new FormData;s.append("dateOfCompletion",a.dateOfCompletion),g==1&&s.append("document",j),g==1&&s.append("docCode",_),s.append("propertyId",n==null?void 0:n.id),s.append("ulbId",t==null?void 0:t.ulb_id),x.post(`${O}`,s,Z()).then(function(o){var c,m;((c=o==null?void 0:o.data)==null?void 0:c.status)==!0?(console.log("response after submitting water harvesting data",o),J.success("Water Harvesting Applied Successfully !!"),S((m=o==null?void 0:o.data)==null?void 0:m.data),f(!0)):d(!0,"Error occured in submitting water harvesting application. Please try again later."),r(!1)}).catch(o=>{r(!1),d(!0,"Error occured in submitting water harvesting application. Please try again later.")})},T=a=>{const s=a.target.name;if(s=="rwhImage"){let o=a.target.files;y(a.target.files[0]),console.log("file in change => ",o)}if(s=="rwhImageLeft"){let o=a.target.files;h(a.target.files[0]),console.log("file in change => ",o)}if(s=="rwhImageTop"){let o=a.target.files;b(a.target.files[0]),console.log("file in change => ",o)}if(s=="rwhImageRight"){let o=a.target.files;w(a.target.files[0]),console.log("file in change => ",o)}},d=(a,s)=>{A(s),k(a)};return e.jsxs(e.Fragment,{children:[e.jsx(V,{position:"top-right",autoClose:2e3}),W&&e.jsx(Y,{}),H&&e.jsx(D,{activateBottomErrorCard:d,errorTitle:F}),e.jsx("div",{className:"2xl:mt-6 mt-3 bg-indigo-500 text-white flex flex-row md:justify-evenly items-center justify-center uppercase text-base poppins mb-4 shadow-md py-2 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-extrabold text-[30px]",children:e.jsx(K,{className:"inline mr-2"})}),e.jsx("span",{className:"font-semibold poppins 2xl:text-xl text-lg",children:"Rain Water Harvesting Form"})]})}),e.jsx("div",{className:"poppins my-2 2xl:font-base text-sm",children:"Rain Water Harvesting can be applied by this form."}),t!=null&&t.is_water_harvesting?e.jsx("div",{className:"animate__animated animate__fadeInUp w-full flex justify-center mt-2 items-center",children:e.jsx("div",{className:"bg-indigo-500 text-white rounded-md shadow-lg px-4 py-2",children:"You have already applied Rain Water Harvesting form."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 w-full md:py-6 rounded-lg shadow-lg bg-white mx-auto flex flex-wrap gap-x-20 top-14 mb-6",children:[(t==null?void 0:t.pt_no)==""&&(t==null?void 0:t.pt_no)==null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:"Property Tax No.:    "}),e.jsx("span",{className:"font-semibold text-sm poppins",children:p(t==null?void 0:t.pt_no)})]})}):e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:"Holding No.:    "}),e.jsx("span",{className:"font-semibold text-sm poppins",children:p((t==null?void 0:t.new_holding_no)==""?t==null?void 0:t.holding_no:t==null?void 0:t.new_holding_no)})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:"Old Ward No.:     "}),e.jsx("span",{className:"font-semibold text-sm poppins",children:p(t==null?void 0:t.old_ward_no)})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:"New Ward No.:     "}),e.jsx("span",{className:"font-semibold text-sm poppins",children:p(t==null?void 0:t.new_ward_no)})]})]}),e.jsx("div",{className:"block p-4 w-full 2xl:py-6 py-3 rounded-lg shadow-lg bg-white mx-auto  top-14",children:e.jsxs("form",{onSubmit:i.handleSubmit,onChange:i.handleChange,children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsxs("div",{className:"col-span-10 flex flex-row flex-wrap items-center gap-4",children:[e.jsxs("label",{className:"form-label mb-1 text-gray-600 text-sm poppins",children:[e.jsx("small",{className:"block mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Date of Completion of Water Harvesting Structure"]}),e.jsx("input",{type:"date",name:"dateOfCompletion",className:"form-control px-3 py-1.5 2xl:text-base text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md poppins",placeholder:"",value:i.values.dateOfCompletion,onChange:i.handleChange}),e.jsx("p",{className:"text-red-500 text-xs poppins",children:i.touched.dateOfCompletion&&i.errors.dateOfCompletion?i.errors.dateOfCompletion:null})]}),e.jsxs("div",{className:"2xl:col-span-10 col-span-10 2xl:mt-4 mt-2 flex flex-row flex-wrap items-center gap-2 2xl:gap-4 poppins",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline",children:"*"}),"Rain Water Harvesting Image "]}),e.jsx("input",{accept:".jpg,.jpeg",type:"file",name:"rwhImage",className:"form-control px-2 py-1 2xl:text-base text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md poppins",placeholder:"",value:i.values.rwhImage,onChange:T}),g==1&&e.jsx("span",{className:"col-span-2 flex items-center poppins",children:e.jsx("p",{className:"text-red-500 text-xs",children:i.touched.rwhImage&&i.errors.rwhImage?i.errors.rwhImage:null})})]})]}),e.jsxs("div",{className:"col-span-12 my-4 flex justify-between",children:[e.jsx("button",{onClick:()=>u(`/holdingPropertyDetails/${n==null?void 0:n.id}`),type:"button",className:" px-3 py-1.5 2xl:px-6 2xl:py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out poppins",children:"Back"}),e.jsx("button",{type:"submit",className:" px-3 py-1.5 2xl:px-6 2xl:py-2.5 bg-green-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out poppins",children:"Submit"})]})]})})]}),e.jsx(X,{heading:"Rain Water Harvesting Form",appNo:v,openSubmit:C,navigation:B}),e.jsx("div",{className:"h-[10rem] visible 2xl:hidden"})]})}export{ge as default};
