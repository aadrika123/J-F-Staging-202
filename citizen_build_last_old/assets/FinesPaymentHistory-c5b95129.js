import{j as e}from"./mui-8bd1858b.js";import{r as a,u as k,f as L}from"./router-56e993c5.js";import{h as P}from"./moment-a9aaa855.js";import{W as S,A as C,B as _,N as A}from"./index-660adcfa.js";import"./axios-ab7cc016.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-34de039c.js";/* empty css                */import"./redux-a3f69129.js";import"./i18next-2edfafb0.js";const z=()=>{var d;const[m,n]=a.useState(!1),[s,p]=a.useState(null),[i,h]=a.useState(1),[r,u]=a.useState(5),[l,g]=a.useState(""),{api_swmPaymentHistory:f,header:y}=S(),c=k(),{id:b}=L();a.useEffect(()=>{j()},[i,r]);const j=()=>{n(!0),C.post(f,{pages:r,page:i},y).then(t=>{t.data.status?(console.log("Water Citizen payment history:",t.data.data),p(t.data.data)):console.log("Error fetching payment history:",t.data.message),n(!1)}).catch(t=>{console.error("Exception while getting water payment history:",t),n(!1)})},w=t=>{if(!t)return;const x=new URLSearchParams(t.split("?")[1]).get("page");x&&h(parseInt(x))},N=t=>t==="&laquo; Previous"?"← Previous":t==="Next &raquo;"?"Next →":t,v=t=>l===""?!0:t.transaction_no.toString().toLowerCase().includes(l.toLowerCase());return m?e.jsx(_,{}):!s||((d=s.data)==null?void 0:d.length)<1?e.jsx(A,{message:"No Payment History Found."}):e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"SWM Payment Transactions"}),e.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-blue-500 to-indigo-600 mx-auto sm:mx-0 rounded"})]}),e.jsxs("button",{onClick:()=>c(`/swm/new-viewApplication/${b}`),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-500 to-blue-600 text-white font-medium text-sm rounded-lg hover:from-indigo-600 hover:to-blue-700 focus:ring-2 focus:ring-indigo-500 focus:outline-none transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View Application Details"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Show:"}),e.jsxs("select",{value:r,onChange:t=>u(parseInt(t.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm",children:[e.jsx("option",{value:"5",children:"5 Records"}),e.jsx("option",{value:"10",children:"10 Records"}),e.jsx("option",{value:"20",children:"20 Records"}),e.jsx("option",{value:"30",children:"30 Records"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Search:"}),e.jsx("input",{type:"text",value:l,onChange:t=>g(t.target.value),placeholder:"Transaction number...",className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-48 shadow-sm"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SL"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Transaction No."}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Payment Mode"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Paid Amount"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Transaction Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.data.filter(v).map((t,o)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(i-1)*r+o+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.transaction_no})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.payment_mode==="ONLINE"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:t.payment_mode})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",parseFloat(t.total_demand_amt).toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",parseFloat(t.total_payable_amt).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(t.transaction_date).format("DD-MMM-YYYY")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("button",{onClick:()=>c(`/swm-payment-receipt/${t.transaction_no}`),className:"inline-flex items-center px-3 py-2 text-xs font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:text-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors duration-200",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Receipt"]})})]},t.id))})]})}),e.jsx("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsxs("span",{className:"font-semibold text-gray-900",children:[s.from,"-",s.to]})," ","of"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:s.total})," ","results"]}),s.links&&s.links.length>0&&e.jsx("nav",{className:"flex items-center space-x-1",children:s.links.map((t,o)=>e.jsx("button",{onClick:()=>w(t.url),disabled:!t.url,className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${t.active?"bg-blue-600 text-white shadow-md":t.url?"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-900":"text-gray-400 bg-gray-100 cursor-not-allowed"}`,children:N(t.label)},o))})]})})]})]})};export{z as default};
