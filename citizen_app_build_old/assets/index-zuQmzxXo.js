import{b as y,j as t,P as v,a as w,_ as r,c as N}from"./index-7g7M7zZQ.js";import"./react-USjiWj3t.js";import{u as P}from"./useCustomQuery-XoKYMSEw.js";import{R as L}from"./RotatingLoader-OYY410j5.js";import p from"./index-BRoBRObC.js";import"./useErrorFocusField-gDAfnMzI.js";function M(){const{actions:e,state:A}=y({updateAction:N}),{mutateAsync:j,isLoading:b}=P({}),h=async()=>{var i,n,s,c,o,d,m,l,u,x,f,g;try{const a=await j({api:(i=w)==null?void 0:i.ePramanLogin,data:{type:"mobile"}});(n=a==null?void 0:a.data)!=null&&n.status?(r.success((s=a==null?void 0:a.data)==null?void 0:s.message),e==null||e.updateAction({ePramaan:{codeVerifier:(o=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:o.code_verifier,nonce:(m=(d=a==null?void 0:a.data)==null?void 0:d.data)==null?void 0:m.nonce,url:(u=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:u.url}}),window.location.href=(f=(x=a==null?void 0:a.data)==null?void 0:x.data)==null?void 0:f.url):(r.error((g=a==null?void 0:a.data)==null?void 0:g.message),e==null||e.updateAction({ePramaan:{codeVerifier:"",nonce:"",url:""}}))}catch(a){r.error("Something went wrong")}};return b?t.jsx(L,{}):t.jsx(v,{title:"Auth",children:t.jsxs("div",{className:"w-full",children:[t.jsx("div",{children:t.jsx("h2",{className:"font-semibold mb-4 text-blue-700"})}),t.jsx("div",{className:"flex flex-col items-center justify-center ",children:t.jsxs("button",{onClick:h,type:"button",className:"text-gray-700 font-semibold w-full justify-center bg-gray-300 hover:bg-gray-200 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 mb-2",children:[t.jsx("img",{src:"/images/epraman.png",alt:"EPraman",className:"w-6 h-5 me-2 -ms-1"}),"Login with E-Praman"]})}),t.jsx("div",{className:"flex flex-col items-center justify-center mt-4",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"w-1/3 border-b border-gray-300"}),t.jsx("div",{className:"mx-2 text-gray-500",children:"or"}),t.jsx("div",{className:"w-1/3 border-b border-gray-300"})]})}),t.jsx("div",{children:t.jsx(p,{})})]})})}export{M as default};
