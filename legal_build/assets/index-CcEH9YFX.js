import{c as Z,j as e,r as u,l as M,u as L,k as V,B as E,_ as b,m as B,q as Ie}from"./index-BrFK6v_x.js";import{h as Y}from"./moment-C5S46NFB.js";import{S as se,C as k,c as T,a as rt,b as nt,d as lt}from"./separator-DPXjbqTJ.js";import{u as z,c as ot,b as K}from"./useCustomQuery-xlRvHaFh.js";import{S as ae}from"./Spinner-HHJhJ0D0.js";import{c as ct}from"./index-Woh3rRl7.js";import{D as re,a as ne,b as le,c as oe,d as ce,g as ie,f as de,e as me,T as ue,h as ke,i as it,O as dt,W as mt,C as ut,j as xt,k as ht,l as Te,P as pt,R as gt}from"./dialog-kRjsGRL0.js";import{e as ft,C as jt,c as Q,a as P,f as Ee,u as xe,o as he,F as pe,R as yt,B as ge}from"./switch-BeBAVJ8b.js";import{R as te}from"./RHFTextField-_t24UekY.js";import{R as fe}from"./RHFTextArea-Cgw5kx-_.js";import{I as Nt}from"./select-CSRCaCCS.js";import{d as U}from"./crypto-l-Zxl0ID.js";import{F as W}from"./file-text-GaE--A7R.js";import{C as J}from"./calendar-TJe5RBv7.js";import{U as vt}from"./user-DVOaqA2q.js";import{C as bt}from"./clock-CfAUh-1q.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Z("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function wt({name:t,label:s,isDynamic:a,isRequired:c,...o}){const{control:r,setValue:h}=ft();return e.jsx(jt,{name:t,control:r,render:({field:{ref:m},fieldState:{error:f}})=>e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:s,children:[s," ",c&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx(Nt,{type:"file",onChange:j=>{h(t,j.target.files?j.target.files[0]:null)},ref:m,className:`mt-1 ${f?"border-red-400":null}`,...o}),f&&e.jsx("span",{className:"text-red-400 text-xs",children:f.message})]})})}const _t=(t,s,a)=>{ct({customUI:({onClose:c})=>e.jsxs("div",{className:"rounded-md bg-white p-4 shadow-lg",children:[e.jsx("h1",{className:"text-lg font-bold",children:t}),e.jsx("p",{className:"text-sm",children:s}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{className:"rounded-md bg-red-500 px-4 py-1 text-white",onClick:()=>{a(),c()},children:"Yes"}),e.jsx("button",{className:"ml-2 rounded-md bg-gray-500 px-4 py-1 text-white",onClick:c,children:"No"})]})]})})};Q({name:P().required("Name is required").min(2,"Name must be at least 2 characters"),email:P().required("Email is required").email("Invalid email address"),description:P(),pdfFile:Ee().required("PDF file is required")});const Ct=[{name:"JavaScript",pattern:/\/JavaScript|\/JS\s*\(|app\.alert|eval\(|document\.|window\./gi,severity:"high"},{name:"OpenAction",pattern:/\/OpenAction/gi,severity:"high"},{name:"AA (Additional Actions)",pattern:/\/AA\s*<</gi,severity:"high"},{name:"Launch Action",pattern:/\/Launch/gi,severity:"high"},{name:"ImportData",pattern:/\/ImportData/gi,severity:"high"},{name:"RichMedia",pattern:/\/RichMedia/gi,severity:"high"},{name:"GoToE",pattern:/\/GoToE/gi,severity:"high"}],At=t=>new Promise((s,a)=>{const c=new FileReader;c.onload=o=>{var r;return s((r=o.target)==null?void 0:r.result)},c.onerror=()=>a(new Error("Failed to read file")),c.readAsText(t)}),Me=t=>({high:3,medium:2,low:1})[t]||0,St=(t={})=>{const s={maxFileSizeMB:10,strictMode:!0,autoValidate:!0,...t},[a,c]=u.useState(null),[o,r]=u.useState(null),[h,m]=u.useState(!1),f=u.useCallback(async p=>{if(m(!0),c(p),!p){const i={isValid:!1,message:"No file provided",threats:[],severity:"high"};return r(i),m(!1),i}if(p.type!=="application/pdf"){const i={isValid:!1,message:`Invalid file type. Expected PDF, got ${p.type||"unknown"}`,threats:[{name:"Invalid File Type",severity:"high",description:"Only PDF files are allowed"}],severity:"high"};return r(i),m(!1),i}const y=s.maxFileSizeMB*1024*1024;if(p.size>y){const i={isValid:!1,message:`File size (${(p.size/1024/1024).toFixed(2)}MB) exceeds the maximum limit of ${s.maxFileSizeMB}MB`,threats:[{name:"File Too Large",severity:"medium",description:`File size exceeds ${s.maxFileSizeMB}MB limit`}],severity:"medium"};return r(i),m(!1),i}try{const i=await At(p);if(!i.startsWith("%PDF-")){const n={isValid:!1,message:"Invalid PDF file. File does not have a valid PDF header",threats:[{name:"Invalid PDF Format",severity:"high",description:"File does not contain a valid PDF header"}],severity:"high"};return r(n),m(!1),n}const x=[];let g=null;Ct.forEach(({name:n,pattern:_,severity:A})=>{const l=i.match(_);l&&l.length>0&&(x.push({name:n,severity:A,description:`Found ${l.length} occurrence(s) of ${n}`,matchCount:l.length}),(!g||Me(A)>Me(g))&&(g=A))});let N;if(x.length===0)N={isValid:!0,message:"PDF is safe and contains no security threats",threats:[],severity:null};else if(s.strictMode?x.length>0:x.some(_=>_.severity==="high")){const _=x.map(A=>A.name).join(", ");N={isValid:!1,message:"⚠️The file appears to be corrupted or contains malicious code. Please upload a valid file.",threats:x,severity:g}}else N={isValid:!0,message:"PDF contains low-risk elements but is approved for upload",threats:x,severity:g};return r(N),m(!1),N}catch(i){const x={isValid:!1,message:`Error reading PDF file: ${i.message}`,threats:[{name:"Read Error",severity:"high",description:i.message}],severity:"high"};return r(x),m(!1),x}},[s.maxFileSizeMB,s.strictMode]),j=u.useCallback(()=>{c(null),r(null),m(!1)},[]),d=u.useCallback(async p=>{var i;const y=(i=p.target.files)==null?void 0:i[0];y&&s.autoValidate?await f(y):y&&c(y)},[f,s.autoValidate]);return{validateFile:f,validation:o,isValidating:h,reset:j,file:a,handleFileChange:d}},ee=[{value:"orderSheet",label:"Order Sheet"},{value:"judgementCopy",label:"Judgement Copy"},{value:"HearingDocument",label:"Hearing Document"},{value:"Other",label:"Other"}],Ft=Q().shape({documentName:P().required("Document Name is required"),docType:P(),docPath:Ee().required("Document is required").test("fileRequired","Document is required",t=>t instanceof File||typeof t=="string"&&t!==""),description:P().required("Description is required"),currentHearingDate:P().when("documentName",{is:"Hearing Document",then:()=>P().required("Hearing Date is required")})});function Pt({title:t,id:s,edit:a,refetch:c}){var v,Ce,Ae;const{validation:o,isValidating:r,validateFile:h,reset:m}=St({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),f=z({}),j=ot({}),[d,p]=u.useState(""),y=u.useRef(null),{data:i,isFetching:x}=K({api:`${M.getCaseTypeById}/${s}`,key:"getCaseTypeById",options:{enabled:a}}),{user:g}=L(),N=xe({defaultValues:{documentName:((v=i==null?void 0:i.data)==null?void 0:v.document_name)||"",docType:((Ce=i==null?void 0:i.data)==null?void 0:Ce.doc_type)||"",docPath:void 0,description:((Ae=i==null?void 0:i.data)==null?void 0:Ae.description)||""},resolver:he(Ft)}),{id:n}=V(),_=U(String(n)),A=async w=>{var R;const C=(R=w.target.files)==null?void 0:R[0];if(C&&(C==null?void 0:C.type)==="application/pdf"){const S=await h(C);S.isValid?(b.success(S.message),m(),N.setValue("docPath",C)):(b.error(S.message),w.target.value="",N.resetField("docPath"))}else C&&N.setValue("docPath",C)},l=async w=>{var R,S;const C=new FormData;C.append("img",w);try{const F=await j.mutateAsync({api:M.uploadDocumentDms,data:C});if((R=F.data)!=null&&R.status)return F.data.data;throw new Error(((S=F.data)==null?void 0:S.message)||"DMS upload failed")}catch(F){throw console.error("DMS Upload Error:",F),F}},D=async w=>{var C,R,S,F,G,Se,Fe,Pe;try{let H=d;if((!a||w.docPath instanceof File)&&(b.loading("Uploading document..."),H=await l(w.docPath),p(H),b.dismiss()),a&&w){const X={id:s,documentName:w.documentName,description:w.description,docPath:H,docType:w.docType,currentHearingDate:w.currentHearingDate},I=await f.mutateAsync({api:M.updateCaseType,data:X});(C=I.data)!=null&&C.success?(b.success((R=I==null?void 0:I.data)==null?void 0:R.message),(S=y.current)==null||S.click()):b.error(((F=I.data)==null?void 0:F.message)||"Document updated successfully")}else{const X={caseId:_||"",documentName:w.documentName,description:w.description,docPath:H,actionByUserId:g==null?void 0:g._id,actionByRoleId:g==null?void 0:g.roleId,actionByRoleName:g==null?void 0:g.roleName,actionByUserName:g==null?void 0:g.fullName,currentHearingDate:w.currentHearingDate},I=await f.mutateAsync({api:M.attachDocument,data:X});(G=I.data)!=null&&G.success?(b.success((Se=I==null?void 0:I.data)==null?void 0:Se.message),(Fe=y.current)==null||Fe.click()):b.error(((Pe=I.data)==null?void 0:Pe.message)||"Document not attached successfully"),N.reset({documentName:"",description:"",docPath:""})}c(),p("")}catch(H){console.log("Submit Error:",H),b.error("An error occurred while processing your request")}};u.useEffect(()=>{var w,C,R,S,F,G;a&&i?(N.reset({documentName:((w=i.data)==null?void 0:w.document_name)||"",description:((C=i.data)==null?void 0:C.description)||"",docPath:(R=i.data)==null?void 0:R.document_path,docType:(S=i.data)==null?void 0:S.doc_type,currentHearingDate:((F=i.data)==null?void 0:F.current_hearing_date)||""}),p(((G=i.data)==null?void 0:G.document_path)||"")):(N.reset({documentName:"",description:"",docPath:"",docType:"",currentHearingDate:""}),p(""))},[a,i]);const O=N.formState.isSubmitting||j.isPending;return e.jsxs(re,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(E,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),e.jsx(le,{className:"sm:max-w-[425px]",children:e.jsxs(pe,{methods:N,onSubmit:N.handleSubmit(D),children:[e.jsxs(oe,{children:[e.jsx(ce,{children:t}),e.jsx(ie,{})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(yt,{label:"Select Document",name:"documentName",data:(ee==null?void 0:ee.map(w=>({label:String(w.label),value:String(w.label)})))||[]})}),N.watch("documentName")=="Hearing Document"&&e.jsx("div",{children:e.jsx(te,{label:"Current hearing date",name:"currentHearingDate",type:"date"})}),e.jsx("div",{children:e.jsx(wt,{label:"Upload Document",name:"docPath",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:A,placeholder:"Upload your document"})}),e.jsx("div",{children:e.jsx(fe,{label:"Description",name:"description",placeholder:"Enter your description"})}),e.jsx(se,{})]}),e.jsxs(de,{className:"mt-5 flex justify-between",children:[e.jsx(me,{asChild:!0,children:e.jsx(E,{variant:"outline",ref:y,children:"Cancel"})}),e.jsx(ge,{type:"submit",isLoading:O,children:"Save changes"})]})]})})]})}function js({caseStatus:t}){var i,x,g,N;const{user:s}=L(),[a,c]=u.useState(""),[o,r]=u.useState(""),[h,m]=u.useState(!1),{id:f}=V(),j=U(String(f)),d=K({api:`${M.getAllDocuments}/${j}`,key:"getAllDocumentsList",value:[],options:{enabled:!0}}),p=z({}),y=async n=>{_t("Are you sure?","Please confirm",async()=>{var _,A,l;try{const D=await p.mutateAsync({api:`${M.deleteAttachedDocument}`,data:{id:n}});(_=D==null?void 0:D.data)!=null&&_.success?(b.success(((A=D==null?void 0:D.data)==null?void 0:A.message)||"Deleted successfully"),d.refetch()):b.error(((l=D==null?void 0:D.data)==null?void 0:l.message)||"Failed to delete")}catch(D){b.error("Error deleting item"),console.error("Delete Error:",D)}})};return e.jsx("main",{className:"min-h-screen bg-gray-50/50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Case Related Documents"})}),t!="2"&&e.jsx(Pt,{title:h?"Edit Document":"Attach Document",id:o,edit:h,setEdit:m,refetch:d.refetch})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:d.isLoading?e.jsx(k,{children:e.jsx(T,{className:"flex h-32 items-center justify-center",children:e.jsx(ae,{})})}):e.jsxs(e.Fragment,{children:[(x=(i=d==null?void 0:d.data)==null?void 0:i.data)==null?void 0:x.map((n,_)=>e.jsxs(k,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(rt,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(nt,{className:"text-lg font-semibold text-gray-900",children:(n==null?void 0:n.document_name)||"Document"}),e.jsxs(lt,{className:"mt-1 text-sm text-gray-600",children:["Case ID: #",n==null?void 0:n.case_id," • Document #",_+1]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsxs("div",{className:"",children:[e.jsxs("h1",{children:["Created:"," ",Y(n==null?void 0:n.created_at).format("DD-MM-YYYY")]}),(n==null?void 0:n.document_name)==="Hearing Document"&&e.jsxs("h1",{children:["Current Hearing Date:"," ",Y(n==null?void 0:n.current_hearing_date).format("DD-MM-YYYY")]})]}),t!="2"&&(s==null?void 0:s.roleId)==77&&e.jsx("div",{className:"ml-auto flex justify-end",children:e.jsx(E,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>y(n==null?void 0:n.id),children:e.jsx(ue,{className:"h-3.5 w-3.5"})})})]})})]})}),e.jsxs(T,{className:"pt-0",children:[(n==null?void 0:n.description)&&e.jsx("p",{className:"mb-4 text-sm leading-relaxed text-gray-700",children:n.description}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4 text-sm sm:grid-cols-2 lg:grid-cols-3",children:[(n==null?void 0:n.doc_type)&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{children:["Type: ",n.doc_type]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Action By:","",e.jsx("span",{className:"font-medium",children:n==null?void 0:n.action_by_role_name}),n!=null&&n.action_by_user_name?` (${n==null?void 0:n.action_by_user_name})`:""]})]})]}),(n==null?void 0:n.document_path)&&e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Dt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Document Path:"})]}),e.jsx("a",{href:n.document_path,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"View Document"})]}),e.jsx("p",{className:"mt-1 break-all text-xs text-gray-500",children:n.document_path})]})]})]},n==null?void 0:n.id)),((N=(g=d==null?void 0:d.data)==null?void 0:g.data)==null?void 0:N.length)===0&&e.jsx(k,{className:"py-12 text-center",children:e.jsxs(T,{children:[e.jsx(W,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No documents found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:a?"Try adjusting your search criteria":"Upload your first document to get started"})]})})]})})]})})}function Mt(t,s=[]){let a=[];function c(r,h){const m=u.createContext(h),f=a.length;a=[...a,h];const j=p=>{var n;const{scope:y,children:i,...x}=p,g=((n=y==null?void 0:y[t])==null?void 0:n[f])||m,N=u.useMemo(()=>x,Object.values(x));return e.jsx(g.Provider,{value:N,children:i})};j.displayName=r+"Provider";function d(p,y){var g;const i=((g=y==null?void 0:y[t])==null?void 0:g[f])||m,x=u.useContext(i);if(x)return x;if(h!==void 0)return h;throw new Error(`\`${p}\` must be used within \`${r}\``)}return[j,d]}const o=()=>{const r=a.map(h=>u.createContext(h));return function(m){const f=(m==null?void 0:m[t])||r;return u.useMemo(()=>({[`__scope${t}`]:{...m,[t]:f}}),[m,f])}};return o.scopeName=t,[c,Rt(o,...s)]}function Rt(...t){const s=t[0];if(t.length===1)return s;const a=()=>{const c=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(r){const h=c.reduce((m,{useScope:f,scopeName:j})=>{const p=f(r)[`__scope${j}`];return{...m,...p}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:h}),[h])}};return a.scopeName=s.scopeName,a}function Re(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function It(...t){return s=>{let a=!1;const c=t.map(o=>{const r=Re(o,s);return!a&&typeof r=="function"&&(a=!0),r});if(a)return()=>{for(let o=0;o<c.length;o++){const r=c[o];typeof r=="function"?r():Re(t[o],null)}}}}function $e(...t){return u.useCallback(It(...t),t)}function kt(t,s,{checkForDefaultPrevented:a=!0}={}){return function(o){if(t==null||t(o),a===!1||!o.defaultPrevented)return s==null?void 0:s(o)}}var Tt=Symbol("radix.slottable");function Et(t){const s=({children:a})=>e.jsx(e.Fragment,{children:a});return s.displayName=`${t}.Slottable`,s.__radixId=Tt,s}var Be="AlertDialog",[$t,ys]=Mt(Be,[ke]),$=ke(),Oe=t=>{const{__scopeAlertDialog:s,...a}=t,c=$(s);return e.jsx(gt,{...c,...a,modal:!0})};Oe.displayName=Be;var Bt="AlertDialogTrigger",Ot=u.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...c}=t,o=$(a);return e.jsx(it,{...o,...c,ref:s})});Ot.displayName=Bt;var Ht="AlertDialogPortal",He=t=>{const{__scopeAlertDialog:s,...a}=t,c=$(s);return e.jsx(pt,{...c,...a})};He.displayName=Ht;var Yt="AlertDialogOverlay",Ye=u.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...c}=t,o=$(a);return e.jsx(dt,{...o,...c,ref:s})});Ye.displayName=Yt;var q="AlertDialogContent",[qt,Lt]=$t(q),Vt=Et("AlertDialogContent"),qe=u.forwardRef((t,s)=>{const{__scopeAlertDialog:a,children:c,...o}=t,r=$(a),h=u.useRef(null),m=$e(s,h),f=u.useRef(null);return e.jsx(mt,{contentName:q,titleName:Le,docsSlug:"alert-dialog",children:e.jsx(qt,{scope:a,cancelRef:f,children:e.jsxs(ut,{role:"alertdialog",...r,...o,ref:m,onOpenAutoFocus:kt(o.onOpenAutoFocus,j=>{var d;j.preventDefault(),(d=f.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:j=>j.preventDefault(),onInteractOutside:j=>j.preventDefault(),children:[e.jsx(Vt,{children:c}),e.jsx(Ut,{contentRef:h})]})})})});qe.displayName=q;var Le="AlertDialogTitle",Ve=u.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...c}=t,o=$(a);return e.jsx(xt,{...o,...c,ref:s})});Ve.displayName=Le;var ze="AlertDialogDescription",Ue=u.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...c}=t,o=$(a);return e.jsx(ht,{...o,...c,ref:s})});Ue.displayName=ze;var zt="AlertDialogAction",Ge=u.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...c}=t,o=$(a);return e.jsx(Te,{...o,...c,ref:s})});Ge.displayName=zt;var We="AlertDialogCancel",Je=u.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...c}=t,{cancelRef:o}=Lt(We,a),r=$(a),h=$e(s,o);return e.jsx(Te,{...r,...c,ref:h})});Je.displayName=We;var Ut=({contentRef:t})=>{const s=`\`${q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${q}\` by passing a \`${ze}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var c;document.getElementById((c=t.current)==null?void 0:c.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},Gt=Oe,Wt=He,Ze=Ye,Ke=qe,Qe=Ge,Xe=Je,et=Ve,tt=Ue;const st=Gt,Jt=Wt,at=u.forwardRef(({className:t,...s},a)=>e.jsx(Ze,{className:B("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));at.displayName=Ze.displayName;const ye=u.forwardRef(({className:t,...s},a)=>e.jsxs(Jt,{children:[e.jsx(at,{}),e.jsx(Ke,{ref:a,className:B("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));ye.displayName=Ke.displayName;const Ne=({className:t,...s})=>e.jsx("div",{className:B("flex flex-col space-y-2 text-center sm:text-left",t),...s});Ne.displayName="AlertDialogHeader";const ve=({className:t,...s})=>e.jsx("div",{className:B("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});ve.displayName="AlertDialogFooter";const be=u.forwardRef(({className:t,...s},a)=>e.jsx(et,{ref:a,className:B("text-lg font-semibold",t),...s}));be.displayName=et.displayName;const De=u.forwardRef(({className:t,...s},a)=>e.jsx(tt,{ref:a,className:B("text-sm text-muted-foreground",t),...s}));De.displayName=tt.displayName;const we=u.forwardRef(({className:t,...s},a)=>e.jsx(Qe,{ref:a,className:B(Ie(),t),...s}));we.displayName=Qe.displayName;const _e=u.forwardRef(({className:t,...s},a)=>e.jsx(Xe,{ref:a,className:B(Ie({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));_e.displayName=Xe.displayName;const Zt=Q().shape({content:P().required().label("Content")});function Kt({title:t,refetch:s}){const a=z({}),{id:c}=V(),o=U(String(c)),{user:r}=L(),h=u.useRef(null),m=xe({defaultValues:{content:""},resolver:he(Zt)}),f=async j=>{var d,p,y,i;try{const x=await a.mutateAsync({api:M.createContentCaseLog,data:{case_id:Number(o),content:j.content,action_by_user_name:r==null?void 0:r.fullName,action_by_user_id:r==null?void 0:r._id,action_by_role_name:r==null?void 0:r.roleName,action_by_role_id:r==null?void 0:r.roleId}});(d=x.data)!=null&&d.success?(b.success((p=x==null?void 0:x.data)==null?void 0:p.message),m.reset({content:""}),s==null||s(),(y=h.current)==null||y.click()):b.error(((i=x.data)==null?void 0:i.message)||"created successfully")}catch(x){console.log(x)}};return e.jsxs(re,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(E,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Add Case Log"]})}),e.jsx(le,{className:"sm:max-w-[425px]",children:e.jsxs(pe,{methods:m,onSubmit:m.handleSubmit(f),children:[e.jsxs(oe,{children:[e.jsx(ce,{children:t}),e.jsx(ie,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(fe,{name:"content",placeholder:"Enter your content"})}),e.jsx(se,{})]}),e.jsxs(de,{className:"mt-5 flex justify-between",children:[e.jsx(me,{asChild:!0,children:e.jsx(E,{ref:h,variant:"outline",children:"Cancel"})}),e.jsx(ge,{type:"submit",isLoading:a.isPending,children:"Save changes"})]})]})})]})}function Ns({caseStatus:t}){var x,g,N,n,_,A;const[s,a]=u.useState(""),[c,o]=u.useState(!1),[r,h]=u.useState(null),{user:m}=L(),{id:f}=V(),j=U(String(f)),d=K({api:`${M.getContentLogByCaseId}/${j}`,key:"asdasdasd23123123edasdasdas",value:[],options:{enabled:!0}}),p=l=>{h(l),o(!0)},y=z({}),i=async()=>{var l,D,O;try{const v=await y.mutateAsync({api:`${M.deleteCaseContentLog}`,data:{id:r==null?void 0:r.id}});(l=v==null?void 0:v.data)!=null&&l.success?(b.success(((D=v==null?void 0:v.data)==null?void 0:D.message)||"Deleted successfully"),d.refetch()):b.error(((O=v==null?void 0:v.data)==null?void 0:O.message)||"Failed to delete")}catch(v){b.error("Error deleting item"),console.error("Delete Error:",v)}finally{o(!1),h(null)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4",children:[e.jsx(st,{open:c,onOpenChange:o,children:e.jsxs(ye,{className:"max-w-md",children:[e.jsxs(Ne,{children:[e.jsx(be,{className:"text-lg font-semibold text-slate-900",children:"Are you sure you want to delete?"}),e.jsxs(De,{className:"text-sm text-slate-600",children:['This action cannot be undone. The document "',(r==null?void 0:r.action_by_role_name)||"",'" will be permanently deleted.']})]}),e.jsxs(ve,{className:"gap-2",children:[e.jsx(_e,{className:"text-sm",children:"Cancel"}),e.jsx(we,{onClick:i,className:"bg-red-600 text-sm hover:bg-red-700",children:"Delete"})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Case Content"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[((g=(x=d==null?void 0:d.data)==null?void 0:x.data)==null?void 0:g.length)||0," Total Case Content"]})]}),t!="2"&&e.jsx(Kt,{title:"Add Case Log",refetch:d.refetch})]})}),e.jsx("div",{className:"space-y-3",children:d.isLoading?e.jsx(k,{className:"bg-white",children:e.jsx(T,{className:"flex h-24 items-center justify-center",children:e.jsx(ae,{})})}):e.jsxs(e.Fragment,{children:[(n=(N=d==null?void 0:d.data)==null?void 0:N.data)==null?void 0:n.map(l=>e.jsx(k,{className:"border border-slate-200 bg-white transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(W,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"mb-1 truncate text-sm font-semibold text-slate-900",children:(l==null?void 0:l.action_by_role_name)||"Document"}),e.jsx("p",{className:"mb-2 line-clamp-2 text-xs text-slate-600",children:l==null?void 0:l.content}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:Y(l==null?void 0:l.created_at).format("MMM DD, YYYY")})]})})]})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-1",children:(m==null?void 0:m.roleId)==77&&t!="2"&&e.jsx(E,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>p(l),children:e.jsx(ue,{className:"h-3.5 w-3.5"})})})]})})},l==null?void 0:l.id)),((A=(_=d==null?void 0:d.data)==null?void 0:_.data)==null?void 0:A.length)===0&&e.jsx(k,{className:"border-2 border-dashed border-slate-200 bg-white",children:e.jsxs(T,{className:"py-8 text-center",children:[e.jsx(W,{className:"mx-auto mb-3 h-8 w-8 text-slate-400"}),e.jsx("h3",{className:"mb-1 text-sm font-medium text-slate-900",children:"No content found"}),e.jsx("p",{className:"mb-4 text-xs text-slate-600",children:s?"Try adjusting your search criteria":"Upload your first document to get started"})]})})]})})]})]})}const Qt=Q().shape({hearing_date:P().required().label("Hearing Date"),hearing_time:P().required().label("Hearing Time"),description:P().optional().label("Description")});function Xt({title:t,refetch:s}){const a=z({}),{id:c}=V(),o=U(String(c)),{user:r}=L(),h=u.useRef(null),m=xe({defaultValues:{hearing_date:"",hearing_time:"",description:""},resolver:he(Qt)}),f=async j=>{var d,p,y,i;try{const x=await a.mutateAsync({api:M.createCaseHearingSchedule,data:{case_id:Number(o),hearing_date:j.hearing_date,hearing_time:j.hearing_time,description:j.description,action_by_user_name:r==null?void 0:r.fullName,action_by_user_id:r==null?void 0:r._id,action_by_role_name:r==null?void 0:r.roleName,action_by_role_id:r==null?void 0:r.roleId}});(d=x.data)!=null&&d.success?(b.success((p=x==null?void 0:x.data)==null?void 0:p.message),(y=h.current)==null||y.click()):b.error(((i=x.data)==null?void 0:i.message)||"Something went wrong"),m.reset({hearing_date:"",hearing_time:"",description:""}),s()}catch(x){console.log(x)}};return e.jsxs(re,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(E,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Add Case Hearing"]})}),e.jsx(le,{className:"sm:max-w-[425px]",children:e.jsxs(pe,{methods:m,onSubmit:m.handleSubmit(f),children:[e.jsxs(oe,{children:[e.jsx(ce,{children:t}),e.jsx(ie,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(te,{name:"hearing_date",type:"date",placeholder:"Select date",label:"Hearing Date"})}),e.jsx("div",{children:e.jsx(te,{name:"hearing_time",type:"time",placeholder:"Select time",label:"Hearing Time"})}),e.jsx("div",{children:e.jsx(fe,{name:"description",placeholder:"Enter hearing description (optional)",label:"Description"})}),e.jsx(se,{})]}),e.jsxs(de,{className:"mt-5 flex justify-between",children:[e.jsx(me,{asChild:!0,children:e.jsx(E,{ref:h,variant:"outline",children:"Cancel"})}),e.jsx(ge,{type:"submit",isLoading:a.isPending,children:"Save changes"})]})]})})]})}function vs({caseStatus:t}){var x,g,N,n,_,A;const[s,a]=u.useState(""),[c,o]=u.useState(!1),[r,h]=u.useState(null),{user:m}=L(),{id:f}=V(),j=U(String(f)),d=K({api:`${M.getCaseHearingScheduleByCaseId}/${j}`,key:"case-hearings-list",value:[],options:{enabled:!0}}),p=l=>{h(l),o(!0)},y=z({}),i=async()=>{var l,D,O;try{const v=await y.mutateAsync({api:`${M.deleteCaseHearingSchedule}`,data:{id:r==null?void 0:r.id}});(l=v==null?void 0:v.data)!=null&&l.success?(b.success(((D=v==null?void 0:v.data)==null?void 0:D.message)||"Deleted successfully"),d.refetch()):b.error(((O=v==null?void 0:v.data)==null?void 0:O.message)||"Failed to delete")}catch(v){b.error("Error deleting item"),console.error("Delete Error:",v)}finally{o(!1),h(null)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4",children:[e.jsx(st,{open:c,onOpenChange:o,children:e.jsxs(ye,{className:"max-w-md",children:[e.jsxs(Ne,{children:[e.jsx(be,{className:"text-lg font-semibold text-slate-900",children:"Are you sure you want to delete?"}),e.jsxs(De,{className:"text-sm text-slate-600",children:['This action cannot be undone. The hearing on "',Y(r==null?void 0:r.hearing_date).format("MMM DD, YYYY"),'" will be permanently deleted.']})]}),e.jsxs(ve,{className:"gap-2",children:[e.jsx(_e,{className:"text-sm",children:"Cancel"}),e.jsx(we,{onClick:i,className:"bg-red-600 text-sm hover:bg-red-700",children:"Delete"})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Case Hearings"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[((g=(x=d==null?void 0:d.data)==null?void 0:x.data)==null?void 0:g.length)||0," Total Case Hearings"]})]}),t!="2"&&e.jsx(Xt,{title:"Add Case Log",refetch:d.refetch})]})}),e.jsx("div",{className:"space-y-3",children:d.isLoading?e.jsx(k,{className:"bg-white",children:e.jsx(T,{className:"flex h-24 items-center justify-center",children:e.jsx(ae,{})})}):e.jsxs(e.Fragment,{children:[(n=(N=d==null?void 0:d.data)==null?void 0:N.data)==null?void 0:n.map((l,D)=>e.jsx(k,{className:"border border-slate-200 bg-white transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(J,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex  gap-2",children:[e.jsxs("h3",{className:"mb-1 text-sm font-semibold text-slate-900",children:["Hearing -"," ",Y(l==null?void 0:l.hearing_date).format("MMM DD, YYYY")," ","-"]}),e.jsx("div",{children:D==0?e.jsx("h1",{className:"text-sm font-semibold text-green-600",children:"Next hearing"}):e.jsx("h1",{className:"text-sm font-semibold text-red-600",children:"Past"})})]}),(l==null?void 0:l.description)&&e.jsx("p",{className:"mb-2 line-clamp-2 text-xs text-slate-600",children:l.description}),e.jsxs("p",{className:"mb-2 text-xs text-slate-600",children:["Scheduled by:"," ",(l==null?void 0:l.action_by_user_name)||(l==null?void 0:l.action_by_role_name)]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:Y(l==null?void 0:l.hearing_date).format("MMM DD, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bt,{className:"h-3 w-3"}),e.jsx("span",{children:l==null?void 0:l.hearing_time})]})]})]})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-1",children:(m==null?void 0:m.roleId)==77&&t!="2"&&e.jsx(E,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>p(l),children:e.jsx(ue,{className:"h-3.5 w-3.5"})})})]})})},l==null?void 0:l.id)),((A=(_=d==null?void 0:d.data)==null?void 0:_.data)==null?void 0:A.length)===0&&e.jsx(k,{className:"border-2 border-dashed border-slate-200 bg-white",children:e.jsxs(T,{className:"py-8 text-center",children:[e.jsx(J,{className:"mx-auto mb-3 h-8 w-8 text-slate-400"}),e.jsx("h3",{className:"mb-1 text-sm font-medium text-slate-900",children:"No hearings found"}),e.jsx("p",{className:"mb-4 text-xs text-slate-600",children:s?"Try adjusting your search criteria":"Schedule your first hearing to get started"})]})})]})})]})]})}export{gs as B,Ns as C,fs as F,js as H,vs as a};
