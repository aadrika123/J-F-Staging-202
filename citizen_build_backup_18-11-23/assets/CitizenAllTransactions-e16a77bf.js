import{r as l,i as T,s as N,j as a,S,aD as C,bH as H,aF as A,bF as F,a as L,bI as P,aj as n,av as R,f as E}from"./index-03f9f081.js";function M(r){var m;const[s,c]=l.useState(),[t,e]=l.useState(!1),[o,d]=l.useState(!1),[_,u]=l.useState(!1);let v=[...(m=r==null?void 0:r.transactionRules)==null?void 0:m.tableColumns];l.useEffect(()=>{w()},[]);const w=()=>{var y,g,x,h,f,p;u(!0),d(!1),e(!1),T[(x=(g=(y=r==null?void 0:r.transactionRules)==null?void 0:y.api)==null?void 0:g.api_getTranscationHistory)==null?void 0:x.method]((p=(f=(h=r==null?void 0:r.transactionRules)==null?void 0:h.api)==null?void 0:f.api_getTranscationHistory)==null?void 0:p.url,N()).then(function(i){var b,j;(b=i==null?void 0:i.data)!=null&&b.status?(c((j=i==null?void 0:i.data)==null?void 0:j.data),e(!0)):d(!0),u(!1)}).catch(function(i){console.log("Server is too busy to respond, Please try again later",i),d(!0),e(!1),u(!1)})};if(o)return a.jsx(S,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"});if(!o)return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"w-ful md:px-10 md:pt-5 mx-auto bg-white",children:[a.jsx("h1",{className:"uppercase font-semibold text-center tracking-wider text-xl border-b pb-2 mb-4",children:"Property Paymnent History"}),_&&a.jsx(C,{}),t&&a.jsx(H,{errorMsg:"Some bug found",children:a.jsx(A,{assessmentType:!1,columns:v,dataList:s,export:!1})}),Array.isArray(s)&&(s==null?void 0:s.length)===0&&a.jsx("div",{className:"text-center mt-5 rounded py-2 font-semibold text-red-600",children:"No Transaction Found"})]})})}function D(){F("Property Payment History");const r=L(),{api_getTranscationHistory:s}=E(),c={api:{api_getTranscationHistory:{method:"get",url:s}},transactionInfo:{title:"Citizen Payment History"},tableColumns:[{Header:"#",Cell:({row:t})=>a.jsx("div",{className:"pr-2",children:t.index+1})},{Header:"Type",accessor:"application_type",Cell:({cell:t})=>{var e;return a.jsx("div",{className:"pr-2",children:n((e=t.row.original)==null?void 0:e.application_type)})}},{Header:"SAF No.",accessor:"saf_no",Cell:({cell:t})=>{var e;return a.jsx("div",{className:"pr-2",children:n((e=t.row.original)==null?void 0:e.saf_no)})}},{Header:"Holding No.",accessor:"holding_no",Cell:({cell:t})=>{var e;return a.jsx("div",{className:"pr-2",children:n((e=t.row.original)==null?void 0:e.holding_no)})}},{Header:"Transaction No.",accessor:"tran_no",Cell:({cell:t})=>{var e;return a.jsx("div",{className:"pr-2",children:n((e=t.row.original)==null?void 0:e.tran_no)})}},{Header:"Payment Mode",accessor:"payment_mode",Cell:({cell:t})=>{var e;return a.jsx("div",{className:"pr-2",children:n((e=t.row.original)==null?void 0:e.payment_mode)})}},{Header:"Transaction Date",accessor:"tran_date",Cell:({cell:t})=>{var e;return a.jsx("div",{className:"pr-2",children:n((e=t.row.original)==null?void 0:e.tran_date)})}},{Header:"Amount",accessor:"amount",Cell:({cell:t})=>{var e;return a.jsx("div",{className:"pr-2",children:R((e=t.row.original)==null?void 0:e.amount)})}},{Header:"Receipt",Cell:({cell:t})=>a.jsx("button",{onClick:()=>{var e,o;t.row.original.application_type=="SAF"?r(`/paymentReceipt/${(e=t.row.original)==null?void 0:e.tran_no}/saf`):r(`/paymentReceipt/${(o=t.row.original)==null?void 0:o.tran_no}/holding`)},type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight uppercase rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})}]};return a.jsxs(a.Fragment,{children:[a.jsx(P,{titleText:"Property Transaction History"}),a.jsx(H,{errorMsg:"Bug in TransactionHistoryFactory",children:a.jsx(M,{transactionRules:c})})]})}export{D as default};
