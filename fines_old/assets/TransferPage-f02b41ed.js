import{r as i,b as A,d as D,A as I,k as S,h as g,j as k,B,P as E}from"./index-92aa6832.js";function v(){const{api_getFreeMenuList:m}=E(),{setmenuList:L,setuserDetails:x}=i.useContext(A),e=D(),[h,l]=i.useState(!1);i.useEffect(()=>{let a=window.localStorage.getItem("token");if(l(!0),a==null){e("/");return}j()},[]);const j=()=>{let a={moduleId:10};I.post(m,a,S()).then(function(t){var u,o,c,d,s,f,n,r;console.log("fetched menu list.....",t),t.data.status==!0?(g("menuList",(o=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:o.permission),g("userDetails",(d=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:d.userDetails),L((f=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:f.permission),x((r=(n=t==null?void 0:t.data)==null?void 0:n.data)==null?void 0:r.userDetails),e("/home")):console.log("false...")}).catch(function(t){console.log("--2--login error...",t)}).finally(()=>l(!1))};if(h)return k.jsx(B,{})}export{v as default};
