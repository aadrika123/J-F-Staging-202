import{r as t,_ as C,bt as P,k as S,aH as H,u as F,w as A,l as L,m as R,o as $,j as r,aO as I,bL as M,bM as D,P as U,bN as E,aW as N,bm as a,bO as T}from"./index-c73b3921.js";const V=t.lazy(()=>C(()=>import("./index-c73b3921.js").then(n=>n.d3),["assets/index-c73b3921.js","assets/index-7cbe0587.css"]));function G(){const[n,O]=t.useState(),{type:l,filterParam:m,searchValueParam:d}=P(),[p,x]=t.useState(null),[j,w]=t.useState(0);S("Search Holding");const{api_getWardListByLogin:q,api_filterPropertyDetails:v}=U();H();const c=F();A();const h=e=>{(e==null?void 0:e.filterBy)=="khataNo"?x({filteredBy:e==null?void 0:e.filterBy,khataNo:e==null?void 0:e.khataNo,plotNo:e==null?void 0:e.plotNo,maujaName:e==null?void 0:e.maujaName,isLegacy:!1}):x({filteredBy:e==null?void 0:e.filterBy,parameter:e==null?void 0:e.parameter,isLegacy:!1}),w(o=>o+1),E(`/property/search/fresh/${encodeURIComponent((e==null?void 0:e.parameter)==null||(e==null?void 0:e.parameter)==""?"direct":e==null?void 0:e.filterBy)}/${encodeURIComponent((e==null?void 0:e.parameter)==null||(e==null?void 0:e.parameter)==""?"direct":e==null?void 0:e.parameter)}`)},_=L({filterBy:R().required("This is a required field !")}),s=$({initialValues:{filterBy:"",parameter:"",khataNo:"",plotNo:"",maujaName:""},onSubmit:e=>{if(e.filterBy!="khataNo"){if(e.parameter==""){N.info("Enter any keyword...");return}}else if(!(e.khataNo!=""||e.plotNo!=""||e.maujaName!="")){N.info("Enter any keyword...");return}h(e)},validationSchema:_}),k=(e,o)=>{let i=`/holdingPropertyDetails/${o}`;T(e,i,c)},B=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Owner's Name",accessor:"owner_name"},{Header:"Property Tax No.",accessor:"pt_no",Cell:({cell:e})=>r.jsx("span",{children:a(e.row.original.pt_no)})},{Header:"Holding No",accessor:"new_holding_no",Cell:({cell:e})=>r.jsx("span",{children:a(e.row.original.new_holding_no)})},{Header:"Mobile No",accessor:"mobile_no",Cell:({cell:e})=>r.jsx("span",{children:a(e.row.original.mobile_no)})},{Header:"Address",accessor:"prop_address",Cell:({cell:e})=>r.jsx("span",{children:a(e.row.original.prop_address)})},{Header:"Status",Cell:({cell:e})=>r.jsxs("div",{children:[e.row.original.active_status===1&&r.jsx("span",{className:"text-green-400 font-semibold",children:"Active"}),e.row.original.active_status===0&&r.jsx("span",{className:"text-red-400 font-semibold",children:"Disabled"})]})},{Header:"Action",accessor:"id",Cell:({cell:e})=>r.jsx("button",{onClick:o=>k(o,e.row.values.id),className:"bg-indigo-500 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-indigo-700 text-white",children:"View"})},{Header:"All Modules",Cell:({cell:e})=>r.jsx("button",{onClick:()=>c(`/allmodules-dues/${e.row.values.id}`),className:"px-2 py-1 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight uppercase rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Dues"})},{Header:"Geo",Cell:({cell:e})=>r.jsx("button",{onClick:o=>{var i,u,g,b,f,y;return c(`/geo-map/${(i=e.row.original)==null?void 0:i.latitude}/${(u=e.row.original)==null?void 0:u.longitude}/${(g=e.row.original)==null?void 0:g.new_holding_no}/${(b=e.row.original)==null?void 0:b.prop_address}/${(y=(f=e==null?void 0:e.row)==null?void 0:f.original)==null?void 0:y.id}`)},className:"px-2 py-1 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight uppercase rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"Geo-Map"})}];return t.useEffect(()=>{d!="direct"&&(s.setFieldValue("filterBy",decodeURIComponent(m)),s.setFieldValue("parameter",decodeURIComponent(d)),h({filterBy:decodeURIComponent(m),parameter:decodeURIComponent(d)}))},[]),r.jsxs(r.Fragment,{children:[(l=="re"||l=="mu")&&r.jsxs("div",{className:"bg-amber-50 px-4 py-4 mb-4 text-lg rounded-lg shadow-lg text-amber-600 inline-block",children:[r.jsx(I,{className:"inline mr-2 text-3xl"}),"For ",r.jsx("span",{className:"font-semibold",children:l=="re"?"Re-Assessment":"Mutation"})," of property search the property and then apply for ",l=="re"?"Re-Assessment":"Mutation"]}),r.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[r.jsxs("div",{className:"hidden sm:flex  ml-5 mt-2 ",children:[r.jsx("img",{src:M,alt:"",className:"w-10 h-10"}),r.jsx("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Holding Search..."})]}),r.jsx("form",{onSubmit:s.handleSubmit,children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-center sm:space-x-8 my-5 m-10",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{...s.getFieldProps("filterBy"),className:"cypress_filterBy cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"ptn",children:"Property Tax No"}),r.jsx("option",{value:"holdingNo",children:"Holding No"}),r.jsx("option",{value:"ownerName",children:"Owner Name"}),r.jsx("option",{value:"mobileNo",children:"Mobile No"}),r.jsx("option",{value:"address",children:"Address"}),r.jsx("option",{value:"khataNo",children:"Khata No"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.filterBy&&s.errors.filterBy?s.errors.filterBy:null})]}),(s.values.filterBy==""||s.values.filterBy!="khataNo")&&r.jsxs("div",{className:"mt-3 sm:mt-0",children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By ",n," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",...s.getFieldProps("parameter"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.parameter&&s.errors.parameter?s.errors.parameter:null})]}),s.values.filterBy=="khataNo"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mt-3 sm:mt-0",children:[r.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Khata No."}),r.jsx("input",{type:"text",...s.getFieldProps("khataNo"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.khataNo&&s.errors.khataNo?s.errors.khataNo:null})]}),r.jsxs("div",{className:"mt-3 sm:mt-0",children:[r.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Plot No."}),r.jsx("input",{type:"text",...s.getFieldProps("plotNo"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.plotNo&&s.errors.plotNo?s.errors.plotNo:null})]}),r.jsxs("div",{className:"mt-3 sm:mt-0",children:[r.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Mauja Name"}),r.jsx("input",{type:"text",...s.getFieldProps("maujaName"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.maujaName&&s.errors.maujaName?s.errors.maujaName:null})]})]}),r.jsx("div",{className:"mt-6",children:r.jsxs("button",{type:"submit",className:"cypress_submit_holding_search w-full border rounded-md border-indigo-700 bg-indigo-600 hover:bg-indigo-700 text-white  shadow-lg text-base font-semibold px-5 sm:m-3 py-1",children:[" ",r.jsxs("p",{className:"flex",children:[" ",r.jsxs("span",{className:"mt-1 mr-2",children:[" ",r.jsx(D,{})," "]})," ","Search record"]})]})})]})})]}),r.jsxs("div",{className:"mt-10",children:[p!=null&&r.jsx(V,{api:v,columns:B,requestBody:p,changeData:j}),r.jsx("div",{className:"w-full h-40"})]})]})}export{G as default};
