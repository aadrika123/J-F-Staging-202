import{j as r}from"./mui-105b4636.js";import{r as i}from"./router-894402c5.js";import{l as M,c as oe,d as o,u as ie,A as x,B as ce,i as b}from"./index-743a2ec8.js";import{F as ne}from"./PetAccordionPage-84d76eaf.js";import{W as de}from"./WaterApiList-43a720f1.js";import{P as pe}from"./PetRegAPIList-79e5b8ab.js";import"./react-40db4358.js";import"./axios-67d8a945.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";const e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},me=u=>{var L,R,V,O,K;const[m,v]=i.useState(),[q,F]=i.useState(),[c,Z]=i.useState(),[f,P]=i.useState(!1),[W,w]=i.useState(!1),[T,S]=i.useState(!1),{notify:A}=i.useContext(M),[j,U]=i.useState(),[h,H]=i.useState(),[J,n]=i.useState(!1),{api_ulbList:Q,header:N,api_wardList:X}=de(),{api_PetRegistrationApplyForm:Y,api_PetRegistrationMaster:y,api_ListOfSafHolding:ee,api_getUserDetailsByHoldingSaf:re,header1:ae}=pe(),se=oe({ulb:o().required("Kindly enter a value."),applicantName:o().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),applyThrough:o().required("Kindly enter a value."),holdingNo:o().required("Kindly enter a value."),categoryApplication:o().required("Kindly enter a value."),ward:o().required("Kindly enter a value."),mobileNo:o().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:o().email().required("Kindly enter a value."),panNo:o().matches(/^[A-Za-z0-9]{10}$/,"Enter 10 Character PAN No.").required("Kindly enter a value."),petType:o().required("Kindly enter a value."),petName:o().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),petGender:o().required("Kindly enter a value."),petBirthDate:o().required("Kindly enter a value."),breed:o().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),color:o().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorName:o().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorRegNo:o().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),dateOfRabies:o().required("Kindly enter a value."),dateOfLepVaccine:o().required("Kindly enter a value."),petFrom:o().required("Kindly enter a value.")}),s=ie({initialValues:{ulb:"",applicantName:"",applyThrough:"",holdingNo:"",categoryApplication:"",ward:"",mobileNo:"",email:"",panNo:"",address:"",petType:"",petName:"",petGender:"",petBirthDate:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(a,l)=>{te(a)},validationSchema:se}),le=a=>{let l=a.target.name,t=a.target.value;S(!1),l=="color"&&s.setFieldValue("color",b(t,s.values.color,20)),l=="doctorName"&&s.setFieldValue("doctorName",b(t,s.values.doctorName,20)),l=="breed"&&s.setFieldValue("breed",b(t,s.values.breed,20)),l=="petName"&&s.setFieldValue("petName",b(t,s.values.petName,20)),l=="doctorName"&&s.setFieldValue("doctorName",b(t,s.values.doctorName,20))},te=a=>{w(!0);const l={address:a==null?void 0:a.address,applyThrough:a==null?void 0:a.applyThrough,propertyNo:a==null?void 0:a.holdingNo,breed:a==null?void 0:a.breed,ownerCategory:a==null?void 0:a.categoryApplication,color:a==null?void 0:a.color,dateOfLepVaccine:a==null?void 0:a.dateOfLepVaccine,dateOfRabies:a==null?void 0:a.dateOfRabies,doctorName:a==null?void 0:a.doctorName,doctorRegNo:a==null?void 0:a.doctorRegNo,panNo:a==null?void 0:a.panNo,petBirthDate:a==null?void 0:a.petBirthDate,petFrom:a==null?void 0:a.petFrom,petGender:a==null?void 0:a.petGender,petName:a==null?void 0:a.petName,petType:a==null?void 0:a.petType,ulbId:a==null?void 0:a.ulb,ward:a==null?void 0:a.ward,applicantName:a==null?void 0:a.applicantName,mobileNo:a==null?void 0:a.mobileNo,email:a==null?void 0:a.email,panNo:a==null?void 0:a.panNo};x.post(Y,l,N).then(t=>{var d,p,g;w(!1),t.data.status?(u.data(t.data.data),u.screen(2),A((d=t==null?void 0:t.data)==null?void 0:d.message,"success")):(A((p=t==null?void 0:t.data)==null?void 0:p.message,"error"),S((g=t==null?void 0:t.data)==null?void 0:g.message))}).catch(t=>{var d,p;S((p=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:p.error),A("Something Went wrong","error"),w(!1)})};return i.useEffect(()=>{x.post(y,{},ae).then(a=>{a.data.status&&Z(a.data.data)}).catch(a=>{})},[]),i.useEffect(()=>{x.get(Q,N).then(a=>{a.data.status&&v(a.data.data)}).catch(a=>{})},[]),i.useEffect(()=>{n(!0),x.post(X,{ulbId:s.values.ulb},N).then(a=>{n(!1),a.data.status&&F(a.data.data)}).catch(a=>{n(!1)})},[s.values.ulb]),i.useEffect(()=>{n(!0);let a;s.values.applyThrough==1&&(a="holding"),s.values.applyThrough==2&&(a="saf");const l={type:a,ulbId:s.values.ulb};x.post(ee,l,N).then(t=>{n(!1),t.data.status&&U(t.data.data)}).catch(t=>{n(!1)})},[s.values.ulb,s.values.applyThrough]),i.useEffect(()=>{n(!0);const a={connectionThrough:s.values.applyThrough,id:s.values.holdingNo,ulbId:s.values.ulb};x.post(re,a,N).then(l=>{var t,d,p,g,_,B,C,D,I,k,G,E,$,z;n(!1),l.data.status&&(H(l.data.data),s.setFieldValue("address",(d=(t=l==null?void 0:l.data)==null?void 0:t.data)==null?void 0:d.prop_address),s.setFieldValue("ward",(_=(g=(p=l==null?void 0:l.data)==null?void 0:p.data)==null?void 0:g.wardDetails)==null?void 0:_.wardId),s.setFieldValue("applicantName",(D=(C=(B=l==null?void 0:l.data)==null?void 0:B.data)==null?void 0:C.owners[0])==null?void 0:D.ownerName),s.setFieldValue("mobileNo",(G=(k=(I=l==null?void 0:l.data)==null?void 0:I.data)==null?void 0:k.owners[0])==null?void 0:G.mobileNo),s.setFieldValue("email",(z=($=(E=l==null?void 0:l.data)==null?void 0:E.data)==null?void 0:$.owners[0])==null?void 0:z.email))}).catch(l=>{n(!1)})},[s.values.holdingNo,s.values.applyThrough]),r.jsxs(r.Fragment,{children:[J&&r.jsx(ce,{}),r.jsxs("form",{onSubmit:s.handleSubmit,onChange:le,children:[r.jsxs("div",{className:"overflow-y-auto ",children:[r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),m==null?void 0:m.map((a,l)=>r.jsx("option",{value:a.id,children:a.ulb_name},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.ulb&&s.errors.ulb?s.errors.ulb:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applyThrough",children:["Apply Through",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("applyThrough"),name:"applyThrough",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(L=c==null?void 0:c.registrationThrough)==null?void 0:L.map((a,l)=>r.jsx("option",{value:a.id,children:a.registration_through},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.applyThrough&&s.errors.applyThrough?s.errors.applyThrough:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"holdingNo",children:["Holding / SAF No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("holdingNo"),name:"holdingNo",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),j&&(j==null?void 0:j.map((a,l)=>r.jsx("option",{value:(a==null?void 0:a.saf_no)||(a==null?void 0:a.new_holding_no),children:(a==null?void 0:a.saf_no)||(a==null?void 0:a.new_holding_no)},l)))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.holdingNo&&s.errors.holdingNo?s.errors.holdingNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"categoryApplication",children:["Category of Application",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("categoryApplication"),name:"categoryApplication",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(c==null?void 0:c.ownertype)&&((R=c==null?void 0:c.ownertype)==null?void 0:R.map((a,l)=>l===0?r.jsx("option",{value:a.id,children:a.owner_type},l):l===1&&(h!=null&&h.tenanted)?r.jsx("option",{value:a.id,children:a.owner_type},l):null))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.categoryApplication&&s.errors.categoryApplication?s.errors.categoryApplication:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{type:"text",disabled:!0,...s.getFieldProps("ward"),value:(V=h==null?void 0:h.wardDetails)==null?void 0:V.wardNo,name:"ward",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.ward&&s.errors.ward?s.errors.ward:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),r.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 ",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.applicantName&&s.errors.applicantName?s.errors.applicantName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("mobileNo"),type:"number",maxLength:"10",name:"mobileNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.mobileNo&&s.errors.mobileNo?s.errors.mobileNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsx("label",{className:e==null?void 0:e.label,htmlFor:"email",children:"Email"}),r.jsx("input",{...s.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.email&&s.errors.email?s.errors.email:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"panNo",children:["PAN No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("panNo"),maxLength:"10",type:"text",name:"panNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.panNo&&s.errors.panNo?s.errors.panNo:null})]})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("textarea",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.address&&s.errors.address?s.errors.address:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Pet Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petType",children:["Pet Type",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("petType"),type:"text",name:"petType",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"1",children:"Dog"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petType&&s.errors.petType?s.errors.petType:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petName",children:["Name of Pet",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petName&&s.errors.petName?s.errors.petName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petGender",children:["Gender",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("petGender"),type:"text",name:"petGender",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(O=c==null?void 0:c.petGender)==null?void 0:O.map((a,l)=>r.jsx("option",{value:a.id,children:a.pet_gender},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petGender&&s.errors.petGender?s.errors.petGender:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petBirthDate",children:["Date of Birth",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:new Date().toISOString().split("T")[0],className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petBirthDate&&s.errors.petBirthDate?s.errors.petBirthDate:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"breed",children:["Breed",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("breed"),type:"text",maxLength:"20",name:"breed",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.breed&&s.errors.breed?s.errors.breed:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"color",children:["Color",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("color"),type:"text",maxLength:"20",name:"color",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.color&&s.errors.color?s.errors.color:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorName",children:["Veterinary Doctor Name",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("doctorName"),type:"text",maxLength:"70",name:"doctorName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.doctorName&&s.errors.doctorName?s.errors.doctorName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorRegNo",children:["Doctorâ€™s MSVC/VCI number ",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("doctorRegNo"),type:"text",maxLength:"70",name:"doctorRegNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.doctorRegNo&&s.errors.doctorRegNo?s.errors.doctorRegNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfRabies",children:["Date of Rabies",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("dateOfRabies"),type:"date",name:"dateOfRabies",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.dateOfRabies&&s.errors.dateOfRabies?s.errors.dateOfRabies:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfLepVaccine",children:["Leptospirosis Vaccination Date",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("dateOfLepVaccine"),type:"date",name:"dateOfLepVaccine",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.dateOfLepVaccine&&s.errors.dateOfLepVaccine?s.errors.dateOfLepVaccine:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petFrom",children:["Pet From",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("petFrom"),name:"petFrom",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(K=c==null?void 0:c.occurenceType)==null?void 0:K.map((a,l)=>r.jsx("option",{value:a.id,children:a.occurrence_types},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petFrom&&s.errors.petFrom?s.errors.petFrom:null})]})]})]}),r.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>P(!f),children:[r.jsx("input",{type:"checkbox",checked:f,name:"",id:"",onChange:a=>P(a.target.checked)}),r.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),r.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:T&&T}),r.jsx("div",{className:"flex justify-center my-5 ",children:W?r.jsx("p",{children:"Form Submitting.."}):r.jsx("button",{type:"submit",disabled:!f,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},Ae=()=>{const[u,m]=i.useState(1),[v,q]=i.useState(),{setBreadCrumbData:F}=i.useContext(M);return i.useEffect(()=>{F(["Apply Pet Registration"])},[]),r.jsx(r.Fragment,{children:r.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:r.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[r.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Pet Registration Application"}),r.jsxs("div",{className:"md:p-5 p-2",children:[r.jsxs("p",{className:`${u==1?"block":"hidden"}`,children:[" ",r.jsx(me,{screen:m,data:q})," "]}),r.jsxs("p",{className:`${u==2?"block":"hidden"}`,children:[" ",r.jsx(ne,{screen:m,data:v})]})]})]})})})};export{Ae as default};
