import{j as a}from"./mui-105b4636.js";import{u as ie,a as oe,r as o}from"./router-894402c5.js";import{i as M,c as ce,d as i,u as ne,A as N,B as de,r as v}from"./index-02c19d18.js";import{W as pe}from"./WaterApiList-a3ed6c50.js";import{P as me}from"./PetRegAPIList-983af01a.js";import"./react-40db4358.js";import"./axios-67d8a945.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";const he=n=>{var x;const d=ie();return a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-center",children:" Your Application has submitted successfully"}),a.jsxs("p",{className:"text-center",children:["Application No.  ",a.jsxs("span",{className:"font-semibold text-lg",children:[" ",(x=n==null?void 0:n.data)==null?void 0:x.applicationNo]})]}),a.jsxs("div",{className:"flex justify-center gap-x-5",children:[a.jsx("button",{onClick:()=>d("/pet-registration-dashboard"),className:"border border-indigo-600 px-2 py-1 rounded shadow hover:bg-indigo-500 hover:text-white",children:"Dashboard"}),a.jsx("button",{onClick:()=>{var g;return d(`/apply-pet-registration/document-upload/${(g=n==null?void 0:n.data)==null?void 0:g.id}`)},className:"bg-indigo-500 px-2 py-1 rounded shadow text-white hover:bg-indigo-700",children:"Upload Document"})]})]})};oe.createContext({});const e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},xe=n=>{var L,R,V,O,C;const[d,x]=o.useState(),[g,F]=o.useState(),[c,Z]=o.useState(),[w,P]=o.useState(!1),[U,S]=o.useState(!1),[T,A]=o.useState(!1),{notify:q}=o.useContext(M),[f,W]=o.useState(),[u,H]=o.useState(),[Y,p]=o.useState(!1),{api_ulbList:y,header:b,api_wardList:J}=pe(),{api_PetRegistrationApplyForm:Q,api_PetRegistrationMaster:X,api_ListOfSafHolding:ee,api_getUserDetailsByHoldingSaf:ae,header1:re}=me(),se=ce({ulb:i().required("Kindly enter a value."),applicantName:i().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),applyThrough:i().required("Kindly enter a value."),holdingNo:i().required("Kindly enter a value."),categoryApplication:i().required("Kindly enter a value."),ward:i().required("Kindly enter a value."),mobileNo:i().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:i().email().required("Kindly enter a value."),panNo:i().matches(/^[A-Za-z0-9]{10}$/,"Enter 10 Character PAN No.").required("Kindly enter a value."),petType:i().required("Kindly enter a value."),petName:i().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),petGender:i().required("Kindly enter a value."),petBirthDate:i().required("Kindly enter a value."),breed:i().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),color:i().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorName:i().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorRegNo:i().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),dateOfRabies:i().required("Kindly enter a value."),dateOfLepVaccine:i().required("Kindly enter a value."),petFrom:i().required("Kindly enter a value.")}),s=ne({initialValues:{ulb:"",applicantName:"",applyThrough:"",holdingNo:"",categoryApplication:"",ward:"",mobileNo:"",email:"",panNo:"",address:"",petType:"",petName:"",petGender:"",petBirthDate:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(r,l)=>{te(r)},validationSchema:se}),le=r=>{let l=r.target.name,t=r.target.value;A(!1),l=="color"&&s.setFieldValue("color",v(t,s.values.color,20)),l=="doctorName"&&s.setFieldValue("doctorName",v(t,s.values.doctorName,20)),l=="breed"&&s.setFieldValue("breed",v(t,s.values.breed,20)),l=="petName"&&s.setFieldValue("petName",v(t,s.values.petName,20)),l=="doctorName"&&s.setFieldValue("doctorName",v(t,s.values.doctorName,20))},te=r=>{S(!0);const l={address:r==null?void 0:r.address,applyThrough:r==null?void 0:r.applyThrough,propertyNo:r==null?void 0:r.holdingNo,breed:r==null?void 0:r.breed,ownerCategory:r==null?void 0:r.categoryApplication,color:r==null?void 0:r.color,dateOfLepVaccine:r==null?void 0:r.dateOfLepVaccine,dateOfRabies:r==null?void 0:r.dateOfRabies,doctorName:r==null?void 0:r.doctorName,doctorRegNo:r==null?void 0:r.doctorRegNo,panNo:r==null?void 0:r.panNo,petBirthDate:r==null?void 0:r.petBirthDate,petFrom:r==null?void 0:r.petFrom,petGender:r==null?void 0:r.petGender,petName:r==null?void 0:r.petName,petType:r==null?void 0:r.petType,ulbId:r==null?void 0:r.ulb,ward:r==null?void 0:r.ward,applicantName:r==null?void 0:r.applicantName,mobileNo:r==null?void 0:r.mobileNo,email:r==null?void 0:r.email,panNo:r==null?void 0:r.panNo};N.post(Q,l,b).then(t=>{var m,h,j;S(!1),t.data.status?(n.data(t.data.data),n.screen(2),q((m=t==null?void 0:t.data)==null?void 0:m.message,"success")):(q((h=t==null?void 0:t.data)==null?void 0:h.message,"error"),A((j=t==null?void 0:t.data)==null?void 0:j.message))}).catch(t=>{var m,h;A((h=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:h.error),q("Something Went wrong","error"),S(!1)})};return o.useEffect(()=>{N.post(X,{},re).then(r=>{r.data.status&&Z(r.data.data)}).catch(r=>{})},[]),o.useEffect(()=>{N.get(y,b).then(r=>{r.data.status&&x(r.data.data)}).catch(r=>{})},[]),o.useEffect(()=>{p(!0),N.post(J,{ulbId:s.values.ulb},b).then(r=>{p(!1),r.data.status&&F(r.data.data)}).catch(r=>{p(!1)})},[s.values.ulb]),o.useEffect(()=>{p(!0);let r;s.values.applyThrough==1&&(r="holding"),s.values.applyThrough==2&&(r="saf");const l={type:r,ulbId:s.values.ulb};N.post(ee,l,b).then(t=>{p(!1),t.data.status&&W(t.data.data)}).catch(t=>{p(!1)})},[s.values.ulb,s.values.applyThrough]),o.useEffect(()=>{p(!0);const r={connectionThrough:s.values.applyThrough,id:s.values.holdingNo,ulbId:s.values.ulb};N.post(ae,r,b).then(l=>{var t,m,h,j,K,D,_,B,I,k,G,$,E,z;p(!1),l.data.status&&(H(l.data.data),s.setFieldValue("address",(m=(t=l==null?void 0:l.data)==null?void 0:t.data)==null?void 0:m.prop_address),s.setFieldValue("ward",(K=(j=(h=l==null?void 0:l.data)==null?void 0:h.data)==null?void 0:j.wardDetails)==null?void 0:K.wardId),s.setFieldValue("applicantName",(B=(_=(D=l==null?void 0:l.data)==null?void 0:D.data)==null?void 0:_.owners[0])==null?void 0:B.ownerName),s.setFieldValue("mobileNo",(G=(k=(I=l==null?void 0:l.data)==null?void 0:I.data)==null?void 0:k.owners[0])==null?void 0:G.mobileNo),s.setFieldValue("email",(z=(E=($=l==null?void 0:l.data)==null?void 0:$.data)==null?void 0:E.owners[0])==null?void 0:z.email))}).catch(l=>{p(!1)})},[s.values.holdingNo,s.values.applyThrough]),a.jsxs(a.Fragment,{children:[Y&&a.jsx(de,{}),a.jsxs("form",{onSubmit:s.handleSubmit,onChange:le,children:[a.jsxs("div",{className:"overflow-y-auto ",children:[a.jsx("div",{className:"col-span-12 ml-2 my-2",children:a.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 bg-white shadow-md rounded-md py-2",children:[a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsxs("select",{...s.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[a.jsx("option",{value:"",children:"Select"}),d==null?void 0:d.map((r,l)=>a.jsx("option",{value:r.id,children:r.ulb_name},l))]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.ulb&&s.errors.ulb?s.errors.ulb:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applyThrough",children:["Apply Through",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsxs("select",{...s.getFieldProps("applyThrough"),name:"applyThrough",className:e==null?void 0:e.textFiled,children:[a.jsx("option",{value:"",children:"Select"}),(L=c==null?void 0:c.registrationThrough)==null?void 0:L.map((r,l)=>a.jsx("option",{value:r.id,children:r.registration_through},l))]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.applyThrough&&s.errors.applyThrough?s.errors.applyThrough:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"holdingNo",children:["Holding / SAF No.",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsxs("select",{...s.getFieldProps("holdingNo"),name:"holdingNo",className:e==null?void 0:e.textFiled,children:[a.jsx("option",{value:"",children:"Select"}),f&&(f==null?void 0:f.map((r,l)=>a.jsx("option",{value:(r==null?void 0:r.saf_no)||(r==null?void 0:r.new_holding_no),children:(r==null?void 0:r.saf_no)||(r==null?void 0:r.new_holding_no)},l)))]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.holdingNo&&s.errors.holdingNo?s.errors.holdingNo:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"categoryApplication",children:["Category of Application",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsxs("select",{...s.getFieldProps("categoryApplication"),name:"categoryApplication",className:e==null?void 0:e.textFiled,children:[a.jsx("option",{value:"",children:"Select"}),(c==null?void 0:c.ownertype)&&((R=c==null?void 0:c.ownertype)==null?void 0:R.map((r,l)=>l===0?a.jsx("option",{value:r.id,children:r.owner_type},l):l===1&&(u!=null&&u.tenanted)?a.jsx("option",{value:r.id,children:r.owner_type},l):null))]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.categoryApplication&&s.errors.categoryApplication?s.errors.categoryApplication:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{type:"text",disabled:!0,...s.getFieldProps("ward"),value:(V=u==null?void 0:u.wardDetails)==null?void 0:V.wardNo,name:"ward",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.ward&&s.errors.ward?s.errors.ward:null})]})]}),a.jsx("div",{className:"col-span-12 ml-2 my-2",children:a.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),a.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 ",children:[a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.applicantName&&s.errors.applicantName?s.errors.applicantName:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("mobileNo"),type:"number",maxLength:"10",name:"mobileNo",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.mobileNo&&s.errors.mobileNo?s.errors.mobileNo:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsx("label",{className:e==null?void 0:e.label,htmlFor:"email",children:"Email"}),a.jsx("input",{...s.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.email&&s.errors.email?s.errors.email:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"panNo",children:["PAN No.",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("panNo"),maxLength:"10",type:"text",name:"panNo",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.panNo&&s.errors.panNo?s.errors.panNo:null})]})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("textarea",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.address&&s.errors.address?s.errors.address:null})]})]}),a.jsx("div",{className:"col-span-12 ml-2 my-2",children:a.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Pet Details"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 bg-white shadow-md rounded-md py-2",children:[a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petType",children:["Pet Type",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsxs("select",{...s.getFieldProps("petType"),type:"text",name:"petType",className:e==null?void 0:e.textFiled,children:[a.jsx("option",{value:"",children:"Select"}),a.jsx("option",{value:"1",children:"Dog"})]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petType&&s.errors.petType?s.errors.petType:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petName",children:["Name of Pet",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petName&&s.errors.petName?s.errors.petName:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petGender",children:["Gender",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsxs("select",{...s.getFieldProps("petGender"),type:"text",name:"petGender",className:e==null?void 0:e.textFiled,children:[a.jsx("option",{value:"",children:"Select"}),(O=c==null?void 0:c.petGender)==null?void 0:O.map((r,l)=>a.jsx("option",{value:r.id,children:r.pet_gender},l))]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petGender&&s.errors.petGender?s.errors.petGender:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petBirthDate",children:["Date of Birth",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:new Date().toISOString().split("T")[0],className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petBirthDate&&s.errors.petBirthDate?s.errors.petBirthDate:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"breed",children:["Breed",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("breed"),type:"text",maxLength:"20",name:"breed",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.breed&&s.errors.breed?s.errors.breed:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"color",children:["Color",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("color"),type:"text",maxLength:"20",name:"color",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.color&&s.errors.color?s.errors.color:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorName",children:["Veterinary Doctor Name",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("doctorName"),type:"text",maxLength:"70",name:"doctorName",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.doctorName&&s.errors.doctorName?s.errors.doctorName:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorRegNo",children:["Doctorâ€™s MSVC/VCI number ",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("doctorRegNo"),type:"text",maxLength:"70",name:"doctorRegNo",className:e==null?void 0:e.textFiled}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.doctorRegNo&&s.errors.doctorRegNo?s.errors.doctorRegNo:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfRabies",children:["Date of Rabies",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("dateOfRabies"),type:"date",name:"dateOfRabies",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.dateOfRabies&&s.errors.dateOfRabies?s.errors.dateOfRabies:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfLepVaccine",children:["Leptospirosis Vaccination Date",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsx("input",{...s.getFieldProps("dateOfLepVaccine"),type:"date",name:"dateOfLepVaccine",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.dateOfLepVaccine&&s.errors.dateOfLepVaccine?s.errors.dateOfLepVaccine:null})]}),a.jsxs("div",{className:"m-3",children:[a.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petFrom",children:["Pet From",a.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),a.jsxs("select",{...s.getFieldProps("petFrom"),name:"petFrom",className:e==null?void 0:e.textFiled,children:[a.jsx("option",{value:"",children:"Select"}),(C=c==null?void 0:c.occurenceType)==null?void 0:C.map((r,l)=>a.jsx("option",{value:r.id,children:r.occurrence_types},l))]}),a.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petFrom&&s.errors.petFrom?s.errors.petFrom:null})]})]})]}),a.jsxs("p",{className:"flex mt-3 gap-x-3",children:[a.jsx("input",{type:"checkbox",checked:w,name:"",id:"",onChange:r=>P(r.target.checked)}),a.jsx("p",{className:"cursor-pointer select-none",onClick:()=>P(!w),children:"I have entered the correct information and agree to the terms and conditions."})]}),a.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:T&&T}),a.jsx("div",{className:"flex justify-center my-5 ",children:U?a.jsx("p",{children:"Form Submitting.."}):a.jsx("button",{type:"submit",disabled:!w,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},qe=()=>{const[n,d]=o.useState(1),[x,g]=o.useState(),{setBreadCrumbData:F}=o.useContext(M);return o.useEffect(()=>{F(["Apply Pet Registration"])},[]),a.jsx(a.Fragment,{children:a.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:a.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[a.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Pet Registration Application"}),a.jsxs("div",{className:"md:p-5 p-2",children:[a.jsxs("p",{className:`${n==1?"block":"hidden"}`,children:[" ",a.jsx(xe,{screen:d,data:g})," "]}),a.jsxs("p",{className:`${n==2?"block":"hidden"}`,children:[" ",a.jsx(he,{screen:d,data:x})]})]})]})})})};export{qe as default};
