import{j as e}from"./mui-105b4636.js";import{r,a as B,u as z}from"./router-894402c5.js";import{M as X,a as U,b as te}from"./index.esm-3a2d9baa.js";import{C as ae}from"./index.esm-49cbbe76.js";import{M as F}from"./index-82be3ecd.js";import{G as se,a as ne}from"./index.esm-9bec7f4a.js";import{W}from"./WaterApiList-eed22780.js";import{k as D,A as _,R as re}from"./index-2fc866b5.js";import{N as H}from"./NoDataFoundStyle1-08c23f2e.js";import{d as Q}from"./demoUserdownload-f0489466.js";import{B as oe}from"./BarLoader-d527b0c5.js";import{h as V}from"./moment-4682f801.js";import{W as le}from"./WaterPaymentModal-93457417.js";import{C as Y}from"./CustomErrorBoundary-586d6225.js";import{a as de}from"./axios-67d8a945.js";import{a as ce}from"./index.esm-bc36f73a.js";import{R as ie}from"./RazorpayPaymentScreen-2731453b.js";import{b as xe,a as pe}from"./Styles-a2fa8249.js";import"./react-40db4358.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";import"./success-39308b33.js";import"./CitizenApplyApiList-25268a0d.js";const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVR4nO2Xu0pDQRCGPy9gZyXa6DNol85OrAUfwHewMG9goVgIWqURBLugIHaW4gV8CzWVeGmMaFwZmANLOIZczubsmvlgYXd2Tmb/7OwNjHRwkZae+XdCYsGZEGxGguAstbDUSiu13JDPCWdCsDUSBGfbL5ZaQXCWWlhqBcFZamGpFQQ3rLtWp76kLo3JChk2zoQQ14z0zcgIcQMu9jn1vSvgeXwTg5DbAoRcDyKkaHqN17W/CRn1GXnReLPafspZC2ITFrT9GtMVpaLfnGm7pu0NoOX5tdQm7KrtIiYhe/rNEvCpth1gDFgF7rVIXdgCfoAv708YSEgI1oAPjXsCTHl9Uj/SviawHvvJXgEeNfalZz9V2zOw3MsPliVkEXjQ2HJYZhynJGQFeNe458C01zcB7KeQWrLYm94GIAPPY1MX+3esi11mQOIdduG73c/2G7pkyOEm7RnPNgkcaJF6xrz6vsUopL09DtQ9e11tf/lHQ/vAqjmiqx38o6F9YI0cIY0O/qVTxAvxqmwRQiEvxF9AMDZiPtzeEgAAAABJRU5ErkJggg==",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIUlEQVR4nO2XvU4cMRSFP2CXFAQhIVFRohRA6GgpkAglNFBB8gSIv6SiQFRQ8wCAFJYngJ53QPyJhoouTRKEEgqMrnRGskbsMrvsMN6Vj2Rpxr7XM8c+9/oaIloHLtBWN9qOSChwkQhxR3KBi9IiSqt1pOUKOCtcJEKMkVzgYvolSisXuCgtorRygYvSIkorF7goLbJXv7XGWqr6bVkiRcC1C5FZYLcdiDSMIoiUgTmgAlwB98BfPVc0ZjbBBfsB0OFJ5yaDz41sgyFyDJSATmDH6z8HVoFRoEfNnteAC9k8AdvyfRORZiIh8R9YArpq2NrYMvAoHyMTBJFZra6RmKrD74vImO9M0UTKXkzYTmTBB2BezytezJSLJDLnxUQtOSWwpHAonw3F16Xeba53D/ZECkd6t5XNgi3Z/wbG1LeuvsMiiAzJ7lrvIxlILHixNOn1f9Yc140SaQb+aP7e1KoPp+wmgH8i8jU11qs5bK5giFgQO53mi+r7BPxS/+YLcwRBJJGWHXbo4Kt4393zstq+VwEQmrSSn7YT28c34MH7/inQXWWOH7L5GUL6vXgh/Y4Dt8AZ0FfFv6Ri8k3pt9kHopUdafQDgzX810I5EP0S5VFlR1ZMN1Ki5NHugAF9Z1t99mMrkkw1lLQTDRWNebUTZaJO/ZCtbhIz68pIH9Xs+btXktRVxr83TCJZL1avyqlopK+6ds21Zjth9VTVq+4zGfsc0+AWfWAAAAAASUVORK5CYII=",ge="/assets/attachment-034004a1.png",be={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function ue(n){var R,E,T;const[h,x]=r.useState(),[c,p]=r.useState(),[a,t]=r.useState(),[o,y]=r.useState(1),[w,i]=r.useState(),[b,v]=r.useState(),{notify:u}=r.useContext(D),[k,f]=B.useState(!1),{api_waterSendOTPForConsumerAttach:N,api_waterSubmitOTPAndTagConsumer:m,header:l}=W(),g=r.useRef(),A=()=>{g.current.focus()};r.useEffect(()=>{n.openAttachModal>0&&f(!0)},[n.openAttachModal]);function P(){}function S(){f(!1),y(1),p(),x(),t(),i(),v()}const I=()=>{if(h==""||h==null||h==null||(h==null?void 0:h.length)<=6)return A(),i({status:!1,msg:"Enter Valid Consumer No."});_.post(N,{consumerNo:h},l).then(d=>{var j,L;(j=d==null?void 0:d.data)!=null&&j.status?(u("OTP Send on Register Mobile","success"),p(d==null?void 0:d.data),y(2),i({status:!0,msg:"OTP Send on Register Mobile."})):(p(d==null?void 0:d.data),u("Error Sending OTP","error"),i({status:!1,msg:(L=d==null?void 0:d.data)==null?void 0:L.message}),A())}).catch(d=>{u("Error Sending OTP","error"),i({status:!1,msg:"Error Sending OTP."}),A()})},s=()=>{if(a==""||a==null||a==null||(a==null?void 0:a.length)!=6)return v({status:!1,msg:"Enter Valid OTP."});const d={consumerNo:h,otp:a};_.post(m,d,l).then(j=>{var L;(L=j==null?void 0:j.data)!=null&&L.status?(u("Consumer Attached Successfully","success"),v({status:!0,msg:j.data.message}),S(),n.refetch()):(u(j.data.message,"error"),v({status:!1,msg:j.data.message}))}).catch(j=>{u("Error Consumer Attached","error"),v({status:!1,msg:"Error while attaching"})})};let C=(E=(R=c==null?void 0:c.data)==null?void 0:R.mobileNo)==null?void 0:E.toString(),O=(C==null?void 0:C.substring(0,2))+"XXXXXX"+(C==null?void 0:C.substring(8));return e.jsx("div",{className:"",children:e.jsx(F,{isOpen:k,onAfterOpen:P,onRequestClose:S,style:be,contentLabel:"Example Modal",shouldCloseOnOverlayClick:!1,children:e.jsxs("div",{className:"w-[500px] h-[250px] bg-sky-100 shadow-2xl border border-indigo-200 py-6 px-2 m-1 rounded-md",children:[e.jsxs("p",{onClick:S,className:"absolute right-7 top-8 cursor-pointer rounded-full bg-sky-200 hover:bg-gray-200 mx-3",children:[e.jsx(se,{size:25})," "]}),e.jsx("p",{className:" text-center text-xl font-semibold mx-5 text-gray-900",children:" Attach existing consumer "}),e.jsx("p",{className:"border-b py-1 mb-2 border-gray-500"}),o==1&&e.jsxs("div",{children:[e.jsxs("div",{className:" flex justify-center my-5 gap-2",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter Consumer No.",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{ref:g,type:"text",onChange:d=>x(d.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:S,type:"button",className:"px-2 py-1 border border-indigo-600 hover:bg-indigo-600 hover:text-white shadow rounded",children:"Cancel"}),e.jsx("button",{onClick:I,type:"button",className:"px-2 py-1 border hover:bg-indigo-700 border-indigo-600 bg-indigo-500 text-white shadow rounded",children:"Send OTP"})]}),w&&e.jsx("p",{className:`text-center text-sm font-semibold ${w!=null&&w.status?"text-green-500":"text-red-600"}`,children:w==null?void 0:w.msg}),e.jsx("div",{className:"text-xs text-center my-2",children:"Your Will get an OTP on your register mobile No."})]}),o==2&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-center font-semibold",children:["+91 ",O]}),e.jsxs("div",{className:" flex justify-center my-2 gap-2",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter OTP",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",onChange:d=>t(d.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),b&&e.jsx("p",{className:`text-center text-sm font-semibold ${b!=null&&b.status?"text-green-500":"text-red-600"}`,children:b==null?void 0:b.msg}),e.jsxs("div",{className:"text-xs text-center my-2",children:["Temporary OTP is ",e.jsxs("span",{className:"font-semibold",children:[" ",(T=c==null?void 0:c.data)==null?void 0:T.otp]}),"."]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:S,type:"button",className:"px-2 py-1 border border-indigo-600 hover:bg-indigo-600 hover:text-white shadow rounded",children:"Cancel"}),e.jsx("button",{onClick:s,type:"button",className:"px-2 py-1 border hover:bg-indigo-700 border-indigo-600 bg-indigo-500 text-white shadow rounded",children:"Submit"})]})]})]})})})}const fe=({data:n,isLoading:h})=>{const[x,c]=r.useState(null),p=z(),a=t=>{c(x===t?null:t)};return h?"Loading..":n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full ml-2 md:ml-0",children:[e.jsxs("p",{className:"font-manrope md:my-4 ",children:["Total Attached Connections"," ",e.jsx("span",{className:"font-semibold",children:n==null?void 0:n.length})]}),e.jsx("div",{className:"overflow-y-auto h-screen mb-40 md:mr-0 mr-5 ",children:n==null?void 0:n.map((t,o)=>e.jsxs("div",{className:"w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>a(o),children:[e.jsxs("div",{className:" flex md:flex grid-cols-12 p-2 items-center justify-between border-b border-gray-100",children:[e.jsx("div",{className:"flex flex-row ",children:e.jsx("img",{src:Q,className:"h-10 ml-3 rounded-full"})}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Ward No"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:t!=null&&t.parked?"red":"inherit"},children:t==null?void 0:t.ward_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Consumer No"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:t!=null&&t.parked?"red":"inherit"},children:t==null?void 0:t.consumer_no})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Holding No"}),e.jsx("p",{className:"hidden  md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:t!=null&&t.parked?"red":"inherit"},children:t==null?void 0:t.holding_no})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Owner Name"}),e.jsx("p",{className:"hidden  md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:t!=null&&t.parked?"red":"inherit"},children:t==null?void 0:t.applicant_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Home Address"}),e.jsx("p",{className:"hidden  md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:t!=null&&t.parked?"red":"inherit"},children:t==null?void 0:t.address})]}),e.jsx("p",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium col-span-1",children:x===o?e.jsx(X,{size:24}):e.jsx(U,{size:24})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:x===o&&e.jsxs("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:[e.jsx("div",{className:"text-center md:text-left mb-2 md:mb-0  italic text-gray-400",children:"some text here."}),e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[e.jsx("button",{onClick:()=>p(`/waterdisconnection/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Water Disconnect"}),e.jsx("button",{onClick:()=>p(`/watercomplain/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Water Complain"}),e.jsx("button",{onClick:()=>p(`/waterMeterMemoReceipt/${t==null?void 0:t.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Print Memo"}),e.jsx("button",{onClick:()=>p(`/waterDemandPrintReceipt/${t==null?void 0:t.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Print Demand Receipt"}),e.jsx("button",{onClick:()=>p(`/waterViewConsumer/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Details"}),e.jsx("button",{onClick:()=>p(`/waterViewDemand/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Demand"}),e.jsx("button",{onClick:()=>p(`/waterViewPaymentHistory/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Payment History"})]})]},t.name)})]},t.index))})]})}):e.jsx(H,{message:"No Attach Connections Found."})},ye={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function je(n){const{notify:h}=r.useContext(D),[x,c]=B.useState(!1),{api_waterApplicationDelete:p,header:a}=W(),t=n.dataTobeDeleted;r.useEffect(()=>{c(!0)},[]);function o(){}function y(){c(!1),n.reFetch(),n.setOpenDeleteModal(null),n.setOpenDeleteModal(!1)}function w(){c(!1),n.setOpenDeleteModal(null)}const i=()=>{_.post(p,{applicationId:t.id},a).then(b=>{b.data.status?(h("Application Deleted","success"),y()):(h("Application Not Deleted","error"),y())}).catch(b=>{y(),h("Error While deleting application","error")})};return e.jsx("div",{className:"",children:e.jsx(F,{isOpen:x,onAfterOpen:o,onRequestClose:y,style:ye,contentLabel:"Example Modal",children:e.jsxs("div",{className:"bg-sky-200 shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[e.jsxs("div",{className:"flow-root",children:[e.jsx("p",{className:"float-left text-center text-xl font-semibold mx-5 text-gray-700",children:"Do you want to Delete Application ?"}),e.jsxs("p",{onClick:y,className:"absolute right-9 top-12 cursor-pointer rounded-full bg-sky-200 hover:bg-gray-200 mx-3",children:[" ",e.jsx(se,{size:25})," "]})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{className:"text-sm my-2",children:e.jsxs("p",{children:["Your Applicaion No : ",e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.application_no})," will be deleted permanently. ",e.jsx("br",{})]})}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx("button",{onClick:i,type:"button",className:"border border-red-400 bg-red-600 hover:bg-red-500 text-white shadow-lg rounded-sm py-1 text-sm font-semibold px-3 m-3",children:"Yes! Delete"}),e.jsx("button",{onClick:w,type:"button",className:"border border-sky-400 bg-sky-600 hover:bg-sky-500 text-white shadow-lg rounded-sm py-1 text-sm font-semibold px-3 m-3",children:"Cancel"})]})]})})})}const Ne={overlay:{},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"transparent",border:"none",height:"maxHeight"}};function we(n){var I,s,C,O,R,E,T,d,j,L,$,G,q,J,Z,K;const[h,x]=B.useState(!1);r.useState(),r.useState(!1),r.useState(!0);const[c,p]=r.useState(),[a,t]=r.useState(),[o,y]=r.useState(),[w,i]=r.useState(),[b,v]=r.useState(!1),{api_waterViewPendingApplication:u,api_waterMasterData:k,api_waterJeAfterSiteInspection:f,header:N}=W();z(),r.useEffect(()=>{x(!0)},[]);const m=n==null?void 0:n.id;function l(){}function g(){x(!1),n.openSiteVerityModal(!1)}r.useEffect(()=>{A(),P(),S()},[n==null?void 0:n.openSiteVerityModal]);const A=()=>{i(!0),_.post(`${u}`,{applicationId:m},N).then(function(M){y(M.data.data),i(!1)}).catch(function(M){i(!1)})},P=()=>{i(!0),_.post(f,{applicationId:m},N).then(M=>{M.data.status==!0&&(t(M.data.data),i(!1))}).catch(M=>{})},S=()=>{i(!0),_.post(`${k}`,{},N).then(M=>{p(M.data.data),i(!1)}).catch(M=>{i(!1)})};return e.jsx("div",{className:"",children:e.jsx(F,{isOpen:h,onAfterOpen:l,onRequestClose:g,style:Ne,contentLabel:"Example Modal",children:e.jsx("div",{children:e.jsx("div",{className:"relative w-full h-full md:h-auto border-indigo-600 shadow-indigo-200 shadow-sm rounded",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow ",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Site Verification Details"}),e.jsxs("button",{onClick:g,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"defaultModal",children:[e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),w&&e.jsx(oe,{}),b&&e.jsx("p",{className:"text-red-500 text-center font-semibold relative",children:b}),e.jsx("div",{className:"",children:e.jsxs("table",{className:"",children:[e.jsx("thead",{className:"font-bold text-left text-sm border text-white bg-indigo-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Sl No."}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Particulars"}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Proposed By Applicant"}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"JE Inspection Report"})]})}),e.jsxs("tbody",{className:"text-sm",children:[e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"1."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Property Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(I=o==null?void 0:o.applicationDetails)!=null&&I.property_type?(s=o==null?void 0:o.applicationDetails)==null?void 0:s.property_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:((O=(C=c==null?void 0:c.water_property_type_mstr)==null?void 0:C.find(M=>M.id===(a==null?void 0:a.property_type_id)))==null?void 0:O.property_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"2."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Total Area in Sq.Ft."}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(R=o==null?void 0:o.applicationDetails)!=null&&R.area_sqft?(E=o==null?void 0:o.applicationDetails)==null?void 0:E.area_sqft:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(a==null?void 0:a.area_sqft)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"3."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Report"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(T=o==null?void 0:o.applicationDetails)!=null&&T.pipeline_type?(d=o==null?void 0:o.applicationDetails)==null?void 0:d.pipeline_type:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[((L=(j=c==null?void 0:c.water_param_pipeline_type)==null?void 0:j.find(M=>M.id===(a==null?void 0:a.pipeline_type_id)))==null?void 0:L.pipeline_type)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"4."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Size (In MM)"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[a==null?void 0:a.pipeline_size," MM"]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"5."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Size Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(a==null?void 0:a.pipeline_size_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"6."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Is Application Comes Under Regularization"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:($=o==null?void 0:o.applicationDetails)!=null&&$.connection_type?(G=o==null?void 0:o.applicationDetails)==null?void 0:G.connection_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:((J=(q=c==null?void 0:c.water_connection_type_mstr)==null?void 0:q.find(M=>M.id===(a==null?void 0:a.connection_type_id)))==null?void 0:J.connection_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"7."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Pipe Diameter"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[a==null?void 0:a.pipe_size," MM"]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"8."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Pipe Quality"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(a==null?void 0:a.pipe_type)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"9."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Ferrule Size"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(a==null?void 0:a.ferrule_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"10."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Road Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(a==null?void 0:a.road_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"11."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Applicant Category"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(Z=o==null?void 0:o.applicationDetails)!=null&&Z.category?(K=o==null?void 0:o.applicationDetails)==null?void 0:K.category:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(a==null?void 0:a.category)||"N/A"})]})]})]})}),e.jsx("div",{className:"flex justify-center p-6 border-t border-gray-200 rounded-b",children:e.jsx("button",{onClick:g,className:"mx-2 text-white bg-indigo-700 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300 rounded-lg border border-indigo-200 text-sm font-medium px-5 py-2.5 focus:z-10 ",children:"Close"})})]})})})})})}const ve=n=>{const[h,x]=r.useState(null),[c,p]=r.useState(!1),[a,t]=r.useState(),[o,y]=r.useState(!1),[w,i]=r.useState(),[b,v]=r.useState(!1),[u,k]=r.useState(),f=n.data,N=n==null?void 0:n.isLoading,m=z(),l=s=>{x(h===s?null:s)},g=s=>{v(!0),k(s)},A=()=>{n.refechList()},P=s=>{t(s),p(!0)},S=s=>{i(s),y(!0)};if(N)return"Loading..";if(!f)return e.jsx(H,{message:"No Pending Water Application Found."});const I=u==null?void 0:u.connection_type_name;return e.jsxs(e.Fragment,{children:[c&&e.jsx(je,{setOpenDeleteModal:p,openDeleteModal:c,dataTobeDeleted:a,reFetch:A}),o&&e.jsx(we,{openSiteVerityModal:y,id:w}),b&&e.jsx(le,{category:I,openPaymentModal:v,paymentData:u,refechList:A}),e.jsxs("div",{className:"w-full ml-2 md:ml-0 mb-10",children:[e.jsxs("p",{className:"font-manrope md:my-4 ",children:["Total Pending Applications"," ",e.jsx("span",{className:"font-semibold",children:f==null?void 0:f.length})]}),e.jsx("div",{className:"overflow-y-auto h-screen mb-40 md:mr-0 mr-5 ",children:f==null?void 0:f.map((s,C)=>e.jsxs("div",{className:"w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>l(C),children:[e.jsxs("div",{className:"flex md:flex grid-cols-12 p-2 items-center justify-between border-b border-gray-100",children:[e.jsx("div",{className:"flex flex-row ",children:e.jsx("img",{src:Q,className:"h-10 ml-3 rounded-full"})}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Applicant No."}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:s!=null&&s.parked?"red":"inherit"},children:s==null?void 0:s.application_no})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Ward name"}),e.jsxs("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:[" ",s==null?void 0:s.ward_name]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Connection Type"}),e.jsx("p",{className:"hidden md:block px-2 py-1 break-all col-span-2 font-semibold text-sm",children:s==null?void 0:s.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Payment Status"}),e.jsxs("p",{className:"hidden md:block whitespace-nowrap col-span-2 text-sm",children:[(s==null?void 0:s.payment_status)==0&&e.jsx("p",{className:"text-red-500 font-normal text-sm px-2 py-1 rounded-xl",children:"UnPaid"}),(s==null?void 0:s.payment_status)==1&&e.jsx("p",{className:"text-green-600 font-normal text-sm px-2 py-1 rounded-xl",children:"Paid"}),(s==null?void 0:s.payment_status)==2&&e.jsx("p",{className:"text-yellow-600 font-normal text-sm px-2 py-1 rounded-xl",children:"Processing"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Payment Status"}),e.jsxs("p",{className:"hidden md:block px-2 py-1 break-words col-span-2 text-sm",children:[(s==null?void 0:s.doc_upload_status)==!0&&e.jsx("p",{className:"text-green-600 font-normal text-sm rounded-xl",children:"Uploaded"}),(s==null?void 0:s.doc_upload_status)==!1&&e.jsx("p",{className:"text-red-600 font-normal text-sm rounded-xl",children:"Not Upload"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Apply Date"}),e.jsx("p",{className:"hidden md:block px-2 py-1 col-span-2",children:V(s==null?void 0:s.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")})]}),e.jsx("p",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium col-span-1",children:h===C?e.jsx(X,{size:24}):e.jsx(U,{size:24})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:h===C&&e.jsxs("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:[e.jsxs("div",{className:"text-center md:text-left mb-2 md:mb-0",children:[(s==null?void 0:s.current_role_name)===""?e.jsx("p",{children:"Your Application has not been submitted yet."}):e.jsxs("p",{children:["Your Application is at"," ",e.jsxs("span",{className:"font-semibold font-manrope underline",children:[s==null?void 0:s.current_role_name," ",(s==null?void 0:s.parked)===!0&&e.jsx("p",{children:"Back to citizen"})]})]}),(s==null?void 0:s.category)=="BPL"&&e.jsxs("p",{children:["You don't need to pay application fee as you fall under",e.jsxs("span",{className:"font-semibold font-manrope",children:[" ","BPL Category"]})]}),(s==null?void 0:s.scheduledDate)&&(s==null?void 0:s.scheduledTime)&&e.jsxs("p",{className:"text-xs",children:["Scheduled Inspection Date"," ",e.jsxs("span",{className:"font-semibold",children:[" ",V(s==null?void 0:s.scheduledDate,"YYYY-MM-DD").format("DD-MMM-yy")]})," ","Time :"," ",e.jsx("span",{className:"font-semibold",children:V(s==null?void 0:s.scheduledTime,"h:mm:ss A").format("hh:mm A")})]})]}),e.jsxs("div",{className:"md:hidden grid grid-cols-12 text-sm border-b-2 pb-2 mb-2 border-gray-100",children:[e.jsxs("div",{className:"col-span-6 mr-1",children:[e.jsxs("p",{className:"flex justify-between",children:["Payment :",e.jsxs("span",{className:"font-semibold",children:[(s==null?void 0:s.payment_status)==0&&"UnPaid",(s==null?void 0:s.payment_status)==1&&"Paid",(s==null?void 0:s.payment_status)==2&&"Processing"]})]}),e.jsxs("p",{className:"flex justify-between",children:["Document :",e.jsx("span",{className:"font-semibold",children:(s==null?void 0:s.doc_upload_status)==!0?"Uploaded":"NotUpload"})]})]}),e.jsxs("div",{className:"col-span-6 ml-4",children:[e.jsxs("p",{className:"flex justify-between",children:["Type :",e.jsxs("span",{className:"font-semibold",children:[" ",s==null?void 0:s.type]})]}),e.jsxs("p",{className:"flex justify-between",children:["Apply on :",e.jsx("span",{className:"font-semibold text-xs",children:V(s==null?void 0:s.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")})]})]})]}),e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[(s==null?void 0:s.is_field_verified)&&e.jsx("button",{onClick:()=>S(s==null?void 0:s.id),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Site Verification"}),e.jsx("button",{onClick:()=>m(`/application-payment-history/${s==null?void 0:s.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Payment History"}),(s==null?void 0:s.doc_upload_status)&&(s==null?void 0:s.payment_status)==0&&e.jsx("button",{onClick:()=>g(s),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),(s==null?void 0:s.actualPaymentStatus)==0&&e.jsx("button",{onClick:()=>g(s),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),(s==null?void 0:s.current_role_name)==""&&e.jsx("button",{onClick:()=>m(`/water-doc-upload/${s==null?void 0:s.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Upload Document"}),(s==null?void 0:s.parked)==!0&&e.jsx("button",{onClick:()=>m(`/water-doc-upload/${s==null?void 0:s.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Re-Upload Document"}),e.jsx("button",{onClick:()=>m(`/water/viewApplication/${s==null?void 0:s.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Application"}),(s==null?void 0:s.payment_status)==0&&(s==null?void 0:s.current_role)==""&&e.jsx("button",{onClick:()=>P({application_no:s==null?void 0:s.application_no,id:s==null?void 0:s.id}),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-red-500 hover:bg-red-600",children:"Delete"})]})]},s.name)})]},s.index))})]})]})},Ae=({data:n,isLoading:h})=>{const[x,c]=r.useState(null),p=z(),a=t=>{c(x===t?null:t)};return h?"Loading..":n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full ml-2 md:ml-0",children:[e.jsxs("p",{className:"font-manrope md:my-4 ",children:["Total Water Connections"," ",e.jsx("span",{className:"font-semibold",children:n==null?void 0:n.length})]}),e.jsx("div",{className:"overflow-y-auto h-screen mb-40 md:mr-0 mr-5 ",children:n==null?void 0:n.map((t,o)=>e.jsxs("div",{className:"w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>a(o),children:[e.jsxs("div",{className:"flex md:flex grid-cols-12 p-2 items-center justify-between border-b border-gray-100",children:[e.jsx("div",{className:"flex flex-row ",children:e.jsx("img",{src:Q,className:"h-10 ml-3 rounded-full"})}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Consumer No."}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:t==null?void 0:t.consumer_no})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Ward Name"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:t==null?void 0:t.ward_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"ULB"}),e.jsx("p",{className:"hidden md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:t==null?void 0:t.ulb_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Owner Name"}),e.jsx("p",{className:"hidden md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:t==null?void 0:t.applicant_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-2 text-gray-500",children:"Apply Date"}),e.jsxs("p",{className:"hidden md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:[V(t==null?void 0:t.application_apply_date,"YYYY-MM-DD").format("DD-MMM-yy")," "]})]}),e.jsx("p",{className:"px-4 py-2 break-all text-right text-sm font-medium col-span-1",children:x===o?e.jsx(X,{size:24}):e.jsx(U,{size:24})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:x===o&&e.jsxs("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:[e.jsx("div",{className:"text-center md:text-left mb-2 md:mb-0 italic text-gray-400",children:"can add some text here.."}),e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[e.jsx("button",{onClick:()=>p(`/waterdisconnection/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Water Disconnection"}),e.jsx("button",{onClick:()=>p(`/watercomplain/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Water Complain"}),e.jsx("button",{onClick:()=>p(`/waterMeterMemoReceipt/${t==null?void 0:t.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Print Memo"}),e.jsx("button",{onClick:()=>p(`/waterDemandPrintReceipt/${t==null?void 0:t.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Print Demand Receipt"}),e.jsx("button",{onClick:()=>p(`/waterViewConsumer/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Details"}),e.jsx("button",{onClick:()=>p(`/waterViewDemand/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Demand"}),e.jsx("button",{onClick:()=>p(`/waterViewPaymentHistory/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Payment History"})]})]},t.name)})]},t.index))})]})}):e.jsx(H,{message:"No Water Connections found."})},Ce=n=>{var u,k,f;const[h,x]=r.useState(!1),[c,p]=r.useState(),a=n==null?void 0:n.paymentData,{notify:t}=r.useContext(D),{api_rzpWaterOrderId:o,api_getTranNo:y,header:w}=W(),i=()=>{n.closeModal()},b=N=>{N.status==!0&&(t("Payment Done successfully","success"),p({orderId:N.data.razorpay_order_id,paymentId:N.data.razorpay_payment_id}),n.fetchTransactionDetails(N),n==null||n.refechList())},v=()=>{var m,l;x(!0);const N={id:(m=a==null?void 0:a.connectionCharges)==null?void 0:m.applicationId,applycationType:(l=a==null?void 0:a.connectionCharges)==null?void 0:l.type};_.post(o,N,w).then(g=>{x(!1),g.data.status==!0?ie(g.data.data,b):t(g.data.message,"error")}).catch(g=>{x(!1),t(g.message,"error")})};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("p",{onClick:i,className:"float-right absolute right-12 top-12 hover:bg-gray-300 bg-gray-200 p-1 cursor-pointer ",children:[" ",e.jsx(ne,{})," "]}),e.jsxs("div",{className:"bg-white shadow-2xl border border-blue-200 md:p-5 md:m-5 rounded-md",children:[e.jsxs("div",{className:" border-b-2 py-1 pl-3 font-semibold border-red-400 flex",children:[e.jsx(ce,{size:20,className:"mt-0.5 mr-1"}),"Make Payment "]}),e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("img",{src:"https://img.freepik.com/free-vector/hand-holding-phone-with-credit-card-screen-man-making-purchase-shopping-paying-online-using-banking-app-flat-vector-illustration-transaction-e-commerce-concept_74855-26014.jpg?w=1380&t=st=1686898919~exp=1686899519~hmac=4b0ddb44860ec647fa33a1a0416ea0c1cc8167693a13fdba3f09058d099f0e76",alt:"My Image",width:200,height:100})}),e.jsxs("div",{className:"flex items-center px-28",children:[e.jsx("div",{className:"font-semibold text-2xl text-gray-500",children:e.jsx("p",{children:"Application No.-"})}),e.jsx("p",{className:"font-semibold text-2xl text-gray-500",children:(u=a==null?void 0:a.connectionCharges)==null?void 0:u.applicationNo})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"font-semibold text-2xl text-green-500",children:e.jsx("p",{children:"Amount-Rs"})}),e.jsx("p",{className:"font-semibold text-2xl text-green-500",children:((k=a==null?void 0:a.connectionCharges)==null?void 0:k.amount)||"N/A"})]}),e.jsx("h1",{className:"text-center font-semibold",children:"Amount Breakup"}),e.jsx("div",{className:"grid grid-cols-6 px-24",children:e.jsx("div",{className:"col-span-3",children:e.jsxs("h1",{children:[" DisConnection Fee : ₹ ",(f=a==null?void 0:a.connectionCharges)==null?void 0:f.conn_fee]})})}),e.jsx("div",{className:"md:col-span-12 col-span-12 md:mt-5 mt-2",children:e.jsx("div",{className:"text-center font-extralight px-2 rounded",children:e.jsx("p",{children:"Note : You can pay using Card / UPI / Netbanking / Wallet etc."})})}),e.jsx("div",{className:"col-span-12 md:mt-5 mt-2",children:e.jsx("div",{className:"flex justify-center",children:h?e.jsx(re,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"30",visible:!0}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:i,className:"mx-3 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-2 text-sm rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:v,className:"mx-3 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-5 py-2 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})})]})]})})},ke={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function Me(n){var k,f,N;const[h,x]=B.useState(!1),[c,p]=r.useState(!1),[a,t]=r.useState(),[o,y]=r.useState(),w=z();r.useContext(D),W();const i=n.paymentData;r.useEffect(()=>{x(!0)},[]);function b(){}function v(){x(!1),p(!1),t(!1),y(!1),n==null||n.openPaymentModal(!1)}const u=m=>{var l,g,A;m!=null&&m.status&&p(!0),(l=m==null?void 0:m.data)==null||l.razorpay_order_id,(g=m==null?void 0:m.data)==null||g.razorpay_payment_id,(A=m==null?void 0:m.data)==null||A.razorpay_signature};return e.jsx("div",{className:"",children:e.jsxs(F,{isOpen:h,onAfterOpen:b,onRequestClose:v,style:ke,contentLabel:"Example Modal",children:[c&&e.jsxs("div",{className:`${a?"bg-green-200":"bg-yellow-50"} shadow-2xl border border-sky-200 md:p-5 md:m-5 rounded-md`,children:[e.jsxs("div",{className:"flex justify-center",children:[a&&e.jsx("img",{src:imgSucess,className:"h-16",alt:"Payment Success",srcset:""}),!a&&e.jsx("img",{src:imgPending,className:"h-12",alt:"Payment Pending",srcset:""})]}),e.jsxs("div",{className:"py-1 pl-3 font-semibold text-center text-2xl text-gray-800",children:[a?"Payment Completed Successfully":"Payment Under Processing"," "]}),(a==null?void 0:a.transectionNo)&&e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"text-base",children:" Payment Transaction No"})," ",e.jsx("span",{className:"font-bold text-blue-700 text-xl",children:a==null?void 0:a.transectionNo})]}),!(a!=null&&a.transectionNo)&&e.jsxs("p",{className:"text-center font-semibold",children:[e.jsx("span",{className:"text-base",children:" Payment Status"})," ",e.jsx("span",{className:" text-blue-500 text-base",children:"Pending"})]}),e.jsx("p",{className:"border-b border-gray-300 mx-10 py-1"}),e.jsxs("div",{className:"grid grid-cols-12 px-8 py-3 leading-8 space-x-8 text-sm",children:[e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6 font-semibold",children:[e.jsx("p",{children:"Application No"}),e.jsx("p",{children:"Connection Type"})]}),e.jsxs("div",{className:"col-span-6 ml-3",children:[e.jsx("p",{children:(a==null?void 0:a.applicationNo)||((k=i==null?void 0:i.connectionCharges)==null?void 0:k.applicationNo)}),e.jsx("p",{children:(a==null?void 0:a.tranType)||((f=i==null?void 0:i.connectionCharges)==null?void 0:f.charge_category)})]})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6 font-semibold",children:[e.jsx("p",{children:"Amount"}),e.jsx("p",{children:"Payment Date"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("p",{children:(a==null?void 0:a.amount)||((N=i==null?void 0:i.connectionCharges)==null?void 0:N.amount)}),e.jsx("p",{children:(a==null?void 0:a.transectionDate)||"Pending"})]})]})}),e.jsx("div",{className:"col-span-12 md:mt-4 mt-10",children:e.jsxs("div",{className:"flex justify-center",children:[e.jsx("button",{onClick:v,className:"mx-2 bg-sky-600 hover:bg-sky-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm rounded-sm shadow-xl",children:"Dashboard"}),a&&e.jsx("button",{onClick:()=>w(`/waterConnReceipt/${a==null?void 0:a.transectionNo}`),className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm  rounded-sm shadow-xl",children:"View Receipt"}),!a&&e.jsx("button",{onClick:()=>u(),className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm  rounded-sm shadow-xl",children:"Check Status"})]})})]})]}),!c&&e.jsx(Ce,{closeModal:v,fetchTransactionDetails:u,paymentData:i})]})})}const ee=({data:n,isLoading:h})=>{const[x,c]=r.useState([]),[p,a]=r.useState(!1),[t,o]=r.useState(null),[y,w]=r.useState(),[i,b]=r.useState(!1);z();const v=l=>{o(t===l?null:l)},u=()=>{props.refechList()},{api_requestpendingapplicationlist:k,header:f}=W(),N=()=>{a(!0),de.post(k,{},f).then(l=>{var g,A;(g=l==null?void 0:l.data)!=null&&g.status&&c((A=l==null?void 0:l.data)==null?void 0:A.data),a(!1)}).catch(l=>{a(!1)})};r.useEffect(()=>{N()},[]);const m=y==null?void 0:y.connection_type_name;return h?"Loading..":n?e.jsxs("div",{children:[i&&e.jsx(Me,{category:m,openPaymentModal:b,paymentData:y,refechList:u}),e.jsxs("div",{className:"w-full ml-2 md:ml-0 mb-10",children:[e.jsxs("p",{className:"font-manrope md:my-4 ",children:["Total Pending Applications ",e.jsx("span",{className:"font-semibold",children:x==null?void 0:x.length})]}),e.jsx("div",{className:"hidden md:block bg-gray-200 text-gray-700 py-3 font-semibold rounded-md",children:e.jsxs("div",{className:"grid grid-cols-12 items-center",children:[e.jsx("p",{className:"px-2 col-span-2 whitespace-nowrap",children:"Application No"}),e.jsx("p",{className:"px-2 col-span-1",children:"Ward No"}),e.jsx("p",{className:"px-2 col-span-2",children:"Request Type"}),e.jsx("p",{className:"px-2 col-span-2",children:"Consumer No."}),e.jsx("p",{className:"px-2 col-span-2",children:"Payment Status"}),e.jsx("p",{className:"px-2 col-span-2 whitespace-nowrap",children:"Apply Date"}),e.jsx("p",{className:"px-2 col-span-1"})]})}),e.jsx("div",{className:"overflow-y-auto h-screen mb-40 md:mr-0 mr-5 ",children:x==null?void 0:x.map((l,g)=>e.jsxs("div",{className:"w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>v(g),children:[e.jsxs("div",{className:"flex md:grid grid-cols-12 items-center justify-between border-b border-gray-100",children:[e.jsx("p",{className:"px-4 py-2 break-all font-manrope font-semibold col-span-2",children:l==null?void 0:l.application_no}),e.jsxs("p",{className:"px-4 py-2 break-all flex col-span-1",children:[e.jsx("span",{className:"block md:hidden",children:"Ward "})," ",e.jsxs("span",{className:"font-semibold mx-1",children:[(l==null?void 0:l.ward_name)||"N/A"," "]})]}),e.jsx("p",{className:"hidden md:block px-4 py-2 break-all col-span-2",children:l==null?void 0:l.charge_category}),e.jsx("p",{className:"hidden md:block px-4 py-2 break-all col-span-2",children:l==null?void 0:l.consumer_no}),e.jsxs("p",{className:"hidden md:block px-4 py-2 whitespace-nowrap col-span-2",children:[(l==null?void 0:l.payment_status)==0&&e.jsx("p",{className:"text-red-500 font-normal text-sm px-2 rounded-xl",children:"UnPaid"}),(l==null?void 0:l.payment_status)==1&&e.jsx("p",{className:"text-green-600 font-normal text-sm px-2 rounded-xl",children:"Paid"}),(l==null?void 0:l.payment_status)==2&&e.jsx("p",{className:"text-yellow-600 font-normal text-sm px-2 rounded-xl",children:"Processing"})]}),e.jsx("p",{className:"hidden md:block px-4 py-2 col-span-2",children:V(l==null?void 0:l.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")}),e.jsx("p",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium col-span-1",children:t===g?e.jsx(X,{size:24}):e.jsx(U,{size:24})})]}),t===g&&e.jsx("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:e.jsx("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3"})},l.name)]},g))})]})]}):e.jsx(H,{message:"No Request Applictions found  Found."})},Ze=()=>{r.useState(null);const[n,h]=r.useState(1),[x,c]=r.useState(0),[p,a]=r.useState(),[t,o]=r.useState(),[y,w]=r.useState(),[i,b]=r.useState(!1),[v,u]=r.useState(!1),[k,f]=r.useState(!1),[N,m]=r.useState(!1),{api_waterAttachedConsumerList:l,api_citizenApplications:g,api_citizenApprovedApplications:A,header:P}=W(),S=z(),I=()=>{c(d=>d+1)},{setBreadCrumbData:s}=r.useContext(D);r.useEffect(()=>{s(["Water Dashboard"])},[]);const C=()=>{f(!0),_.post(l,{},P).then(d=>{var j;d.data.status?(f(!1),a((j=d==null?void 0:d.data)==null?void 0:j.data)):f(!1)}).catch(d=>{if(f(!1),d.response.status===401)return S("/logout")})},O=()=>{b(!0),_.post(g,{},P).then(d=>{var j;d.data.status?(b(!1),o((j=d==null?void 0:d.data)==null?void 0:j.data)):b(!1)}).catch(d=>{if(b(!1),d.response.status===401)return S("/logout")})},R=()=>{u(!0),_.post(A,{},P).then(d=>{var j;d.data.status?(u(!1),w((j=d==null?void 0:d.data)==null?void 0:j.data)):u(!1)}).catch(d=>{if(u(!1),d.response.status===401)return S("/logout")})};r.useEffect(()=>{C(),O(),R()},[]);const E=()=>{O()},T=()=>{C()};return e.jsxs(e.Fragment,{children:[e.jsx(ue,{openAttachModal:x,refetch:T}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex-1 md:flex items-center md:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"md:text-3xl text-2xl text-gray-800 font-semibold ",children:[" ","Water Dashboard"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 ",children:"Here is list of all pending applications."})]}),e.jsxs("div",{className:"space-x-1 ",children:[e.jsx("button",{onClick:()=>I(),className:xe,children:e.jsxs("span",{className:"flex text-sm md:text-base",children:[e.jsx("span",{className:"md:mt-1 mr-1",children:e.jsx(te,{size:17})}),"Link Connection"]})}),e.jsx("button",{onClick:()=>S("/water-apply"),className:pe,children:e.jsxs("span",{className:"flex text-sm md:text-base",children:[e.jsx("span",{className:"md:mt-1 mr-1",children:e.jsx(ae,{size:17})}),"Apply New Connection"]})})]})]}),e.jsx("div",{className:"",children:e.jsxs("ul",{className:" bg-white max-w-screen-xl border-b flex items-center gap-1 md:gap-x-6 text-xs md:text-sm",children:[e.jsx("li",{className:`py-2 border-b-2 ${n==1?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>h(1),role:"tab",className:"flex items-center font-semibold gap-x-2 py-2 px-2 rounded-lg duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100",children:[e.jsx("img",{className:"h-5 w-5 hidden md:block",src:he,alt:"Pending Icon"}),"Pending Applications"]})}),e.jsx("li",{className:`py-2 border-b-2 ${n==2?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>h(2),role:"tab",className:"flex items-center font-semibold gap-x-2 py-2 px-2 rounded-lg duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100",children:[e.jsx("img",{className:"h-5 w-5 hidden md:block",src:me,alt:"Approved Icon"}),"Connection List"]})}),e.jsx("li",{className:`whitespace-nowrap py-2 border-b-2 ${n==3?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>h(3),role:"tab",className:"flex items-center font-semibold gap-x-2 py-2 px-2 rounded-lg duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100",children:[e.jsx("img",{className:"h-5 w-6 hidden md:block",src:ge,alt:"Attached Icon"}),"Link Connections"]})})]})}),e.jsx("div",{children:e.jsx("section",{className:"container mx-auto py-4",children:e.jsxs("div",{children:[n==1&&e.jsx(Y,{errorMsg:"Error Data Loading..",children:e.jsx(ve,{refechList:E,isLoading:i,data:t})}),n==2&&e.jsx(Y,{errorMsg:"Error Data Loading..",children:e.jsx(Ae,{isLoading:v,data:y})}),n==3&&e.jsx(Y,{errorMsg:"Error Data Loading..",children:e.jsx(fe,{isLoading:k,data:p})}),n==4&&e.jsx(Y,{errorMsg:"Error Data Loading..",children:e.jsx(ee,{isLoading:N,data:ee})})]})})})]})]})};export{Ze as default};
