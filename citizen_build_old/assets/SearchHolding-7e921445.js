import{j as e}from"./mui-105b4636.js";import{r as l,u as X}from"./router-894402c5.js";import{l as Y,k as Z,w as ee,U as te,c as se,d as w,u as re,B as le,ai as oe,n as a,ak as ie,A as ae}from"./index-0ba2dd6b.js";import{a as I}from"./axios-67d8a945.js";import{B as ne}from"./BarLoader-72ffdd04.js";import{P as ce}from"./PropertyApiList-5b9eb85b.js";import de from"./OtpCard-611eb44c.js";import{C as xe}from"./CitizenApplyApiList-6dc33400.js";import"./CommonModal-1a38119d.js";import{B as me}from"./BottomErrorCard-892eaca1.js";import ue from"./MobileNoCard-7f7cd9c4.js";import"./react-40db4358.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";import"./index-82be3ecd.js";const he=6e4;function Oe(){const[j,i]=l.useState(!0),[n,P]=l.useState(),[_,p]=l.useState(!1),[L,M]=l.useState(null),[be,C]=l.useState(null),[E,u]=l.useState(""),[f,O]=l.useState(),{notify:c}=l.useContext(Y),[y,g]=l.useState(!1),[v,S]=l.useState(null),[k,d]=l.useState(!1),[A,B]=l.useState(null),[T,h]=l.useState(!1),{t:U}=Z();ee("Search Property");const{api_searchDirectHolding:F}=ce(),{api_getAllUlb:D,api_sendMobileOtp:H}=xe(),{ulb_name:R,brand_tag:V}=te(U),q=X(),W=t=>{h(!1),d(!1),u(""),p(!1),i(!0);const s={holdingNo:t==null?void 0:t.holdingNo,ulbId:t==null?void 0:t.ulbId};I.post(F,s).then(r=>{var x,m;(x=r==null?void 0:r.data)!=null&&x.status?(P((m=r==null?void 0:r.data)==null?void 0:m.data),p(!0),u(""),C(s==null?void 0:s.ulbId)):(c("This holding no does not exits!","error"),u("Data not found. Please enter a valid holding no. or related ULB")),i(!1)}).catch(r=>{c("Something went wrong!!","error"),u("Network problem."),b(!0,"Error occured. Please try again later."),i(!1),p(!1)})},G=se({holdingNo:w().required("This is a required field !"),ulbId:w().required("Select ULB")}),o=re({initialValues:{holdingNo:"",ulbId:""},onSubmit:t=>{W(t)},validationSchema:G}),$=t=>{let s=t.target.name,r=t.target.value;s=="holdingNo"&&o.setFieldValue("holdingNo",ie(r,o.values.holdingNo,17))},N=(t=null)=>{i(!0);let s;t==null?s={mobileNo:v}:s={mobileNo:t},I.post(H,s).then(r=>{var x,m;(x=r==null?void 0:r.data)!=null&&x.status?(g(!0),c("OTP is send to your mobile no.","success")):(c((m=r==null?void 0:r.data)==null?void 0:m.message,"error"),b(!0,"Error occured. Please try again later.")),i(!1)}).catch(r=>{b(!0,"Error occured. Please try again later."),i(!1)})},z=()=>{d(!1),i(!0),ae.get(D,{timeout:he}).then(function(t){var s,r;(s=t==null?void 0:t.data)!=null&&s.status?O((r=t==null?void 0:t.data)==null?void 0:r.data):d(!0),i(!1)}).catch(function(t){d(!0),i(!1)})};l.useEffect(()=>{z()},[]);const J=()=>{c("Mobile no. has been verified successfully !","success"),q(`/viewDemandHoldingPropertyDirect/${L}`)},K=()=>{g(!1)},b=(t,s)=>{B(s),d(t)},Q=(t,s)=>{M(t),s==""||s==null||s==null?h(!0):(h(!1),S(s),N(s))};if(j)return e.jsxs(e.Fragment,{children:[e.jsx(le,{}),e.jsx("div",{className:"min-h-screen"})]});if(y)return e.jsx(de,{closeOtpModal:K,bottomNaviation:!0,headTitle:"Pay Property Tax",reSendOtp:N,verifedMobileNo:v,callback:J,setotpCardStatus:g});if(!y)return e.jsxs(e.Fragment,{children:[T&&e.jsx(ue,{title:"Enter Mobile No.",desc:"Enter mobile no. to proceed for payment",setverifedMobileNo:t=>{S(t),N(t)},closeMobileModal:()=>h(!1)}),j&&e.jsx(ne,{}),k&&e.jsx(me,{activateBottomErrorCard:b,errorTitle:A}),e.jsxs("div",{className:"px-2 md:px-10 mt-16",children:[e.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[e.jsx("div",{className:"flex ml-5 mt-2 ",children:e.jsx("p",{className:"font-semibold text-3xl ml-4 mt-1 text-gray-600",children:"Search Property"})}),e.jsx("form",{onSubmit:o.handleSubmit,onChange:$,children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-center my-5 m-10 ",children:[e.jsxs("div",{className:"form-group col-span-12 mb-4 md:px-10",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["ULB",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{id:"basic_details_1",...o.getFieldProps("ulbId"),className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md cursor-pointer ",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select"}),V!="AMC"?f==null?void 0:f.map(t=>e.jsx("option",{value:t.id,children:t.ulb_name})):e.jsx("option",{value:"2",children:R})]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.ulbId&&o.errors.ulbId?o.errors.ulbId:null})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Holding/PT No.",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...o.getFieldProps("holdingNo"),className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("p",{className:"text-red-500 text-xs",children:o.touched.holdingNo&&o.errors.holdingNo?o.errors.holdingNo:null})]}),e.jsx("div",{className:"mt-4 md:px-10",children:e.jsx("button",{type:"submit",className:"w-full border border-indigo-500 bg-indigo-600 hover:bg-indigo-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 py-1",children:e.jsxs("p",{className:"flex text-center justify-center items-center",children:[e.jsx(oe,{className:"inline mr-2"}),"Search record"]})})})]})})]}),e.jsxs("div",{className:"mt-10",children:[_&&(n==null?void 0:n.length)!=0&&e.jsxs("div",{className:"col-span-10 bg-gray-50 p-4 overflow-x-scroll",children:[e.jsx("div",{className:"flex flex-row",children:e.jsx("h1",{className:"px-1 font-semibold font-serif text-2xl mt-4",children:"All Transcations"})}),e.jsxs("table",{className:"min-w-full leading-normal mt-10",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-indigo-50 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"#"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"ACTION"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"OWNER'S NAME"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"HOLDING NO"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"NEW HOLDING NO"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"MOBILE NO"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"WARD NO."}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"ULB"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"ADDRESS"})]})}),e.jsx("tbody",{className:"text-sm",children:e.jsx(e.Fragment,{children:n==null?void 0:n.map(t=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:"1"}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[" ",e.jsx("button",{onClick:()=>Q(t==null?void 0:t.id,t==null?void 0:t.mobile_no),className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:a(t==null?void 0:t.owner_name)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:a(t==null?void 0:t.holding_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:a(t==null?void 0:t.new_holding_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:a(t==null?void 0:t.mobile_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:a(t==null?void 0:t.ward_name)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:a(t==null?void 0:t.ulb)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:a(t==null?void 0:t.prop_address)})]}))})})]})]}),e.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:E}),e.jsx("div",{className:"w-full h-40"})]})]})]})}export{Oe as default};
