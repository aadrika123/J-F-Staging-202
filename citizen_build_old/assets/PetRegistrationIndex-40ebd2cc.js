import{j as r}from"./mui-8e804a04.js";import{r as i}from"./router-87042356.js";import{m as W,c as te,d as t,u as ie,A as u,B as ce,i as j}from"./index-19682a6e.js";import{F as ne}from"./PetAccordionPage-5528581d.js";import{W as de}from"./WaterApiList-e42e9d41.js";import{P as pe}from"./PetRegAPIList-bb1063ad.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";const e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},me=N=>{var R,V,O,E,D;const[h,v]=i.useState(),[P,F]=i.useState(),[c,M]=i.useState(),[w,L]=i.useState(!1),[Z,S]=i.useState(!1),[T,A]=i.useState(!1),{notify:q}=i.useContext(W),[f,U]=i.useState(),[x,H]=i.useState(),[J,n]=i.useState(!1),{api_ulbList:Q,header:g,api_wardList:X}=de(),{api_PetRegistrationApplyForm:Y,api_PetRegistrationMaster:y,api_ListOfSafHolding:ee,api_getUserDetailsByHoldingSaf:re,header1:ae}=pe(),le=te({ulb:t().required("Kindly enter a value."),applicantName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),applyThrough:t().required("Kindly enter a value."),holdingNo:t().required("Kindly enter a value."),categoryApplication:t().required("Kindly enter a value."),ward:t().required("Kindly enter a value."),mobileNo:t().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:t().email().required("Kindly enter a value."),panNo:t().matches(/^[A-Za-z0-9]{10}$/,"Enter 10 Character PAN No.").required("Kindly enter a value."),petType:t().required("Kindly enter a value."),petName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),petGender:t().required("Kindly enter a value."),petBirthDate:t().required("Kindly enter a value."),breed:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),color:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorRegNo:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),dateOfRabies:t().required("Kindly enter a value."),dateOfLepVaccine:t().required("Kindly enter a value."),petFrom:t().required("Kindly enter a value.")}),l=ie({initialValues:{ulb:"",applicantName:"",applyThrough:"",holdingNo:"",categoryApplication:"",ward:"",mobileNo:"",email:"",panNo:"",address:"",petType:"",petName:"",petGender:"",petBirthDate:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(a,s)=>{oe(a)},validationSchema:le}),se=a=>{let s=a.target.name,o=a.target.value;A(!1),s=="color"&&l.setFieldValue("color",j(o,l.values.color,20)),s=="doctorName"&&l.setFieldValue("doctorName",j(o,l.values.doctorName,20)),s=="breed"&&l.setFieldValue("breed",j(o,l.values.breed,20)),s=="petName"&&l.setFieldValue("petName",j(o,l.values.petName,20)),s=="doctorName"&&l.setFieldValue("doctorName",j(o,l.values.doctorName,20))},oe=a=>{S(!0);const s={address:a==null?void 0:a.address,applyThrough:a==null?void 0:a.applyThrough,propertyNo:a==null?void 0:a.holdingNo,breed:a==null?void 0:a.breed,ownerCategory:a==null?void 0:a.categoryApplication,color:a==null?void 0:a.color,dateOfLepVaccine:a==null?void 0:a.dateOfLepVaccine,dateOfRabies:a==null?void 0:a.dateOfRabies,doctorName:a==null?void 0:a.doctorName,doctorRegNo:a==null?void 0:a.doctorRegNo,panNo:a==null?void 0:a.panNo,petBirthDate:a==null?void 0:a.petBirthDate,petFrom:a==null?void 0:a.petFrom,petGender:a==null?void 0:a.petGender,petName:a==null?void 0:a.petName,petType:a==null?void 0:a.petType,ulbId:a==null?void 0:a.ulb,ward:a==null?void 0:a.ward,applicantName:a==null?void 0:a.applicantName,mobileNo:a==null?void 0:a.mobileNo,email:a==null?void 0:a.email,panNo:a==null?void 0:a.panNo};console.log("complete payload",s),u.post(Y,s,g).then(o=>{var d,p,m;S(!1),o.data.status?(console.log("Form applied successfully"),N.data(o.data.data),console.log("1",o.data.data),N.screen(2),q((d=o==null?void 0:o.data)==null?void 0:d.message,"success")):(q((p=o==null?void 0:o.data)==null?void 0:p.message,"error"),A((m=o==null?void 0:o.data)==null?void 0:m.message),console.log("Failed to apply pet registration"))}).catch(o=>{var d,p,m,b;A((p=(d=o==null?void 0:o.response)==null?void 0:d.data)==null?void 0:p.error),q("Something Went wrong","error"),S(!1),console.log("Error while applying for pet registration..",(b=(m=o==null?void 0:o.response)==null?void 0:m.data)==null?void 0:b.error)})};return i.useEffect(()=>{u.post(y,{},ae).then(a=>{a.data.status?(M(a.data.data),console.log("pet master data",a.data)):console.log("Error fetching pet master list")}).catch(a=>{console.log("Error while getting pet master list")})},[]),i.useEffect(()=>{u.get(Q,g).then(a=>{a.data.status?(v(a.data.data),console.log("ULB List",a.data)):console.log("Error fetching ulb list")}).catch(a=>{console.log("Error while getting ulb list")})},[]),i.useEffect(()=>{n(!0),u.post(X,{ulbId:l.values.ulb},g).then(a=>{n(!1),a.data.status?(F(a.data.data),console.log("Ward List",a.data)):console.log("Error fetching Ward list")}).catch(a=>{n(!1),console.log("Error while getting Ward list")})},[l.values.ulb]),i.useEffect(()=>{n(!0);let a;l.values.applyThrough==1&&(a="holding"),l.values.applyThrough==2&&(a="saf");const s={type:a,ulbId:l.values.ulb};u.post(ee,s,g).then(o=>{n(!1),o.data.status?(U(o.data.data),console.log("List of holding saf",o.data)):console.log("Error fetching saf holding")}).catch(o=>{n(!1),console.log("Error while getting saf holding")})},[l.values.ulb,l.values.applyThrough]),i.useEffect(()=>{n(!0);const a={connectionThrough:l.values.applyThrough,id:l.values.holdingNo,ulbId:l.values.ulb};u.post(re,a,g).then(s=>{var o,d,p,m,b,K,_,B,C,I,k,G,$,z;n(!1),s.data.status?(H(s.data.data),console.log("User Details",s.data),l.setFieldValue("address",(d=(o=s==null?void 0:s.data)==null?void 0:o.data)==null?void 0:d.prop_address),l.setFieldValue("ward",(b=(m=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:m.wardDetails)==null?void 0:b.wardId),l.setFieldValue("applicantName",(B=(_=(K=s==null?void 0:s.data)==null?void 0:K.data)==null?void 0:_.owners[0])==null?void 0:B.ownerName),l.setFieldValue("mobileNo",(k=(I=(C=s==null?void 0:s.data)==null?void 0:C.data)==null?void 0:I.owners[0])==null?void 0:k.mobileNo),l.setFieldValue("email",(z=($=(G=s==null?void 0:s.data)==null?void 0:G.data)==null?void 0:$.owners[0])==null?void 0:z.email)):console.log("Error fetching user Details")}).catch(s=>{n(!1),console.log("Error while getting user Details")})},[l.values.holdingNo,l.values.applyThrough]),console.log("formik.values.owner_type",l.values.categoryApplication),r.jsxs(r.Fragment,{children:[J&&r.jsx(ce,{}),r.jsxs("form",{onSubmit:l.handleSubmit,onChange:se,className:"pb-20",children:[r.jsxs("div",{className:"overflow-y-auto",children:[r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...l.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map((a,s)=>r.jsx("option",{value:a.id,children:a.ulb_name},s))]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.ulb&&l.errors.ulb?l.errors.ulb:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applyThrough",children:["Apply Through",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...l.getFieldProps("applyThrough"),name:"applyThrough",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(R=c==null?void 0:c.registrationThrough)==null?void 0:R.map((a,s)=>r.jsx("option",{value:a.id,children:a.registration_through},s))]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.applyThrough&&l.errors.applyThrough?l.errors.applyThrough:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"holdingNo",children:["Holding / SAF No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...l.getFieldProps("holdingNo"),name:"holdingNo",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),f&&(f==null?void 0:f.map((a,s)=>r.jsx("option",{value:(a==null?void 0:a.saf_no)||(a==null?void 0:a.new_holding_no),children:(a==null?void 0:a.saf_no)||(a==null?void 0:a.new_holding_no)},s)))]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.holdingNo&&l.errors.holdingNo?l.errors.holdingNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"categoryApplication",children:["Category of Application",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...l.getFieldProps("categoryApplication"),name:"categoryApplication",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(c==null?void 0:c.ownertype)&&((V=c==null?void 0:c.ownertype)==null?void 0:V.map((a,s)=>s===0?r.jsx("option",{value:a.id,children:a.owner_type},s):s===1&&(x!=null&&x.tenanted)?r.jsx("option",{value:a.id,children:a.owner_type},s):null))]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.categoryApplication&&l.errors.categoryApplication?l.errors.categoryApplication:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{type:"text",disabled:!0,...l.getFieldProps("ward"),value:(O=x==null?void 0:x.wardDetails)==null?void 0:O.wardNo,name:"ward",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.ward&&l.errors.ward?l.errors.ward:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),r.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 ",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:l.values.categoryApplication!=2,...l.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.applicantName&&l.errors.applicantName?l.errors.applicantName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:l.values.categoryApplication!=2,...l.getFieldProps("mobileNo"),type:"number",maxLength:"10",name:"mobileNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.mobileNo&&l.errors.mobileNo?l.errors.mobileNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsx("label",{className:e==null?void 0:e.label,htmlFor:"email",children:"Email"}),r.jsx("input",{...l.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.email&&l.errors.email?l.errors.email:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"panNo",children:["PAN No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("panNo"),maxLength:"10",type:"text",name:"panNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.panNo&&l.errors.panNo?l.errors.panNo:null})]})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("textarea",{disabled:l.values.categoryApplication!=2,...l.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.address&&l.errors.address?l.errors.address:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Pet Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petType",children:["Pet Type",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...l.getFieldProps("petType"),type:"text",name:"petType",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"1",children:"Dog"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.petType&&l.errors.petType?l.errors.petType:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petName",children:["Name of Pet",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.petName&&l.errors.petName?l.errors.petName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petGender",children:["Gender",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...l.getFieldProps("petGender"),type:"text",name:"petGender",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(E=c==null?void 0:c.petGender)==null?void 0:E.map((a,s)=>r.jsx("option",{value:a.id,children:a.pet_gender},s))]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.petGender&&l.errors.petGender?l.errors.petGender:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petBirthDate",children:["Date of Birth",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:new Date().toISOString().split("T")[0],className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.petBirthDate&&l.errors.petBirthDate?l.errors.petBirthDate:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"breed",children:["Breed",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("breed"),type:"text",maxLength:"20",name:"breed",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.breed&&l.errors.breed?l.errors.breed:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"color",children:["Color",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("color"),type:"text",maxLength:"20",name:"color",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.color&&l.errors.color?l.errors.color:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorName",children:["Veterinary Doctor Name",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("doctorName"),type:"text",maxLength:"70",name:"doctorName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.doctorName&&l.errors.doctorName?l.errors.doctorName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorRegNo",children:["Doctor’s MSVC/VCI number"," ",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("doctorRegNo"),type:"text",maxLength:"70",name:"doctorRegNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.doctorRegNo&&l.errors.doctorRegNo?l.errors.doctorRegNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfRabies",children:["Date of Rabies",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("dateOfRabies"),type:"date",name:"dateOfRabies",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.dateOfRabies&&l.errors.dateOfRabies?l.errors.dateOfRabies:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfLepVaccine",children:["Leptospirosis Vaccination Date",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...l.getFieldProps("dateOfLepVaccine"),type:"date",name:"dateOfLepVaccine",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.dateOfLepVaccine&&l.errors.dateOfLepVaccine?l.errors.dateOfLepVaccine:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petFrom",children:["Pet From",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...l.getFieldProps("petFrom"),name:"petFrom",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(D=c==null?void 0:c.occurenceType)==null?void 0:D.map((a,s)=>r.jsx("option",{value:a.id,children:a.occurrence_types},s))]}),r.jsx("p",{className:"text-red-500 text-xs",children:l.touched.petFrom&&l.errors.petFrom?l.errors.petFrom:null})]})]})]}),r.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>L(!w),children:[r.jsx("input",{type:"checkbox",checked:w,name:"",id:"",onChange:a=>L(a.target.checked)}),r.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),r.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:T&&T}),r.jsx("div",{className:"flex justify-center my-5 ",children:Z?r.jsx("p",{children:"Form Submitting.."}):r.jsx("button",{type:"submit",disabled:!w,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},Ae=()=>{const[N,h]=i.useState(1),[v,P]=i.useState(),{setBreadCrumbData:F}=i.useContext(W);return i.useEffect(()=>{F(["Apply Pet Registration"])},[]),r.jsx(r.Fragment,{children:r.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:r.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[r.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Pet Registration Application"}),r.jsxs("div",{className:"md:p-5 p-2",children:[r.jsxs("p",{className:`${N==1?"block":"hidden"}`,children:[" ",r.jsx(me,{screen:h,data:P})," "]}),r.jsxs("p",{className:`${N==2?"block":"hidden"}`,children:[" ",r.jsx(ne,{screen:h,data:v})]})]})]})})})};export{Ae as default};
