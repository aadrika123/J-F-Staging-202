import{r,a as H,g as J,c as K,d,o as Q,b as X,j as e,B as ee,p as te,G as se,i as N,l as S,q as ae,m as le,s as p,f as re}from"./index-43f947b8.js";import oe from"./MobileNoCard-2dabd61b.js";import ie from"./OtpCard-29b2f91f.js";const de="/assets/register-08bf8665.svg";function fe(){const[f,ne]=r.useState(),[ce,P]=r.useState(null);r.useState(null),r.useState(null),r.useState(null);const[g,h]=r.useState("");r.useState(""),r.useState(""),r.useState("");const[k,n]=r.useState(!1),[C,F]=r.useState(!0),[E,x]=r.useState(!1),[m,M]=r.useState(null);r.useState(!1),r.useState(!1),r.useState(!1),r.useState(!1);const[O,R]=r.useState(!1),[D,_]=r.useState(null),[me,c]=r.useState(null),u=H(),{notify:i}=r.useContext(J),{api_citizenRegister:z,api_sendMobileOtp:V}=re(),B=K().shape({name:d().required("Enter Your Name").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed"),mobile:d().required("Enter mobile no.").min(10,"Please Enter 10 Digit !").max(10,"Please Enter 10 Digit !"),email:d().min(8,"Minimum eight character"),password:d().min(6,"Minimum six character !").max(50,"Too Long!").required("Password required").matches(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password Must Contains (Capital, Smail, Number, Special) eg - Abc123#."),confirmPassword:d().label("confirm password").required().oneOf([Q("password"),null],"Passwords must match"),dob:d().required("Select DOB"),gender:d().required("Select Gender")}),t=X({initialValues:{name:"",mobile:"",email:"",password:"",confirmPassword:"",dob:"",gender:"",photo:""},onSubmit:(l,{setSubmitting:s})=>{console.log("post data",l),s(!1),q(l)},validationSchema:B}),q=l=>{n(!0);let s=new FormData;s.append("name",l.name),s.append("mobile",l.mobile),s.append("email",l.email),s.append("password",l.password),s.append("dob",l.dob),s.append("gender",l.gender),g&&s.append("photo",g),N.post(z,s).then(function(a){var w,j,v,y;console.log("You have Registered successfully !",a),((w=a==null?void 0:a.data)==null?void 0:w.status)===!0?(u("/login"),i("You have Registered successfully !","success")):(console.log("Registration Failed",(j=a==null?void 0:a.data)==null?void 0:j.status),i(S((v=a==null?void 0:a.data)==null?void 0:v.message),"error"),o(!0,S((y=a==null?void 0:a.data)==null?void 0:y.message))),n(!1)}).catch(a=>{console.log("err",a),n(!1),o(!0,"Oops! Please try again later"),i("Oops! Please try again later","error")})},L=l=>{if(l.target.name==="photo"){let a=l.target.files[0];P(URL.createObjectURL(l.target.files[0])),a&&h(l.target.files[0]),a==null&&h(null);return}},T=l=>{let s=l.target.name,a=l.target.value;s==="name"&&t.setFieldValue("name",ae(a,t.values.name,100)),s==="mobile"&&t.setFieldValue("mobile",le(a,t.values.mobile,10)),s==="email"&&t.setFieldValue("email",p(a,t.values.email,50)),s==="password"&&t.setFieldValue("password",p(a,t.values.password,50)),s==="confirmPassword"&&t.setFieldValue("confirmPassword",p(a,t.values.confirmPassword,50)),(s==="aadharDoc"||s==="armedForceDoc"||s==="speciallyAbledDoc"||s==="photo")&&L(l)},A=()=>{i("Mobile no. has been verified successfully !","success"),x(!1)},I=()=>{console.log("otp send..."),n(!0);let l={mobileNo:m};console.log("before send otp...",l),N.post(V,l).then(s=>{var a;console.log("otp send response",s==null?void 0:s.data),(a=s==null?void 0:s.data)!=null&&a.status?i("OTP has been re-send to your mobile no.","success"):i("Problem in sending OTP","error"),n(!1)}).catch(s=>{console.log("error otp send",s),i("Something went wrong...","error"),n(!1)})};r.useEffect(()=>{t.setFieldValue("mobile",m)},[m]);const b=new Date,G=new Date(b.getFullYear(),b.getMonth(),b.getDate()),$=()=>{u("/login")},U=()=>{u("/login")},o=(l,s)=>{_(s),R(l)},Y=()=>{if(t.values.name===""){c("id_name"),o(!0,"Please enter your name");return}if(t.values.email===""){c("id_email"),o(!0,"Please enter your email");return}if(t.values.password===""){c("id_password"),o(!0,"Please enter password");return}if(t.values.confirmPassword===""){c("id_confirmPassword"),o(!0,"Please confirm password");return}if(t.values.dob===""){c("id_dob"),o(!0,"Please enter dob");return}if(t.values.gender===""){c("id_gender"),o(!0,"Please select gender");return}};r.useRef(null);const Z=()=>{o(!1,"")},W=l=>{l.preventDefault(),Y(),t.handleSubmit()};return C?e.jsx(oe,{closeMobileModal:$,headTitle:"Citizen Registration",title:"Enter mobile to register account",desc:"Enter your mobile no, which is attached to a holding or will be attached.",cardFor:"Register",setverifedMobileNo:M,setmobileCardStatus:F,setotpCardStatus:x}):E?e.jsx(ie,{closeOtpModal:U,bottomNaviation:!0,headTitle:"Citizen Registration",reSendOtp:I,verifedMobileNo:m,callback:A,setotpCardStatus:x}):e.jsxs(e.Fragment,{children:[k&&e.jsx(ee,{}),O&&e.jsx(te,{activateBottomErrorCard:Z,errorTitle:D}),e.jsxs("form",{className:"h-full w-full flex justify-between overflow-auto",onSubmit:W,onChange:T,children:[e.jsx("div",{className:"hidden w-[45%] bg-slate-100 md:py-10 md:px-10 md:flex justify-center items-center",children:e.jsx("img",{src:de,alt:"",srcset:"",className:"w-[60%] hue-rotate-[-38deg]"})}),e.jsx("div",{className:"w-full md:w-[55%] flex justify-center items-center",children:e.jsxs("div",{className:"md:py-10 px-4 md:px-10",children:[e.jsx("div",{className:"block text-center mb-0 md:mb-6 ",children:e.jsx("h1",{className:"font-bold text-xl text-gray-800 mt-2 md:mt-0",children:e.jsx("span",{className:" border-b-2 border-b-[#6c8351]",children:"Citizen Registration"})})}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{id:"id_name",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 md:relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-account-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"text",className:"w-full -ml-10 text-sm pl-2 h-10 pr-3 py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...t.getFieldProps("name"),placeholder:"Enter your name"}),t.errors.name&&t.touched.name?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:t.errors.name}):null]})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Mobile No.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex relative",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-account-outline text-gray-400 text-lg h-10"})}),e.jsx("input",{disabled:!0,type:"text",maxlength:"10",className:"w-full -ml-10 text-sm pl-2  pr-3 py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...t.getFieldProps("mobile"),placeholder:"Enter your mobile no."}),e.jsx("span",{className:"absolute right-0 top-2",children:e.jsx(se,{className:"inline text-green-500 text-xl"})}),t.errors.mobile&&t.touched.mobile?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:t.errors.mobile}):null]})]}),e.jsxs("div",{id:"id_email",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsx("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:"Email"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-email-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"text",className:"w-full -ml-10 text-sm pl-2 h-10  py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...t.getFieldProps("email"),placeholder:"Enter your email"}),t.errors.email&&t.touched.email?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:t.errors.email}):null]})]}),e.jsxs("div",{id:"id_password",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Password",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-lock-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"password",className:"w-full -ml-10 text-sm pl-2 h-10  py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...t.getFieldProps("password"),placeholder:"Enter your password"}),t.errors.password&&t.touched.password?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:t.errors.password}):null]})]}),e.jsxs("div",{id:"id_confirmPassword",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Confirm Password",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 h-10 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-lock-outline text-gray-400 text-lg shadow-sm "})}),e.jsx("input",{type:"password",className:"w-full -ml-10 text-sm pl-2  py-2 rounded-lg outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...t.getFieldProps("confirmPassword"),placeholder:"Renter your password"}),t.errors.confirmPassword&&t.touched.confirmPassword?e.jsx("div",{className:"text-red-600 absolute text-xs -bottom-4",children:t.errors.confirmPassword}):null]})]}),e.jsxs("div",{id:"id_dob",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{className:"inline-block font-semibold mb-2",children:["DOB ",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{max:G.toISOString().split("T")[0],...t.getFieldProps("dob"),type:"date",className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer"}),t.errors.dob&&t.touched.dob?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:t.errors.dob}):null]}),e.jsxs("div",{id:"id_gender",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{className:"inline-block font-semibold mb-2",children:["Gender ",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...t.getFieldProps("gender"),className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer",children:[e.jsx("option",{children:"select"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),t.errors.gender&&t.touched.gender?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:t.errors.gender}):null]}),e.jsxs("div",{id:"id_photo",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsx("label",{className:"inline-block font-semibold mb-2",children:"Photo"}),e.jsx("input",{...t.getFieldProps("photo"),accept:".pdf,.jpg,.jpeg,.png",type:"file",className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer"}),t.errors.photo&&t.touched.photo?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:t.errors.photo}):null]}),e.jsxs("div",{className:"col-span-12 ",children:[e.jsx("p",{className:"text-center text-red-600 font-semibold",children:f&&f}),e.jsx("div",{className:"w-full px-3 mb-5 text-center",children:e.jsx("button",{type:"submit",className:"mx-auto bg-[#99B37C] hover:scale-105 hover:bg-[#6c8351] focus:bg-[#6c8351] text-white rounded-lg px-12 py-3 font-semibold mt-5",children:"REGISTER NOW"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{onClick:()=>u("/login"),className:"hover:underline text-gray-600 font-semibold hover:bg-white px-3 py-1 cursor-pointer float-right",children:"Login"})})]})]})]})})]})]})}export{fe as default};
