import{j as e}from"./mui-8e804a04.js";import{r as o,a as E}from"./router-87042356.js";import{M as T}from"./index-4e794517.js";import{a as I}from"./index.esm-2e3a7c1f.js";import{F as M}from"./index.esm-f717eb21.js";import{m as R,A as k}from"./index-05e96c05.js";import{P as O}from"./PetRegAPIList-8d0d4399.js";const A="/assets/upload-2c8c7f58.gif",L={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function $(t){var g,f;const[N,r]=o.useState(),[v,p]=E.useState(!1),[u,b]=o.useState((g=t==null?void 0:t.payloadData)==null?void 0:g.doc_code);o.useState();const[l,h]=o.useState(),[n,d]=o.useState(!1),{notify:m}=o.useContext(R),{api_RigReUploadDocument:w,header1:D}=O(),s=t==null?void 0:t.payloadData,[S,_]=o.useState([{label:"License",value:"LICENSE"},{label:"Tax Copy",value:"TAXCOPY"},{label:"Fitness",value:"FITNESS"}]);console.log("Props Data in Doc upload modal..",s),o.useEffect(()=>{p(!0)},[]);function F(){}function x(){p(!1),b(),h(),t.close(!1)}const P=a=>{var y,j;if(a.preventDefault(),u==null||u==""||l==null||l=="")return r("Please Select Correct File and Type");const U=["jpg","jpeg","png","pdf"],C=(y=l==null?void 0:l.name)==null?void 0:y.split(".").pop().toLowerCase();if(!U.includes(C)){r("Invalid file extension");return}let c=new FormData;c.append("image",l),c.append("id",(j=t==null?void 0:t.payloadData)==null?void 0:j.id),console.log("Form Data Payload",c),d(!0),k.post(w,c,D).then(i=>{i.data.status==!0?(m("Document Uploaded Successfully","success"),console.log("Data Uploaded",i),d(!1),x(),t.refetch()):(d(!1),m("Failed to Upload Document","error"),r("Failed to upload file. Please Select Proper File."))}).catch(i=>{d(!1),m("Something went wrong","error"),r("Failed to upload file. Please Select Proper File."),console.log("Expection...",i)})};return e.jsx("div",{className:" overflow-auto",children:e.jsx(T,{isOpen:v,onAfterOpen:F,onRequestClose:x,style:L,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:P,children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:x,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(I,{})]}),e.jsx("h1",{className:"font-semibold md:text-xl text-sm text-gray-700",children:"Upload Document"})]}),e.jsxs("div",{className:"md:inline-block max-sm:w-[20rem] overflow-auto p-4",children:[e.jsxs("table",{className:"leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap capitalize",children:(f=s==null?void 0:s.doc_code)==null?void 0:f.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:a=>b(a.target.value),className:"outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{value:"",children:"Select Document"}),console.log("asdasdasdasd",s),S.map(a=>e.jsx("option",{value:a.value,selected:(s==null?void 0:s.doc_code)==a.value,children:a.label},a.value))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:n,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:a=>h(a.target.files[0])}),e.jsxs("label",{className:` ${n?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(M,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:n?e.jsx("img",{className:"h-8",src:A,alt:"Uploading"}):e.jsx("button",{disabled:n,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:N})})]})]})})})})}export{$ as P};
