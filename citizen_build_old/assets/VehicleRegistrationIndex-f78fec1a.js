import{j as r}from"./mui-105b4636.js";import{r as o}from"./router-894402c5.js";import{l as z,c as ie,d as t,u as te,A as x,B as oe,i as j}from"./index-0ba2dd6b.js";import{F as ne}from"./PetAccordionPage-84d76eaf.js";import{W as ce}from"./WaterApiList-26fa7f5b.js";import{P as de}from"./PetRegAPIList-8474b1a7.js";import"./react-40db4358.js";import"./axios-67d8a945.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";const e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},pe=u=>{var T,C,V,K;const[m,F]=o.useState(),[q,v]=o.useState(),[n,Z]=o.useState(),[f,L]=o.useState(!1),[M,w]=o.useState(!1),[P,A]=o.useState(!1),{notify:S}=o.useContext(z),[b,y]=o.useState(),[h,W]=o.useState(),[H,c]=o.useState(!1),{api_ulbList:U,header:N,api_wardList:Y}=ce(),{api_PetRegistrationApplyForm:J,api_PetRegistrationMaster:Q,api_ListOfSafHolding:X,api_getUserDetailsByHoldingSaf:ee,header1:re}=de(),ae=ie({ulb:t().required("Kindly enter a value."),applicantName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),applyThrough:t().required("Kindly enter a value."),holdingNo:t().required("Kindly enter a value."),categoryApplication:t().required("Kindly enter a value."),ward:t().required("Kindly enter a value."),mobileNo:t().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:t().email().required("Kindly enter a value."),panNo:t().matches(/^[A-Za-z0-9]{10}$/,"Enter 10 Character PAN No.").required("Kindly enter a value."),petType:t().required("Kindly enter a value."),petName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),petGender:t().required("Kindly enter a value."),petBirthDate:t().required("Kindly enter a value."),breed:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),color:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorRegNo:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),dateOfRabies:t().required("Kindly enter a value."),dateOfLepVaccine:t().required("Kindly enter a value."),petFrom:t().required("Kindly enter a value.")}),s=te({initialValues:{ulb:"",applicantName:"",applyThrough:"",holdingNo:"",categoryApplication:"",ward:"",mobileNo:"",email:"",panNo:"",address:"",petType:"",petName:"",petGender:"",petBirthDate:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(a,l)=>{le(a)},validationSchema:ae}),se=a=>{let l=a.target.name,i=a.target.value;A(!1),l=="color"&&s.setFieldValue("color",j(i,s.values.color,20)),l=="doctorName"&&s.setFieldValue("doctorName",j(i,s.values.doctorName,20)),l=="breed"&&s.setFieldValue("breed",j(i,s.values.breed,20)),l=="petName"&&s.setFieldValue("petName",j(i,s.values.petName,20)),l=="doctorName"&&s.setFieldValue("doctorName",j(i,s.values.doctorName,20))},le=a=>{w(!0);const l={address:a==null?void 0:a.address,applyThrough:a==null?void 0:a.applyThrough,propertyNo:a==null?void 0:a.holdingNo,breed:a==null?void 0:a.breed,ownerCategory:a==null?void 0:a.categoryApplication,color:a==null?void 0:a.color,dateOfLepVaccine:a==null?void 0:a.dateOfLepVaccine,dateOfRabies:a==null?void 0:a.dateOfRabies,doctorName:a==null?void 0:a.doctorName,doctorRegNo:a==null?void 0:a.doctorRegNo,panNo:a==null?void 0:a.panNo,petBirthDate:a==null?void 0:a.petBirthDate,petFrom:a==null?void 0:a.petFrom,petGender:a==null?void 0:a.petGender,petName:a==null?void 0:a.petName,petType:a==null?void 0:a.petType,ulbId:a==null?void 0:a.ulb,ward:a==null?void 0:a.ward,applicantName:a==null?void 0:a.applicantName,mobileNo:a==null?void 0:a.mobileNo,email:a==null?void 0:a.email,panNo:a==null?void 0:a.panNo};x.post(J,l,N).then(i=>{var d,p,g;w(!1),i.data.status?(u.data(i.data.data),u.screen(2),S((d=i==null?void 0:i.data)==null?void 0:d.message,"success")):(S((p=i==null?void 0:i.data)==null?void 0:p.message,"error"),A((g=i==null?void 0:i.data)==null?void 0:g.message))}).catch(i=>{var d,p;A((p=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:p.error),S("Something Went wrong","error"),w(!1)})};return o.useEffect(()=>{x.post(Q,{},re).then(a=>{a.data.status&&Z(a.data.data)}).catch(a=>{})},[]),o.useEffect(()=>{x.get(U,N).then(a=>{a.data.status&&F(a.data.data)}).catch(a=>{})},[]),o.useEffect(()=>{c(!0),x.post(Y,{ulbId:s.values.ulb},N).then(a=>{c(!1),a.data.status&&v(a.data.data)}).catch(a=>{c(!1)})},[s.values.ulb]),o.useEffect(()=>{c(!0);let a;s.values.applyThrough==1&&(a="holding"),s.values.applyThrough==2&&(a="saf");const l={type:a,ulbId:s.values.ulb};x.post(X,l,N).then(i=>{c(!1),i.data.status&&y(i.data.data)}).catch(i=>{c(!1)})},[s.values.ulb,s.values.applyThrough]),o.useEffect(()=>{c(!0);const a={connectionThrough:s.values.applyThrough,id:s.values.holdingNo,ulbId:s.values.ulb};x.post(ee,a,N).then(l=>{var i,d,p,g,R,_,B,D,I,k,G,E,O,$;c(!1),l.data.status&&(W(l.data.data),s.setFieldValue("address",(d=(i=l==null?void 0:l.data)==null?void 0:i.data)==null?void 0:d.prop_address),s.setFieldValue("ward",(R=(g=(p=l==null?void 0:l.data)==null?void 0:p.data)==null?void 0:g.wardDetails)==null?void 0:R.wardId),s.setFieldValue("applicantName",(D=(B=(_=l==null?void 0:l.data)==null?void 0:_.data)==null?void 0:B.owners[0])==null?void 0:D.ownerName),s.setFieldValue("mobileNo",(G=(k=(I=l==null?void 0:l.data)==null?void 0:I.data)==null?void 0:k.owners[0])==null?void 0:G.mobileNo),s.setFieldValue("email",($=(O=(E=l==null?void 0:l.data)==null?void 0:E.data)==null?void 0:O.owners[0])==null?void 0:$.email))}).catch(l=>{c(!1)})},[s.values.holdingNo,s.values.applyThrough]),r.jsxs(r.Fragment,{children:[H&&r.jsx(oe,{}),r.jsxs("form",{onSubmit:s.handleSubmit,onChange:se,children:[r.jsxs("div",{className:"overflow-y-auto ",children:[r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),m==null?void 0:m.map((a,l)=>r.jsx("option",{value:a.id,children:a.ulb_name},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.ulb&&s.errors.ulb?s.errors.ulb:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applyThrough",children:["Apply Through",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("applyThrough"),name:"applyThrough",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(T=n==null?void 0:n.registrationThrough)==null?void 0:T.map((a,l)=>r.jsx("option",{value:a.id,children:a.registration_through},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.applyThrough&&s.errors.applyThrough?s.errors.applyThrough:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"holdingNo",children:["Holding / SAF No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("holdingNo"),name:"holdingNo",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),b&&(b==null?void 0:b.map((a,l)=>r.jsx("option",{value:(a==null?void 0:a.saf_no)||(a==null?void 0:a.new_holding_no),children:(a==null?void 0:a.saf_no)||(a==null?void 0:a.new_holding_no)},l)))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.holdingNo&&s.errors.holdingNo?s.errors.holdingNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"categoryApplication",children:["Category of Application",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("categoryApplication"),name:"categoryApplication",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(n==null?void 0:n.ownertype)&&((C=n==null?void 0:n.ownertype)==null?void 0:C.map((a,l)=>l===0?r.jsx("option",{value:a.id,children:a.owner_type},l):l===1&&(h!=null&&h.tenanted)?r.jsx("option",{value:a.id,children:a.owner_type},l):null))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.categoryApplication&&s.errors.categoryApplication?s.errors.categoryApplication:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{type:"text",disabled:!0,...s.getFieldProps("ward"),value:(V=h==null?void 0:h.wardDetails)==null?void 0:V.wardNo,name:"ward",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.ward&&s.errors.ward?s.errors.ward:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),r.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 ",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.applicantName&&s.errors.applicantName?s.errors.applicantName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("mobileNo"),type:"number",maxLength:"10",name:"mobileNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.mobileNo&&s.errors.mobileNo?s.errors.mobileNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsx("label",{className:e==null?void 0:e.label,htmlFor:"email",children:"Email"}),r.jsx("input",{...s.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.email&&s.errors.email?s.errors.email:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"panNo",children:["PAN No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("panNo"),maxLength:"10",type:"text",name:"panNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.panNo&&s.errors.panNo?s.errors.panNo:null})]})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("textarea",{disabled:s.values.categoryApplication!=2,...s.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.address&&s.errors.address?s.errors.address:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Vehicle Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petName",children:["Name of Driver",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petName&&s.errors.petName?s.errors.petName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petGender",children:["Gender",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...s.getFieldProps("petGender"),type:"text",name:"petGender",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(K=n==null?void 0:n.petGender)==null?void 0:K.map((a,l)=>r.jsx("option",{value:a.id,children:a.pet_gender},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petGender&&s.errors.petGender?s.errors.petGender:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petBirthDate",children:["Date of Birth",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:new Date().toISOString().split("T")[0],className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petBirthDate&&s.errors.petBirthDate?s.errors.petBirthDate:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"vehComp",children:["Vehicle Company",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("vehComp"),maxLength:"50",type:"text",name:"vehComp",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petFrom&&s.errors.petFrom?s.errors.petFrom:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"vehFrom",children:["Vehicle From",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("vehFrom"),maxLength:"50",type:"text",name:"vehFrom",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petFrom&&s.errors.petFrom?s.errors.petFrom:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"Fitness",children:["Fitness",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("Fitness"),maxLength:"50",type:"file",name:"Fitness",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petFrom&&s.errors.petFrom?s.errors.petFrom:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"taxCopy",children:["Tax Copy",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("taxCopy"),maxLength:"50",type:"file",name:"taxCopy",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petFrom&&s.errors.petFrom?s.errors.petFrom:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"license",children:["License",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...s.getFieldProps("license"),maxLength:"50",type:"file",name:"license",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petFrom&&s.errors.petFrom?s.errors.petFrom:null})]})]})]}),r.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>L(!f),children:[r.jsx("input",{type:"checkbox",checked:f,name:"",id:"",onChange:a=>L(a.target.checked)}),r.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),r.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:P&&P}),r.jsx("div",{className:"flex justify-center my-5 ",children:M?r.jsx("p",{children:"Form Submitting.."}):r.jsx("button",{type:"submit",disabled:!f,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},Ae=()=>{const[u,m]=o.useState(1),[F,q]=o.useState(),{setBreadCrumbData:v}=o.useContext(z);return o.useEffect(()=>{v(["Apply Pet Registration"])},[]),r.jsx(r.Fragment,{children:r.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:r.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[r.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Rig (HYDT) Registration Application"}),r.jsxs("div",{className:"md:p-5 p-2",children:[r.jsxs("p",{className:`${u==1?"block":"hidden"}`,children:[" ",r.jsx(pe,{screen:m,data:q})," "]}),r.jsxs("p",{className:`${u==2?"block":"hidden"}`,children:[" ",r.jsx(ne,{screen:m,data:F})]})]})]})})})};export{Ae as default};
