import{j as e}from"./mui-105b4636.js";import{r as a,u as W}from"./router-894402c5.js";import{l as H,c as J,d,s as K,u as Q,q as y,Y as X,g as ee,a4 as b}from"./index-3d360d02.js";import{a as N}from"./axios-67d8a945.js";import{C as se}from"./CitizenApplyApiList-a0c53c21.js";import{B as te}from"./BarLoader-d2bbcf84.js";import re from"./MobileNoCard-f138ea01.js";import ae from"./OtpCard-2ec7bc0d.js";import{G as le}from"./index.esm-431e029b.js";import"./CommonModal-1a38119d.js";import{B as oe}from"./BottomErrorCard-892eaca1.js";import"./react-40db4358.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";import"./index-82be3ecd.js";const ie="/assets/register-08bf8665.svg";function Ee(){const[f,de]=a.useState(),[ne,S]=a.useState(null);a.useState(null),a.useState(null),a.useState(null);const[g,h]=a.useState("");a.useState(""),a.useState(""),a.useState("");const[P,n]=a.useState(!1),[C,k]=a.useState(!0),[E,x]=a.useState(!1),[m,F]=a.useState(null);a.useState(!1),a.useState(!1),a.useState(!1),a.useState(!1);const[M,O]=a.useState(!1),[D,R]=a.useState(null),[ce,c]=a.useState(null),u=W(),{notify:i}=a.useContext(H),{api_citizenRegister:_,api_sendMobileOtp:z}=se(),V=J().shape({name:d().required("Enter Your Name").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed"),mobile:d().required("Enter mobile no.").min(10,"Please Enter 10 Digit !").max(10,"Please Enter 10 Digit !"),email:d().min(8,"Minimum eight character"),password:d().min(6,"Minimum six character !").max(50,"Too Long!").required("Password required").matches(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password Must Contains (Capital, Smail, Number, Special) eg - Abc123#."),confirmPassword:d().label("confirm password").required().oneOf([K("password"),null],"Passwords must match"),dob:d().required("Select DOB"),gender:d().required("Select Gender")}),s=Q({initialValues:{name:"",mobile:"",email:"",password:"",confirmPassword:"",dob:"",gender:"",photo:""},onSubmit:(r,{setSubmitting:t})=>{t(!1),B(r)},validationSchema:V}),B=r=>{n(!0);let t=new FormData;t.append("name",r.name),t.append("mobile",r.mobile),t.append("email",r.email),t.append("password",r.password),t.append("dob",r.dob),t.append("gender",r.gender),g&&t.append("photo",g),N.post(_,t).then(function(l){var w,j,v;((w=l==null?void 0:l.data)==null?void 0:w.status)===!0?(u("/login"),i("You have Registered successfully !","success")):(i(y((j=l==null?void 0:l.data)==null?void 0:j.message),"error"),o(!0,y((v=l==null?void 0:l.data)==null?void 0:v.message))),n(!1)}).catch(l=>{n(!1),o(!0,"Oops! Please try again later"),i("Oops! Please try again later","error")})},q=r=>{if(r.target.name==="photo"){let l=r.target.files[0];S(URL.createObjectURL(r.target.files[0])),l&&h(r.target.files[0]),l==null&&h(null);return}},L=r=>{let t=r.target.name,l=r.target.value;t==="name"&&s.setFieldValue("name",X(l,s.values.name,100)),t==="mobile"&&s.setFieldValue("mobile",ee(l,s.values.mobile,10)),t==="email"&&s.setFieldValue("email",b(l,s.values.email,50)),t==="password"&&s.setFieldValue("password",b(l,s.values.password,50)),t==="confirmPassword"&&s.setFieldValue("confirmPassword",b(l,s.values.confirmPassword,50)),(t==="aadharDoc"||t==="armedForceDoc"||t==="speciallyAbledDoc"||t==="photo")&&q(r)},T=()=>{i("Mobile no. has been verified successfully !","success"),x(!1)},A=()=>{n(!0);let r={mobileNo:m};N.post(z,r).then(t=>{var l;(l=t==null?void 0:t.data)!=null&&l.status?i("OTP has been re-send to your mobile no.","success"):i("Problem in sending OTP","error"),n(!1)}).catch(t=>{i("Something went wrong...","error"),n(!1)})};a.useEffect(()=>{s.setFieldValue("mobile",m)},[m]);const p=new Date,I=new Date(p.getFullYear(),p.getMonth(),p.getDate()),G=()=>{u("/login")},$=()=>{u("/login")},o=(r,t)=>{R(t),O(r)},U=()=>{if(s.values.name===""){c("id_name"),o(!0,"Please enter your name");return}if(s.values.email===""){c("id_email"),o(!0,"Please enter your email");return}if(s.values.password===""){c("id_password"),o(!0,"Please enter password");return}if(s.values.confirmPassword===""){c("id_confirmPassword"),o(!0,"Please confirm password");return}if(s.values.dob===""){c("id_dob"),o(!0,"Please enter dob");return}if(s.values.gender===""){c("id_gender"),o(!0,"Please select gender");return}};a.useRef(null);const Y=()=>{o(!1,"")},Z=r=>{r.preventDefault(),U(),s.handleSubmit()};return C?e.jsx(re,{closeMobileModal:G,headTitle:"Citizen Registration",title:"Enter mobile to register account",desc:"Enter your mobile no, which is attached to a holding or will be attached.",cardFor:"Register",setverifedMobileNo:F,setmobileCardStatus:k,setotpCardStatus:x}):E?e.jsx(ae,{closeOtpModal:$,bottomNaviation:!0,headTitle:"Citizen Registration",reSendOtp:A,verifedMobileNo:m,callback:T,setotpCardStatus:x}):e.jsxs(e.Fragment,{children:[P&&e.jsx(te,{}),M&&e.jsx(oe,{activateBottomErrorCard:Y,errorTitle:D}),e.jsxs("form",{className:"h-full w-full flex justify-between overflow-auto",onSubmit:Z,onChange:L,children:[e.jsx("div",{className:"hidden w-[45%] bg-slate-100 md:py-10 md:px-10 md:flex justify-center items-center",children:e.jsx("img",{src:ie,alt:"",srcset:"",className:"w-[60%] hue-rotate-[-38deg]"})}),e.jsx("div",{className:"w-full md:w-[55%] flex justify-center items-center",children:e.jsxs("div",{className:"md:py-10 px-4 md:px-10",children:[e.jsx("div",{className:"block text-center mb-0 md:mb-6 ",children:e.jsx("h1",{className:"font-bold text-xl text-gray-800 mt-2 md:mt-0",children:e.jsx("span",{className:" border-b-2 border-b-[#6c8351]",children:"Citizen Registration"})})}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{id:"id_name",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 md:relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-account-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"text",className:"w-full -ml-10 text-sm pl-2 h-10 pr-3 py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...s.getFieldProps("name"),placeholder:"Enter your name"}),s.errors.name&&s.touched.name?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:s.errors.name}):null]})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Mobile No.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex relative",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-account-outline text-gray-400 text-lg h-10"})}),e.jsx("input",{disabled:!0,type:"text",maxlength:"10",className:"w-full -ml-10 text-sm pl-2  pr-3 py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...s.getFieldProps("mobile"),placeholder:"Enter your mobile no."}),e.jsx("span",{className:"absolute right-0 top-2",children:e.jsx(le,{className:"inline text-green-500 text-xl"})}),s.errors.mobile&&s.touched.mobile?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:s.errors.mobile}):null]})]}),e.jsxs("div",{id:"id_email",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsx("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:"Email"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-email-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"text",className:"w-full -ml-10 text-sm pl-2 h-10  py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...s.getFieldProps("email"),placeholder:"Enter your email"}),s.errors.email&&s.touched.email?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:s.errors.email}):null]})]}),e.jsxs("div",{id:"id_password",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Password",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-lock-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"password",className:"w-full -ml-10 text-sm pl-2 h-10  py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...s.getFieldProps("password"),placeholder:"Enter your password"}),s.errors.password&&s.touched.password?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:s.errors.password}):null]})]}),e.jsxs("div",{id:"id_confirmPassword",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Confirm Password",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 h-10 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-lock-outline text-gray-400 text-lg shadow-sm "})}),e.jsx("input",{type:"password",className:"w-full -ml-10 text-sm pl-2  py-2 rounded-lg outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...s.getFieldProps("confirmPassword"),placeholder:"Renter your password"}),s.errors.confirmPassword&&s.touched.confirmPassword?e.jsx("div",{className:"text-red-600 absolute text-xs -bottom-4",children:s.errors.confirmPassword}):null]})]}),e.jsxs("div",{id:"id_dob",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{className:"inline-block font-semibold mb-2",children:["DOB ",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{max:I.toISOString().split("T")[0],...s.getFieldProps("dob"),type:"date",className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer"}),s.errors.dob&&s.touched.dob?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:s.errors.dob}):null]}),e.jsxs("div",{id:"id_gender",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{className:"inline-block font-semibold mb-2",children:["Gender ",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...s.getFieldProps("gender"),className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer",children:[e.jsx("option",{children:"select"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),s.errors.gender&&s.touched.gender?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:s.errors.gender}):null]}),e.jsxs("div",{id:"id_photo",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsx("label",{className:"inline-block font-semibold mb-2",children:"Photo"}),e.jsx("input",{...s.getFieldProps("photo"),accept:".pdf,.jpg,.jpeg,.png",type:"file",className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer"}),s.errors.photo&&s.touched.photo?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:s.errors.photo}):null]}),e.jsxs("div",{className:"col-span-12 ",children:[e.jsx("p",{className:"text-center text-red-600 font-semibold",children:f&&f}),e.jsx("div",{className:"w-full px-3 mb-5 text-center",children:e.jsx("button",{type:"submit",className:"mx-auto bg-[#99B37C] hover:scale-105 hover:bg-[#6c8351] focus:bg-[#6c8351] text-white rounded-lg px-12 py-3 font-semibold mt-5",children:"REGISTER NOW"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{onClick:()=>u("/login"),className:"hover:underline text-gray-600 font-semibold hover:bg-white px-3 py-1 cursor-pointer float-right",children:"Login"})})]})]})]})})]})]})}export{Ee as default};
