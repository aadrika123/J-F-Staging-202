import{j as e}from"./mui-d8134288.js";import{r as t,f as a,u as o}from"./router-a70afc62.js";import{z as r,W as s,c as i,d as l,u as n,f as d,M as m}from"./index-1c8a2e08.js";import{a as c}from"./axios-0f103e9d.js";import{C as p}from"./ChatBot-cd2b9338.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const u={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}},h=()=>{const[h,b]=t.useState(!1),[g,x]=t.useState(!1),[f,w]=t.useState();a();const{notify:v}=t.useContext(r),[N,y]=t.useState(""),[k,S]=t.useState(!1);t.useState(!1);const A=o(),{consumerId:C}=a(),{api_applywaterdisconnection:j,header:D}=s(),z=i().shape({remarks:l().required("Remarks is required"),address:l().required("Address is required"),reason:l().required("Address is required"),document:l().required("Document  is required")}),F=n({initialValues:{feruleCleaning:!1,pipeShifting:!1,remarks:"",reason:"",address:"",mobileNo:"",document:""},validationSchema:z,onSubmit:e=>{x(!0);let t=new FormData;t.append("consumerId",C),t.append("remarks",null==e?void 0:e.remarks),t.append("reason",null==e?void 0:e.reason),t.append("mobileNo",null==e?void 0:e.mobileNo),t.append("address",null==e?void 0:e.address),t.append("documents[2][image]",e.document),t.append("documents[2][docCode]","Soft Copy Of Ofline form"),t.append("documents[2][ownerDtlId]",""),c.post(j,t,D).then(e=>{var t,a,o;1==e.data.status?(w(null==(t=null==e?void 0:e.data)?void 0:t.data),x(!1),b(!0)):(x(!1),y(" "+(null==(a=null==e?void 0:e.data)?void 0:a.message)),v(null==(o=null==e?void 0:e.data)?void 0:o.message,"error"))}).catch(e=>{x(!1),y("Exception While Apply"),v("Something Went Wrong","error")})}});return e.jsxs("div",{children:[g&&e.jsx(d,{}),e.jsx("div",{className:"justify-items-start p-5 max-sm:p-0  w-full",children:e.jsxs("div",{className:" w-full h-full",children:[e.jsxs("p",{className:"border p-2 bg-indigo-600 text-white rounded shadow-md text-center text-xl font-bold",children:["You are Applying for ",e.jsx("span",{className:"font-semibold",children:"Water Disconnection"})]}),e.jsx("div",{className:"bg-white rounded-md my-2 shadow-lg p-4  ",children:e.jsxs("form",{onSubmit:F.handleSubmit,children:[e.jsx("div",{className:"flex justify-end absolute top-32 h-[40%] w-[50%] max-sm:hidden ml-[38%]",children:e.jsx("img",{src:"/assets/watertap-7e473123.png",alt:"water tap"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"reason",className:"block text-gray-700 text-sm font-bold mb-2",children:"Reason:"}),e.jsx("input",{type:"text",id:"reason",name:"reason",className:"px-4 py-2 border rounded w-full sm:w-3/4 md:w-2/3 lg:w-1/2 text-sm",placeholder:"Enter your Reason",value:F.values.reason,onChange:F.handleChange}),F.errors.reason&&F.touched.reason&&e.jsx("div",{className:"text-red-500 text-xs",children:F.errors.reason})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"address",className:"block text-gray-700 text-sm font-bold mb-2",children:"Address:"}),e.jsx("input",{type:"text",id:"address",name:"address",className:"px-4 py-2 border rounded w-full sm:w-3/4 md:w-2/3 lg:w-1/2 text-sm",placeholder:"Enter your Address",value:F.values.address,onChange:F.handleChange}),F.errors.address&&F.touched.address&&e.jsx("div",{className:"text-red-500 text-xs",children:F.errors.address})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"mobileNo",className:"block text-gray-700 text-sm font-bold mb-2",children:"Updated Mobile Number:"}),e.jsx("input",{type:"text",id:"mobileNo",name:"mobileNo",className:"px-4 py-2 border rounded w-full sm:w-3/4 md:w-2/3 lg:w-1/2 text-sm",placeholder:"Enter your updated Mobile No",value:F.values.mobileNo,onChange:e=>{F.handleChange(e),((e,t)=>{if(t.includes("mobile")){const t=e.target.value;t.length>10&&(e.target.value=t.slice(0,10))}if(t.includes("zip")){const t=e.target.value;t.length>6&&(e.target.value=t.slice(0,6))}if(t.includes("partPayment")){const t=e.target.value;t.length>7&&(e.target.value=t.slice(0,7))}if(t.includes("floatNumber")&&(e.target.value=e.target.value.replace(/[^0-9.]/g,"")),t.includes("mReading")){const t=e.target.value;t.length>4&&(e.target.value=t.slice(0,4))}if(t.includes("aadhar")){const t=e.target.value;t.length>12&&(e.target.value=t.slice(0,12))}if(t.includes("removeDoubleSpace")&&(e.target.value=e.target.value.replace(/\s+/g," ")),t.includes("removeSpecialCharacter")&&(e.target.value=e.target.value.replace(/[^a-zA-Z0-9]/g,"")),t.includes("removeSpecialCharacterExceptSpace")&&(e.target.value=e.target.value.replace(/[^a-zA-Z0-9 ]/g,"")),t.includes("removeSpecialCharacterExceptSpaceAndDot")&&(e.target.value=e.target.value.replace(/[^a-zA-Z0-9 .]/g,"")),t.includes("sqlInjectionGuard")){const t=e.target.value;(t.includes("drop")||t.includes("select"))&&(e.target.value="")}if(t.includes("address")&&(e.target.value=e.target.value.replace(/[^a-zA-Z0-9 ,]/g,"")),t.includes("phone")&&(e.target.value=e.target.value.replace(/[^0-9]/g,"")),t.includes("email")&&(e.target.value=e.target.value.replace(/[^a-zA-Z0-9@.]/g,"")),t.includes("string")&&(e.target.value=e.target.value.replace(/[^a-zA-Z ]/g,"")),t.includes("number")&&(e.target.value=e.target.value.replace(/[^0-9]/g,"")),t.includes("removeDoubleQuote")&&(e.target.value=e.target.value.replace(/"/g,"")),t.includes("removeSingleQuote")&&(e.target.value=e.target.value.replace(/'/g,"")),t.includes("removeSpecialCharacterWithDoubleSpace")&&(e.target.value=e.target.value.replace(/[^a-zA-Z0-9 ]/g,""),e.target.value=e.target.value.replace(/\s+/g," ")),t.includes("CapitalFirstLetter")){const t=e.target.value;e.target.value=t.charAt(0).toUpperCase()+t.slice(1)}t.includes("UppercaseAfterSpace")&&(e.target.value=e.target.value.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")),t.includes("Uppercase")&&(e.target.value=e.target.value.toUpperCase()),t.includes("removeSpace")&&(e.target.value=e.target.value.replace(/\s+/g,"")),t.includes("password")&&(e.target.value=e.target.value.replace(/[^a-zA-Z0-9@#$%^&*]/g,"")),t.includes("Lowercase")&&(e.target.value=e.target.value.toLowerCase()),t.includes("none")&&(e.target.value=e.target.value)})(e,["mobile","number"])}}),F.errors.mobileNo&&F.touched.mobileNo&&e.jsx("div",{className:"text-red-500 text-xs",children:F.errors.mobileNo})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"document",className:"block text-gray-700 text-sm font-bold mb-2",children:"Upload Soft Copy of Water Disconnection Form:"}),e.jsx("input",{type:"file",id:"document",name:"document",className:"px-4 py-2 border rounded w-full sm:w-3/4 md:w-2/3 lg:w-1/2 text-sm",placeholder:"Upload Document",onChange:e=>{F.setFieldValue("document",e.currentTarget.files[0])}}),F.errors.document&&F.touched.document&&e.jsx("div",{className:"text-red-500 text-xs",children:F.errors.document})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"remarks",className:"block text-gray-700 text-sm font-bold mb-2",children:"Remarks:"}),e.jsx("textarea",{id:"remarks",name:"remarks",className:"px-4 py-2 border rounded w-full sm:w-3/4 md:w-2/3 lg:w-1/2 text-sm",placeholder:"Enter any additional remarks...",value:F.values.remarks,onChange:F.handleChange}),F.errors.remarks&&F.touched.remarks&&e.jsx("div",{className:"text-red-500 text-xs",children:F.errors.remarks})]}),N&&e.jsxs("div",{className:"text-center text-red-600 font-semibold mb-3",children:["Error: ",N]}),e.jsxs("div",{className:"w-full m-2",children:[e.jsxs("label",{htmlFor:"declaration",className:"inline-flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",id:"declaration",className:"form-checkbox h-5 w-5 text-blue-600 cursor cursor-pointer ",checked:k,onChange:()=>{S(!k)}}),e.jsx("span",{className:"ml-2 text-sm text-red-500 font-semibold",children:"I hereby declare that the above particulars of facts and information stated are true, Correct, and Complete to the best of my belief and knowledge."})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white font-medium text-sm leading-tight hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out px-12 py-2.5 rounded w-[50%] md:w-[25%] lg:w-[15%]\n                    "+(k?"opacity-100 transition-opacity":"opacity-50 transition-opacity"),disabled:!k,children:"Submit"})})]})]})})]})}),e.jsx(m,{isOpen:h,onAfterOpen:()=>{},onRequestClose:()=>{b(!1)},style:u,contentLabel:"Example Modal",children:e.jsx("div",{className:"bg-white shadow-2xl border border-blue-200 rounded-md ",children:e.jsx("div",{className:"block p-4 md:py-6 shadow-lg bg-indigo-100 border border-indigo-300 rounded  mx-auto ",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"font-semibold",children:"Your Application Has been Submitted Successfully."}),e.jsxs("p",{children:[e.jsx("span",{className:"text-sm",children:" Application No: "}),e.jsx("span",{className:"text-indigo-600 font-semibold",children:(null==f?void 0:f.application_no)||"N/A"})]}),e.jsx("button",{onClick:()=>A("/landingDashboard"),className:"bg-white hover:bg-indigo-600 hover:text-white text-indigo-700  border border-indigo-600 mx-2 rounded-sm text-sm px-4 py-2 shadow-xl",children:"Home"}),e.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white mx-2 rounded-sm text-sm px-4 py-2 shadow-xl",children:"Make Payment"})]})})})}),e.jsx(p,{topic:[{q:"How to apply ",a:"You can apply water connection against your property using Holding or SAF."},{q:"Which documents need to submit  ?",a:"Holding proff ,saf proff"}]})]})};export{h as default};
