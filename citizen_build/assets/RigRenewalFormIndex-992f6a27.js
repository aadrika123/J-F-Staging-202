import{j as e}from"./mui-d8134288.js";import{f as l,r as a,u as i}from"./router-a70afc62.js";import{z as s,c as n,d as t,u as d,A as o}from"./index-1c8a2e08.js";import"./moment-494dae31.js";import{P as r}from"./PetRegAPIList-09ec3f04.js";import{r as c}from"./UseImgResizer-21ab55be.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const m="text-red-700 font-semibold",u="text-sm",h="block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",p=p=>{const{id:v}=l(),[N,x]=a.useState(),{notify:g}=a.useContext(s),[b,y]=a.useState(!1),[f,w]=a.useState(!1),[C,F]=a.useState(!1),[A,j]=a.useState();a.useState(!1);const[I,L]=a.useState(),[R,S]=a.useState(),[k,D]=a.useState(),P=a.useRef(),E=i(),[T,V]=a.useState(""),{header:z,api_RigApproveViewApplication:K,api_RigApplyRenewalForm:_,header1:M}=r(),U=n({fitness:t().required("Kindly enter a value."),taxCopy:t().required("Kindly enter a value."),license:t().required("Kindly enter a value.")});let W=new FormData;const B=d({initialValues:{fitness:"",taxCopy:"",license:""},enableReinitialize:!0,onSubmit:(e,l)=>{O(e)},validationSchema:U}),O=e=>{var l,a,i;w(!0);const s={registrationId:v};for(let n in s)W.append(n,s[n]);W.append("documents[0][image]",null==(l=null==B?void 0:B.values)?void 0:l.fitness),W.append("documents[0][docCode]","FITNESS"),W.append("documents[0][ownerDtlId]",""),W.append("documents[1][image]",null==(a=null==B?void 0:B.values)?void 0:a.taxCopy),W.append("documents[1][docCode]","TAX"),W.append("documents[1][ownerDtlId]",""),W.append("documents[2][image]",null==(i=null==B?void 0:B.values)?void 0:i.license),W.append("documents[2][docCode]","LICENSE"),W.append("documents[2][ownerDtlId]",""),o.post(_,W,z).then(e=>{var l,a,i;w(!1),e.data.status?(j(e.data.data),X(),g(null==(l=null==e?void 0:e.data)?void 0:l.message,"success")):(g(null==(a=null==e?void 0:e.data)?void 0:a.message,"error"),F(null==(i=null==e?void 0:e.data)?void 0:i.message))}).catch(e=>{var l,a;F(null==(a=null==(l=null==e?void 0:e.response)?void 0:l.data)?void 0:a.error),g("Something Went wrong","error"),w(!1)})},X=()=>{P.current.showModal()};return a.useEffect(()=>{o.post(K,{registrationId:v},M).then(e=>{e.data.status&&x(e.data.data)}).catch(e=>{})},[]),e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:B.handleSubmit,onChange:e=>{let l=e.target.name,a=e.target.value;F(!1),"driverName"==l&&B.setFieldValue("driverName",allowCharacterInput(a,B.values.driverName,20)),"fitness"==l&&L(e.target.files[0]),"taxCopy"==l&&S(e.target.files[0]),"license"==l&&D(e.target.files[0])},children:[e.jsxs("div",{className:"overflow-y-auto",children:[e.jsxs("h1",{className:"px-4 font-semibold text-lg text-center",children:[" Application no -",e.jsxs("span",{className:"text-blue-600",children:[" ",null==N?void 0:N.application_no]})]}),e.jsx("div",{className:"col-span-12 ml-2 my-2",children:e.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details "})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 xl:grid-cols-3  bg-white shadow-md rounded-md py-2",children:[e.jsxs("div",{className:"m-3",children:[e.jsx("label",{className:u,htmlFor:"ulb",children:"ULB "}),e.jsx("input",{value:null==N?void 0:N.ulb_name,disabled:!0,type:"text",name:"ulb",className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.ulb&&B.errors.ulb?B.errors.ulb:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsx("label",{className:u,htmlFor:"categoryApplication",children:"Category of Application"}),e.jsx("input",{disabled:!0,value:"New_Apply"==(null==N?void 0:N.application_type)?"Renewal":"",type:"text",name:"holdingNo",className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.categoryApplication&&B.errors.categoryApplication?B.errors.categoryApplication:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsx("label",{className:u,htmlFor:"ward",children:"Ward Number"}),e.jsx("input",{type:"text",disabled:!0,value:null==N?void 0:N.ward_name,name:"ward",className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.ward&&B.errors.ward?B.errors.ward:null})]})]}),e.jsx("div",{className:"col-span-12 ml-2 my-2",children:e.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),e.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 ",children:[e.jsxs("div",{className:"m-3",children:[e.jsx("label",{className:u,htmlFor:"applicantName",children:"Name of Applicant"}),e.jsx("input",{disabled:!0,value:null==N?void 0:N.applicant_name,className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.applicantName&&B.errors.applicantName?B.errors.applicantName:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsx("label",{className:u,htmlFor:"mobileNo",children:"Mobile No"}),e.jsx("input",{disabled:!0,value:null==N?void 0:N.mobile_no,type:"number",name:"mobileNo",className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.mobileNo&&B.errors.mobileNo?B.errors.mobileNo:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsx("label",{className:u,htmlFor:"email",children:"Email"}),e.jsx("input",{disabled:!0,value:null==N?void 0:N.email,type:"email",name:"email",className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.email&&B.errors.email?B.errors.email:null})]})]}),e.jsxs("div",{className:"m-3",children:[e.jsx("label",{className:u,htmlFor:"address",children:"Address"}),e.jsx("textarea",{disabled:!0,value:null==N?void 0:N.address,name:"address",maxLength:"500",rows:"3",className:"block w-full border px-2 border-gray-300 rounded shadow"}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.address&&B.errors.address?B.errors.address:null})]})]}),e.jsx("div",{className:"col-span-12 ml-2 my-2",children:e.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Vehicle Details"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 bg-white shadow-md rounded-md py-2",children:[e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:u,htmlFor:"registrationNumber",children:["Registration No.",e.jsx("span",{className:m,children:"*"})]}),e.jsx("input",{disabled:!0,value:null==N?void 0:N.vehicle_no,maxLength:"10",type:"text",name:"registrationNumber",className:h,onChange:e=>{const l=e.target.value.toUpperCase();B.setFieldValue("registrationNumber",l)}}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.registrationNumber&&B.errors.registrationNumber?B.errors.registrationNumber:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:u,htmlFor:"vehicleComapny",children:["VIN Number",e.jsx("span",{className:m,children:"*"})]}),e.jsx("input",{disabled:!0,value:null==N?void 0:N.vehicle_name,maxLength:"17",type:"text",name:"vehicleComapny",className:h,onChange:e=>{const l=e.target.value.toUpperCase();B.setFieldValue("vehicleComapny",l)}}),e.jsx("p",{className:"text-red-500 text-xs",children:B.touched.vehicleComapny&&B.errors.vehicleComapny?B.errors.vehicleComapny:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:u,htmlFor:"fitness",children:["Pollution Certificate",e.jsx("span",{className:m,children:"*"})]}),e.jsx("input",{onChange:async e=>{var l,a,i,s;const n=e.target.files[0];if(n){const t=await c(n),d=new File([t],null==(a=null==(l=null==e?void 0:e.target)?void 0:l.files[0])?void 0:a.name,{type:null==(s=null==(i=null==e?void 0:e.target)?void 0:i.files[0])?void 0:s.type});B.setFieldValue("fitness",d)}else B.setFieldValue("fitness",null)},maxLength:"50",type:"file",name:"fitness",className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:T})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:u,htmlFor:"taxCopy",children:["Tax Copy",e.jsx("span",{className:m,children:"*"})]}),e.jsx("input",{onChange:async e=>{var l,a,i,s;const n=e.target.files[0];if(n){const t=await c(n),d=new File([t],null==(a=null==(l=null==e?void 0:e.target)?void 0:l.files[0])?void 0:a.name,{type:null==(s=null==(i=null==e?void 0:e.target)?void 0:i.files[0])?void 0:s.type});B.setFieldValue("taxCopy",d)}else B.setFieldValue("taxCopy",null)},maxLength:"50",type:"file",name:"taxCopy",className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:T})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:u,htmlFor:"license",children:["Registration Of Certificate",e.jsx("span",{className:m,children:"*"})]}),e.jsx("input",{onChange:async e=>{var l,a,i,s;const n=e.target.files[0];if(n){const t=await c(n),d=new File([t],null==(a=null==(l=null==e?void 0:e.target)?void 0:l.files[0])?void 0:a.name,{type:null==(s=null==(i=null==e?void 0:e.target)?void 0:i.files[0])?void 0:s.type});B.setFieldValue("license",d)}else B.setFieldValue("license",null)},maxLength:"50",type:"file",name:"license",className:h}),e.jsx("p",{className:"text-red-500 text-xs",children:T})]})]})]}),e.jsxs("p",{className:"flex mt-3 gap-x-3",children:[e.jsx("input",{type:"checkbox",checked:b,name:"",id:"",onChange:e=>y(e.target.checked)}),e.jsx("p",{className:"cursor-pointer select-none",onClick:()=>y(!b),children:"I have entered the correct information and agree to the terms and conditions."})]}),e.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:C&&C}),e.jsx("div",{className:"flex justify-center my-5",children:f?e.jsx("p",{children:"Form Submitting.."}):e.jsx("button",{type:"submit",disabled:!b,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow",children:"Submit Application"})})]}),e.jsx("dialog",{ref:P,className:"",children:e.jsxs("div",{className:"space-y-2 mb-5",children:[e.jsx("p",{className:"text-center bg-yellow-300 p-2 font-semibold ",children:" Your Application has submitted successfully"}),e.jsxs("p",{className:"text-center",children:["Application No.  ",e.jsx("span",{className:"font-semibold text-lg",children:(null==A?void 0:A.applicationNo)||"N/A"})]}),e.jsxs("div",{className:"flex justify-center gap-x-5",children:[e.jsx("button",{onClick:()=>E("/search-pet-registration"),className:"border border-indigo-600 px-2 py-1 rounded shadow hover:bg-indigo-500 hover:text-white",children:"Dashboard"}),e.jsx("button",{onClick:()=>E(`/rigPayment/${null==A?void 0:A.id}`),className:"bg-indigo-500 px-2 py-1 rounded shadow text-white hover:bg-indigo-700",children:"Make Payment"})]})]})})]})};export{p as default};
