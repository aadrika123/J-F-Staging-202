import{j as e}from"./mui-d8134288.js";import{r as t,u as r}from"./router-a70afc62.js";import{z as n,f as o,D as i,C as a,k as l,E as s}from"./index-1c8a2e08.js";import{a as c}from"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";function d(d){const[h,u]=t.useState(!1);t.useState("");const{api_verifyMobileOtp:f}=s(),[m,x]=t.useState(!1),{notify:p}=t.useContext(n),[v,g]=t.useState(!1),[b,w]=t.useState(""),[y,k]=t.useState(!1),[j,N]=t.useState(null),[C,L]=t.useState(60),[B,D]=t.useState({first:"",second:"",third:"",fourth:"",fifth:"",sixth:""}),P=t.useRef(),T=t.useRef(),K=t.useRef(),O=t.useRef(),$=t.useRef(),E=t.useRef();r();const[I,z]=t.useState("first"),M=(e,t)=>{w("");let r={...B,[t]:e.target.value};if(D({...B,[t]:e.target.value}),1===e.target.value.length)switch(t){case"first":T.current.focus(),z("second");break;case"second":K.current.focus(),z("third");break;case"third":O.current.focus(),z("fourth");break;case"fourth":$.current.focus(),z("fifth");break;case"fifth":E.current.focus(),z("sixth");break;case"sixth":z("sixth")}R(r)},S=e=>{switch(e){case"second":P.current.focus(),D({...B,second:""}),z("first");break;case"third":T.current.focus(),D({...B,third:""}),z("second");break;case"fourth":K.current.focus(),D({...B,fourth:""}),z("third");break;case"fifth":O.current.focus(),D({...B,fifth:""}),z("fouth");break;case"sixth":$.current.focus(),D({...B,sixth:""}),z("fifth")}},R=e=>{g(""!=e.first&&""!=e.second&&""!=e.third&&""!=e.fourth&&""!=e.fifth&&""!=e.sixth)};let V,W=60;const _=()=>{V=setInterval(()=>{L(e=>e-1),W-=1,0==W&&(u(!0),clearInterval(V))},1e3)};t.useEffect(()=>{_()},[]);const q=(e,t)=>{N(t),k(e)};return e.jsxs(e.Fragment,{children:[m&&e.jsx(o,{}),y&&e.jsx(i,{activateBottomErrorCard:q,errorTitle:j}),e.jsx(a,{children:e.jsx("div",{class:"",children:e.jsx("div",{class:"container mx-auto",children:e.jsx("div",{class:"max-w-sm mx-auto md:max-w-lg",children:e.jsxs("div",{class:"w-full px-2 md:px-0",children:[e.jsxs("div",{className:"w-full text-center py-2  bg-gray-200 text-black relative",children:[null==d?void 0:d.headTitle,e.jsx("button",{onClick:null==d?void 0:d.closeOtpModal,type:"button",class:"absolute top-1 right-6 bg-transparent bg-gray-200 text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center shadow-sm  hover:bg-red-200 hover:border-none",children:e.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})})]}),e.jsxs("div",{class:"bg-white py-20 px-6 md:py-20 md:px-20 w-full md:w-auto rounded text-center shadow-xl relative",children:[e.jsx("div",{class:"text-2xl font-bold px-2",children:"OTP Verification"}),e.jsx("div",{class:"flex flex-col mt-4 text-center",children:e.jsx("span",{className:"text-center text-red-400",children:b})}),e.jsxs("div",{class:"flex flex-col mt-4",children:[e.jsx("span",{children:"Enter the OTP you received at"}),e.jsxs("span",{class:"font-bold",children:["+91 ",null==d?void 0:d.verifedMobileNo]})]}),e.jsxs("div",{id:"otp",class:"flex flex-row justify-center text-center px-2 mt-5",children:[e.jsx("input",{ref:P,type:"text",min:0,value:B.first,maxLength:1,onChange:e=>M(e,"first"),onKeyDown:e=>"Backspace"===e.key&&S("first"),className:("first"===I?"active":"")+" m-2 border h-10 w-10 text-center form-control rounded"}),e.jsx("input",{ref:T,type:"text",min:0,value:B.second,maxLength:1,onChange:e=>M(e,"second"),onKeyDown:e=>"Backspace"===e.key&&S("second"),className:("second"===I?"active":"")+" m-2 border h-10 w-10 text-center form-control rounded"}),e.jsx("input",{ref:K,type:"text",min:0,value:B.third,maxLength:1,onChange:e=>M(e,"third"),onKeyDown:e=>"Backspace"===e.key&&S("third"),className:("third"===I?"active":"")+" m-2 border h-10 w-10 text-center form-control rounded"}),e.jsx("input",{ref:O,type:"text",min:0,value:B.fourth,maxLength:1,onChange:e=>M(e,"fourth"),onKeyDown:e=>"Backspace"===e.key&&S("fourth"),className:("fourth"===I?"active":"")+" m-2 border h-10 w-10 text-center form-control rounded"}),e.jsx("input",{ref:$,type:"text",min:0,value:B.fifth,maxLength:1,onChange:e=>M(e,"fifth"),onKeyDown:e=>"Backspace"===e.key&&S("fifth"),className:("fifth"===I?"active":"")+" m-2 border h-10 w-10 text-center form-control rounded"}),e.jsx("input",{ref:E,type:"text",min:0,value:B.sixth,maxLength:1,onChange:e=>M(e,"sixth"),onKeyDown:e=>"Backspace"===e.key&&S("sixth"),className:("sixth"===I?"active":"")+" m-2 border h-10 w-10 text-center form-control rounded"})]}),e.jsxs("div",{class:"flex justify-center text-center mt-5",children:[!h&&e.jsx("div",{className:"w-10 h-10 bg-indigo-500 flex justify-center items-center rounded-full text-white",children:C}),e.jsxs("button",{disabled:!h,onClick:()=>{null==d||d.reSendOtp(),u(!1),L(60),W=60,_()},class:"ml-4 flex items-center "+(h?"text-indigo-500 hover:text-blue-900 cursor-pointer":"text-gray-400 hover:text-none cursor-default"),children:[e.jsx("span",{class:"font-bold",children:"Resend OTP"}),e.jsx("i",{class:"bx bx-caret-right ml-1"})]})]}),e.jsxs("div",{class:"w-full text-center mt-5",children:[v&&e.jsx("button",{type:"button",onClick:()=>{k(!1),x(!0),c.post(f,{otp:`${B.first}${B.second}${B.third}${B.fourth}${B.fifth}${B.sixth}`,mobileNo:null==d?void 0:d.verifedMobileNo}).then(e=>{var t,r,n;(null==(t=null==e?void 0:e.data)?void 0:t.status)?null==d||d.callback():(p("Wrong OTP, Please enter correct OTP","error"),w(l(null==(r=null==e?void 0:e.data)?void 0:r.message)),q(!0,l(null==(n=null==e?void 0:e.data)?void 0:n.message))),x(!1)}).catch(e=>{q(!0,"Error occured. Please try again later."),x(!1)})},className:"w-full  py-2.5 bg-indigo-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Submit"}),!v&&e.jsx("button",{type:"button",className:"w-full  py-2.5 bg-gray-400 text-white font-medium text-xs leading-tight  rounded shadow-md  hover:shadow-lg  focus:shadow-lg focus:outline-none focus:ring-0  transition duration-150 ease-in-out cursor-default ",children:"Submit"})]}),0!=(null==d?void 0:d.bottomNaviation)&&e.jsx("div",{className:"text-left w-full mt-10 flex justify-center items-center"})]})]})})})})})]})}export{d as default};
