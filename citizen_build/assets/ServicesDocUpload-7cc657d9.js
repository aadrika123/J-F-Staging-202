import{j as t}from"./mui-105b4636.js";import{f as ze,r as a,u as Me}from"./router-894402c5.js";import{A as S,b as Ne,c as qe,e as Qe,d as Ye,u as Ge,W as Je,o as Ke,y as Xe,Q as p}from"./index-0ba2dd6b.js";import{f as Ze}from"./folders-c40af08a.js";import"./index-82be3ecd.js";import{A as et}from"./ApiHeader2-b5fd0f3d.js";import{B as tt}from"./BarLoader-72ffdd04.js";import{F as ve}from"./index.esm-99e80a3f.js";import{C as st}from"./CitizenApplyApiList-6dc33400.js";/* empty css              */import"./react-40db4358.js";import"./axios-67d8a945.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";function Dt(h){var V,L,E,W;const d=Ke,{id:f,type:r}=ze(),{get_ConcessionDocumentsToUpload:we,post_ConcessionDocumentUpload:ye,get_ObjectionDocumentsToUpload:De,post_ObjectionDocumentUpload:Se,get_HarvestingDocumentsToUpload:Ue,post_HarvestingDocumentUpload:Ce,get_ConcessionDetailsById:ke,get_HarvestingDetailsById:Ie,get_ObjectionDetailsById:Oe}=st(),[U,i]=a.useState(!1),[g,C]=a.useState(""),[at,Pe]=a.useState(""),[j,k]=a.useState(0),[lt,x]=a.useState(!1),[rt,Ae]=a.useState(""),[I,O]=a.useState(1);a.useState(0);const[_e,Fe]=a.useState(),[P,A]=a.useState(""),[_,F]=a.useState(!0),[R,b]=a.useState(!1),[N,Re]=a.useState();a.useState();const[n,$e]=a.useState(),[v,$]=a.useState(null),[w,y]=a.useState(null),[nt,Te]=a.useState(!1),[it,T]=a.useState(!1),Be=()=>T(!0),He=()=>{b(!1),Te(!1),x(!1),T(!1),O(I+1)};a.useEffect(()=>{B()},[j]),a.useEffect(()=>{let e="";r=="Concession"&&(e=ke),r=="Rain Water Harvesting"&&(e=Ie),r=="Objection"&&(e=Oe),i(!0),S.post(e,{applicationId:f},Ne()).then(function(s){var l;i(!1),$e((l=s==null?void 0:s.data)==null?void 0:l.data)}).catch(function(s){i(!1)})},[]);const B=()=>{let e="";r=="Concession"&&(e=we),r=="Rain Water Harvesting"&&(e=Ue),r=="Objection"&&(e=De),i(!0),S.post(`${e}`,{applicationId:f},Ne()).then(s=>{var l;Re((l=s==null?void 0:s.data)==null?void 0:l.data),i(!1)}).catch(s=>{x(!1),i(!1)})},Ve=qe({docId:Qe().required("Select document type"),docUpload:Ye().required("Select document")}),u=Ge({initialValues:{docId:"",docUpload:"",docName:""},onSubmit:e=>{H()},validationSchema:Ve}),Le=e=>{let s=e.target.files[0];Xe(s)&&(A(e.target.name),Fe(URL.createObjectURL(e.target.files[0])),C(e.target.files[0]),u.setFieldValue("docUpload",URL.createObjectURL(e.target.files[0])),(s==null?void 0:s.name).substring((s==null?void 0:s.name).lastIndexOf(".")+1)=="pdf"?F(!1):F(!0))},H=e=>{if(w==null){p.error("Select Document Type"),$(null),y(null);return}let s=new FormData;if(h==null||h.id,s.append("applicationId",f),v!=null&&s.append("ownerId",v),s.append("docCode",w),s.append("document",g),g!=""){He(),i(!0);let l="";r=="Concession"&&(l=ye),r=="Rain Water Harvesting"&&(l=Ce),r=="Objection"&&(l=Se),S.post(`${l}`,s,et()).then(c=>{var m;(m=c==null?void 0:c.data)!=null&&m.status?(p.success("Document Uploaded Successfully !!"),x(!1),Pe(""),C(""),i(!1),k(j+1),A(""),u.setFieldValue("docUpload",""),k(j+1),$(null),y(null),B()):p.error("Something went wrongg !!!")}).catch(c=>{x(!1),i(!1)})}else p.error("Select file")},D=e=>{e==""&&p.error("File not uploaded !!!"),e!=""&&(Ae(e),Be(),O(I+1))},Ee=e=>{y(e.target.value)},We=Me();return t.jsxs(t.Fragment,{children:[t.jsx(Je,{position:"top-right",autoClose:2e3}),U&&t.jsx(tt,{}),t.jsxs("div",{className:"overflow-x-auto mx-auto w-full px-36 relative",children:[t.jsx("button",{className:"absolute top-2 left-2 bg-indigo-500 px-4 py-1 shadow-lg rounded-sm text-white hover:bg-white poppins border-2 border-indigo-500 hover:text-indigo-600 transition-all duration-200 mt-1 hover:border-2 hover:border-indigo-600",onClick:()=>We("/propertyDashboard"),children:"Back"}),r=="Objection"?t.jsxs("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:[(n==null?void 0:n.objection_for)=="Clerical Mistake"&&t.jsx(t.Fragment,{children:"Clerical Objection"})," ",(n==null?void 0:n.objection_for)=="Assessment Error"&&t.jsx(t.Fragment,{children:"Assessment Objection"})," ",(n==null?void 0:n.objection_for)=="Forgery"&&t.jsx(t.Fragment,{children:"Forgery Objection"}),"  Document Upload"]}):t.jsxs("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:[r," Document Upload"]}),t.jsx("div",{className:"text-gray-700 py-6 ",children:t.jsx("div",{className:"grid md:grid-cols-2 text-sm bg-white shadow-lg rounded-sm py-4",children:(E=(L=(V=n==null?void 0:n.fullDetailsData)==null?void 0:V.cardArray)==null?void 0:L.data)==null?void 0:E.map(e=>t.jsxs("div",{className:"grid grid-cols-2",children:[t.jsxs("div",{className:"px-4 py-2 font-semibold",children:[e==null?void 0:e.displayString," : "]}),t.jsx("div",{className:"px-4 py-2",children:e==null?void 0:e.value})]}))})}),t.jsx("div",{className:"text-red-500 font-semibold poppins 2xl:text-sm text-xs",children:"You have been redirected as Back To Citizen to re-upload documents."}),t.jsx("div",{className:"w-full flex md:px-4 bg-white font-sans overflow-x-auto py-6",children:t.jsxs("div",{className:"w-full",children:[t.jsxs("h1",{className:"text-xs poppins",children:[r," Documents"]}),t.jsx("div",{className:"bg-white shadow-md rounded my-2",children:t.jsxs("table",{className:"min-w-max w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-indigo-100 text-gray-600 uppercase text-sm leading-normal",children:[t.jsx("th",{className:"py-3 px-6 text-center",children:"#"}),t.jsx("th",{className:"py-3 px-6 text-left cursor-pointer",children:"Document Name"}),t.jsx("th",{className:"py-3 px-6 text-left",children:"Type"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Document"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Status"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Remarks"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Preview"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Upload"})]})}),t.jsx("tbody",{className:"text-gray-600 text-sm font-light bg-white",children:(W=N==null?void 0:N.listDocs)==null?void 0:W.map((e,s)=>{var l,c,m,z,M,q,Q,Y,G,J,K,X,Z,ee,te,se,ae,le,re,ne,ie,oe,ce,me,pe,de,xe,ue,he,fe,ge,je,be;return t.jsxs("tr",{className:"border-b border-gray-200 ",onSubmit:u.handleSubmit,onChange:u.handleChange,children:[t.jsx("td",{className:"py-3 px-6 font-semibold",children:s+1}),t.jsx("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-2 bg-white shadow-lg rounded-full p-2",children:t.jsx("img",{src:Ze,alt:"rain",className:"w-4"})}),t.jsxs("span",{className:"font-medium poppins",value:e==null?void 0:e.docName,children:[(e==null?void 0:e.docType)=="R"&&((l=e==null?void 0:e.masters[0])==null?void 0:l.docVal),(e==null?void 0:e.docType)=="O"&&"Additional"]})]})}),t.jsx("td",{className:"py-3 px-6",children:t.jsx("div",{className:"font-semibold text-sm",children:t.jsx("div",{className:"",children:t.jsxs("select",{className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md w-36",name:"docId",onChange:Ee,children:[t.jsx("option",{value:"",selected:!0,children:"--select--"}),(c=e==null?void 0:e.masters)==null?void 0:c.map((o,ot)=>t.jsx("option",{value:o==null?void 0:o.documentCode,children:o==null?void 0:o.docVal}))]})})})}),t.jsx("td",{className:"py-3 px-6 text-center relative",children:(e==null?void 0:e.uploadedDoc)==""?t.jsx("i",{className:"font-semibold",children:"N/A"}):t.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>{var o;return D(`${d}/${(o=e==null?void 0:e.uploadedDoc)==null?void 0:o.docPath}`)},children:t.jsxs("div",{className:"flex items-center",children:[((Q=(m=e==null?void 0:e.uploadedDoc)==null?void 0:m.docPath)==null?void 0:Q.split(".")[((q=(M=(z=e==null?void 0:e.uploadedDoc)==null?void 0:z.docPath)==null?void 0:M.split("."))==null?void 0:q.length)-1])=="pdf"&&t.jsx("div",{className:"flex-shrink-0 text-[28px]",children:t.jsx(ve,{})}),((X=(Y=e==null?void 0:e.uploadedDoc)==null?void 0:Y.docPath)==null?void 0:X.split(".")[((K=(J=(G=e==null?void 0:e.uploadedDoc)==null?void 0:G.docPath)==null?void 0:J.split("."))==null?void 0:K.length)-1])=="jpg"&&t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:`${d}/${(Z=e==null?void 0:e.uploadedDoc)==null?void 0:Z.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),((le=(ee=e==null?void 0:e.uploadedDoc)==null?void 0:ee.docPath)==null?void 0:le.split(".")[((ae=(se=(te=e==null?void 0:e.uploadedDoc)==null?void 0:te.docPath)==null?void 0:se.split("."))==null?void 0:ae.length)-1])=="jpeg"&&t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:`${d}/${(re=e==null?void 0:e.uploadedDoc)==null?void 0:re.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),((me=(ne=e==null?void 0:e.uploadedDoc)==null?void 0:ne.docPath)==null?void 0:me.split(".")[((ce=(oe=(ie=e==null?void 0:e.uploadedDoc)==null?void 0:ie.docPath)==null?void 0:oe.split("."))==null?void 0:ce.length)-1])=="png"&&t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:`${d}/${(pe=e==null?void 0:e.uploadedDoc)==null?void 0:pe.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})}),t.jsx("td",{className:"py-3 px-6 text-center font-semibold",children:(e==null?void 0:e.uploadedDoc)==""?t.jsx("i",{className:"font-semibold",children:"N/A"}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"whitespace-no-wrap",children:((de=e==null?void 0:e.uploadedDoc)==null?void 0:de.verifyStatus)==0&&t.jsx(t.Fragment,{children:"Pending"})}),t.jsx("p",{className:"text-green-500 whitespace-no-wrap",children:((xe=e==null?void 0:e.uploadedDoc)==null?void 0:xe.verifyStatus)==1&&t.jsx(t.Fragment,{children:"Verified"})}),t.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:((ue=e==null?void 0:e.uploadedDoc)==null?void 0:ue.verifyStatus)==2&&t.jsx(t.Fragment,{children:"Rejected"})})]})}),t.jsx("td",{className:"py-3 px-6 text-center",children:((he=e==null?void 0:e.uploadedDoc)==null?void 0:he.remarks)==""||((fe=e==null?void 0:e.uploadedDoc)==null?void 0:fe.remarks)==null?t.jsx("i",{className:"font-semibold",children:"N/A"}):(ge=e==null?void 0:e.uploadedDoc)==null?void 0:ge.remarks}),t.jsxs("td",{className:"py-3 px-6 text-center",children:[(e==null?void 0:e.docName)==P&&_==!0&&t.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>D(b(!R)),children:t.jsx("img",{src:_e,alt:"",srcset:"",className:"md:w-[3vw] w-[5vw] text-center"})}),(e==null?void 0:e.docName)==P&&_==!1&&t.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>D(b(!R)),children:t.jsx("div",{className:"text-[40px] text-center",children:t.jsx(ve,{})})})]}),t.jsx("td",{className:"py-3 px-6 flex flex-wrap gap-2",children:t.jsx("div",{className:"font-semibold text-sm",children:((je=e==null?void 0:e.uploadedDoc)==null?void 0:je.verifyStatus)!=1&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"",children:t.jsx("input",{accept:".pdf,.jpg,.jpeg",type:"file",name:e==null?void 0:e.docName,onChange:Le,className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 foc}us:outline-none cursor-pointer shadow-md w-36"})}),(((be=e==null?void 0:e.uploadedDoc)==null?void 0:be.verify_status)!=1||(e==null?void 0:e.uploadedDoc)=="")&&t.jsx("div",{className:"mt-2",children:!U&&t.jsx("button",{onClick:()=>H(e==null?void 0:e.docName),type:"submit",className:" px-4 py-1.5 bg-indigo-500 text-white text-xs leading-tight rounded shadow-md hover:bg-indigo-700 poppins hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",children:"Upload"})})," "]})})})]})})})]})})]})})]})]})}export{Dt as default};
