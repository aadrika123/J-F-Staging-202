import{j as e}from"./mui-8bd1858b.js";import{r as l,b as H,u as T}from"./router-56e993c5.js";import{z as q,W as z,M as Q,a0 as K,A as P,f as Z,N as G,g as $,i as ee,B as te,G as se,a4 as ae,o as J,a5 as le}from"./index-660adcfa.js";import{W as ne}from"./WaterDeleteApplicationModal-6ba9d9df.js";import{h as V}from"./moment-a9aaa855.js";import{W as oe}from"./WaterPaymentModal-6b22d7c9.js";import{d as re}from"./demoUser-c2d710fd.js";import"./axios-ab7cc016.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-34de039c.js";/* empty css                */import"./redux-a3f69129.js";import"./i18next-2edfafb0.js";import"./success-39308b33.js";import"./pending-3ed0cdd6.js";const de="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIUlEQVR4nO2XvU4cMRSFP2CXFAQhIVFRohRA6GgpkAglNFBB8gSIv6SiQFRQ8wCAFJYngJ53QPyJhoouTRKEEgqMrnRGskbsMrvsMN6Vj2Rpxr7XM8c+9/oaIloHLtBWN9qOSChwkQhxR3KBi9IiSqt1pOUKOCtcJEKMkVzgYvolSisXuCgtorRygYvSIkorF7goLbJXv7XGWqr6bVkiRcC1C5FZYLcdiDSMIoiUgTmgAlwB98BfPVc0ZjbBBfsB0OFJ5yaDz41sgyFyDJSATmDH6z8HVoFRoEfNnteAC9k8AdvyfRORZiIh8R9YArpq2NrYMvAoHyMTBJFZra6RmKrD74vImO9M0UTKXkzYTmTBB2BezytezJSLJDLnxUQtOSWwpHAonw3F16Xeba53D/ZECkd6t5XNgi3Z/wbG1LeuvsMiiAzJ7lrvIxlILHixNOn1f9Yc140SaQb+aP7e1KoPp+wmgH8i8jU11qs5bK5giFgQO53mi+r7BPxS/+YLcwRBJJGWHXbo4Kt4393zstq+VwEQmrSSn7YT28c34MH7/inQXWWOH7L5GUL6vXgh/Y4Dt8AZ0FfFv6Ri8k3pt9kHopUdafQDgzX810I5EP0S5VFlR1ZMN1Ki5NHugAF9Z1t99mMrkkw1lLQTDRWNebUTZaJO/ZCtbhIz68pIH9Xs+btXktRVxr83TCJZL1avyqlopK+6ds21Zjth9VTVq+4zGfsc0+AWfWAAAAAASUVORK5CYII=",ce={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function ie(d){var E,R,I;const[f,j]=l.useState(),[r,N]=l.useState(),[a,L]=l.useState(),[n,C]=l.useState(1),[g,i]=l.useState(),[m,w]=l.useState(),{notify:x}=l.useContext(q),[W,h]=H.useState(!1),{api_swmSendOtpToAttach:v,api_swmVerifyotpToAttach:p,header:M}=z(),y=l.useRef(),A=()=>{y.current.focus()};l.useEffect(()=>{d.openAttachModal>0&&h(!0)},[d.openAttachModal]);function S(){}function b(){h(!1),C(1),N(),j(),L(),i(),w()}const _=()=>{if(f==""||f==null||f==null||(f==null?void 0:f.length)<=6)return A(),i({status:!1,msg:"Enter Valid Consumer No."});P.post(v,{consumerNo:f},M).then(s=>{var o,k;console.log("res.status",s.data.status,typeof s.status),(o=s==null?void 0:s.data)!=null&&o.status?(x("OTP Send on Register Mobile","success"),console.log("OTP Send on Register Mobile",s),N(s==null?void 0:s.data),C(2),i({status:!0,msg:"OTP Send on Register Mobile."})):(N(s==null?void 0:s.data),x("Error Sending OTP","error"),console.log("Error Sending OTP",s),i({status:!1,msg:(k=s==null?void 0:s.data)==null?void 0:k.message}),A())}).catch(s=>{x("Error Sending OTP","error"),console.log("ERROR : Sending OTP    ",s),i({status:!1,msg:"Error Sending OTP."}),A()})},t=()=>{if(a==""||a==null||a==null||(a==null?void 0:a.length)!=6)return w({status:!1,msg:"Enter Valid OTP."});const s={consumerNo:f,otp:a};P.post(p,s,M).then(o=>{var k;console.log("res.status",o.data.status,typeof o.status),(k=o==null?void 0:o.data)!=null&&k.status?(x("Consumer Attached Successfully","success"),console.log("Consumer Attached Successfully",o),w({status:!0,msg:o.data.message}),b(),d.refetch()):(x(o.data.message,"error"),console.log("Error Consumer Attached",o),w({status:!1,msg:o.data.message}))}).catch(o=>{x("Error Consumer Attached","error"),console.log("ERROR : Consumer Attached    ",o),w({status:!1,msg:"Error while attaching"})})};let u=(R=(E=r==null?void 0:r.data)==null?void 0:E.mobileNo)==null?void 0:R.toString(),O=(u==null?void 0:u.substring(0,2))+"XXXXXX"+(u==null?void 0:u.substring(8));return e.jsx("div",{className:"",children:e.jsx(Q,{isOpen:W,onAfterOpen:S,onRequestClose:b,style:ce,contentLabel:"Example Modal",shouldCloseOnOverlayClick:!1,children:e.jsxs("div",{className:"w-[500px] h-auto bg-sky-100 shadow-2xl border border-indigo-200 py-6 px-2 m-1 rounded-md max-sm:flex max-sm:flex-col max-sm:w-full",children:[e.jsxs("p",{onClick:b,className:"absolute right-7 top-8 cursor-pointer rounded-full bg-sky-200 hover:bg-gray-200 mx-3",children:[e.jsx(K,{size:25})," "]}),e.jsx("p",{className:" text-center text-xl font-semibold mx-5 text-gray-900",children:" Attach SWM Consumer "}),e.jsx("p",{className:"border-b py-1 mb-2 border-gray-500"}),n==1&&e.jsxs("div",{children:[e.jsxs("div",{className:" flex justify-center my-5 gap-2 max-sm:flex-col",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter Consumer No.",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{ref:y,type:"text",onChange:s=>j(s.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),e.jsx("div",{className:"w-full text-center italic text-gray-700",children:"OR"}),e.jsxs("div",{className:" flex justify-center my-5 gap-2 max-sm:flex-col",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter Holding No.",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{ref:y,type:"text",onChange:s=>j(s.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:b,type:"button",className:"px-2 py-1 border border-indigo-600 hover:bg-indigo-600 hover:text-white shadow rounded",children:"Cancel"}),e.jsx("button",{onClick:_,type:"button",className:"px-2 py-1 border hover:bg-indigo-700 border-indigo-600 bg-indigo-500 text-white shadow rounded",children:"Send OTP"})]}),g&&e.jsx("p",{className:`text-center text-sm font-semibold ${g!=null&&g.status?"text-green-500":"text-red-600"}`,children:g==null?void 0:g.msg}),e.jsx("div",{className:"text-xs text-center my-2",children:"Your Will get an OTP on your register mobile No."})]}),n==2&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-center font-semibold",children:["+91 ",O]}),e.jsxs("div",{className:" flex justify-center my-2 gap-2",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter OTP",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",onChange:s=>L(s.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),m&&e.jsx("p",{className:`text-center text-sm font-semibold ${m!=null&&m.status?"text-green-500":"text-red-600"}`,children:m==null?void 0:m.msg}),e.jsxs("div",{className:"text-xs text-center my-2",children:["Temporary OTP is ",e.jsxs("span",{className:"font-semibold",children:[" ",(I=r==null?void 0:r.data)==null?void 0:I.otp]}),"."]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:b,type:"button",className:"px-2 py-1 border border-indigo-600 hover:bg-indigo-600 hover:text-white shadow rounded",children:"Cancel"}),e.jsx("button",{onClick:t,type:"button",className:"px-2 py-1 border hover:bg-indigo-700 border-indigo-600 bg-indigo-500 text-white shadow rounded",children:"Submit"})]})]})]})})})}const xe={overlay:{},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"transparent",border:"none",height:"maxHeight"}};function pe(d){var _,t,u,O,E,R,I,s,o,k,B,D,Y,U,X,F;const[f,j]=H.useState(!1);l.useState(),l.useState(!1),l.useState(!0);const[r,N]=l.useState(),[a,L]=l.useState(),[n,C]=l.useState(),[g,i]=l.useState(),[m,w]=l.useState(!1),{api_waterViewPendingApplication:x,api_waterMasterData:W,api_waterJeAfterSiteInspection:h,header:v}=z();T(),l.useEffect(()=>{j(!0)},[]);const p=d==null?void 0:d.id;function M(){}function y(){j(!1),d.openSiteVerityModal(!1)}l.useEffect(()=>{A(),S(),b()},[d==null?void 0:d.openSiteVerityModal]);const A=()=>{console.log("getApplicationDetail Data API CAlled.."),i(!0),P.post(`${x}`,{applicationId:p},v).then(function(c){C(c.data.data),i(!1)}).catch(function(c){console.log("==2 details by id error...",c),i(!1)})},S=()=>{console.log("fetchAfterInspectionData Data API CAlled.."),i(!0),P.post(h,{applicationId:p},v).then(c=>{c.data.status==!0&&(L(c.data.data),i(!1),console.log("Je Data After Site Inspection Done",c.data.data))}).catch(c=>{console.log("Exception While fetching after je data",c)})},b=()=>{console.log("Mater Data API CAlled.."),i(!0),P.post(`${W}`,{},v).then(c=>{N(c.data.data),i(!1)}).catch(c=>{i(!1),console.log("Exception While Master Data Fetch",c)})};return e.jsx("div",{className:"",children:e.jsx(Q,{isOpen:f,onAfterOpen:M,onRequestClose:y,style:xe,contentLabel:"Example Modal",children:e.jsx("div",{children:e.jsx("div",{className:"relative w-full h-full md:h-auto border-indigo-600 shadow-indigo-200 shadow-sm rounded",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow ",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Site Verification Details"}),e.jsxs("button",{onClick:y,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"defaultModal",children:[e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),g&&e.jsx(Z,{}),m&&e.jsx("p",{className:"text-red-500 text-center font-semibold relative",children:m}),e.jsx("div",{className:"",children:e.jsxs("table",{className:"",children:[e.jsx("thead",{className:"font-bold text-left text-sm border text-white bg-indigo-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Sl No."}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Particulars"}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Proposed By Applicant"}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"JE Inspection Report"})]})}),e.jsxs("tbody",{className:"text-sm",children:[e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"1."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Property Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(_=n==null?void 0:n.applicationDetails)!=null&&_.property_type?(t=n==null?void 0:n.applicationDetails)==null?void 0:t.property_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:((O=(u=r==null?void 0:r.water_property_type_mstr)==null?void 0:u.find(c=>c.id===(a==null?void 0:a.property_type_id)))==null?void 0:O.property_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"2."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Total Area in Sq.Ft."}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(E=n==null?void 0:n.applicationDetails)!=null&&E.area_sqft?(R=n==null?void 0:n.applicationDetails)==null?void 0:R.area_sqft:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(a==null?void 0:a.area_sqft)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"3."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Report"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(I=n==null?void 0:n.applicationDetails)!=null&&I.pipeline_type?(s=n==null?void 0:n.applicationDetails)==null?void 0:s.pipeline_type:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[((k=(o=r==null?void 0:r.water_param_pipeline_type)==null?void 0:o.find(c=>c.id===(a==null?void 0:a.pipeline_type_id)))==null?void 0:k.pipeline_type)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"4."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Size (In MM)"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[a==null?void 0:a.pipeline_size," MM"]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"5."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Size Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(a==null?void 0:a.pipeline_size_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"6."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Is Application Comes Under Regularization"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(B=n==null?void 0:n.applicationDetails)!=null&&B.connection_type?(D=n==null?void 0:n.applicationDetails)==null?void 0:D.connection_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:((U=(Y=r==null?void 0:r.water_connection_type_mstr)==null?void 0:Y.find(c=>c.id===(a==null?void 0:a.connection_type_id)))==null?void 0:U.connection_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"7."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Pipe Diameter"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[a==null?void 0:a.pipe_size," MM"]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"8."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Pipe Quality"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(a==null?void 0:a.pipe_type)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"9."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Ferrule Size"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(a==null?void 0:a.ferrule_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"10."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Road Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(a==null?void 0:a.road_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"11."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Applicant Category"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(X=n==null?void 0:n.applicationDetails)!=null&&X.category?(F=n==null?void 0:n.applicationDetails)==null?void 0:F.category:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(a==null?void 0:a.category)||"N/A"})]})]})]})}),e.jsx("div",{className:"flex justify-center p-6 border-t border-gray-200 rounded-b",children:e.jsx("button",{onClick:y,className:"mx-2 text-white bg-indigo-700 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300 rounded-lg border border-indigo-200 text-sm font-medium px-5 py-2.5 focus:z-10 ",children:"Close"})})]})})})})})}const me=d=>{const[f,j]=l.useState(null),[r,N]=l.useState(!1),[a,L]=l.useState(),[n,C]=l.useState(!1),[g,i]=l.useState(),[m,w]=l.useState(!1),[x,W]=l.useState(),h=d.data,v=d==null?void 0:d.isLoading,p=T(),M=t=>{j(f===t?null:t)},y=t=>{w(!0),W(t),console.log("Clicked PAy",t)},A=()=>{console.log("WaterPendingApplicationsList - Before"),d.refechList(),console.log("WaterPendingApplicationsList - After")},S=t=>{L(t),N(!0)},b=t=>{i(t),C(!0)};if(v)return"Loading..";if(!h)return e.jsx(G,{message:"No Pending Water Application Found."});const _=x==null?void 0:x.connection_type_name;return e.jsxs(e.Fragment,{children:[r&&e.jsx(ne,{setOpenDeleteModal:N,openDeleteModal:r,dataTobeDeleted:a,reFetch:A}),n&&e.jsx(pe,{openSiteVerityModal:C,id:g}),m&&e.jsx(oe,{category:_,openPaymentModal:w,paymentData:x,refechList:A}),e.jsxs("div",{className:"w-full md:ml-0 mb-20",children:[e.jsxs("p",{className:"font-manrope md:my-4 px-1 ",children:["Total : ",e.jsx("span",{className:"font-semibold",children:h==null?void 0:h.length})]}),e.jsx("div",{className:"overflow-y-auto h-auto md:w-full mb-10 md:mr-0 max-sm:p-1",children:h==null?void 0:h.map((t,u)=>e.jsxs("div",{className:"md:w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>M(u),children:[e.jsxs("div",{className:"flex max-sm:gap-0 overflow-auto md:flex grid-cols-12 p-2 w-full items-center max-sm:items-start justify-between border-b border-gray-100  max-sm:flex-col",children:[e.jsx("div",{className:"flex flex-row justify-center items-center max-sm:w-full max-sm:mt-2 max-sm:mb-2",children:e.jsx("img",{src:re,className:"h-10 ml-3 rounded-full "})}),e.jsxs("div",{className:"max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"ULB"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",style:{color:t!=null&&t.parked?"red":"inherit"},children:(t==null?void 0:t.ulb_name)||"Ranchi Municipal Corporation"})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%] ",children:"Consumer No."}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:t!=null&&t.parked?"red":"inherit"},children:t==null?void 0:t.consumer_no})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Consumer Type"}),e.jsxs("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:[" ",t==null?void 0:t.consumer_type_name]})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Consumer Name"}),e.jsx("p",{className:" md:block px-2 py-1 break-all col-span-2 font-semibold text-sm",children:t==null?void 0:t.applicant_name})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Due Amount"}),e.jsx("p",{className:" md:block px-2 py-1 break-all col-span-2 font-semibold text-sm",children:t==null?void 0:t.total_demand_amount})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Due From"}),e.jsx("p",{className:" md:block px-2 py-1 col-span-2 max-sm:text-sm",children:V(t==null?void 0:t.demand_from,"YYYY-MM-DD").format("DD-MMM-yy")})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Due Upto"}),e.jsx("p",{className:" md:block px-2 py-1 col-span-2 max-sm:text-sm",children:V(t==null?void 0:t.demand_upto,"YYYY-MM-DD").format("DD-MMM-yy")})]}),e.jsx("div",{className:"max-sm:flex max-sm:justify-end max-sm:w-full",children:e.jsx("p",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium col-span-1 ",children:f===u?e.jsx($,{size:24}):e.jsx(ee,{size:24})})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:f===u&&e.jsxs("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:[e.jsxs("div",{className:"md:hidden grid grid-cols-12 text-sm border-b-2 pb-2 mb-2 border-gray-100",children:[e.jsxs("div",{className:"col-span-6 mr-1",children:[e.jsxs("p",{className:"flex justify-between",children:["Payment :",e.jsxs("span",{className:"font-semibold",children:[(t==null?void 0:t.payment_status)==0&&"UnPaid",(t==null?void 0:t.payment_status)==1&&"Paid",(t==null?void 0:t.payment_status)==2&&"Processing"]})]}),e.jsxs("p",{className:"flex justify-between",children:["Document :",e.jsx("span",{className:"font-semibold",children:(t==null?void 0:t.doc_upload_status)==!0?"Uploaded":"NotUpload"})]})]}),e.jsxs("div",{className:"col-span-6 ml-4",children:[e.jsxs("p",{className:"flex justify-between",children:["Type :",e.jsxs("span",{className:"font-semibold",children:[" ",t==null?void 0:t.type]})]}),e.jsxs("p",{className:"flex justify-between",children:["Apply on :",e.jsx("span",{className:"font-semibold text-xs",children:V(t==null?void 0:t.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")})]})]})]}),e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[(t==null?void 0:t.is_field_verified)&&e.jsx("button",{onClick:()=>b(t==null?void 0:t.id),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Site Verification"}),(t==null?void 0:t.doc_upload_status)&&(t==null?void 0:t.payment_status)==0&&e.jsx("button",{onClick:()=>y(t),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),(t==null?void 0:t.actualPaymentStatus)==0&&e.jsx("button",{onClick:()=>y(t),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),(t==null?void 0:t.current_role_name)==""&&e.jsx("button",{onClick:()=>p(`/water-doc-upload/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Upload Document"}),(t==null?void 0:t.parked)==!0&&e.jsx("button",{onClick:()=>p(`/water-doc-upload/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Re-Upload Document"}),e.jsx("button",{onClick:()=>p(`/swm/viewApplication/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Details"}),(t==null?void 0:t.payment_status)==0&&(t==null?void 0:t.current_role)==""&&e.jsx("button",{onClick:()=>S({application_no:t==null?void 0:t.application_no,id:t==null?void 0:t.id}),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-red-500 hover:bg-red-600",children:"Delete"})]})]},t.name)})]},t.index))})]})]})},he=()=>{l.useState(null);const[d,f]=l.useState(1),[j,r]=l.useState(0),[N,a]=l.useState(),[L,n]=l.useState(),[C,g]=l.useState(),[i,m]=l.useState(!1),[w,x]=l.useState(!1),[W,h]=l.useState(!1);l.useState(!1);const[v,p]=l.useState(!0),{api_swmAttachedConsumerList:M,api_citizenApplications:y,api_citizenApprovedApplications:A,header:S}=z(),b=T(),_=()=>{r(s=>s+1)},{setBreadCrumbData:t}=l.useContext(q);l.useEffect(()=>{t(["Water Dashboard"])},[]);const u=()=>{p(!0),h(!0),P.post(M,{},S).then(s=>{var o;p(!1),s.data.status?(h(!1),a((o=s==null?void 0:s.data)==null?void 0:o.data),console.log("Fetched Attached WAter consumer List",s)):(h(!1),console.log("Error: While fetching attached consumer list",s.data))}).catch(s=>{if(p(!1),h(!1),console.log("Exception: While fetching attached consumer list",s),s.response.status===401)return b("/logout")})},O=()=>{p(!0),m(!0),P.post(y,{},S).then(s=>{var o;p(!1),s.data.status?(m(!1),n((o=s==null?void 0:s.data)==null?void 0:o.data),console.log("Fetched water pending application list",s)):(m(!1),console.log("Error: While fetching water pending application list",s.data))}).catch(s=>{if(p(!1),m(!1),console.log("Exception: While fetching water pending application list",s),s.response.status===401)return b("/logout")})},E=()=>{p(!0),x(!0),P.post(A,{},S).then(s=>{var o;p(!1),s.data.status?(x(!1),g((o=s==null?void 0:s.data)==null?void 0:o.data),console.log("Fetched water pending application list",s)):(x(!1),console.log("Error: While fetching water pending application list",s.data))}).catch(s=>{if(p(!1),x(!1),s.response.status===401)return b("/logout");console.log("Exception: While fetching water pending application list",s)})};l.useEffect(()=>{u(),O(),E()},[]);const R=()=>{O()},I=()=>{u()};return e.jsx(e.Fragment,{children:v?e.jsx(te,{}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{openAttachModal:j,refetch:I}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex-1 md:flex items-center md:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"md:text-3xl text-2xl text-gray-800 font-semibold max-sm:pl-5",children:[" ","SWM Dashboard"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 max-sm:pl-5",children:"Here is list of all SWM Consumers attached."})]}),e.jsxs("div",{className:"flex p-2 gap-1 max-sm:pl-5",children:[e.jsx("button",{onClick:()=>_(),className:`${se} relative`,"data-tooltip-id":"link-connection-tooltip",children:e.jsxs("span",{className:"flex text-sm md:text-base",children:[e.jsx("span",{className:"md:mt-1 mr-1",children:e.jsx(ae,{size:17})}),"Link Consumer"]})}),e.jsx(J,{id:"link-connection-tooltip",place:"top",effect:"solid",content:"Click to link an existing connection.",className:`!bg-white !text-black !border !border-gray-300 \r
                   shadow-lg px-3 py-2 rounded-md text-sm font-medium \r
                   transition-opacity duration-300 ease-in-out`}),e.jsx(J,{id:"apply-new-connection-tooltip",place:"top",effect:"solid",content:"Click to apply for a new water connection.",className:`!bg-white !text-black !border !border-gray-300 \r
                   shadow-lg px-3 py-2 rounded-md text-sm font-medium \r
                   transition-opacity duration-300 ease-in-out`})]})]}),e.jsx("div",{className:"bg-white overflow-auto",children:e.jsx("ul",{className:"border-b flex items-center gap-1 md:gap-x-6 text-xs md:text-sm",children:e.jsx("li",{className:`py-2 border-b-2 ${d==1?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>f(1),role:"tab",className:"flex items-center font-semibold gap-x-2 py-2 px-2 rounded-lg duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100",children:[e.jsx("img",{className:"h-5 w-5 hidden md:block",src:de,alt:"Approved Icon"}),"Attached Consumers"]})})})}),e.jsx("div",{children:e.jsx("section",{className:"container mx-auto py-4",children:e.jsx("div",{children:d==1&&e.jsx(le,{errorMsg:"Error Data Loading..",children:e.jsx(me,{refechList:R,isLoading:i,data:N})})})})})]})]})})},fe=()=>e.jsx("div",{className:"p-10",children:e.jsx(he,{})}),Le=()=>(T(),e.jsx(e.Fragment,{children:e.jsx("section",{className:"-mt-10",children:e.jsx(fe,{})})}));export{Le as default};
