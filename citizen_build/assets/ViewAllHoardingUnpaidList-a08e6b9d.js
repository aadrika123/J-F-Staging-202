import{j as e}from"./mui-105b4636.js";import{a as oe,r as t,u as le}from"./router-894402c5.js";import{M as $}from"./index-82be3ecd.js";import{H as de}from"./HoardingApplicationFullDetail-887e151e.js";import{A as H,Q as j,b as re,B as ce}from"./index-0ba2dd6b.js";import{R as me}from"./RazorpayPaymentScreen-e64fce4b.js";import{A as z,a as G}from"./ReuploadDocumentModal-97e4c72c.js";import{C as xe}from"./CommonModal-1a38119d.js";import{S as he}from"./ServerErrorCard-47947b67.js";import{A as pe}from"./AdvtListTablePagination-a26bdcea.js";import"./react-40db4358.js";import"./axios-67d8a945.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";import"./CitizenApplyApiList-6dc33400.js";import"./WaterApiList-26fa7f5b.js";import"./materialTailwind-5a82b722.js";import"./react-tooltip.min-768fbf08.js";const ge={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}};function ue(a){var h,P,p,d,g,u;const[N,r]=oe.useState(!1),{api_getHoardingOrderIdForPayment:y}=G(),[_,b]=t.useState(),c=le();t.useEffect(()=>{a.openPaymentModal>0&&r(!0)},[a.openPaymentModal]);function w(){}function S(){r(!1)}const m=(n,s)=>{j.dismiss(),s=="success"&&j.success(n),s=="error"&&j.error(n)},A=n=>{var s;(n==null?void 0:n.status)==!0?(c(`/paymentScreen/${n.data.razorpay_payment_id}/${(s=a==null?void 0:a.applicationDetails)==null?void 0:s.workflow_id}`),m("Payment Successfull","success")):(j.error("Payment failed...."),m("Payment Failed","error"),c("/advertDashboard"))},x=n=>{const I={id:n.target.id};H.post(`${y}`,I,z()).then(function(o){o.data.status==!0&&me(o.data.data,A),b(o)}).catch(function(o){alert("Backend Server error. Unable to Generate Order Id")})};return e.jsx("div",{className:"",children:e.jsx($,{isOpen:N,onAfterOpen:w,onRequestClose:S,style:ge,contentLabel:"Example Modal",children:e.jsx("div",{className:"bg-violet-200 text-slate-50 drop-shadow-2xl border border-violet-500 p-5 m-5 rounded-md",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"shadow-md shadow-violet-300 py-1 pl-3 bg-white border-gray-400 text-gray-600 flex",children:["Make Payment For",e.jsxs("span",{className:"font-bold text-md ml-4 uppercase ",children:[(h=a==null?void 0:a.applicationDetails)==null?void 0:h.type," "]})]}),e.jsxs("div",{className:"md:flex block w-full h-56",children:[e.jsxs("div",{className:"grid grid-cols-12 px-8 pt-3 leading-8 ",children:[e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("p",{children:"Application No. -"}),e.jsx("p",{children:"Applied date -"})]}),e.jsxs("div",{className:"col-span-6 text-gray-500 font-bold",children:[e.jsxs("p",{children:[(P=a==null?void 0:a.applicationDetails)==null?void 0:P.application_no," "]}),e.jsx("p",{children:(p=a==null?void 0:a.applicationDetails)==null?void 0:p.application_date})]})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("p",{children:"Approve Date -"})}),e.jsx("div",{className:"col-span-6 text-gray-500 font-bold",children:e.jsxs("p",{children:[(d=a==null?void 0:a.applicationDetails)==null?void 0:d.approve_date,"  "]})})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg ",children:"Payable Amount"})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg bg-violet-300 px-2 ",children:(g=a==null?void 0:a.applicationDetails)==null?void 0:g.payment_amount})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("button",{onClick:S,className:"mx-2 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:x,id:(u=a==null?void 0:a.applicationDetails)==null?void 0:u.id,className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/256/7057/7057515.png",className:"h-16"})})})})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:""})})]})]})})})})}function Fe(){const[a,N]=t.useState(),[r,y]=t.useState(),{api_getHoardingUnpaidApplicationList:_,api_getHoardingApplicationDetailForPayment:b}=G();t.useState([]);const[c,w]=t.useState(),[S,m]=t.useState(!1),[A,x]=t.useState(!1),[h,P]=t.useState(!1),p=()=>x(!0),d=()=>x(!1),g=()=>{},[u,n]=t.useState(0);t.useState(!1);const[s,I]=t.useState(!1),[o,k]=t.useState(!1),[Q,D]=t.useState(!1),[J,K]=t.useState(0),[M,W]=t.useState(1),[X,F]=t.useState(0),[C,Y]=t.useState(10),[L,Z]=t.useState(""),[ee,R]=t.useState(!1),ae=[{Header:"#",Cell:({row:i})=>e.jsx("div",{className:"pr-2",children:i.index+1})},{Header:"Application No",accessor:"application_no"},{Header:"Apply Date",accessor:"application_date"},{Header:"Payment Amount",accessor:"payment_amount"},{Header:"Action",accessor:"id",Cell:({cell:i})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>te(i.row.values.id,"Approve"),className:`bg-indigo-500 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r
                    hover:text-white text-white`,children:"View"}),e.jsx("button",{onClick:()=>se(i.row.values.id),className:`bg-indigo-500 ml-4 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r
                 hover:text-white text-white`,children:"Pay"})]})}],te=(i,f)=>{y(i),N(f),p()},se=i=>{const O={applicationId:i};H.post(`${b}`,O,z()).then(function(l){w(l.data.data),n(v=>v+1)}).catch(function(l){})};t.useEffect(()=>{E(M,C,L)},[M,L,C]);const E=(i,f,O="")=>{R(!0),D(!0),H.post(_,{page:i,perPage:f,key:O},re()).then(l=>{var v,T,U,B,V,q;I((T=(v=l.data)==null?void 0:v.data)==null?void 0:T.data),k(!0),D(!1),K((B=(U=l.data)==null?void 0:U.data)==null?void 0:B.total),F((q=(V=l.data)==null?void 0:V.data)==null?void 0:q.last_page)}).catch(l=>{k(!1),D(!1)}),setTimeout(()=>{R(!1)},[500])},ie={totalDataCount:J,currentPageIndex:M,setcurrentPageIndex:W,pageLength:C,setpageLength:Y,lastPageIndex:X,setlastPageIndex:F,fetchInboxList:E,searchValue:L,setsearchValue:Z,refreshStatus:ee},ne=i=>{m(i)};return Q?e.jsx(e.Fragment,{children:e.jsx(ce,{})}):h?e.jsx(xe,{children:e.jsx(he,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"container bg-white text-gray-600 h-screen mx-auto mt-16",children:e.jsxs("div",{children:[e.jsx(ue,{openPaymentModal:u,applicationDetails:c}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-4 container mx-auto pt-4 ",children:e.jsx("div",{className:"col-span-12 p-2",children:e.jsxs("div",{className:"flex flex-row bg-white mb-4 rounded leading-5 shadow-md shadow-violet-100 ",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3288/3288006.png",className:"h-10 ml-3 mt-2"}),e.jsx("h1",{className:"text-xl text-gray-700 font-semibold p-4",children:"HOARDING UNPAID APPLICATIONS"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 p-2",children:[o&&(s==null?void 0:s.length)!=0&&e.jsx(pe,{columns:ae,dataList:s,values:ie}),o&&(s==null?void 0:s.length)==0&&e.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx($,{isOpen:A,onAfterOpen:g,onRequestClose:d,contentLabel:"Example Modal",children:e.jsx("div",{class:" rounded-lg shadow-xl border-2 border-gray-50 mx-auto px-0 ",style:{width:"80vw",height:"100%"},children:e.jsx("div",{className:"h-[44rem] bg-white overflow-y-auto",children:e.jsx(de,{data:r,applicationType:a,showLoader:ne,closeModal:d})})})})})]})})})}export{Fe as default};
