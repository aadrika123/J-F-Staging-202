import{j as e}from"./mui-8bd1858b.js";import{r as s,b as B,f as _,u as G}from"./router-56e993c5.js";import{z as M,M as $,a1 as q,A as O,a6 as H,F as J}from"./index-2314c174.js";import{F as V}from"./index.esm-79e01f48.js";import{P as T}from"./PetRegAPIList-ff73c1fc.js";import{u as K}from"./upload-e931b2e1.js";import{P as Q}from"./PetRegTopButtons-5b115aeb.js";import{V as X}from"./ViewUploadedDoc-d021691b.js";import"./axios-ab7cc016.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-e4eb05ed.js";import"./moment-a9aaa855.js";/* empty css                */import"./redux-a3f69129.js";import"./i18next-2edfafb0.js";const Y={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function Z(l){var j,v;const[U,i]=s.useState(),[a,y]=B.useState(!1),[u,N]=s.useState();s.useState();const[c,x]=s.useState(),[p,b]=s.useState(!1),{notify:g}=s.useContext(M),{api_PetRegUploadDocument:w,header1:C}=T(),n=l==null?void 0:l.payloadData;console.log("Props Data in Doc upload modal..",n),s.useEffect(()=>{y(!0)},[]);function F(){}function f(){y(!1),N(),x(),l.close(!1)}const D=o=>{var S,k;if(o.preventDefault(),u==null||u==""||c==null||c=="")return i("Please Select Correct File and Type");const h=["jpg","jpeg","png","pdf"],R=(S=c==null?void 0:c.name)==null?void 0:S.split(".").pop().toLowerCase();if(!h.includes(R)){i("Invalid file extension");return}let d=new FormData;d.append("applicationId",l==null?void 0:l.applicationId),d.append("docCategory",(k=l==null?void 0:l.payloadData)==null?void 0:k.docName),d.append("document",c),d.append("docCode",u),console.log("Form Data Payload",d),b(!0),O.post(w,d,C).then(m=>{m.data.status==!0?(g("Document Uploaded Successfully","success"),console.log("Data Uploaded",m),b(!1),f(),l.refetch()):(b(!1),g("Failed to Upload Document","error"),i("Failed to upload file. Please Select Proper File."))}).catch(m=>{b(!1),g("Something went wrong","error"),i("Failed to upload file. Please Select Proper File."),console.log("Expection...",m)})};return e.jsx("div",{className:" overflow-auto",children:e.jsx($,{isOpen:a,onAfterOpen:F,onRequestClose:f,style:Y,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:D,children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:f,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(q,{})]}),e.jsx("h1",{className:"font-semibold md:text-xl text-sm text-gray-700",children:"Upload Document"})]}),e.jsxs("div",{className:"md:inline-block max-sm:w-[20rem] overflow-auto p-4",children:[e.jsxs("table",{className:"leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap capitalize",children:(j=n==null?void 0:n.docName)==null?void 0:j.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:o=>N(o.target.value),className:" outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{children:"Select Document"}),(v=n==null?void 0:n.masters)==null?void 0:v.map(o=>e.jsx("option",{value:o.documentCode,children:o.docVal}))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:p,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:o=>x(o.target.files[0])}),e.jsxs("label",{className:` ${p?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(V,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:p?e.jsx("img",{className:"h-8",src:K,alt:"Uploading"}):e.jsx("button",{disabled:p,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:U})})]})]})})})})}const he=l=>{var A;s.useState(0);const[U,i]=s.useState(!1),[a,y]=s.useState(),[u,N]=s.useState(),[c,x]=s.useState(!0),[p,b]=s.useState(0),[g,w]=s.useState(!1),[C,n]=s.useState(0),[F,f]=s.useState(),[D,j]=s.useState(!1),[v,o]=s.useState("");s.useContext(M);const{id:h}=_(),{api_PetRegistrationDocUploadList:R,api_sendtoNextLevel:d,header1:S}=T(),{setBreadCrumbData:k}=s.useContext(M);s.useEffect(()=>{k(["Pet Registration","Upload Document"])},[]);const m=G(),I=r=>{r&&(f(r),n(P=>P+1))};console.log("nhjhjhghjghj",h);const E=()=>{x(!0),O.post(R,{applicationId:h},S).then(r=>{x(!1),r.data.status?y(r.data.data):w(!0)}).catch(r=>{console.log("Error while getting pet doc list",r),x(!1),w(!0)})};s.useEffect(()=>{E()},[p]);const z=r=>{i(!0),N(r),console.log("Document Upload click..",r)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-3",children:[e.jsx(Q,{active:"document",consumerNo:a==null?void 0:a.ApplicationNo}),e.jsx(X,{openDocviewModal:C,documentUrl:F}),U&&e.jsx(Z,{payloadData:u,refetch:E,applicationId:h,close:i}),e.jsxs("div",{className:"bg-white rounded-md shadow-sm py-2",children:[e.jsx("div",{className:"my-3",children:e.jsx("p",{className:"text-center text-2xl font-medium text-gray-800",children:"Pet Registration Document Upload"})}),c?e.jsxs("p",{className:"w-full",children:[" ",e.jsx(H,{})," "]}):e.jsxs("div",{className:"overflow-auto",children:[g==!0?e.jsx("p",{className:"m-auto font-semibold border border-gray-300 text-red-700 bg-red-100 px-5 py-2 rounded shadow w-fit",children:"Failed to Get Data"}):e.jsxs("table",{className:"w-full text-left text-gray-600",children:[e.jsx("thead",{className:"text-lg bg-gray-300 border-b-2",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"px-3 py-2",children:"Sl."}),e.jsx("th",{className:"px-3 py-2",children:"Document Name"}),e.jsx("th",{className:"px-3 py-2",children:"Remarks"}),e.jsx("th",{className:"px-3 py-2",children:"View"}),e.jsx("th",{className:"px-3 py-2",children:"Status"}),e.jsx("th",{className:"px-3 py-2",children:"Action"})]})}),e.jsx("tbody",{className:"",children:a&&((A=a==null?void 0:a.listDocs)==null?void 0:A.map((r,P)=>{const t=r==null?void 0:r.uploadedDoc,W=t!=null&&t.remarks&&t.remarks.length>10?t.remarks.slice(0,10)+"...":(t==null?void 0:t.remarks)||"-";return e.jsxs("tr",{className:"hover:bg-sky-100 border-b",children:[e.jsx("td",{className:"px-3 py-2",children:P+1}),e.jsxs("td",{className:"px-3 py-2",children:[r.docName," ",r.isMandatory==1&&e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:t!=null&&t.remarks?e.jsx("span",{className:"cursor-pointer hover:underline",onClick:()=>{o(t.remarks),j(!0)},title:"Click to view full remarks",children:W}):"-"}),e.jsx("td",{className:"px-3 py-2",children:t!=null&&t.docPath?t.docPath.endsWith(".pdf")?e.jsx(J,{className:"text-red-600 text-3xl cursor-pointer",onClick:()=>I(t==null?void 0:t.docPath)}):e.jsx("img",{className:"h-8 cursor-pointer",onClick:()=>I(t==null?void 0:t.docPath),src:t==null?void 0:t.docPath,alt:"images"}):"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-sm text-[#37517e]",children:[(t==null?void 0:t.verifyStatus)===0&&e.jsx("p",{className:"text-orange-400 font-semibold",children:"Pending"}),(t==null?void 0:t.verifyStatus)===1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Verified"}),(t==null?void 0:t.verifyStatus)===2&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Rejected"}),!t&&e.jsx("p",{className:"text-gray-400 font-semibold",children:"Not Uploaded"})]}),e.jsx("td",{className:"py-2 border-b border-gray-200 text-sm",children:(t==null?void 0:t.verifyStatus)===1?e.jsx("p",{className:"text-base text-green-600",children:"Verified"}):e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsx("span",{className:"relative ",onClick:()=>z(r),children:e.jsxs("label",{className:"cursor-pointer rounded-sm hover:rounded-sm hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800 bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium",htmlFor:"contained-button-file",children:[e.jsx(V,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),t?"Re-Upload":"Upload"]})})]})})]},P)}))})]}),(a==null?void 0:a.docUploadStatus)&&e.jsx("p",{className:"text-center mt-5 text-green-600 font-semibold",children:"All Documents are uploaded."})]}),e.jsxs("div",{className:"flex justify-center my-6 space-x-5",children:[e.jsx("button",{type:"button",onClick:()=>m("/pet-registration-dashboard"),className:"bg-indigo-500 px-5 py-1 text-white rounded shadow",children:"Back"}),(a==null?void 0:a.docUploadStatus)&&(a==null?void 0:a.paymentStatus)==0&&e.jsx("button",{onClick:()=>m(`/petPayment/${h}`),type:"submit",className:"bg-indigo-700 px-8 py-2 text-white rounded font-sans font-semibold shadow",children:"Pay Now"})]})]})]}),D&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Remarks"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap break-words",children:v}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:()=>j(!1),children:"Close"})]})})]})};export{he as default};
