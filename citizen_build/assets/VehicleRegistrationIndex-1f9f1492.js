import{j as r}from"./mui-8e804a04.js";import{r as i}from"./router-87042356.js";import{m as D,c as Z,d as n,u as Y,A as N,B as X,i as J}from"./index-19682a6e.js";import{F as Q}from"./PetAccordionPage-5528581d.js";import{W as ee}from"./WaterApiList-e42e9d41.js";import{P as re}from"./PetRegAPIList-bb1063ad.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";const e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},se=x=>{var A;const[c,g]=i.useState(),[d,j]=i.useState(),[m,I]=i.useState(),[v,q]=i.useState(!1),[B,b]=i.useState(!1),[P,f]=i.useState(!1),{notify:F}=i.useContext(D);i.useState();const[C,ae]=i.useState(),[E,w]=i.useState(!1),[K,k]=i.useState(),[R,G]=i.useState(),[_,V]=i.useState(),{api_ulbList:W,header:S,api_wardList:y}=ee(),{api_RigRegistrationApplyForm:M,api_PetRegistrationMaster:$,api_ListOfSafHolding:le,api_getUserDetailsByHoldingSaf:ie,header1:T}=re(),O=Z({ulb:n().required("Kindly enter a value."),address:n().required("Kindly enter a value."),applicantName:n().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),ownerCategory:n().required("Kindly enter a value."),ward:n().required("Kindly enter a value."),mobileNo:n().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:n().email().required("Kindly enter a value."),panNo:n().matches(/^[A-Za-z0-9]{10}$/,"Enter 10 Character PAN No.").required("Kindly enter a value."),driverName:n().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),driverGender:n().required("Kindly enter a value."),driverBirthDate:n().required("Kindly enter a value."),vehicleComapny:n().required("Kindly enter a value."),vehicleFrom:n().required("Kindly enter a value."),fitness:n().required("Kindly enter a value."),taxCopy:n().required("Kindly enter a value."),license:n().required("Kindly enter a value."),registrationNumber:n().required("Kindly enter a value.")}),U={ulb:"",ulbId:"",applicantName:"",ownerCategory:"",ward:"",mobileNo:"",email:"",panNo:"",address:"",driverName:"",driverGender:"",driverBirthDate:"",vehicleComapny:"",vehicleFrom:"",fitness:"",taxCopy:"",license:"",registrationNumber:""};let o=new FormData;const a=Y({initialValues:U,enableReinitialize:!0,onSubmit:(s,t)=>{console.log("clicked"),console.log(s,"formSubmitValues==>"),H(s)},validationSchema:O}),z=s=>{let t=s.target.name,l=s.target.value;f(!1),t=="driverName"&&a.setFieldValue("driverName",J(l,a.values.driverName,20)),t=="fitness"&&k(s.target.files[0]),t=="taxCopy"&&G(s.target.files[0]),t=="license"&&V(s.target.files[0])},H=s=>{b(!0);const t={ulbId:s==null?void 0:s.ulb,applicantName:s==null?void 0:s.applicantName,ownerCategory:s==null?void 0:s.ownerCategory,ward:s==null?void 0:s.ward,mobileNo:s==null?void 0:s.mobileNo,email:s==null?void 0:s.email,panNo:s==null?void 0:s.panNo,address:s==null?void 0:s.address,driverName:s==null?void 0:s.driverName,driverGender:s==null?void 0:s.driverGender,driverBirthDate:s==null?void 0:s.driverBirthDate,vehicleComapny:s==null?void 0:s.vehicleComapny,vehicleFrom:s==null?void 0:s.vehicleFrom,registrationNumber:s==null?void 0:s.registrationNumber};console.log(t,"payload====>>");for(let l in t)o.append(l,t[l]);o.append("documents[0][image]",K),o.append("documents[0][docCode]","FITNESS"),o.append("documents[0][ownerDtlId]",""),o.append("documents[1][image]",R),o.append("documents[1][docCode]","TAXCOPY"),o.append("documents[1][ownerDtlId]",""),o.append("documents[2][image]",_),o.append("documents[2][docCode]","LICENSE"),o.append("documents[2][ownerDtlId]",""),console.log("complete payload",o),N.post(M,o,S).then(l=>{var p,h,u;b(!1),l.data.status?(console.log("Form applied successfully"),x.data(l.data.data),console.log("1",l.data.data),x.screen(2),F((p=l==null?void 0:l.data)==null?void 0:p.message,"success")):(F((h=l==null?void 0:l.data)==null?void 0:h.message,"error"),f((u=l==null?void 0:l.data)==null?void 0:u.message),console.log("Failed to apply pet registration"))}).catch(l=>{var p,h,u,L;f((h=(p=l==null?void 0:l.response)==null?void 0:p.data)==null?void 0:h.error),F("Something Went wrong","error"),b(!1),console.log("Error while applying for pet registration..",(L=(u=l==null?void 0:l.response)==null?void 0:u.data)==null?void 0:L.error)})};return i.useEffect(()=>{N.post($,{},T).then(s=>{s.data.status?(I(s.data.data),console.log("vehicle master data",s.data)):console.log("Error fetching vehicle master list")}).catch(s=>{console.log("Error while getting vehicle master list")})},[]),i.useEffect(()=>{N.get(W,S).then(s=>{s.data.status?(g(s.data.data),console.log("ULB List",s.data)):console.log("Error fetching ulb list")}).catch(s=>{console.log("Error while getting ulb list")})},[]),i.useEffect(()=>{w(!0),N.post(y,{ulbId:a.values.ulb},S).then(s=>{w(!1),s.data.status?(j(s.data.data),console.log("Ward List",s.data)):console.log("Error fetching Ward list")}).catch(s=>{w(!1),console.log("Error while getting Ward list")})},[a.values.ulb]),console.log("formik.values.owner_type",a.values.ownerCategory),r.jsxs(r.Fragment,{children:[E&&r.jsx(X,{}),r.jsxs("form",{onSubmit:a.handleSubmit,onChange:z,className:"mb-20",children:[r.jsxs("div",{className:"overflow-y-auto ",children:[r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-2",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),c==null?void 0:c.map((s,t)=>r.jsx("option",{value:s.id,children:s.ulb_name},t))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.ulb&&a.errors.ulb?a.errors.ulb:null})]}),r.jsxs("div",{className:"m-2",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ownerCategory",children:["Category of Application",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("ownerCategory"),name:"ownerCategory",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(m==null?void 0:m.ownertype)&&((A=m==null?void 0:m.ownertype)==null?void 0:A.map((s,t)=>t===0?r.jsx("option",{value:s.id,children:s.owner_type},t):t===1&&(C!=null&&C.tenanted)?r.jsx("option",{value:s.id,children:s.owner_type},t):null))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.ownerCategory&&a.errors.ownerCategory?a.errors.ownerCategory:null})]}),r.jsxs("div",{className:"m-2",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("ward"),name:"ward",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(d==null?void 0:d.length)>0&&(d==null?void 0:d.map((s,t)=>r.jsx("option",{value:s.id,children:s.ward_name},t)))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.ward&&a.errors.ward?a.errors.ward:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),r.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 ",children:[r.jsxs("div",{className:"m-2",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.applicantName&&a.errors.applicantName?a.errors.applicantName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("mobileNo"),type:"text",maxLength:"10",name:"mobileNo",className:e==null?void 0:e.textFiled,onChange:a.handleChange,onBlur:a.handleBlur}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.mobileNo&&a.errors.mobileNo?a.errors.mobileNo:null})]}),r.jsxs("div",{className:"m-2",children:[r.jsx("label",{className:e==null?void 0:e.label,htmlFor:"email",children:"Email"}),r.jsx("input",{...a.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.email&&a.errors.email?a.errors.email:null})]}),r.jsxs("div",{className:"m-2",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"panNo",children:["PAN No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("panNo"),maxLength:"10",type:"text",name:"panNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.panNo&&a.errors.panNo?a.errors.panNo:null})]})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("textarea",{...a.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.address&&a.errors.address?a.errors.address:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Vehicle Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"driverName",children:["Name of Driver",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("driverName"),maxLength:"50",type:"text",name:"driverName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.driverName&&a.errors.driverName?a.errors.driverName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"driverGender",children:["Gender",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("driverGender"),type:"text",name:"driverGender",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"1",children:"Male"}),r.jsx("option",{value:"2",children:"Female"}),r.jsx("option",{value:"3",children:"Others"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.driverGender&&a.errors.driverGender?a.errors.driverGender:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"driverBirthDate",children:["Date of Birth",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("driverBirthDate"),type:"date",name:"driverBirthDate",max:new Date().toISOString().split("T")[0],className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.driverBirthDate&&a.errors.driverBirthDate?a.errors.driverBirthDate:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"vehicleComapny",children:["Vehicle Company",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("vehicleComapny"),maxLength:"50",type:"text",name:"vehicleComapny",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.vehicleComapny&&a.errors.vehicleComapny?a.errors.vehicleComapny:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"registrationNumber",children:["Registration No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("registrationNumber"),maxLength:"50",type:"text",name:"registrationNumber",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.registrationNumber&&a.errors.registrationNumber?a.errors.registrationNumber:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"vehicleFrom",children:["Vehicle From",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("vehicleFrom"),maxLength:"50",type:"text",name:"vehicleFrom",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.vehicleFrom&&a.errors.vehicleFrom?a.errors.vehicleFrom:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"fitness",children:["Fitness",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("fitness"),maxLength:"50",type:"file",name:"fitness",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.fitness&&a.errors.fitness?a.errors.fitness:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"taxCopy",children:["Tax Copy",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("taxCopy"),maxLength:"50",type:"file",name:"taxCopy",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.taxCopy&&a.errors.taxCopy?a.errors.taxCopy:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"license",children:["License",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("license"),maxLength:"50",type:"file",name:"license",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.license&&a.errors.license?a.errors.license:null})]})]})]}),r.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>q(!v),children:[r.jsx("input",{type:"checkbox",checked:v,name:"",id:"",onChange:s=>q(s.target.checked)}),r.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),r.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:P&&P}),r.jsx("div",{className:"flex justify-center my-5 ",children:B?r.jsx("p",{children:"Form Submitting.."}):r.jsx("button",{type:"submit",disabled:!v,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},ge=()=>{const[x,c]=i.useState(1),[g,d]=i.useState(),{setBreadCrumbData:j}=i.useContext(D);return i.useEffect(()=>{j(["Apply Pet Registration"])},[]),r.jsx(r.Fragment,{children:r.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:r.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[r.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Rig (HYDT) Registration Application"}),r.jsxs("div",{className:"md:p-5 p-2",children:[r.jsxs("p",{className:`${x==1?"block":"hidden"}`,children:[" ",r.jsx(se,{screen:c,data:d})," "]}),r.jsxs("p",{className:`${x==2?"block":"hidden"}`,children:[" ",r.jsx(Q,{screen:c,data:g})]})]})]})})})};export{ge as default};
