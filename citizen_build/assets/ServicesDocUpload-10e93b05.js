import{j as e}from"./mui-d8134288.js";import{f as l,r as i,u as n}from"./router-a70afc62.js";import{A as t,b as o,c as d,e as s,d as a,u as r,aJ as c,f as u,af as m,Y as p,ag as v,Q as h,X as x,E as g}from"./index-1c8a2e08.js";import{F as f}from"./index.esm-d81e28d2.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";function b(b){var N,w,y,j;const C=p,{id:D,type:U}=l(),{get_ConcessionDocumentsToUpload:k,post_ConcessionDocumentUpload:I,get_ObjectionDocumentsToUpload:O,post_ObjectionDocumentUpload:S,get_HarvestingDocumentsToUpload:$,post_HarvestingDocumentUpload:_,get_ConcessionDetailsById:R,get_HarvestingDetailsById:A,get_ObjectionDetailsById:T}=g(),[H,B]=i.useState(!1),[F,W]=i.useState(""),[E,L]=i.useState(""),[P,V]=i.useState(0),[Y,z]=i.useState(!1),[J,M]=i.useState(""),[Q,X]=i.useState(1);i.useState(0);const[q,G]=i.useState(),[K,Z]=i.useState(""),[ee,le]=i.useState(!0),[ie,ne]=i.useState(!1),[te,oe]=i.useState();i.useState();const[de,se]=i.useState(),[ae,re]=i.useState(null),[ce,ue]=i.useState(null),[me,pe]=i.useState(!1),[ve,he]=i.useState(!1);i.useEffect(()=>{xe()},[P]),i.useEffect(()=>{let e="";"Concession"==U&&(e=R),"Rain Water Harvesting"==U&&(e=A),"Objection"==U&&(e=T),B(!0),t.post(e,{applicationId:D},o()).then(function(e){var l;B(!1),se(null==(l=null==e?void 0:e.data)?void 0:l.data)}).catch(function(e){B(!1)})},[]);const xe=()=>{let e="";"Concession"==U&&(e=k),"Rain Water Harvesting"==U&&(e=$),"Objection"==U&&(e=O),B(!0),t.post(`${e}`,{applicationId:D},o()).then(e=>{var l;oe(null==(l=null==e?void 0:e.data)?void 0:l.data),B(!1)}).catch(e=>{z(!1),B(!1)})},ge=d({docId:s().required("Select document type"),docUpload:a().required("Select document")}),fe=r({initialValues:{docId:"",docUpload:"",docName:""},onSubmit:e=>{Ne()},validationSchema:ge}),be=e=>{let l=e.target.files[0];v(l)&&(Z(e.target.name),G(URL.createObjectURL(e.target.files[0])),W(e.target.files[0]),fe.setFieldValue("docUpload",URL.createObjectURL(e.target.files[0])),"pdf"==(null==l?void 0:l.name).substring((null==l?void 0:l.name).lastIndexOf(".")+1)?le(!1):le(!0))},Ne=e=>{if(null==ce)return h.error("Select Document Type"),re(null),void ue(null);let l=new FormData;if(l.append("applicationId",D),null!=ae&&l.append("ownerId",ae),l.append("docCode",ce),l.append("document",F),""!=F){ne(!1),pe(!1),z(!1),he(!1),X(Q+1),B(!0);let e="";"Concession"==U&&(e=I),"Rain Water Harvesting"==U&&(e=_),"Objection"==U&&(e=S),t.post(`${e}`,l,x()).then(e=>{var l;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(h.success("Document Uploaded Successfully !!"),z(!1),L(""),W(""),B(!1),V(P+1),Z(""),fe.setFieldValue("docUpload",""),V(P+1),re(null),ue(null),xe()):h.error("Something went wrongg !!!")}).catch(e=>{z(!1),B(!1)})}else h.error("Select file")},we=e=>{""==e&&h.error("File not uploaded !!!"),""!=e&&(M(e),he(!0),X(Q+1))},ye=e=>{ue(e.target.value)},je=n();return e.jsxs(e.Fragment,{children:[e.jsx(c,{position:"top-right",autoClose:2e3}),H&&e.jsx(u,{}),e.jsxs("div",{className:"overflow-x-auto mx-auto w-full px-36 relative",children:[e.jsx("button",{className:"absolute top-2 left-2 bg-indigo-500 px-4 py-1 shadow-lg rounded-sm text-white hover:bg-white poppins border-2 border-indigo-500 hover:text-indigo-600 transition-all duration-200 mt-1 hover:border-2 hover:border-indigo-600",onClick:()=>je("/propertyDashboard"),children:"Back"}),e.jsxs("div","Objection"==U?{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:["Clerical Mistake"==(null==de?void 0:de.objection_for)&&e.jsx(e.Fragment,{children:"Clerical Objection"})," ","Assessment Error"==(null==de?void 0:de.objection_for)&&e.jsx(e.Fragment,{children:"Assessment Objection"})," ","Forgery"==(null==de?void 0:de.objection_for)&&e.jsx(e.Fragment,{children:"Forgery Objection"}),"  Document Upload"]}:{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:[U," Document Upload"]}),e.jsx("div",{className:"text-gray-700 py-6 ",children:e.jsx("div",{className:"grid md:grid-cols-2 text-sm bg-white shadow-lg rounded-sm py-4",children:null==(y=null==(w=null==(N=null==de?void 0:de.fullDetailsData)?void 0:N.cardArray)?void 0:w.data)?void 0:y.map(l=>e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("div",{className:"px-4 py-2 font-semibold",children:[null==l?void 0:l.displayString," : "]}),e.jsx("div",{className:"px-4 py-2",children:null==l?void 0:l.value})]}))})}),e.jsx("div",{className:"text-red-500 font-semibold poppins 2xl:text-sm text-xs",children:"You have been redirected as Back To Citizen to re-upload documents."}),e.jsx("div",{className:"w-full flex md:px-4 bg-white font-sans overflow-x-auto py-6",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("h1",{className:"text-xs poppins",children:[U," Documents"]}),e.jsx("div",{className:"bg-white shadow-md rounded my-2",children:e.jsxs("table",{className:"min-w-max w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-indigo-100 text-gray-600 uppercase text-sm leading-normal",children:[e.jsx("th",{className:"py-3 px-6 text-center",children:"#"}),e.jsx("th",{className:"py-3 px-6 text-left cursor-pointer",children:"Document Name"}),e.jsx("th",{className:"py-3 px-6 text-left",children:"Type"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Document"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Status"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Remarks"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Preview"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Upload"})]})}),e.jsx("tbody",{className:"text-gray-600 text-sm font-light bg-white",children:null==(j=null==te?void 0:te.listDocs)?void 0:j.map((l,i)=>{var n,t,o,d,s,a,r,c,u,p,v,h,x,g,b,N,w,y,j,D,U,k,I,O,S,$,_,R,A,T,B,F,W;return e.jsxs("tr",{className:"border-b border-gray-200 ",onSubmit:fe.handleSubmit,onChange:fe.handleChange,children:[e.jsx("td",{className:"py-3 px-6 font-semibold",children:i+1}),e.jsx("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 bg-white shadow-lg rounded-full p-2",children:e.jsx("img",{src:m,alt:"rain",className:"w-4"})}),e.jsxs("span",{className:"font-medium poppins",value:null==l?void 0:l.docName,children:["R"==(null==l?void 0:l.docType)&&(null==(n=null==l?void 0:l.masters[0])?void 0:n.docVal),"O"==(null==l?void 0:l.docType)&&"Additional"]})]})}),e.jsx("td",{className:"py-3 px-6",children:e.jsx("div",{className:"font-semibold text-sm",children:e.jsx("div",{className:"",children:e.jsxs("select",{className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md w-36",name:"docId",onChange:ye,children:[e.jsx("option",{value:"",selected:!0,children:"--select--"}),null==(t=null==l?void 0:l.masters)?void 0:t.map((l,i)=>e.jsx("option",{value:null==l?void 0:l.documentCode,children:null==l?void 0:l.docVal}))]})})})}),e.jsx("td",{className:"py-3 px-6 text-center relative",children:""==(null==l?void 0:l.uploadedDoc)?e.jsx("i",{className:"font-semibold",children:"N/A"}):e.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>{var e;return we(`${C}/${null==(e=null==l?void 0:l.uploadedDoc)?void 0:e.docPath}`)},children:e.jsxs("div",{className:"flex items-center",children:["pdf"==(null==(r=null==(o=null==l?void 0:l.uploadedDoc)?void 0:o.docPath)?void 0:r.split(".")[(null==(a=null==(s=null==(d=null==l?void 0:l.uploadedDoc)?void 0:d.docPath)?void 0:s.split("."))?void 0:a.length)-1])&&e.jsx("div",{className:"flex-shrink-0 text-[28px]",children:e.jsx(f,{})}),"jpg"==(null==(h=null==(c=null==l?void 0:l.uploadedDoc)?void 0:c.docPath)?void 0:h.split(".")[(null==(v=null==(p=null==(u=null==l?void 0:l.uploadedDoc)?void 0:u.docPath)?void 0:p.split("."))?void 0:v.length)-1])&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`${C}/${null==(x=null==l?void 0:l.uploadedDoc)?void 0:x.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"jpeg"==(null==(y=null==(g=null==l?void 0:l.uploadedDoc)?void 0:g.docPath)?void 0:y.split(".")[(null==(w=null==(N=null==(b=null==l?void 0:l.uploadedDoc)?void 0:b.docPath)?void 0:N.split("."))?void 0:w.length)-1])&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`${C}/${null==(j=null==l?void 0:l.uploadedDoc)?void 0:j.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"png"==(null==(O=null==(D=null==l?void 0:l.uploadedDoc)?void 0:D.docPath)?void 0:O.split(".")[(null==(I=null==(k=null==(U=null==l?void 0:l.uploadedDoc)?void 0:U.docPath)?void 0:k.split("."))?void 0:I.length)-1])&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`${C}/${null==(S=null==l?void 0:l.uploadedDoc)?void 0:S.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})}),e.jsx("td",{className:"py-3 px-6 text-center font-semibold",children:""==(null==l?void 0:l.uploadedDoc)?e.jsx("i",{className:"font-semibold",children:"N/A"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"whitespace-no-wrap",children:0==(null==($=null==l?void 0:l.uploadedDoc)?void 0:$.verifyStatus)&&e.jsx(e.Fragment,{children:"Pending"})}),e.jsx("p",{className:"text-green-500 whitespace-no-wrap",children:1==(null==(_=null==l?void 0:l.uploadedDoc)?void 0:_.verifyStatus)&&e.jsx(e.Fragment,{children:"Verified"})}),e.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:2==(null==(R=null==l?void 0:l.uploadedDoc)?void 0:R.verifyStatus)&&e.jsx(e.Fragment,{children:"Rejected"})})]})}),e.jsx("td",{className:"py-3 px-6 text-center",children:""==(null==(A=null==l?void 0:l.uploadedDoc)?void 0:A.remarks)||null==(null==(T=null==l?void 0:l.uploadedDoc)?void 0:T.remarks)?e.jsx("i",{className:"font-semibold",children:"N/A"}):null==(B=null==l?void 0:l.uploadedDoc)?void 0:B.remarks}),e.jsxs("td",{className:"py-3 px-6 text-center",children:[(null==l?void 0:l.docName)==K&&1==ee&&e.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>we(ne(!ie)),children:e.jsx("img",{src:q,alt:"",srcset:"",className:"md:w-[3vw] w-[5vw] text-center"})}),(null==l?void 0:l.docName)==K&&0==ee&&e.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>we(ne(!ie)),children:e.jsx("div",{className:"text-[40px] text-center",children:e.jsx(f,{})})})]}),e.jsx("td",{className:"py-3 px-6 flex flex-wrap gap-2",children:e.jsx("div",{className:"font-semibold text-sm",children:1!=(null==(F=null==l?void 0:l.uploadedDoc)?void 0:F.verifyStatus)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("input",{accept:".pdf,.jpg,.jpeg",type:"file",name:null==l?void 0:l.docName,onChange:be,className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 foc}us:outline-none cursor-pointer shadow-md w-36"})}),(1!=(null==(W=null==l?void 0:l.uploadedDoc)?void 0:W.verify_status)||""==(null==l?void 0:l.uploadedDoc))&&e.jsx("div",{className:"mt-2",children:!H&&e.jsx("button",{onClick:()=>Ne(null==l?void 0:l.docName),type:"submit",className:" px-4 py-1.5 bg-indigo-500 text-white text-xs leading-tight rounded shadow-md hover:bg-indigo-700 poppins hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",children:"Upload"})})," "]})})})]})})})]})})]})})]})]})}export{b as default};
