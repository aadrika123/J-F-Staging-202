import{j as e}from"./mui-d8134288.js";import{r as l,b as t,u as a}from"./router-a70afc62.js";import{z as n,W as i,M as s,a0 as d,A as o,E as r,N as m,g as c,i as p,S as x,V as h,f as u,U as b,a1 as g,a2 as f,a3 as v,B as y,G as N,a4 as w,I as A,J as k,o as C,a5 as P}from"./index-1c8a2e08.js";import{d as D}from"./demoUser-eba916fb.js";import{h as M}from"./moment-494dae31.js";import{W as L}from"./WaterPaymentModal-4b3d8ae4.js";import{a as R}from"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";import"./success-39308b33.js";const j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVR4nO2Xu0pDQRCGPy9gZyXa6DNol85OrAUfwHewMG9goVgIWqURBLugIHaW4gV8CzWVeGmMaFwZmANLOIZczubsmvlgYXd2Tmb/7OwNjHRwkZae+XdCYsGZEGxGguAstbDUSiu13JDPCWdCsDUSBGfbL5ZaQXCWWlhqBcFZamGpFQQ3rLtWp76kLo3JChk2zoQQ14z0zcgIcQMu9jn1vSvgeXwTg5DbAoRcDyKkaHqN17W/CRn1GXnReLPafspZC2ITFrT9GtMVpaLfnGm7pu0NoOX5tdQm7KrtIiYhe/rNEvCpth1gDFgF7rVIXdgCfoAv708YSEgI1oAPjXsCTHl9Uj/SviawHvvJXgEeNfalZz9V2zOw3MsPliVkEXjQ2HJYZhynJGQFeNe458C01zcB7KeQWrLYm94GIAPPY1MX+3esi11mQOIdduG73c/2G7pkyOEm7RnPNgkcaJF6xrz6vsUopL09DtQ9e11tf/lHQ/vAqjmiqx38o6F9YI0cIY0O/qVTxAvxqmwRQiEvxF9AMDZiPtzeEgAAAABJRU5ErkJggg==",S={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function I(a){var m,c,p;const[x,h]=l.useState(),[u,b]=l.useState(),[g,f]=l.useState(),[v,y]=l.useState(1),[N,w]=l.useState(),[A,k]=l.useState(),[C,P]=l.useState(""),[D,M]=l.useState([]),[L,R]=l.useState(!1),{notify:j}=l.useContext(n),[I,T]=t.useState(!1),{api_waterSendOTPForConsumerAttach:Y,api_waterSubmitOTPAndTagConsumer:O,header:U}=i(),{api_getAllUlb:V}=r(),E=l.useRef(),z=l.useRef(),W=()=>{E.current.focus()};function B(){T(!1),y(1),b(),h(),f(),w(),k(),P(""),M([])}l.useEffect(()=>{a.openAttachModal>0&&(T(!0),R(!0),o.get(V,{},U).then(e=>{var l,t;(null==(l=null==e?void 0:e.data)?void 0:l.status)?M((null==(t=null==e?void 0:e.data)?void 0:t.data)||[]):j("Failed to fetch ULB list","error")}).catch(e=>{j("Error occurred while fetching ULB list","error")}).finally(()=>R(!1)))},[a.openAttachModal]);let X=null==(c=null==(m=null==u?void 0:u.data)?void 0:m.mobileNo)?void 0:c.toString(),F=(null==X?void 0:X.substring(0,2))+"XXXXXX"+(null==X?void 0:X.substring(8));return e.jsx("div",{className:"",children:e.jsx(s,{isOpen:I,onAfterOpen:function(){},onRequestClose:B,style:S,contentLabel:"Example Modal",shouldCloseOnOverlayClick:!1,children:e.jsxs("div",{className:"w-[500px] h-[320px] bg-sky-100 shadow-2xl border border-indigo-200 py-6 px-2 m-1 rounded-md max-sm:flex max-sm:flex-col max-sm:w-full",children:[e.jsxs("p",{onClick:B,className:"absolute right-7 top-8 cursor-pointer rounded-full bg-sky-200 hover:bg-gray-200 mx-3",children:[e.jsx(d,{size:25})," "]}),e.jsx("p",{className:" text-center text-xl font-semibold mx-5 text-gray-900",children:" Attach existing consumer "}),e.jsx("p",{className:"border-b py-1 mb-2 border-gray-500"}),1==v&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center my-3 gap-2 max-sm:flex-col",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Select ULB",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{ref:z,value:C,onChange:e=>P(e.target.value),className:"border border-gray-500 py-1 rounded px-2 min-w-[200px] appearance-none bg-white",disabled:L,children:[e.jsx("option",{value:"",children:L?"Loading ULBs...":"Select ULB"}),!L&&D.map(l=>e.jsx("option",{value:l.id,children:l.ulb_name||l.name},l.id))]}),L&&e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"})})]})]}),e.jsxs("div",{className:" flex justify-center my-3 gap-2 max-sm:flex-col",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter Consumer No.",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{ref:E,type:"text",onChange:e=>h(e.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:B,type:"button",className:"px-2 py-1 border border-indigo-600 hover:bg-indigo-600 hover:text-white shadow rounded",children:"Cancel"}),e.jsx("button",{onClick:()=>C&&""!==C?""==x||null==x||null==x||(null==x?void 0:x.length)<=6?(W(),w({status:!1,msg:"Enter Valid Consumer No."})):void o.post(Y,{consumerNo:x,ulbId:C},U).then(e=>{var l,t;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(j("OTP Send on Register Mobile","success"),b(null==e?void 0:e.data),y(2),w({status:!0,msg:"OTP Send on Register Mobile."})):(b(null==e?void 0:e.data),j("Error Sending OTP","error"),w({status:!1,msg:null==(t=null==e?void 0:e.data)?void 0:t.message}),W())}).catch(e=>{j("Error Sending OTP","error"),w({status:!1,msg:"Error Sending OTP."}),W()}):(z.current.focus(),w({status:!1,msg:"Please select ULB."})),type:"button",className:"px-2 py-1 border hover:bg-indigo-700 border-indigo-600 bg-indigo-500 text-white shadow rounded",disabled:L,children:"Send OTP"})]}),N&&e.jsx("p",{className:"text-center text-sm font-semibold "+((null==N?void 0:N.status)?"text-green-500":"text-red-600"),children:null==N?void 0:N.msg}),e.jsx("div",{className:"text-xs text-center my-2",children:"Your Will get an OTP on your register mobile No."})]}),2==v&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-center font-semibold",children:["+91 ",F]}),e.jsxs("div",{className:" flex justify-center my-2 gap-2",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter OTP",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",onChange:e=>f(e.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),A&&e.jsx("p",{className:"text-center text-sm font-semibold "+((null==A?void 0:A.status)?"text-green-500":"text-red-600"),children:null==A?void 0:A.msg}),e.jsxs("div",{className:"text-xs text-center my-2",children:["Temporary OTP is ",e.jsxs("span",{className:"font-semibold",children:[" ",null==(p=null==u?void 0:u.data)?void 0:p.otp]}),"."]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:B,type:"button",className:"px-2 py-1 border border-indigo-600 hover:bg-indigo-600 hover:text-white shadow rounded",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(""==g||null==g||null==g||6!=(null==g?void 0:g.length))return k({status:!1,msg:"Enter Valid OTP."});o.post(O,{consumerNo:x,otp:g,ulbId:C},U).then(e=>{var l;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(j("Consumer Attached Successfully","success"),k({status:!0,msg:e.data.message}),B(),a.refetch()):(j(e.data.message,"error"),k({status:!1,msg:e.data.message}))}).catch(e=>{j("Error Consumer Attached","error"),k({status:!1,msg:"Error while attaching"})})},type:"button",className:"px-2 py-1 border hover:bg-indigo-700 border-indigo-600 bg-indigo-500 text-white shadow rounded",children:"Submit"})]})]})]})})})}const T=({data:t,isLoading:n,fetchAttachedConsumerList:i})=>{const{api_detachProperty:s,api_getAllPeopleAttachedDesc:d}=r(),[o,u]=l.useState(null),[b,g]=l.useState(!1),[f,v]=l.useState(!1),[y,N]=l.useState(null),w=a();return n?"Loading..":t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full ml-2  max-sm:ml-0 max-sm:pl-2 md:ml-0 mb-20",children:[e.jsxs("p",{className:"font-manrope md:my-4 ",children:["Total Attached Connections"," ",e.jsx("span",{className:"font-semibold",children:null==t?void 0:t.length})]}),e.jsx("div",{className:"overflow-y-auto h-auto mb-10 md:mr-0 mr-5 max-sm:mr-2 ",children:null==t?void 0:t.map((l,t)=>e.jsxs("div",{className:"w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>{var e;u(o===(e=t)?null:e)},children:[e.jsxs("div",{className:"flex max-sm:gap-0 overflow-auto md:flex grid-cols-12 p-2 w-full items-center max-sm:items-start justify-between border-b border-gray-100  max-sm:flex max-sm:flex-col",children:[e.jsx("div",{className:"flex flex-row justify-center items-center max-sm:w-full max-sm:mt-2 max-sm:mb-2",children:e.jsx("img",{src:D,className:"h-10 ml-3 rounded-full"})}),e.jsxs("div",{className:"w-30 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ulb Name"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.ulb_name})]}),e.jsxs("div",{className:"w-20 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ward No"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.ward_name})]}),e.jsxs("div",{className:"w-44 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Consumer No"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.consumer_no})]}),e.jsxs("div",{className:"w-36 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Holding No"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:(null==l?void 0:l.holding_no)||"NA"})]}),e.jsxs("div",{className:"w-44 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Owner Name"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.applicant_name})]}),e.jsxs("div",{className:"w-60 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Home Address"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.address})]}),e.jsx("div",{className:"max-sm:flex max-sm:items-center max-sm:justify-center max-sm:w-full",children:e.jsx("p",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium col-span-1",children:e.jsx(o===t?c:p,{size:24})})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:o===t&&e.jsxs("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:[e.jsx("div",{className:"text-center md:text-left mb-2 md:mb-0  italic text-gray-400"}),e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[e.jsx("button",{onClick:()=>w(`/waterdisconnection/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Water Disconnection"}),e.jsx("button",{onClick:()=>w(`/waterMeterMemoReceipt/${null==l?void 0:l.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Print Memo"}),e.jsx("button",{onClick:()=>w(`/waterDemandPrintReceipt/${null==l?void 0:l.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Print Demand Receipt"}),e.jsx("button",{onClick:()=>w(`/waterViewConsumer/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Details"}),e.jsx("button",{onClick:()=>w(`/waterViewDemand/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Demand"}),e.jsx("button",{onClick:()=>w(`/waterViewPaymentHistory/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Payment History"}),e.jsx("div",{onClick:()=>{N(null==l?void 0:l.id),g(!0)},className:"flex-initial flex items-center text-sm poppins text-red-600 px-2 shadow-inidgo-400 py-1 rounded-md cursor-pointer shadow-gray-400 bg-red-600 transition-all duration-200 text-white hover:scale-105",children:e.jsx("abbr",{className:"no-underline poppins",title:"Objection is for helping you in any issues related to Property.",children:"Detach Water"})}),e.jsx("div",{onClick:()=>{N(null==l?void 0:l.id),v(!0)},className:"flex-initial flex items-center text-sm poppins px-2 py-1 rounded-md cursor-pointer shadow-gray-300 bg-blue-200 text-blue-700 transition-all duration-200 hover:bg-blue-200 hover:scale-105",children:e.jsx("abbr",{className:"no-underline poppins",title:"View citizens linked to this property",children:"ðŸ“‹ Linked People"})})]})]},l.name)})]},l.index))})]}),e.jsx(x,{open:b,onClose:()=>g(!1),api:s,payload:{recordId:y,type:"water"},title:"Record Detachment",description:e.jsxs(e.Fragment,{children:["Do you want to detach this Record? ",e.jsx("br",{}),"You will not be able to access information related to this Record after detachment."]}),onSuccess:()=>{i(),g(!1)}}),e.jsx(h,{open:f,onClose:()=>v(!1),api:d,payload:{recordId:y,type:"water"},title:"People Who attached this water Consumer in their panel ",onSuccess:()=>{fetchCareTakerList()}})]}):e.jsx(m,{message:"No Attach Connections Found."})},Y={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function O(a){const{notify:r}=l.useContext(n),[m,c]=t.useState(!1),{api_waterApplicationDelete:p,header:x}=i(),h=a.dataTobeDeleted;function u(){c(!1),a.reFetch(),a.setOpenDeleteModal(null),a.setOpenDeleteModal(!1)}return l.useEffect(()=>{c(!0)},[]),e.jsx("div",{className:"",children:e.jsx(s,{isOpen:m,onAfterOpen:function(){},onRequestClose:u,style:Y,contentLabel:"Example Modal",children:e.jsxs("div",{className:"bg-sky-200 shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[e.jsxs("div",{className:"flow-root",children:[e.jsx("p",{className:"float-left text-center text-xl font-semibold mx-5 text-gray-700",children:"Do you want to Delete Application ?"}),e.jsxs("p",{onClick:u,className:"absolute right-9 top-12 cursor-pointer rounded-full bg-sky-200 hover:bg-gray-200 mx-3",children:[" ",e.jsx(d,{size:25})," "]})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{className:"text-sm my-2",children:e.jsxs("p",{children:["Your Applicaion No : ",e.jsx("span",{className:"font-semibold",children:null==h?void 0:h.application_no})," will be deleted permanently. ",e.jsx("br",{})]})}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx("button",{onClick:()=>{o.post(p,{applicationId:h.id},x).then(e=>{e.data.status?(r("Application Deleted","success"),u()):(r("Application Not Deleted","error"),u())}).catch(e=>{u(),r("Error While deleting application","error")})},type:"button",className:"border border-red-400 bg-red-600 hover:bg-red-500 text-white shadow-lg rounded-sm py-1 text-sm font-semibold px-3 m-3",children:"Yes! Delete"}),e.jsx("button",{onClick:function(){c(!1),a.setOpenDeleteModal(null)},type:"button",className:"border border-sky-400 bg-sky-600 hover:bg-sky-500 text-white shadow-lg rounded-sm py-1 text-sm font-semibold px-3 m-3",children:"Cancel"})]})]})})})}const U={overlay:{},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"transparent",border:"none",height:"maxHeight"}};function V(n){var d,r,m,c,p,x,h,b,g,f,v,y,N,w,A,k;const[C,P]=t.useState(!1);l.useState(),l.useState(!1),l.useState(!0);const[D,M]=l.useState(),[L,R]=l.useState(),[j,S]=l.useState(),[I,T]=l.useState(),[Y,O]=l.useState(!1),{api_waterViewPendingApplication:V,api_waterMasterData:E,api_waterJeAfterSiteInspection:z,header:W}=i();a(),l.useEffect(()=>{P(!0)},[]);const B=null==n?void 0:n.id;function X(){P(!1),n.openSiteVerityModal(!1)}l.useEffect(()=>{F(),H(),Q()},[null==n?void 0:n.openSiteVerityModal]);const F=()=>{T(!0),o.post(`${V}`,{applicationId:B},W).then(function(e){S(e.data.data),T(!1)}).catch(function(e){T(!1)})},H=()=>{T(!0),o.post(z,{applicationId:B},W).then(e=>{1==e.data.status&&(R(e.data.data),T(!1))}).catch(e=>{})},Q=()=>{T(!0),o.post(`${E}`,{},W).then(e=>{M(e.data.data),T(!1)}).catch(e=>{T(!1)})};return e.jsx("div",{className:"",children:e.jsx(s,{isOpen:C,onAfterOpen:function(){},onRequestClose:X,style:U,contentLabel:"Example Modal",children:e.jsx("div",{children:e.jsx("div",{className:"relative w-full h-full md:h-auto border-indigo-600 shadow-indigo-200 shadow-sm rounded",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow ",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Site Verification Details"}),e.jsxs("button",{onClick:X,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"defaultModal",children:[e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),I&&e.jsx(u,{}),Y&&e.jsx("p",{className:"text-red-500 text-center font-semibold relative",children:Y}),e.jsx("div",{className:"",children:e.jsxs("table",{className:"",children:[e.jsx("thead",{className:"font-bold text-left text-sm border text-white bg-indigo-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Sl No."}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Particulars"}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Proposed By Applicant"}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"JE Inspection Report"})]})}),e.jsxs("tbody",{className:"text-sm",children:[e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"1."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Property Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==(d=null==j?void 0:j.applicationDetails)?void 0:d.property_type)?null==(r=null==j?void 0:j.applicationDetails)?void 0:r.property_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==(c=null==(m=null==D?void 0:D.water_property_type_mstr)?void 0:m.find(e=>e.id===(null==L?void 0:L.property_type_id)))?void 0:c.property_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"2."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Total Area in Sq.Ft."}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==(p=null==j?void 0:j.applicationDetails)?void 0:p.area_sqft)?null==(x=null==j?void 0:j.applicationDetails)?void 0:x.area_sqft:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(null==L?void 0:L.area_sqft)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"3."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Report"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==(h=null==j?void 0:j.applicationDetails)?void 0:h.pipeline_type)?null==(b=null==j?void 0:j.applicationDetails)?void 0:b.pipeline_type:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(null==(f=null==(g=null==D?void 0:D.water_param_pipeline_type)?void 0:g.find(e=>e.id===(null==L?void 0:L.pipeline_type_id)))?void 0:f.pipeline_type)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"4."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Size (In MM)"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[null==L?void 0:L.pipeline_size," MM"]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"5."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Size Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==L?void 0:L.pipeline_size_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"6."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Is Application Comes Under Regularization"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==(v=null==j?void 0:j.applicationDetails)?void 0:v.connection_type)?null==(y=null==j?void 0:j.applicationDetails)?void 0:y.connection_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==(w=null==(N=null==D?void 0:D.water_connection_type_mstr)?void 0:N.find(e=>e.id===(null==L?void 0:L.connection_type_id)))?void 0:w.connection_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"7."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Pipe Diameter"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[null==L?void 0:L.pipe_size," MM"]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"8."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Pipe Quality"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(null==L?void 0:L.pipe_type)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"9."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Ferrule Size"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==L?void 0:L.ferrule_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"10."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Road Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==L?void 0:L.road_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"11."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Applicant Category"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==(A=null==j?void 0:j.applicationDetails)?void 0:A.category)?null==(k=null==j?void 0:j.applicationDetails)?void 0:k.category:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(null==L?void 0:L.category)||"N/A"})]})]})]})}),e.jsx("div",{className:"flex justify-center p-6 border-t border-gray-200 rounded-b",children:e.jsx("button",{onClick:X,className:"mx-2 text-white bg-indigo-700 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300 rounded-lg border border-indigo-200 text-sm font-medium px-5 py-2.5 focus:z-10 ",children:"Close"})})]})})})})})}const E=t=>{const[n,i]=l.useState(null),[s,d]=l.useState(!1),[o,r]=l.useState(),[x,h]=l.useState(!1),[u,b]=l.useState(),[g,f]=l.useState(!1),[v,y]=l.useState(),N=t.data,w=null==t?void 0:t.isLoading,A=a(),k=e=>{f(!0),y(e)},C=()=>{t.refechList()};if(w)return"Loading..";if(!N)return e.jsx(m,{message:"No Pending Water Application Found."});const P=null==v?void 0:v.connection_type_name;return e.jsxs(e.Fragment,{children:[s&&e.jsx(O,{setOpenDeleteModal:d,openDeleteModal:s,dataTobeDeleted:o,reFetch:C}),x&&e.jsx(V,{openSiteVerityModal:h,id:u}),g&&e.jsx(L,{category:P,openPaymentModal:f,paymentData:v,refechList:C}),e.jsxs("div",{className:"w-full md:ml-0 mb-20",children:[e.jsxs("p",{className:"font-manrope md:my-4 px-1 ",children:["Total Pending Applications"," ",e.jsx("span",{className:"font-semibold",children:null==N?void 0:N.length})]}),e.jsx("div",{className:"overflow-y-auto h-auto md:w-full mb-10 md:mr-0 max-sm:p-1",children:null==N?void 0:N.map((l,t)=>e.jsxs("div",{className:"md:w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>{var e;i(n===(e=t)?null:e)},children:[e.jsxs("div",{className:"flex max-sm:gap-0 overflow-auto md:flex grid-cols-12 p-2 w-full items-center max-sm:items-start justify-between border-b border-gray-100  max-sm:flex-col",children:[e.jsx("div",{className:"flex flex-row justify-center items-center max-sm:w-full max-sm:mt-2 max-sm:mb-2",children:e.jsx("img",{src:D,className:"h-10 ml-3 rounded-full "})}),e.jsxs("div",{className:"max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ulb Name"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:(null==l?void 0:l.ulb_name)||"N/A"})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%] ",children:"Application No."}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.application_no})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ward name"}),e.jsxs("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:[" ",null==l?void 0:l.ward_name]})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Connection Type"}),e.jsx("p",{className:" md:block px-2 py-1 break-all col-span-2 font-semibold text-sm",children:null==l?void 0:l.connection_type_name})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Payment Status"}),e.jsxs("p",{className:" md:block whitespace-nowrap col-span-2 text-sm",children:[0==(null==l?void 0:l.payment_status)&&e.jsx("p",{className:"text-red-500 font-normal text-sm px-2 py-1 rounded-xl",children:"UnPaid"}),1==(null==l?void 0:l.payment_status)&&e.jsx("p",{className:"text-green-600 font-normal text-sm px-2 py-1 rounded-xl",children:"Paid"}),2==(null==l?void 0:l.payment_status)&&e.jsx("p",{className:"text-yellow-600 font-normal text-sm px-2 py-1 rounded-xl",children:"Processing"})]})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500  max-sm:w-[40%]",children:"Document Status"}),e.jsxs("p",{className:" md:block px-2 py-1 break-words col-span-2 text-sm",children:[1==(null==l?void 0:l.doc_upload_status)&&e.jsx("p",{className:"text-green-600 font-normal text-sm rounded-xl",children:"Uploaded"}),0==(null==l?void 0:l.doc_upload_status)&&e.jsx("p",{className:"text-red-600 font-normal text-sm rounded-xl",children:"Not Upload"})]})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Apply Date"}),e.jsx("p",{className:" md:block px-2 py-1 col-span-2 max-sm:text-sm",children:M(null==l?void 0:l.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")})]}),e.jsx("div",{className:"max-sm:flex max-sm:justify-end max-sm:w-full",children:e.jsx("p",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium col-span-1 ",children:e.jsx(n===t?c:p,{size:24})})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:n===t&&e.jsxs("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:[e.jsxs("div",{className:"text-center md:text-left mb-2 md:mb-0",children:[""===(null==l?void 0:l.current_role_name)?e.jsx("p",{children:"Your Application has not been submitted yet."}):e.jsxs("p",{children:["Your Application is at"," ",e.jsxs("span",{className:"font-semibold font-manrope underline",children:[null==l?void 0:l.current_role_name," ",!0===(null==l?void 0:l.parked)&&e.jsx("p",{children:"Back to citizen"})]})]}),"BPL"==(null==l?void 0:l.category)&&e.jsxs("p",{children:["You don't need to pay application fee as you fall under",e.jsxs("span",{className:"font-semibold font-manrope",children:[" ","BPL Category"]})]}),(null==l?void 0:l.scheduledDate)&&(null==l?void 0:l.scheduledTime)&&e.jsxs("p",{className:"text-xs",children:["Scheduled Inspection Date"," ",e.jsxs("span",{className:"font-semibold",children:[" ",M(null==l?void 0:l.scheduledDate,"YYYY-MM-DD").format("DD-MMM-yy")]})," ","Time :"," ",e.jsx("span",{className:"font-semibold",children:M(null==l?void 0:l.scheduledTime,"h:mm:ss A").format("hh:mm A")})]})]}),e.jsxs("div",{className:"md:hidden grid grid-cols-12 text-sm border-b-2 pb-2 mb-2 border-gray-100",children:[e.jsxs("div",{className:"col-span-6 mr-1",children:[e.jsxs("p",{className:"flex justify-between",children:["Payment :",e.jsxs("span",{className:"font-semibold",children:[0==(null==l?void 0:l.payment_status)&&"UnPaid",1==(null==l?void 0:l.payment_status)&&"Paid",2==(null==l?void 0:l.payment_status)&&"Processing"]})]}),e.jsxs("p",{className:"flex justify-between",children:["Document :",e.jsx("span",{className:"font-semibold",children:1==(null==l?void 0:l.doc_upload_status)?"Uploaded":"NotUpload"})]})]}),e.jsxs("div",{className:"col-span-6 ml-4",children:[e.jsxs("p",{className:"flex justify-between",children:["Type :",e.jsxs("span",{className:"font-semibold",children:[" ",null==l?void 0:l.type]})]}),e.jsxs("p",{className:"flex justify-between",children:["Apply on :",e.jsx("span",{className:"font-semibold text-xs",children:M(null==l?void 0:l.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")})]})]})]}),e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[(null==l?void 0:l.is_field_verified)&&e.jsx("button",{onClick:()=>(b(null==l?void 0:l.id),void h(!0)),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Site Verification"}),e.jsx("button",{onClick:()=>A(`/application-payment-history/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Payment History"}),(null==l?void 0:l.doc_upload_status)&&0==(null==l?void 0:l.payment_status)&&e.jsx("button",{onClick:()=>k(l),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),0==(null==l?void 0:l.actualPaymentStatus)&&e.jsx("button",{onClick:()=>k(l),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),""==(null==l?void 0:l.current_role_name)&&e.jsx("button",{onClick:()=>A(`/water-doc-upload/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Upload Document"}),1==(null==l?void 0:l.parked)&&e.jsx("button",{onClick:()=>A(`/water-doc-upload/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Re-Upload Document"}),e.jsx("button",{onClick:()=>A(`/water/viewApplication/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Application"}),0==(null==l?void 0:l.payment_status)&&""==(null==l?void 0:l.current_role)&&e.jsx("button",{onClick:()=>(r({application_no:null==l?void 0:l.application_no,id:null==l?void 0:l.id}),void d(!0)),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-red-500 hover:bg-red-600",children:"Delete"})]})]},l.name)})]},l.index))})]})]})},z=({data:t,isLoading:n})=>{const[i,s]=l.useState(null),d=a();return n?"Loading..":t?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full ml-2 md:ml-0",children:[e.jsxs("p",{className:"font-manrope md:my-4 ",children:["Total Water Connections"," ",e.jsx("span",{className:"font-semibold",children:null==t?void 0:t.length})]}),e.jsx("div",{className:"overflow-y-auto h-auto md:w-full mb-10 md:mr-0 max-sm:p-1",children:null==t?void 0:t.map((l,t)=>e.jsxs("div",{className:"md:w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>{var e;s(i===(e=t)?null:e)},children:[e.jsxs("div",{className:"flex max-sm:gap-0 overflow-auto md:flex grid-cols-12 p-2 w-full items-center max-sm:items-start justify-between border-b border-gray-100  max-sm:flex-col",children:[e.jsx("div",{className:"flex flex-row justify-center items-center max-sm:w-full max-sm:mt-2 max-sm:mb-2",children:e.jsx("img",{src:D,className:"h-10 ml-3 rounded-full"})}),e.jsxs("div",{className:"max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ulb Name"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",children:null==l?void 0:l.ulb_name})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Consumer Number"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",children:null==l?void 0:l.consumer_no})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ward Name"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",children:null==l?void 0:l.ward_name})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ulb Name"}),e.jsx("p",{className:"hidden md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",children:null==l?void 0:l.ulb_name})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Applicant Name"}),e.jsx("p",{className:"hidden md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",children:null==l?void 0:l.applicant_name})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Apply Date"}),e.jsxs("p",{className:"hidden md:block px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",children:[M(null==l?void 0:l.application_apply_date,"YYYY-MM-DD").format("DD-MMM-yy")," "]})]}),e.jsx("p",{className:"px-4 py-2 break-all text-right text-sm font-medium col-span-1",children:e.jsx(i===t?c:p,{size:24})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:i===t&&e.jsxs("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:[e.jsx("div",{className:"text-center md:text-left mb-2 md:mb-0 italic text-gray-400",children:"can add some text here.."}),e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[e.jsx("button",{onClick:()=>d(`/waterdisconnection/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Water Disconnection"}),e.jsx("button",{onClick:()=>d(`/waterMeterMemoReceipt/${null==l?void 0:l.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Print Memo"}),e.jsx("button",{onClick:()=>d(`/waterDemandPrintReceipt/${null==l?void 0:l.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Print Demand Receipt"}),e.jsx("button",{onClick:()=>d(`/waterViewConsumer/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Details"}),e.jsx("button",{onClick:()=>d(`/waterViewDemand/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Demand"}),e.jsx("button",{onClick:()=>d(`/waterViewPaymentHistory/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Payment History"})]})]},l.name)})]},l.index))})]})}):e.jsx(m,{message:"No Water Connections found."})},W=t=>{const[s,d]=l.useState(!1);l.useState();const r=null==t?void 0:t.paymentData,{notify:m}=l.useContext(n),{api_rzpWaterOrderId:c,api_generatedreceipt:p,header:x}=i(),{handlePayment:h}=b(),u=a(),y=()=>{t.closeModal()},N=async e=>{let l={applicationId:null==e?void 0:e.applicationId,departmentId:null==e?void 0:e.departmentId,status:"",captured:"1",card_id:"",amount:null==e?void 0:e.amount,payment_method:"upi/netbanking",workflow_id:null==e?void 0:e.workflowId,user_id:null==e?void 0:e.userId,ulb_id:null==e?void 0:e.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:null==e?void 0:e.razorpay_order_id,payment_id:null==e?void 0:e.razorpay_payment_id,created_at:""};o.post(p,l,x).then(e=>{var l;1==e.data.status?u(`/waterdisconnectreciept/${null==(l=null==e?void 0:e.data)?void 0:l.data}`,{replace:!0}):toast.error(e.data.message,"error")}).catch(e=>{toast.error(e.message,"error")})};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("p",{onClick:y,className:"float-right absolute right-12 top-12 hover:bg-gray-300 bg-gray-200 p-1 cursor-pointer ",children:[" ",e.jsx(g,{})," "]}),e.jsxs("div",{className:"bg-white shadow-2xl border border-blue-200 md:p-5 md:m-5 rounded-md",children:[e.jsxs("div",{className:" border-b-2 py-1 pl-3 font-semibold border-red-400 flex",children:[e.jsx(f,{size:20,className:"mt-0.5 mr-1"}),"Make Payment"," "]}),e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("img",{src:"https://img.freepik.com/free-vector/hand-holding-phone-with-credit-card-screen-man-making-purchase-shopping-paying-online-using-banking-app-flat-vector-illustration-transaction-e-commerce-concept_74855-26014.jpg?w=1380&t=st=1686898919~exp=1686899519~hmac=4b0ddb44860ec647fa33a1a0416ea0c1cc8167693a13fdba3f09058d099f0e76",alt:"My Image",width:200,height:100})}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"font-semibold text-2xl text-gray-500",children:e.jsx("p",{children:"Application No.-"})}),e.jsx("p",{className:"font-semibold text-2xl text-gray-500",children:r.application_no})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"font-semibold text-2xl text-green-500",children:e.jsx("p",{children:"Amount-Rs"})}),e.jsx("p",{className:"font-semibold text-2xl text-green-500",children:(null==r?void 0:r.amount)||"N/A"})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"col-span-3",children:e.jsxs("h1",{children:[" ",null==r?void 0:r.charge_category]})})}),e.jsx("div",{className:"md:col-span-12 col-span-12 md:mt-5 mt-2",children:e.jsx("div",{className:"text-center font-extralight px-2 rounded",children:e.jsx("p",{children:"Note : You can pay using Card / UPI / Netbanking / Wallet etc."})})}),e.jsx("div",{className:"col-span-12 md:mt-5 mt-2 max-sm:mb-3",children:e.jsx("div",{className:"flex justify-center",children:s?e.jsx(v,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"30",visible:!0}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:y,className:"mx-3 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-2 text-sm rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:()=>{d(!0),o.post(c,{id:null==r?void 0:r.id,applycationType:null==r?void 0:r.charge_category},x).then(e=>{var l;d(!1),1==e.data.status?(h(null==(l=null==e?void 0:e.data)?void 0:l.data,N),t.closeModal()):m(e.data.message,"error")}).catch(e=>{d(!1),m(e.message,"error")})},className:"mx-3 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-5 py-2 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})})]})]})})},B={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function X(d){var o,r,m;const[c,p]=t.useState(!1),[x,h]=l.useState(!1),[u,b]=l.useState(),[g,f]=l.useState(),v=a();l.useContext(n),i();const y=d.paymentData;function N(){p(!1),h(!1),b(!1),f(!1),null==d||d.openPaymentModal(!1)}l.useEffect(()=>{p(!0)},[]);const w=e=>{(null==e?void 0:e.status)&&h(!0)};return e.jsx("div",{className:"",children:e.jsxs(s,{isOpen:c,onAfterOpen:function(){},onRequestClose:N,style:B,contentLabel:"Example Modal",children:[x&&e.jsxs("div",{className:(u?"bg-green-200":"bg-yellow-50")+" shadow-2xl border border-sky-200 md:p-5 md:m-5 rounded-md",children:[e.jsxs("div",{className:"flex justify-center",children:[u&&e.jsx("img",{src:imgSucess,className:"h-16",alt:"Payment Success",srcset:""}),!u&&e.jsx("img",{src:imgPending,className:"h-12",alt:"Payment Pending",srcset:""})]}),e.jsxs("div",{className:"py-1 pl-3 font-semibold text-center text-2xl text-gray-800",children:[u?"Payment Completed Successfully":"Payment Under Processing"," "]}),(null==u?void 0:u.transectionNo)&&e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"text-base",children:" Payment Transaction No"})," ",e.jsx("span",{className:"font-bold text-blue-700 text-xl",children:null==u?void 0:u.transectionNo})]}),!(null==u?void 0:u.transectionNo)&&e.jsxs("p",{className:"text-center font-semibold",children:[e.jsx("span",{className:"text-base",children:" Payment Status"})," ",e.jsx("span",{className:" text-blue-500 text-base",children:"Pending"})]}),e.jsx("p",{className:"border-b border-gray-300 mx-10 py-1"}),e.jsxs("div",{className:"grid grid-cols-12 px-8 py-3 leading-8 space-x-8 text-sm",children:[e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6 font-semibold",children:[e.jsx("p",{children:"Application No"}),e.jsx("p",{children:"Connection Type"})]}),e.jsxs("div",{className:"col-span-6 ml-3",children:[e.jsx("p",{children:(null==u?void 0:u.applicationNo)||(null==(o=null==y?void 0:y.connectionCharges)?void 0:o.applicationNo)}),e.jsx("p",{children:(null==u?void 0:u.tranType)||(null==(r=null==y?void 0:y.connectionCharges)?void 0:r.charge_category)})]})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6 font-semibold",children:[e.jsx("p",{children:"Amount"}),e.jsx("p",{children:"Payment Date"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("p",{children:(null==u?void 0:u.amount)||(null==(m=null==y?void 0:y.connectionCharges)?void 0:m.amount)}),e.jsx("p",{children:(null==u?void 0:u.transectionDate)||"Pending"})]})]})}),e.jsx("div",{className:"col-span-12 md:mt-4 mt-10",children:e.jsxs("div",{className:"flex justify-center",children:[e.jsx("button",{onClick:N,className:"mx-2 bg-sky-600 hover:bg-sky-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm rounded-sm shadow-xl",children:"Dashboard"}),u&&e.jsx("button",{onClick:()=>v(`/waterConnReceipt/${null==u?void 0:u.transectionNo}`),className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm  rounded-sm shadow-xl",children:"View Receipt"}),!u&&e.jsx("button",{onClick:()=>w(),className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm  rounded-sm shadow-xl",children:"Check Status"})]})})]})]}),!x&&e.jsx(W,{closeModal:N,fetchTransactionDetails:w,paymentData:y})]})})}const F=({data:t,isLoading:n})=>{const[s,d]=l.useState([]),[o,r]=l.useState(!1),[x,h]=l.useState(null),[u,b]=l.useState(),[g,f]=l.useState(!1),v=a(),{api_requestpendingapplicationlist:y,header:N}=i();return l.useEffect(()=>{r(!0),R.post(y,{},N).then(e=>{var l,t;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(d(null==(t=null==e?void 0:e.data)?void 0:t.data),r(!1)):r(!1)}).catch(e=>{r(!1)})},[]),n?"Loading..":t?e.jsxs("div",{children:[g&&e.jsx(X,{category:null==u?void 0:u.connection_type_name,openPaymentModal:f,paymentData:u,refechList:()=>{props.refechList()}}),e.jsxs("div",{className:"w-full ml-2 max-sm:ml-0 max-sm:pl-2 md:ml-0",children:[e.jsxs("p",{className:"font-manrope md:my-4 ",children:["Total Attached Connections"," ",e.jsx("span",{className:"font-semibold",children:null==s?void 0:s.length})]}),e.jsx("div",{className:"overflow-y-auto h-screen mb-40 md:mr-0 mr-5 max-sm:mr-2 ",children:null==s?void 0:s.map((l,t)=>e.jsxs("div",{className:"w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>{var e;h(x===(e=t)?null:e)},children:[e.jsxs("div",{className:"flex max-sm:gap-0 overflow-auto md:flex grid-cols-12 p-2 w-full items-center max-sm:items-start justify-between border-b border-gray-100  max-sm:flex max-sm:flex-col",children:[e.jsx("div",{className:"flex flex-row justify-center items-center max-sm:w-full max-sm:mt-2 max-sm:mb-2",children:e.jsx("img",{src:D,className:"h-10 ml-3 rounded-full"})}),e.jsxs("div",{className:"w-30 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ulb Name"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.ulb_name})]}),e.jsxs("div",{className:"w-30 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Application No"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.application_no})]}),e.jsxs("div",{className:"w-20 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Ward No"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.ward_name})]}),e.jsxs("div",{className:"w-45 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Request Type"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:(null==l?void 0:l.charge_category)||"NA"})]}),e.jsxs("div",{className:"w-30 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Consumer No."}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:null==l?void 0:l.consumer_no})]}),e.jsxs("div",{className:"w-30 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Payment Status"}),e.jsxs("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:[0==(null==l?void 0:l.payment_status)&&e.jsx("p",{className:"text-red-500 font-normal text-sm px-2 rounded-xl",children:"UnPaid"}),1==(null==l?void 0:l.payment_status)&&e.jsx("p",{className:"text-green-600 font-normal text-sm px-2 rounded-xl",children:"Paid"}),2==(null==l?void 0:l.payment_status)&&e.jsx("p",{className:"text-yellow-600 font-normal text-sm px-2 rounded-xl",children:"Processing"})]})]}),e.jsxs("div",{className:"w-34 max-sm:flex max-sm:w-full",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Apply Date."}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:(null==l?void 0:l.parked)?"red":"inherit"},children:M(null==l?void 0:l.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")})]}),e.jsx("div",{className:"max-sm:flex max-sm:items-center max-sm:justify-center max-sm:w-full",children:e.jsx("p",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium col-span-1",children:e.jsx(x===t?c:p,{size:24})})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:x===t&&e.jsx("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[1==(null==l?void 0:l.parked)&&e.jsx("button",{onClick:()=>v(`/waterdisconnection-doc-upload/${null==l?void 0:l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Re-Upload Document"}),e.jsx("button",{onClick:()=>v(`/waterViewConsumer/${null==l?void 0:l.consumer_no}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Details"}),1!=(null==l?void 0:l.payment_status)&&e.jsx("button",{onClick:()=>{return e=l,f(!0),void b(e);var e},className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),1==(null==l?void 0:l.payment_status)&&e.jsx("button",{onClick:()=>v(`/waterdisconnectreciept/${l.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Payment Receipt"})]})},l.name)})]},l.index))})]})]}):e.jsx(m,{message:"No Request Applictions found  Found."})},H=()=>{l.useState(null);const[t,s]=l.useState(1),[d,r]=l.useState(0),[m,c]=l.useState(),[p,x]=l.useState(),[h,u]=l.useState(),[b,g]=l.useState(!1),[f,v]=l.useState(!1),[D,M]=l.useState(!1),[L,R]=l.useState(!1),[S,Y]=l.useState(!0),{api_waterAttachedConsumerList:O,api_citizenApplications:U,api_citizenApprovedApplications:V,header:W}=i(),B=a(),{setBreadCrumbData:X}=l.useContext(n);l.useEffect(()=>{X(["Water Dashboard"])},[]);const H=()=>{Y(!0),M(!0),o.post(O,{},W).then(e=>{var l;Y(!1),e.data.status?(M(!1),r(0),c(null==(l=null==e?void 0:e.data)?void 0:l.data)):M(!1)}).catch(e=>{if(Y(!1),M(!1),401===e.response.status)return B("/logout")})},Q=()=>{Y(!0),g(!0),o.post(U,{},W).then(e=>{var l;Y(!1),e.data.status?(g(!1),x(null==(l=null==e?void 0:e.data)?void 0:l.data)):g(!1)}).catch(e=>{if(Y(!1),g(!1),401===e.response.status)return B("/logout")})};return l.useEffect(()=>{H(),Q(),Y(!0),v(!0),o.post(V,{},W).then(e=>{var l;Y(!1),e.data.status?(v(!1),u(null==(l=null==e?void 0:e.data)?void 0:l.data)):v(!1)}).catch(e=>{if(Y(!1),v(!1),401===e.response.status)return B("/logout")})},[]),e.jsx(e.Fragment,{children:S?e.jsx(y,{}):e.jsxs(e.Fragment,{children:[e.jsx(I,{openAttachModal:d,refetch:()=>{H()}}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex-1 md:flex items-center md:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"md:text-3xl text-2xl text-gray-800 font-semibold max-sm:pl-5",children:[" ","Water Dashboard"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 max-sm:pl-5",children:"Here is list of all pending applications."})]}),e.jsxs("div",{className:"flex p-2 gap-1 max-sm:pl-5",children:[e.jsx("button",{onClick:()=>{r(e=>e+1)},className:`${N} relative`,"data-tooltip-id":"link-connection-tooltip",children:e.jsxs("span",{className:"flex text-sm md:text-base",children:[e.jsx("span",{className:"md:mt-1 mr-1",children:e.jsx(w,{size:17})}),"Link Connection"]})}),e.jsx("button",{onClick:()=>B("/water-apply"),className:`${A} relative`,"data-tooltip-id":"apply-new-connection-tooltip",children:e.jsxs("span",{className:"flex text-sm md:text-base",children:[e.jsx("span",{className:"md:mt-1 mr-1",children:e.jsx(k,{size:17})}),"Apply New Connection"]})}),e.jsx(C,{id:"link-connection-tooltip",place:"top",effect:"solid",content:"Click to link an existing connection.",className:"!bg-white !text-black !border !border-gray-300 \r\n                   shadow-lg px-3 py-2 rounded-md text-sm font-medium \r\n                   transition-opacity duration-300 ease-in-out"}),e.jsx(C,{id:"apply-new-connection-tooltip",place:"top",effect:"solid",content:"Click to apply for a new water connection.",className:"!bg-white !text-black !border !border-gray-300 \r\n                   shadow-lg px-3 py-2 rounded-md text-sm font-medium \r\n                   transition-opacity duration-300 ease-in-out"})]})]}),e.jsx("div",{className:"bg-white overflow-auto",children:e.jsxs("ul",{className:"border-b flex items-center gap-1 md:gap-x-6 text-xs md:text-sm",children:[e.jsx("li",{className:`py-2 border-b-2 ${1==t?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>s(1),role:"tab",className:"flex items-center font-semibold gap-x-2 py-2 px-2 rounded-lg duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100",children:[e.jsx("img",{className:"h-5 w-5 hidden md:block",src:j,alt:"Pending Icon"}),"Pending Applications"]})}),e.jsx("li",{className:`whitespace-nowrap py-2 border-b-2 ${4==t?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>s(4),role:"tab",className:`flex  ${4==t?"":" text-gray-500 font-semibold"} items-center gap-x-2 py-2 px-2 rounded duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100 font-medium`,children:[e.jsx("img",{className:"h-5 w-5 hidden md:block",src:j,alt:"Pending Icon"}),"Request Pending Applications"]})}),e.jsx("li",{className:`py-2 border-b-2 ${2==t?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>s(2),role:"tab",className:"flex items-center font-semibold gap-x-2 py-2 px-2 rounded-lg duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100",children:[e.jsx("img",{className:"h-5 w-5 hidden md:block",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIUlEQVR4nO2XvU4cMRSFP2CXFAQhIVFRohRA6GgpkAglNFBB8gSIv6SiQFRQ8wCAFJYngJ53QPyJhoouTRKEEgqMrnRGskbsMrvsMN6Vj2Rpxr7XM8c+9/oaIloHLtBWN9qOSChwkQhxR3KBi9IiSqt1pOUKOCtcJEKMkVzgYvolSisXuCgtorRygYvSIkorF7goLbJXv7XGWqr6bVkiRcC1C5FZYLcdiDSMIoiUgTmgAlwB98BfPVc0ZjbBBfsB0OFJ5yaDz41sgyFyDJSATmDH6z8HVoFRoEfNnteAC9k8AdvyfRORZiIh8R9YArpq2NrYMvAoHyMTBJFZra6RmKrD74vImO9M0UTKXkzYTmTBB2BezytezJSLJDLnxUQtOSWwpHAonw3F16Xeba53D/ZECkd6t5XNgi3Z/wbG1LeuvsMiiAzJ7lrvIxlILHixNOn1f9Yc140SaQb+aP7e1KoPp+wmgH8i8jU11qs5bK5giFgQO53mi+r7BPxS/+YLcwRBJJGWHXbo4Kt4393zstq+VwEQmrSSn7YT28c34MH7/inQXWWOH7L5GUL6vXgh/Y4Dt8AZ0FfFv6Ri8k3pt9kHopUdafQDgzX810I5EP0S5VFlR1ZMN1Ki5NHugAF9Z1t99mMrkkw1lLQTDRWNebUTZaJO/ZCtbhIz68pIH9Xs+btXktRVxr83TCJZL1avyqlopK+6ds21Zjth9VTVq+4zGfsc0+AWfWAAAAAASUVORK5CYII=",alt:"Approved Icon"}),"Connection List"]})}),e.jsx("li",{className:`whitespace-nowrap py-2 border-b-2 ${3==t?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>s(3),role:"tab",className:"flex items-center font-semibold gap-x-2 py-2 px-2 rounded-lg duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100",children:[e.jsx("img",{className:"h-5 w-6 hidden md:block",src:"/assets/attachment-034004a1.png",alt:"Attached Icon"}),"Link Connections"]})})]})}),e.jsx("div",{children:e.jsx("section",{className:"container mx-auto py-4",children:e.jsxs("div",{children:[1==t&&e.jsx(P,{errorMsg:"Error Data Loading..",children:e.jsx(E,{refechList:()=>{Q()},isLoading:b,data:p})}),2==t&&e.jsx(P,{errorMsg:"Error Data Loading..",children:e.jsx(z,{isLoading:f,data:h})}),3==t&&e.jsx(P,{errorMsg:"Error Data Loading..",children:e.jsx(T,{fetchAttachedConsumerList:H,isLoading:D,data:m})}),4==t&&e.jsx(P,{errorMsg:"Error Data Loading..",children:e.jsx(F,{isLoading:L,data:F})})]})})})]})]})})};export{H as default};
