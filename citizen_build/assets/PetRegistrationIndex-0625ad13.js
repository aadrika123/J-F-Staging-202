import{j as e}from"./mui-d8134288.js";import{r as l,u as a}from"./router-a70afc62.js";import{z as t,W as i,c as n,d,u as s,A as r,B as c,t as o}from"./index-1c8a2e08.js";import"./PetAccordionPage-c80dfee3.js";import{P as m}from"./PetRegAPIList-09ec3f04.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const p="text-red-700 font-semibold",h="text-sm",u="block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",N=a=>{var N,v,x,b,g;const[y,f]=l.useState(),[w,F]=l.useState(),[A,S]=l.useState(),[D,L]=l.useState(!1),[K,R]=l.useState(!1),[T,P]=l.useState(!1),{notify:j}=l.useContext(t),[O,B]=l.useState(),[C,V]=l.useState(),[k,z]=l.useState(!1),{api_ulbList:$,header:I,api_wardList:G}=i(),{api_PetRegistrationApplyForm:Z,api_PetRegistrationMaster:_,api_ListOfSafHolding:M,api_getUserDetailsByHoldingSaf:E,header1:H}=m(),U=n({ulb:d().required("Kindly enter a value."),applicantName:d().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),applyThrough:d().required("Kindly enter a value."),holdingNo:d().required("Kindly enter a value."),categoryApplication:d().required("Kindly enter a value."),ward:d().required("Kindly enter a value."),mobileNo:d().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),panNo:d().matches(/^[A-Za-z0-9]{10}$/,"Enter 10 Character PAN No.").required("Kindly enter a value."),petType:d().required("Kindly enter a value."),petName:d().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),petGender:d().required("Kindly enter a value."),petBirthDate:d().required("Kindly enter a value."),breed:d().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),color:d().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorName:d().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorRegNo:d().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),dateOfRabies:d().required("Kindly enter a value."),dateOfLepVaccine:d().required("Kindly enter a value."),petFrom:d().required("Kindly enter a value.")}),W=s({initialValues:{ulb:"",applicantName:"",applyThrough:"",holdingNo:"",categoryApplication:"",ward:"",mobileNo:"",email:"",panNo:"",address:"",petType:"",petName:"",petGender:"",petBirthDate:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(e,l)=>{Y(e)},validationSchema:U}),Y=e=>{R(!0),r.post(Z,{address:null==e?void 0:e.address,applyThrough:null==e?void 0:e.applyThrough,propertyNo:null==e?void 0:e.holdingNo,breed:null==e?void 0:e.breed,ownerCategory:null==e?void 0:e.categoryApplication,color:null==e?void 0:e.color,dateOfLepVaccine:null==e?void 0:e.dateOfLepVaccine,dateOfRabies:null==e?void 0:e.dateOfRabies,doctorName:null==e?void 0:e.doctorName,doctorRegNo:null==e?void 0:e.doctorRegNo,panNo:null==e?void 0:e.panNo,petBirthDate:null==e?void 0:e.petBirthDate,petFrom:null==e?void 0:e.petFrom,petGender:null==e?void 0:e.petGender,petName:null==e?void 0:e.petName,petType:null==e?void 0:e.petType,ulbId:null==e?void 0:e.ulb,ward:null==e?void 0:e.ward,applicantName:null==e?void 0:e.applicantName,mobileNo:null==e?void 0:e.mobileNo,email:null==e?void 0:e.email,panNo:null==e?void 0:e.panNo},I).then(e=>{var l,t,i;R(!1),e.data.status?(a.data(e.data.data),a.screen(2),j(null==(l=null==e?void 0:e.data)?void 0:l.message,"success")):(j(null==(t=null==e?void 0:e.data)?void 0:t.message,"error"),P(null==(i=null==e?void 0:e.data)?void 0:i.message))}).catch(e=>{var l,a;P(null==(a=null==(l=null==e?void 0:e.response)?void 0:l.data)?void 0:a.error),j("Something Went wrong","error"),R(!1)})};return l.useEffect(()=>{r.post(_,{},H).then(e=>{e.data.status&&S(e.data.data)}).catch(e=>{})},[]),l.useEffect(()=>{r.get($,I).then(e=>{e.data.status&&f(e.data.data)}).catch(e=>{})},[]),l.useEffect(()=>{z(!0),r.post(G,{ulbId:W.values.ulb},I).then(e=>{z(!1),e.data.status&&F(e.data.data)}).catch(e=>{z(!1)})},[W.values.ulb]),l.useEffect(()=>{let e;z(!0),1==W.values.applyThrough&&(e="holding"),2==W.values.applyThrough&&(e="saf"),r.post(M,{type:e,ulbId:W.values.ulb},I).then(e=>{z(!1),e.data.status&&B(e.data.data)}).catch(e=>{z(!1)})},[W.values.ulb,W.values.applyThrough]),l.useEffect(()=>{z(!0),r.post(E,{connectionThrough:W.values.applyThrough,id:W.values.holdingNo,ulbId:W.values.ulb},I).then(e=>{var l,a,t,i,n,d,s,r,c,o,m,p,h,u;z(!1),e.data.status&&(V(e.data.data),W.setFieldValue("address",null==(a=null==(l=null==e?void 0:e.data)?void 0:l.data)?void 0:a.prop_address),W.setFieldValue("ward",null==(n=null==(i=null==(t=null==e?void 0:e.data)?void 0:t.data)?void 0:i.wardDetails)?void 0:n.wardId),W.setFieldValue("applicantName",null==(r=null==(s=null==(d=null==e?void 0:e.data)?void 0:d.data)?void 0:s.owners[0])?void 0:r.ownerName),W.setFieldValue("mobileNo",null==(m=null==(o=null==(c=null==e?void 0:e.data)?void 0:c.data)?void 0:o.owners[0])?void 0:m.mobileNo),W.setFieldValue("email",null==(u=null==(h=null==(p=null==e?void 0:e.data)?void 0:p.data)?void 0:h.owners[0])?void 0:u.email))}).catch(e=>{z(!1)})},[W.values.holdingNo,W.values.applyThrough]),e.jsxs(e.Fragment,{children:[k&&e.jsx(c,{}),e.jsxs("form",{onSubmit:W.handleSubmit,onChange:e=>{let l=e.target.name,a=e.target.value;P(!1),"color"==l&&W.setFieldValue("color",o(a,W.values.color,20)),"doctorName"==l&&W.setFieldValue("doctorName",o(a,W.values.doctorName,20)),"breed"==l&&W.setFieldValue("breed",o(a,W.values.breed,20)),"petName"==l&&W.setFieldValue("petName",o(a,W.values.petName,20)),"doctorName"==l&&W.setFieldValue("doctorName",o(a,W.values.doctorName,20))},className:"pb-20",children:[e.jsxs("div",{className:"overflow-y-auto",children:[e.jsx("div",{className:"col-span-12 ml-2 my-2",children:e.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 bg-white shadow-md rounded-md py-2",children:[e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"ulb",children:["Select ULB ",e.jsx("span",{className:p,children:"*"})]}),e.jsxs("select",{...W.getFieldProps("ulb"),name:"ulb",className:u,children:[e.jsx("option",{value:"",children:"Select"}),null==y?void 0:y.map((l,a)=>e.jsx("option",{value:l.id,children:l.ulb_name},a))]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.ulb&&W.errors.ulb?W.errors.ulb:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"applyThrough",children:["Apply Through",e.jsx("span",{className:p,children:"*"})]}),e.jsxs("select",{...W.getFieldProps("applyThrough"),name:"applyThrough",className:u,children:[e.jsx("option",{value:"",children:"Select"}),null==(N=null==A?void 0:A.registrationThrough)?void 0:N.map((l,a)=>e.jsx("option",{value:l.id,children:l.registration_through},a))]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.applyThrough&&W.errors.applyThrough?W.errors.applyThrough:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"holdingNo",children:["Holding / SAF No.",e.jsx("span",{className:p,children:"*"})]}),e.jsxs("select",{...W.getFieldProps("holdingNo"),name:"holdingNo",className:u,children:[e.jsx("option",{value:"",children:"Select"}),O&&O.map((l,a)=>e.jsx("option",{value:(null==l?void 0:l.saf_no)||(null==l?void 0:l.new_holding_no),children:(null==l?void 0:l.saf_no)||(null==l?void 0:l.new_holding_no)},a))]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.holdingNo&&W.errors.holdingNo?W.errors.holdingNo:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"categoryApplication",children:["Category of Application",e.jsx("span",{className:p,children:"*"})]}),e.jsxs("select",{...W.getFieldProps("categoryApplication"),name:"categoryApplication",className:u,children:[e.jsx("option",{value:"",children:"Select"}),(null==A?void 0:A.ownertype)&&(null==(v=null==A?void 0:A.ownertype)?void 0:v.map((l,a)=>e.jsx("option",{value:l.id,children:l.owner_type},a)))]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.categoryApplication&&W.errors.categoryApplication?W.errors.categoryApplication:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"ward",children:["Ward Number",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{type:"text",disabled:!0,...W.getFieldProps("ward"),value:null==(x=null==C?void 0:C.wardDetails)?void 0:x.wardNo,name:"ward",className:u})]})]}),e.jsx("div",{className:"col-span-12 ml-2 my-2",children:e.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),e.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4",children:[e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"applicantName",children:["Name of Applicant",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{disabled:!0,...W.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.applicantName&&W.errors.applicantName?W.errors.applicantName:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"mobileNo",children:["Mobile No",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{disabled:!0,...W.getFieldProps("mobileNo"),type:"number",maxLength:"10",name:"mobileNo",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.mobileNo&&W.errors.mobileNo?W.errors.mobileNo:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsx("label",{className:h,htmlFor:"email",children:"Email"}),e.jsx("input",{...W.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.email&&W.errors.email?W.errors.email:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"panNo",children:["PAN No.",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("panNo"),maxLength:"10",type:"text",name:"panNo",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.panNo&&W.errors.panNo?W.errors.panNo:null})]})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"address",children:["Address",e.jsx("span",{className:p,children:"*"})]}),e.jsx("textarea",{disabled:!0,...W.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:"block w-full border px-2 border-gray-300 rounded shadow"}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.address&&W.errors.address?W.errors.address:null})]})]}),e.jsx("div",{className:"col-span-12 ml-2 my-2",children:e.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Pet Details"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 bg-white shadow-md rounded-md py-2",children:[e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"petType",children:["Pet Type",e.jsx("span",{className:p,children:"*"})]}),e.jsxs("select",{...W.getFieldProps("petType"),type:"text",name:"petType",className:u,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"1",children:"Dog"})]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.petType&&W.errors.petType?W.errors.petType:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"petName",children:["Name of Pet",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.petName&&W.errors.petName?W.errors.petName:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"petGender",children:["Gender",e.jsx("span",{className:p,children:"*"})]}),e.jsxs("select",{...W.getFieldProps("petGender"),type:"text",name:"petGender",className:u,children:[e.jsx("option",{value:"",children:"Select"}),null==(b=null==A?void 0:A.petGender)?void 0:b.map((l,a)=>e.jsx("option",{value:l.id,children:l.pet_gender},a))]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.petGender&&W.errors.petGender?W.errors.petGender:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"petBirthDate",children:["Date of Birth",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:(new Date).toISOString().split("T")[0],className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.petBirthDate&&W.errors.petBirthDate?W.errors.petBirthDate:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"breed",children:["Breed",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("breed"),type:"text",maxLength:"20",name:"breed",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.breed&&W.errors.breed?W.errors.breed:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"color",children:["Color",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("color"),type:"text",maxLength:"20",name:"color",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.color&&W.errors.color?W.errors.color:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"doctorName",children:["Veterinary Doctor Name",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("doctorName"),type:"text",maxLength:"70",name:"doctorName",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.doctorName&&W.errors.doctorName?W.errors.doctorName:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"doctorRegNo",children:["Doctorâ€™s MSVC/VCI number"," ",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("doctorRegNo"),type:"text",maxLength:"70",name:"doctorRegNo",className:u}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.doctorRegNo&&W.errors.doctorRegNo?W.errors.doctorRegNo:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"dateOfRabies",children:["Date of Rabies",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("dateOfRabies"),type:"date",name:"dateOfRabies",className:u,max:(new Date).toISOString().split("T")[0]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.dateOfRabies&&W.errors.dateOfRabies?W.errors.dateOfRabies:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"dateOfLepVaccine",children:["Leptospirosis Vaccination Date",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...W.getFieldProps("dateOfLepVaccine"),type:"date",name:"dateOfLepVaccine",className:u,max:(new Date).toISOString().split("T")[0]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.dateOfLepVaccine&&W.errors.dateOfLepVaccine?W.errors.dateOfLepVaccine:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:h,htmlFor:"petFrom",children:["Pet From",e.jsx("span",{className:p,children:"*"})]}),e.jsxs("select",{...W.getFieldProps("petFrom"),name:"petFrom",className:u,children:[e.jsx("option",{value:"",children:"Select"}),null==(g=null==A?void 0:A.occurenceType)?void 0:g.map((l,a)=>e.jsx("option",{value:l.id,children:l.occurrence_types},a))]}),e.jsx("p",{className:"text-red-500 text-xs",children:W.touched.petFrom&&W.errors.petFrom?W.errors.petFrom:null})]})]})]}),e.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>L(!D),children:[e.jsx("input",{type:"checkbox",checked:D,name:"",id:"",onChange:e=>L(e.target.checked)}),e.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),e.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:T&&T}),e.jsx("div",{className:"flex justify-center my-5 ",children:K?e.jsx("p",{children:"Form Submitting.."}):e.jsx("button",{type:"submit",disabled:!D,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},v=l=>{var t;const i=a();return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-center",children:[" ","Your Application has submitted successfully"]}),e.jsxs("p",{className:"text-center",children:["Application No."," ",e.jsxs("span",{className:"font-semibold text-lg",children:[" ",null==(t=null==l?void 0:l.data)?void 0:t.applicationNo]})]}),e.jsxs("div",{className:"flex justify-center gap-x-5",children:[e.jsx("button",{onClick:()=>i("/pet-registration-dashboard"),className:"border border-indigo-600 px-2 py-1 rounded shadow hover:bg-indigo-500 hover:text-white",children:"Dashboard"}),e.jsx("button",{onClick:()=>{var e;return i(`/apply-pet-registration/document-upload/${null==(e=null==l?void 0:l.data)?void 0:e.id}`)},className:"bg-indigo-500 px-2 py-1 rounded shadow text-white hover:bg-indigo-700",children:"Upload Document"})]})]})},x=()=>{const[a,i]=l.useState(1),[n,d]=l.useState(),{setBreadCrumbData:s}=l.useContext(t);return l.useEffect(()=>{s(["Apply Pet Registration"])},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:e.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[e.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Pet Registration Application"}),e.jsxs("div",{className:"md:p-5 p-2",children:[e.jsxs("p",{className:1==a?"block":"hidden",children:[" ",e.jsx(N,{screen:i,data:d})," "]}),e.jsx("p",{className:2==a?"block":"hidden",children:e.jsx(v,{screen:i,data:n})})]})]})})})};export{x as default};
