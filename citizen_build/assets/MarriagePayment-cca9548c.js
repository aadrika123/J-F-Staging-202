import{j as e}from"./mui-d8134288.js";import{f as l,r as a,u as o}from"./router-a70afc62.js";import{M as n,U as t,b as r,c as i,d,u as s,A as c,k as m,f as u,C as p,aI as h,aJ as b,D as f,Q as v,aK as g,aL as x,ab as w,r as N,P as y,E as k,n as _,m as j}from"./index-1c8a2e08.js";import{a as C}from"./index.esm-ecae21af.js";import{a as I}from"./index.esm-449e63b8.js";import{_ as E}from"./index-5ce5650c.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const D={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};function P(_){var j,P,q,A;const{handlePayment:M}=t(),{id:L}=l(),{marriageOrderId:R}=y(),{api_getTransactionNoForReceipt:B,api_generatedreceipt:S}=k(),[O,T]=a.useState(!1),[U,$]=a.useState(!1),[z,Q]=a.useState(null),[V,F]=a.useState(!1),[H,G]=a.useState(!1),[Y,J]=a.useState(null),[K,W]=a.useState(null),[X,Z]=a.useState(!1),[ee,le]=a.useState(0);window.localStorage.getItem("citizen_token");const ae=o();a.useState(!1);const[oe,ne]=a.useState();let te;function re(){G(!1)}a.useState(!1),te=i({paymentMode:d().required("select payment mode"),remarks:d(),bankName:d(),branchName:d(),cheque_dd_no:d(),cheque_dd_date:d()});const ie=s({initialValues:{paymentMode:"CASH",remarks:"",bankName:"",branchName:"",cheque_dd_no:"",cheque_dd_date:"",payAdvance:"",advanceAmount:""},onSubmit:e=>{se(e)&&me()},validationSchema:te}),de=async e=>{let l={applicationId:null==e?void 0:e.applicationId,departmentId:null==e?void 0:e.departmentId,status:"",captured:"1",card_id:"",amount:null==e?void 0:e.amount,payment_method:"upi/netbanking",workflow_id:null==e?void 0:e.workflowId,user_id:null==e?void 0:e.user_id,ulb_id:null==e?void 0:e.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:null==e?void 0:e.razorpay_order_id,payment_id:null==e?void 0:e.razorpay_payment_id,created_at:""};c.post(S,l,r()).then(l=>{var a;1==l.data.status?(ce({orderId:null==e?void 0:e.razorpay_order_id,paymentId:null==e?void 0:e.razorpay_payment_id}),ae(`/marriage-payment-receipt/${null==(a=null==l?void 0:l.data)?void 0:a.data}`,{replace:!0})):v.error(l.data.message,"error")}).catch(e=>{v.error(e.message,"error")})},se=e=>{if("CHEQUE"==e.paymentMode||"DD"==e.paymentMode){if(""==e.bankName||null==e.bankName)return ue(!0,"Please enter bank name"),!1;if(""==e.branchName||null==e.branchName)return ue(!0,"Please enter branch name"),!1;if(""==e.cheque_dd_no||null==e.cheque_dd_no)return ue(!0,"Please enter cheque/dd no."),!1;if(""==e.cheque_dd_date||null==e.cheque_dd_date)return ue(!0,"Please enter cheque/dd date"),!1}return!0},ce=e=>{$(!0),F(!1),c.post(B,{orderId:null==e?void 0:e.orderId,paymentId:null==e?void 0:e.paymentId},r()).then(function(e){var l,a,o,n;(null==(l=null==e?void 0:e.data)?void 0:l.status)?Q(null==(o=null==(a=null==e?void 0:e.data)?void 0:a.data)?void 0:o.transaction_no):ue(!0,m(null==(n=null==e?void 0:e.data)?void 0:n.message)),$(!1)}).catch(function(e){F(!0),$(!1)})},me=async()=>{let e,l;$(!0),e=R,l={applicationId:L},c.post(e,l,r()).then(e=>{var l,a,o;!0===(null==(l=null==e?void 0:e.data)?void 0:l.status)?M(null==(a=null==e?void 0:e.data)?void 0:a.data,de):ue(!0,m(null==(o=null==e?void 0:e.data)?void 0:o.message)),$(!1)}).catch(e=>{$(!1),ue(!0,"Unable to generate order id")})};a.useEffect(()=>{var e,l;le(parseFloat(null==(e=null==_?void 0:_.demand)?void 0:e.payment_amount)+parseFloat(null==(l=null==_?void 0:_.demand)?void 0:l.penalty_amount))},[]);const ue=(e,l)=>{W(l),F(e)};if(U)return e.jsx(e.Fragment,{children:e.jsx(u,{})});if(1==O)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-full bg-white sm:p-20 p-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"Your payment has been successfully done ! Now the application is sent for verification."}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>ae(`/marriage-payment-receipt/${encodeURIComponent(z)}`),children:"View Receipt"}),e.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>ae(`/marriage-details/${L}`),children:"View Application"})]})]})})});const pe=`upi://pay?pa=your-vpa@provider&pn=MerchantName&mc=1234&tid=1234567890&tr=order-id&tn=Payment%20Description&am=${null==(j=null==_?void 0:_.demand)?void 0:j.total_payable_amount}&cu=INR`;return X?e.jsx(p,{children:e.jsxs("div",{className:"relative bg-white w-[90vw] md:w-[50vw] h-[80vh] md:h-[35vw] py-8 gap-8 border rounded-md shadow-lg shadow-indigo-50 border-indigo-600 flex flex-col justify-center items-center",children:[e.jsx("button",{className:"absolute top-4 right-4 font-bold bg-red-200 p-2 rounded-full shadow-sm hover:bg-red-400",onClick:()=>Z(!1),children:e.jsx(I,{})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:"font-semibold border-b text-xl uppercase",children:"Scan To Pay"})}),e.jsx(E,{value:pe}),e.jsx("div",{className:" font-semibold bg-green-300 px-8 py-1.5 rounded-sm",children:h(null==(P=null==_?void 0:_.demand)?void 0:P.total_payable_amount)})]})}):e.jsxs(e.Fragment,{children:[e.jsx(b,{position:"top-right",autoClose:2e3}),V&&e.jsx(f,{activateBottomErrorCard:ue,errorTitle:K}),e.jsx("div",{className:" block sm:p-4 mt-4 w-full md:py-4 md:px-40 md:pb-0 md:pt-0 rounded-lg shadow-lg bg-white md:w-full mx-auto  overflow-x-auto mb-20 ",children:e.jsx("div",{className:" block p-4 w-full md:py-6 rounded-lg bg-white mx-auto ",children:e.jsxs("form",{onSubmit:ie.handleSubmit,onChange:e=>{let l=e.target.name,a=e.target.value;"paymentMode"==l&&ne(a),"remarks"==l&&ie.setFieldValue("remarks",g(a,ie.values.remarks,100)),"bankName"==l&&ie.setFieldValue("bankName",x(a,ie.values.bankName,100)),"branchName"==l&&ie.setFieldValue("branchName",x(a,ie.values.branchName,100)),"cheque_dd_no"==l&&ie.setFieldValue("cheque_dd_no",w(a,ie.values.cheque_dd_no,20)),"advanceAmount"==l&&ie.setFieldValue("advanceAmount",N(a,ie.values.advanceAmount,10))},className:"p-4 relative",children:[e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Mode"]}),e.jsx("select",{...ie.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:e.jsx("option",{value:"ONLINE",children:"Online"})}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:ie.touched.paymentMode&&ie.errors.paymentMode?ie.errors.paymentMode:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Remarks"}),e.jsx("input",{...ie.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Remarks"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:ie.touched.remarks&&ie.errors.remarks?ie.errors.remarks:null})]}),("CHEQUE"==oe||"DD"==oe)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Bank Name"]}),e.jsx("input",{...ie.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Bank Name"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:ie.touched.bankName&&ie.errors.bankName?ie.errors.bankName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Branch Name"]}),e.jsx("input",{...ie.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Branch Name"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:ie.touched.branchName&&ie.errors.branchName?ie.errors.branchName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD No"]}),e.jsx("input",{...ie.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Cheque/DD No"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:ie.touched.cheque_dd_no&&ie.errors.cheque_dd_no?ie.errors.cheque_dd_no:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD Date"]}),e.jsx("input",{...ie.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:ie.touched.cheque_dd_date&&ie.errors.cheque_dd_date?ie.errors.cheque_dd_date:null})]})]}),e.jsx("div",{className:"col-span-12"}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Amount :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:h(null==(q=null==_?void 0:_.demand)?void 0:q.payment_amount)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:h(null==(A=null==_?void 0:_.demand)?void 0:A.penalty_amount)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsx("span",{children:"Total Payable Amount :"})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:h(ee)})]})})]}),e.jsxs("div",{className:"col-span-12 grid grid-cols-2 sm:mt-10 mt-6",children:[e.jsx("div",{className:""}),e.jsx("div",{className:"md:pl-10 text-right",children:"ONLINE"!=ie.values.paymentMode?e.jsxs("button",{type:"submit",className:"sm:ml-4 font-bold sm:px-6 px-1.5 py-2 bg-indigo-500 text-white text-xs sm:text-sm leading-tight uppercase rounded  hover:bg-indigo-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out shadow-xl border border-white",children:[e.jsx("span",{className:"sm:mr-2 mr-1",children:"Pay "}),h(ee)]}):e.jsx("button",{type:"submit",className:"sm:ml-4 font-bold sm:px-6 px-1.5 py-2 bg-indigo-500 text-white text-xs sm:text-sm leading-tight uppercase rounded  hover:bg-indigo-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out shadow-xl border border-white",children:e.jsx("span",{className:"sm:mr-2 mr-1",children:"Genrate QR"})})})]})]})})}),e.jsx(n,{isOpen:H,onRequestClose:re,style:D,contentLabel:"Example Modal",children:e.jsxs("div",{class:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:[e.jsx("button",{onClick:re,type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white",children:e.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsxs("div",{class:"p-6 text-center",children:[e.jsxs("div",{className:"w-full flex h-10",children:[" ",e.jsx("span",{className:"mx-auto",children:e.jsx(C,{size:30})})]}),e.jsx("h3",{class:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:"Confirm Payment"}),e.jsx("button",{type:"button",class:"text-white bg-green-600 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:()=>{var e;G(!1),"ONLINE"==(null==(e=ie.values)?void 0:e.paymentMode)?me():(e=>{var l,a;let o,n;F(!1),$(!0),o="",n={id:L,amount:null==(l=null==_?void 0:_.paymentDetails)?void 0:l.totalDues,paymentMode:null==e?void 0:e.paymentMode,ulbId:null==(a=null==_?void 0:_.basicDetails)?void 0:a.ulb_id,chequeDate:null==e?void 0:e.cheque_dd_date,bankName:null==e?void 0:e.bankName,branchName:null==e?void 0:e.branchName,chequeNo:null==e?void 0:e.cheque_dd_no},c.post("",n,r()).then(function(e){var l,a,o,n,t,r,i;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(Q(null==(o=null==(a=null==e?void 0:e.data)?void 0:a.data)?void 0:o.TransactionNo),J(null==(t=null==(n=null==e?void 0:e.data)?void 0:n.data)?void 0:t.tranNo),T(null==(r=null==e?void 0:e.data)?void 0:r.status)):ue(!0,m(null==(i=null==e?void 0:e.data)?void 0:i.message)),$(!1)}).catch(function(e){ue(!0,"Error occured. Please try again later."),$(!1)})})(ie.values)},children:"Yes, I'm sure"})]})]})})]})}n.setAppElement("#root");const q=()=>{const n=o(),{api_getDetails:t}=y(),{id:i}=l(),[d,s]=a.useState(!1),[p,h]=a.useState(null),[b,v]=a.useState(!1),[g,x]=a.useState(""),w=(e,l)=>{x(l),v(e)};a.useEffect(()=>{N()},[]);const N=()=>{s(!0),c.post(t,{applicationId:i},r()).then(e=>{var l,a,o;(null==(l=null==e?void 0:e.data)?void 0:l.status)?h(null==(a=null==e?void 0:e.data)?void 0:a.data):w(!0,m(null==(o=null==e?void 0:e.data)?void 0:o.message))}).catch(e=>{w(!0,"Error getting document list, please try again later !")}).finally(()=>{s(!1)})};return e.jsxs(e.Fragment,{children:[d&&e.jsx(u,{}),!d&&e.jsxs("div",{className:"animate__animated animate__fadeIn animate__faster overflow-x-hidden overflow-y-scroll w-[99%] mx-auto rounded-md gap-6 h-full p-[1vw]",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("h1",{className:"bg-white shadow-lg shadow-indigo-300 text-indigo-500 border-[0.17vw] border-indigo-500 px-[4vw] py-[1.5vh] w-max font-semibold text-[2.8vh]",children:"Marriage Payment Screen"})}),b&&e.jsx(f,{activateBottomErrorCard:w,errorTitle:g}),e.jsxs("div",{className:"flex items-center flex-wrap w-full text-sm bg-white p-4 shadow-lg gap-2 mt-4",children:[e.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[e.jsx("div",{children:"Application No. "}),e.jsx("div",{className:"font-semibold text-base",children:_(null==p?void 0:p.application_no)})]}),e.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[e.jsx("div",{children:"Groom Name "}),e.jsx("div",{className:"font-semibold text-base",children:_(null==p?void 0:p.groom_name)})]}),e.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[e.jsx("div",{children:"Bride Name "}),e.jsx("div",{className:"font-semibold text-base",children:_(null==p?void 0:p.bride_name)})]}),e.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[e.jsx("div",{children:"Marriage Date "}),e.jsx("div",{className:"font-semibold text-base",children:j(null==p?void 0:p.marriage_date)})]}),e.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[e.jsx("div",{children:"Marriage Place "}),e.jsx("div",{className:"font-semibold text-base",children:_(null==p?void 0:p.marriage_place)})]}),e.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[e.jsx("div",{children:"Appointment Date "}),e.jsx("div",{className:"font-semibold text-base",children:j(null==p?void 0:p.appointment_date)})]})]}),e.jsx("div",{children:(null==p?void 0:p.is_bpl)?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-full bg-white sm:p-20 p-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"As you belongs to BPL category, so you don't need to pay. And your application is sent for verification."}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>n(`/marriage-details/${i}`),children:"View Application"})})]})})}):e.jsx(P,{demand:p})})]})]})};export{q as default};
