import{r as o}from"./router-a70afc62.js";var i={};Object.defineProperty(i,"o",{value:!0});var e=i.useGeolocated=function(o={}){const{positionOptions:i={enableHighAccuracy:!0,maximumAge:0,timeout:1/0},isOptimisticGeolocationEnabled:e=!0,userDecisionTimeout:t,suppressLocationOnMount:a=!1,watchPosition:r=!1,geolocationProvider:s=("undefined"!=typeof navigator?navigator.geolocation:void 0),watchLocationPermissionChange:l=!1,onError:c,onSuccess:u}=o,m=(0,n.useRef)(0),p=(0,n.useRef)(!0),d=(0,n.useRef)(0),[g,v]=(0,n.useState)(e),[b,w]=(0,n.useState)(),[E,h]=(0,n.useState)(),[A,G]=(0,n.useState)(),[P,f]=(0,n.useState)(),O=(0,n.useCallback)(()=>{m.current&&window.clearTimeout(m.current)},[]),x=(0,n.useCallback)(o=>{O(),p.current&&(w(()=>{}),v(!1),G(o)),null==c||c(o)},[c,O]),y=(0,n.useCallback)(o=>{O(),p.current&&(w(o.coords),h(o.timestamp),v(!0),G(()=>{})),null==u||u(o)},[u,O]),M=(0,n.useCallback)(()=>{if(!s||!s.getCurrentPosition||!s.watchPosition)throw new Error("The provided geolocation provider is invalid");t&&(m.current=window.setTimeout(()=>{x()},t)),r?d.current=s.watchPosition(y,x,i):s.getCurrentPosition(y,x,i)},[s,r,t,x,y,i]);return(0,n.useEffect)(()=>{let o;return l&&s&&"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(i=>{o=i,o.onchange=()=>{f(o.state)}}).catch(o=>{}),()=>{o&&(o.onchange=null)}},[]),(0,n.useEffect)(()=>(a||M(),()=>{O(),r&&d.current&&(null==s||s.clearWatch(d.current))}),[P]),{getPosition:M,coords:b,timestamp:E,isGeolocationEnabled:g,isGeolocationAvailable:Boolean(s),positionError:A}};const n=o;function t(){const{isGeolocationAvailable:o,isGeolocationEnabled:i,getPosition:n,coords:t,positionError:a,timestamp:r}=e({positionOptions:{enableHighAccuracy:!0,timeout:1/0,maximumAge:localStorage.getItem("geoMaxAge")||1/0},watchPosition:!0,userDecisionTimeout:5e3});return{isGeolocationAvailable:o,isGeolocationEnabled:i,coords:t,positionError:a,timestamp:r,getPosition:n}}export{t as u};
