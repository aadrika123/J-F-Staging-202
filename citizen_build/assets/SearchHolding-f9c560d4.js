import{j as e}from"./mui-d8134288.js";import{r as l,u as t}from"./router-a70afc62.js";import{z as r,x as o,ad as a,y as s,c as i,d,u as n,B as c,f as m,D as x,bO as p,n as b,bX as u,A as h,E as f}from"./index-1c8a2e08.js";import{a as N}from"./axios-0f103e9d.js";import{P as g}from"./PropertyApiList-3d1b6323.js";import y from"./OtpCard-69be3233.js";import v from"./MobileNoCard-b107310f.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";function w(){const[w,j]=l.useState(!0),[O,S]=l.useState(),[P,E]=l.useState(!1),[M,k]=l.useState(null),[D,T]=l.useState(null),[A,I]=l.useState(""),[C,L]=l.useState(),{notify:B}=l.useContext(r),[_,H]=l.useState(!1),[U,R]=l.useState(null),[W,G]=l.useState(!1),[V,q]=l.useState(null),[z,X]=l.useState(!1),{t:$}=o();a("Search Property");const{api_searchDirectHolding:F}=g(),{api_getAllUlb:J,api_sendMobileOtp:K}=f(),{ulb_name:Q,brand_tag:Y}=s($),Z=t(),ee=i({holdingNo:d().required("This is a required field !"),ulbId:d().required("Select ULB")}),le=n({initialValues:{holdingNo:"",ulbId:""},onSubmit:e=>{(e=>{X(!1),G(!1),I(""),E(!1),j(!0);const l={holdingNo:null==e?void 0:e.holdingNo,ulbId:null==e?void 0:e.ulbId};N.post(F,l).then(e=>{var t,r;(null==(t=null==e?void 0:e.data)?void 0:t.status)?(S(null==(r=null==e?void 0:e.data)?void 0:r.data),E(!0),I(""),T(null==l?void 0:l.ulbId)):(B("This holding no does not exits!","error"),I("Data not found. Please enter a valid holding no. or related ULB")),j(!1)}).catch(e=>{B("Something went wrong!!","error"),I("Network problem."),re(!0,"Error occured. Please try again later."),j(!1),E(!1)})})(e)},validationSchema:ee}),te=(e=null)=>{let l;j(!0),l=null==e?{mobileNo:U}:{mobileNo:e},N.post(K,l).then(e=>{var l,t;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(H(!0),B("OTP is send to your mobile no.","success")):(B(null==(t=null==e?void 0:e.data)?void 0:t.message,"error"),re(!0,"Error occured. Please try again later.")),j(!1)}).catch(e=>{re(!0,"Error occured. Please try again later."),j(!1)})};l.useEffect(()=>{G(!1),j(!0),h.get(J,{timeout:6e4}).then(function(e){var l,t;(null==(l=null==e?void 0:e.data)?void 0:l.status)?L(null==(t=null==e?void 0:e.data)?void 0:t.data):G(!0),j(!1)}).catch(function(e){G(!0),j(!1)})},[]);const re=(e,l)=>{q(l),G(e)};return w?e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx("div",{className:"min-h-screen"})]}):_?e.jsx(y,{closeOtpModal:()=>{H(!1)},bottomNaviation:!0,headTitle:"Pay Property Tax",reSendOtp:te,verifedMobileNo:U,callback:()=>{B("Mobile no. has been verified successfully !","success"),Z(`/viewDemandHoldingPropertyDirect/${M}`)},setotpCardStatus:H}):_?void 0:e.jsxs(e.Fragment,{children:[z&&e.jsx(v,{title:"Enter Mobile No.",desc:"Enter mobile no. to proceed for payment",setverifedMobileNo:e=>{R(e),te(e)},closeMobileModal:()=>X(!1)}),w&&e.jsx(m,{}),W&&e.jsx(x,{activateBottomErrorCard:re,errorTitle:V}),e.jsxs("div",{className:"px-2 md:px-10 mt-16",children:[e.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[e.jsx("div",{className:"flex ml-5 mt-2 ",children:e.jsx("p",{className:"font-semibold text-3xl ml-4 mt-1 text-gray-600",children:"Search Property"})}),e.jsx("form",{onSubmit:le.handleSubmit,onChange:e=>{"holdingNo"==e.target.name&&le.setFieldValue("holdingNo",u(e.target.value,le.values.holdingNo,17))},children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-center my-5 m-10 ",children:[e.jsxs("div",{className:"form-group col-span-12 mb-4 md:px-10",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["ULB",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{id:"basic_details_1",...le.getFieldProps("ulbId"),className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md cursor-pointer ",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select"}),"AMC"!=Y?null==C?void 0:C.map(l=>e.jsx("option",{value:l.id,children:l.ulb_name})):e.jsx("option",{value:"2",children:Q})]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:le.touched.ulbId&&le.errors.ulbId?le.errors.ulbId:null})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Holding/PT No.",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...le.getFieldProps("holdingNo"),className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("p",{className:"text-red-500 text-xs",children:le.touched.holdingNo&&le.errors.holdingNo?le.errors.holdingNo:null})]}),e.jsx("div",{className:"mt-4 md:px-10",children:e.jsx("button",{type:"submit",className:"w-full border border-indigo-500 bg-indigo-600 hover:bg-indigo-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 py-1",children:e.jsxs("p",{className:"flex text-center justify-center items-center",children:[e.jsx(p,{className:"inline mr-2"}),"Search record"]})})})]})})]}),e.jsxs("div",{className:"mt-10",children:[P&&0!=(null==O?void 0:O.length)&&e.jsxs("div",{className:"col-span-10 bg-gray-50 p-4 overflow-x-scroll",children:[e.jsx("div",{className:"flex flex-row",children:e.jsx("h1",{className:"px-1 font-semibold font-serif text-2xl mt-4",children:"All Transcations"})}),e.jsxs("table",{className:"min-w-full leading-normal mt-10",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-indigo-50 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"#"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"ACTION"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"OWNER'S NAME"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"HOLDING NO"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"NEW HOLDING NO"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"MOBILE NO"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"WARD NO."}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"ULB"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"ADDRESS"})]})}),e.jsx("tbody",{className:"text-sm",children:e.jsx(e.Fragment,{children:null==O?void 0:O.map(l=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:"1"}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[" ",e.jsx("button",{onClick:()=>{return e=null==l?void 0:l.mobile_no,k(null==l?void 0:l.id),void(""==e||null==e||null==e?X(!0):(X(!1),R(e),te(e)));var e},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:b(null==l?void 0:l.owner_name)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:b(null==l?void 0:l.holding_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:b(null==l?void 0:l.new_holding_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:b(null==l?void 0:l.mobile_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:b(null==l?void 0:l.ward_name)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:b(null==l?void 0:l.ulb)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:b(null==l?void 0:l.prop_address)})]}))})})]})]}),e.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:A}),e.jsx("div",{className:"w-full h-40"})]})]})]})}export{w as default};
