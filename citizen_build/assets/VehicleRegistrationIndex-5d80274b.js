import{j as s}from"./mui-8e804a04.js";import{u as Q,r as i}from"./router-87042356.js";import{l as K,c as ee,d,u as se,A as f,B as ae,i as le}from"./index-88586e45.js";import"./PetAccordionPage-26a80458.js";import{W as te}from"./WaterApiList-5673dcca.js";import{P as re}from"./PetRegAPIList-d23bbde5.js";import{r as A}from"./UseImgResizer-f1558408.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";const ie=o=>{var N,m;const g=Q();return console.log("3",(N=o==null?void 0:o.data)==null?void 0:N.applicationNo),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-center",children:[" ","Your Application has submitted successfully"]}),s.jsxs("p",{className:"text-center",children:["Application No."," ",s.jsxs("span",{className:"font-semibold text-lg",children:[" ",(m=o==null?void 0:o.data)==null?void 0:m.applicationNo]})]}),s.jsx("div",{className:"flex justify-center gap-x-5",children:s.jsx("button",{onClick:()=>g("/vehicle-registration-dashboard"),className:"border border-indigo-600 px-2 py-1 rounded shadow hover:bg-indigo-500 hover:text-white",children:"Dashboard"})})]})},e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},ne=o=>{var V;const[g,N]=i.useState(),[m,v]=i.useState(),[b,R]=i.useState(),[F,E]=i.useState(!1),[k,C]=i.useState(!1),[L,w]=i.useState(!1),{notify:y}=i.useContext(K);i.useState(),i.useState();const[D,S]=i.useState(!1),[oe,_]=i.useState(),[ce,B]=i.useState(),[de,W]=i.useState(),[I,me]=i.useState(""),{api_ulbList:M,header:q,api_wardList:U}=te(),{api_RigRegistrationApplyForm:z,api_PetRegistrationMaster:T,api_ListOfSafHolding:pe,api_getUserDetailsByHoldingSaf:ue,header1:$}=re(),H=ee({ulb:d().required("Kindly enter a value."),address:d().required("Kindly enter a value."),applicantName:d().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),ownerCategory:d().required("Kindly enter a value."),ward:d().required("Kindly enter a value."),mobileNo:d().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:d().email().required("Kindly enter a value."),vehicleComapny:d().required("Kindly enter a value."),fitness:d().required("Kindly enter a value."),taxCopy:d().required("Kindly enter a value."),license:d().required("Kindly enter a value."),registrationNumber:d().required("Kindly enter a value.")}),O={ulb:"",ulbId:"",applicantName:"",ownerCategory:"",ward:"",mobileNo:"",email:"",address:"",vehicleComapny:"",fitness:"",taxCopy:"",license:"",registrationNumber:""};let c=new FormData;const l=se({initialValues:O,enableReinitialize:!0,onSubmit:(a,t)=>{console.log("clicked"),console.log(a,"formSubmitValues==>"),X(a)},validationSchema:H}),Y=a=>{let t=a.target.name,n=a.target.value;w(!1),t=="driverName"&&l.setFieldValue("driverName",le(n,l.values.driverName,20)),t=="fitness"&&_(a.target.files[0]),t=="taxCopy"&&B(a.target.files[0]),t=="license"&&W(a.target.files[0])},X=a=>{var n,p,u;C(!0);const t={ulbId:a==null?void 0:a.ulb,applicantName:a==null?void 0:a.applicantName,ownerCategory:a==null?void 0:a.ownerCategory,ward:a==null?void 0:a.ward,mobileNo:a==null?void 0:a.mobileNo,email:a==null?void 0:a.email,address:a==null?void 0:a.address,vehicleComapny:a==null?void 0:a.vehicleComapny,vehicleFrom:a==null?void 0:a.vehicleFrom,registrationNumber:a==null?void 0:a.registrationNumber};console.log(t,"payload====>>");for(let r in t)c.append(r,t[r]);c.append("documents[0][image]",(n=l==null?void 0:l.values)==null?void 0:n.fitness),c.append("documents[0][docCode]","FITNESS"),c.append("documents[0][ownerDtlId]",""),c.append("documents[1][image]",(p=l==null?void 0:l.values)==null?void 0:p.taxCopy),c.append("documents[1][docCode]","TAX"),c.append("documents[1][ownerDtlId]",""),c.append("documents[2][image]",(u=l==null?void 0:l.values)==null?void 0:u.license),c.append("documents[2][docCode]","LICENSE"),c.append("documents[2][ownerDtlId]",""),console.log("complete payload",c),f.post(z,c,q).then(r=>{var x,h,j;C(!1),r.data.status?(console.log("Form applied successfully"),o.data(r.data.data),console.log("1",r.data.data),o.screen(2),y((x=r==null?void 0:r.data)==null?void 0:x.message,"success")):(y((h=r==null?void 0:r.data)==null?void 0:h.message,"error"),w((j=r==null?void 0:r.data)==null?void 0:j.message),console.log("Failed to apply pet registration"))}).catch(r=>{var x,h,j,P;w((h=(x=r==null?void 0:r.response)==null?void 0:x.data)==null?void 0:h.error),y("Something Went wrong","error"),C(!1),console.log("Error while applying for pet registration..",(P=(j=r==null?void 0:r.response)==null?void 0:j.data)==null?void 0:P.error)})};i.useEffect(()=>{f.post(T,{},$).then(a=>{a.data.status?(R(a.data.data),console.log("vehicle master data",a.data)):console.log("Error fetching vehicle master list")}).catch(a=>{console.log("Error while getting vehicle master list")})},[]),i.useEffect(()=>{f.get(M,q).then(a=>{a.data.status?(N(a.data.data),console.log("ULB List",a.data)):console.log("Error fetching ulb list")}).catch(a=>{console.log("Error while getting ulb list")})},[]),i.useEffect(()=>{S(!0),f.post(U,{ulbId:l.values.ulb},q).then(a=>{S(!1),a.data.status?(v(a.data.data),console.log("Ward List",a.data)):console.log("Error fetching Ward list")}).catch(a=>{S(!1),console.log("Error while getting Ward list")})},[l.values.ulb]);const Z=async a=>{var n,p,u,r;const t=a.target.files[0];if(t){const x=await A(t),h=new File([x],(p=(n=a==null?void 0:a.target)==null?void 0:n.files[0])==null?void 0:p.name,{type:(r=(u=a==null?void 0:a.target)==null?void 0:u.files[0])==null?void 0:r.type});l.setFieldValue("fitness",h)}else l.setFieldValue("fitness",null)},G=async a=>{var n,p,u,r;const t=a.target.files[0];if(t){const x=await A(t),h=new File([x],(p=(n=a==null?void 0:a.target)==null?void 0:n.files[0])==null?void 0:p.name,{type:(r=(u=a==null?void 0:a.target)==null?void 0:u.files[0])==null?void 0:r.type});l.setFieldValue("taxCopy",h)}else l.setFieldValue("taxCopy",null)},J=async a=>{var n,p,u,r;const t=a.target.files[0];if(t){const x=await A(t),h=new File([x],(p=(n=a==null?void 0:a.target)==null?void 0:n.files[0])==null?void 0:p.name,{type:(r=(u=a==null?void 0:a.target)==null?void 0:u.files[0])==null?void 0:r.type});l.setFieldValue("license",h)}else l.setFieldValue("license",null)};return console.log("formik.values.owner_type",l.values.ownerCategory),s.jsxs(s.Fragment,{children:[D&&s.jsx(ae,{}),s.jsxs("form",{onSubmit:l.handleSubmit,onChange:Y,className:"mb-20",children:[s.jsxs("div",{className:"overflow-y-auto ",children:[s.jsx("div",{className:"col-span-12 ml-2 my-2",children:s.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 bg-white shadow-md rounded-md py-2",children:[s.jsxs("div",{className:"m-2",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsxs("select",{...l.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[s.jsx("option",{value:"",children:"Select"}),g==null?void 0:g.map((a,t)=>s.jsx("option",{value:a.id,children:a.ulb_name},t))]}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.ulb&&l.errors.ulb?l.errors.ulb:null})]}),s.jsxs("div",{className:"m-2",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ownerCategory",children:["Category of Application",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsxs("select",{...l.getFieldProps("ownerCategory"),name:"ownerCategory",className:e==null?void 0:e.textFiled,children:[s.jsx("option",{value:"",children:"Select"}),(b==null?void 0:b.ownertype)&&((V=b==null?void 0:b.ownertype)==null?void 0:V.map((a,t)=>t===0?s.jsx("option",{value:a.id,children:a.owner_type},t):t===1?s.jsx("option",{value:a.id,children:a.owner_type},t):null))]}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.ownerCategory&&l.errors.ownerCategory?l.errors.ownerCategory:null})]}),s.jsxs("div",{className:"m-2",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsxs("select",{...l.getFieldProps("ward"),name:"ward",className:e==null?void 0:e.textFiled,children:[s.jsx("option",{value:"",children:"Select"}),(m==null?void 0:m.length)>0&&(m==null?void 0:m.map((a,t)=>s.jsx("option",{value:a.id,children:a.ward_name},t)))]}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.ward&&l.errors.ward?l.errors.ward:null})]})]}),s.jsx("div",{className:"col-span-12 ml-2 my-2",children:s.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),s.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 ",children:[s.jsxs("div",{className:"m-2",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...l.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.applicantName&&l.errors.applicantName?l.errors.applicantName:null})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...l.getFieldProps("mobileNo"),type:"text",maxLength:10,name:"mobileNo",id:"mobileNo",className:e==null?void 0:e.textFiled,onChange:l.handleChange,onBlur:l.handleBlur,onKeyPress:a=>{a.key>="0"&&a.key<="9"||a.preventDefault()}}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.mobileNo&&l.errors.mobileNo?l.errors.mobileNo:null})]}),s.jsxs("div",{className:"m-2",children:[s.jsx("label",{className:e==null?void 0:e.label,htmlFor:"email",children:"Email"}),s.jsx("input",{...l.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.email&&l.errors.email?l.errors.email:null})]})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("textarea",{...l.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.address&&l.errors.address?l.errors.address:null})]})]}),s.jsx("div",{className:"col-span-12 ml-2 my-2",children:s.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Vehicle Details"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 bg-white shadow-md rounded-md py-2",children:[s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"registrationNumber",children:["Registration No.",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...l.getFieldProps("registrationNumber"),maxLength:"10",type:"text",name:"registrationNumber",className:e==null?void 0:e.textFiled,onChange:a=>{const t=a.target.value.toUpperCase();l.setFieldValue("registrationNumber",t)}}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.registrationNumber&&l.errors.registrationNumber?l.errors.registrationNumber:null})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"vehicleComapny",children:["VIN Number",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...l.getFieldProps("vehicleComapny"),maxLength:"17",type:"text",name:"vehicleComapny",className:e==null?void 0:e.textFiled,onChange:a=>{const t=a.target.value.toUpperCase();l.setFieldValue("vehicleComapny",t)}}),s.jsx("p",{className:"text-red-500 text-xs",children:l.touched.vehicleComapny&&l.errors.vehicleComapny?l.errors.vehicleComapny:null})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"fitness",children:["Pollution Certificate",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{onChange:Z,maxLength:"50",type:"file",name:"fitness",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:I})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"taxCopy",children:["Tax Copy",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{onChange:G,maxLength:"50",type:"file",name:"taxCopy",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:I})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"license",children:["Registration Of Certificate",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{onChange:J,maxLength:"50",type:"file",name:"license",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:I})]})]})]}),s.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>E(!F),children:[s.jsx("input",{type:"checkbox",checked:F,name:"",id:"",onChange:a=>E(a.target.checked)}),s.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),s.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:L&&L}),s.jsx("div",{className:"flex justify-center my-5 ",children:k?s.jsx("p",{children:"Form Submitting.."}):s.jsx("button",{type:"submit",disabled:!F,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},Se=()=>{const[o,g]=i.useState(1),[N,m]=i.useState(),{setBreadCrumbData:v}=i.useContext(K);return i.useEffect(()=>{v(["Apply Pet Registration"])},[]),s.jsx(s.Fragment,{children:s.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:s.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[s.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Rig (HYDT) Registration Application"}),s.jsxs("div",{className:"md:p-5 p-2",children:[s.jsxs("p",{className:`${o==1?"block":"hidden"}`,children:["  ",s.jsx(ne,{screen:g,data:m})," "]}),s.jsxs("p",{className:`${o==2?"block":"hidden"}`,children:[" ",s.jsx(ie,{screen:g,data:N})]})]})]})})})};export{Se as default};
