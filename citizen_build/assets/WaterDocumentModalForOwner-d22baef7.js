import{j as e}from"./mui-d8134288.js";import{b as r,r as l}from"./router-a70afc62.js";import{W as t,z as a,M as o,a1 as n,A as d}from"./index-1c8a2e08.js";import{F as s}from"./index.esm-ecae21af.js";const i="/assets/image-506bbc5b.png",c="/assets/no-photo-22d007b7.png",m="/assets/upload-2c8c7f58.gif",p={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function b(i){var c,b,h;const[u,g]=r.useState(!1),[x,y]=l.useState(),[v,N]=l.useState(),[f,w]=l.useState(),[D,F]=l.useState(!1),{api_waterUploadDoc:C,header:S}=t(),{notify:k}=l.useContext(a),j=null==i?void 0:i.payloadData;function U(){g(!1),y(),w()}return l.useEffect(()=>{i.openDocumentModal>0&&g(!0),N()},[i.openDocumentModal]),e.jsx("div",{className:"",children:e.jsx(o,{isOpen:u,onAfterOpen:function(){},onRequestClose:U,style:p,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:e=>{var r,l;e.preventDefault();const t=null==(r=null==f?void 0:f.name)?void 0:r.split(".").pop().toLowerCase();if(!["jpg","jpeg","png","pdf"].includes(t))return void N(" Unsupported File Format. Please upload PDF, JPG, PNG, or JPEG.");if(null==x||""==x||null==f||""==f)return N("Please Select Correct File and Type");let a=new FormData;a.append("applicationId",null==(l=null==i?void 0:i.payloadData)?void 0:l.applicationId),a.append("document",f),a.append("docCode",x),a.append("docCategory",null==j?void 0:j.refDocName),F(!0),d.post(C,a,S).then(e=>{var r,l,t;1==e.data.status?(k(null==(r=null==e?void 0:e.data)?void 0:r.message,"success"),F(!1),U(),i.refetch()):(F(!1),k(null==(l=null==e?void 0:e.data)?void 0:l.message,"error"),N(null==(t=null==e?void 0:e.data)?void 0:t.message))}).catch(e=>{F(!1),k("Something went wrong","error")})},children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md w-full overflow-auto max-sm:w-[20rem]",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:U,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(n,{})]}),e.jsxs("h1",{className:"font-semibold text-gray-700",children:["Upload Document ",null==(c=null==i?void 0:i.payloadData)?void 0:c.docName]})]}),e.jsxs("div",{className:"md:inline-block w-full overflow-auto p-4",children:[e.jsxs("table",{className:" leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:null==(b=null==j?void 0:j.refDocName)?void 0:b.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:e=>y(e.target.selectedOptions[0].text),className:" outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{children:"Select Document"}),null==(h=null==j?void 0:j.docVal)?void 0:h.map(r=>e.jsx("option",{value:r.id,children:r.doc_name}))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:D,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:e=>w(e.target.files[0])}),e.jsxs("label",{className:(D?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800")+" bg-blue-500  shadow-lg flex pl-4 pr-5 py-2 text-white font-medium",htmlFor:"contained-button-file",children:[e.jsx(s,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),f?f.name:"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:D?e.jsx("img",{className:"h-8",src:m,alt:"Uploading"}):e.jsx("button",{disabled:D,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:v&&v})})]})]})})})})}const h={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function u(i){var c,p,b;const[u,g]=l.useState(),[x,y]=r.useState(!1),[v,N]=l.useState();l.useState();const[f,w]=l.useState(),[D,F]=l.useState(!1),{notify:C}=l.useContext(a),{api_waterUploadDoc:S,header:k}=t(),j=null==i?void 0:i.payloadData;function U(){y(!1),N(),w()}return l.useEffect(()=>{i.openDocumentModal>0&&y(!0)},[i.openDocumentModal]),e.jsx("div",{className:"",children:e.jsx(o,{isOpen:x,onAfterOpen:function(){},onRequestClose:U,style:h,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:e=>{var r,l,t,a;if(e.preventDefault(),null==v||""==v||null==f||""==f)return g("Please Select Correct File and Type");const o=null==(r=null==f?void 0:f.name)?void 0:r.split(".").pop().toLowerCase();if(!["jpg","jpeg","png","pdf"].includes(o))return void g("Invalid file extension");let n=new FormData;n.append("applicationId",null==(l=null==i?void 0:i.payloadData)?void 0:l.applicationId),n.append("docCategory",null==(t=null==i?void 0:i.payloadData)?void 0:t.docCategory),n.append("document",f),n.append("docCode",v),n.append("ownerId",null==(a=null==i?void 0:i.payloadData)?void 0:a.ownerId),F(!0),d.post(S,n,k).then(e=>{1==e.data.status?(C("Document Uploaded Successfully","success"),F(!1),U(),i.refetch()):(F(!1),C("Failed to Upload Document","error"),g("Error : Exception : File is too large - must be under 2MB."))}).catch(e=>{F(!1),C("Something went wrong","error"),g("Exception : File is too large - must be under 2MB.")})},children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:U,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(n,{})]}),e.jsx("h1",{className:"font-semibold md:text-xl text-sm text-gray-700",children:"Upload Document"})]}),e.jsxs("div",{className:"md:inline-block min-w-full overflow-hidden hidden p-4",children:[e.jsxs("table",{className:"min-w-full leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Owner Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap capitalize",children:null==(c=null==j?void 0:j.docName)?void 0:c.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:null==j?void 0:j.ownerName})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:e=>N(e.target.selectedOptions[0].text),className:" outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{children:"Select Documet"}),null==(p=null==j?void 0:j.docVal)?void 0:p.map(r=>e.jsx("option",{value:r.id,children:r.doc_name}))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:D,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:e=>w(e.target.files[0])}),e.jsxs("label",{className:` ${D?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(s,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:D?e.jsx("img",{className:"h-8",src:m,alt:"Uploading"}):e.jsx("button",{disabled:D,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:u&&u})})]}),e.jsxs("div",{className:"grid grid-cols-12 md:hidden",children:[e.jsxs("div",{className:"col-span-5 text-sm",children:[e.jsx("p",{children:"Document Name"}),e.jsx("p",{children:"Owner Name"}),e.jsx("p",{children:"Document Type"}),e.jsx("p",{children:"Select File"})]}),e.jsxs("div",{className:"col-span-7",children:[e.jsx("p",{children:null==j?void 0:j.docName}),e.jsx("p",{children:null==j?void 0:j.ownerName}),e.jsx("p",{children:e.jsxs("select",{onChange:e=>N(e.target.selectedOptions[0].text),className:" outline-blue-600 border border-gray-400 h-8 w-32 text-xs",children:[e.jsx("option",{children:"Select Document"}),null==(b=null==j?void 0:j.docVal)?void 0:b.map(r=>e.jsx("option",{value:r.id,children:r.doc_name}))]})}),e.jsx("p",{children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:e=>w(e.target.files[0])}),e.jsxs("label",{className:"bg-blue-500 hover:bg-blue-600 hover:ring-1 hover:ring-blue-800 rounded-sm hover:shadow-2xl shadow-lg cursor-pointer flex pl-2 pr-3 py-1  text-white font-medium",htmlFor:"contained-button-file",children:[e.jsx(s,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})})]}),e.jsxs("div",{className:"text-sm flex m-auto",children:[e.jsx("button",{type:"button",className:"border bg-sky-600 rounded-md text-white px-3 py-1",children:"Close"}),e.jsx("button",{disabled:D,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-3 py-1",children:"Submit"})]})]})]})})})})}export{b as W,u as a,i,c as n};
