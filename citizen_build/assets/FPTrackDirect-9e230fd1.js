import{j as e}from"./mui-105b4636.js";import{r as o,u as X}from"./router-894402c5.js";import{ag as Z,ah as ee,b as T,c as ae,d as $,u as te,R as ne,ai as re,P as se,n as F,x as ie,S as oe}from"./index-3d360d02.js";import{a as I}from"./axios-67d8a945.js";import{a as L}from"./index.esm-0016d7e5.js";import{f as le}from"./index.esm-2c8074cb.js";import"./react-40db4358.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";const de=a=>{const[g,S]=o.useState(10),[k,u]=o.useState(1),[f,H]=o.useState(0),[D,E]=o.useState(0),[N,A]=o.useState(0),[_,b]=o.useState(),[q,t]=o.useState(!1),[s,h]=o.useState(!1),[y,B]=o.useState([]),[c,l]=o.useState(!1),O=()=>{h(!1),l(!0),Object.keys(a==null?void 0:a.requestBody).length!==0&&typeof a.loader=="function"&&a.loader(!0),I.post(a==null?void 0:a.api,{...a==null?void 0:a.requestBody,perPage:g,page:k},T()).then(n=>{var i,d,j,w,x,r,v,m,P,C;((i=n==null?void 0:n.data)==null?void 0:i.status)==!0?(a!=null&&a.getData&&(a==null||a.allData((d=n==null?void 0:n.data)==null?void 0:d.data)),B((w=(j=n==null?void 0:n.data)==null?void 0:j.data)==null?void 0:w.data),A((r=(x=n==null?void 0:n.data)==null?void 0:x.data)==null?void 0:r.total),H((m=(v=n==null?void 0:n.data)==null?void 0:v.data)==null?void 0:m.current_page),E((C=(P=n==null?void 0:n.data)==null?void 0:P.data)==null?void 0:C.last_page),h(!1)):h(!0)}).catch(n=>h(!0)).finally(()=>{l(!1),Object.keys(a==null?void 0:a.requestBody).length!==0&&typeof a.loader=="function"&&a.loader(!1),h(!1)})},M=()=>{u(f+1)},V=()=>{u(f-1)},z=n=>{let i=parseInt(N/n),d=parseInt(N%n);if(d==0){i<f&&u(i),S(n);return}if(d!=0){i+1<f&&u(i+1),S(n);return}},W=()=>{u(1)},Y=()=>{u(D)},G=n=>{u(n)},R=n=>n==null?void 0:n.map((d,j)=>{var x;const w=(x=a==null?void 0:a.columns)==null?void 0:x.map((r,v)=>{var P,C;var m=d[r==null?void 0:r.accessor];if(r!=null&&r.option&&((P=r==null?void 0:r.option)==null?void 0:P.length)>0){const p=(C=r==null?void 0:r.option)==null?void 0:C.find(U=>U.hasOwnProperty(d[r==null?void 0:r.accessor]));p?m=p[d[r==null?void 0:r.accessor]]:m=d[r==null?void 0:r.accessor]}return(r==null?void 0:r.Header.toLowerCase())!="action"&&{[r==null?void 0:r.Header]:r!=null&&r.accessor?m:j+1}});return Object.assign({},...w)}),J=n=>{},K=n=>{l(!0),t(!1),I.post(a==null?void 0:a.api,{...a==null?void 0:a.requestBody,perPage:N},T()).then(i=>{var d,j,w,x,r,v,m;((d=i==null?void 0:i.data)==null?void 0:d.status)==!0&&(n=="csv"&&(b(R((w=(j=i==null?void 0:i.data)==null?void 0:j.data)==null?void 0:w.data)),Q()),n=="excel"&&J(R((r=(x=i==null?void 0:i.data)==null?void 0:x.data)==null?void 0:r.data)),n=="pdf"&&exportToPDF(R((m=(v=i==null?void 0:i.data)==null?void 0:v.data)==null?void 0:m.data))),l(!1)}).catch(i=>{l(!1)})},Q=()=>{t(!0)};return o.useEffect(()=>{(a==null?void 0:a.requestBody)!=null&&(u(1),S(10),O())},[a==null?void 0:a.changeData]),o.useEffect(()=>{l(!0),O()},[k,g]),e.jsxs(e.Fragment,{children:[s&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Sorry! "}),e.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),q&&e.jsx(Z,{data:_}),c,!c&&(y==null?void 0:y.length)>0?e.jsx(e.Fragment,{children:e.jsx(ee,{search:a==null?void 0:a.search,currentPage:f,lastPage:D,goFirst:W,goLast:Y,count1:N,columns:a==null?void 0:a.columns,dataList:y,exportStatus:a==null?void 0:a.exportStatus,perPage:g,perPageC:z,totalCount:N,nextPage:M,prevPage:V,exportDataF:K,exportData:_,gotoPage:n=>G(n)})}):e.jsx(e.Fragment,{children:!c&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})},we=()=>{const{api_searchChallanDirect:a}=se(),g=X(),S=[{Header:"Sl.No.",Cell:({row:t})=>e.jsx("div",{children:(t==null?void 0:t.index)+1})},{Header:"Name",accessor:"full_name",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.mobile)}},{Header:"Application No",accessor:"application_no",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.application_no)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.challan_no)}},{Header:"Challan Date",accessor:"challan_date",Cell:({cell:t})=>{var s;return ie((s=t.row.original)==null?void 0:s.challan_date)},className:"w-[7%]"},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:t})=>{var s;return oe((s=t.row.original)==null?void 0:s.total_amount)}},{Header:"Has Expired",accessor:"hasExpired",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.has_expired)}},{Header:"Action",Cell:({cell:t})=>{var s,h,y,B;return e.jsxs("div",{className:"flex items-center flex-wrap md:flex-nowrap flex-row gap-2 ",children:[e.jsxs("button",{onClick:()=>{var c,l;g(`/challan-show/${(l=(c=t==null?void 0:t.row)==null?void 0:c.original)==null?void 0:l.id}/direct`)},className:`border border-sky-700 text-sky-700 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-sky-700 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(L,{})," Challan"]}),!((h=(s=t==null?void 0:t.row)==null?void 0:s.original)!=null&&h.payment_status)&&e.jsxs("button",{onClick:()=>{var c,l;g(`/fp-pay/${(l=(c=t==null?void 0:t.row)==null?void 0:c.original)==null?void 0:l.id}/direct`)},className:`border border-orange-600 text-orange-500 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-orange-600 \r
                            hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(le,{})," Pay"]}),((B=(y=t==null?void 0:t.row)==null?void 0:y.original)==null?void 0:B.payment_status)&&e.jsxs("button",{onClick:()=>{var c,l;g(`/payment-receipt/${(l=(c=t==null?void 0:t.row)==null?void 0:c.original)==null?void 0:l.transaction_no}/direct`)},className:`border border-green-600 text-green-600 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-green-600 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(L,{})," Receipt"]})]})}}],[k,u]=o.useState({}),[f,H]=o.useState(0),[D,E]=o.useState(!1),[N,A]=o.useState(!1),_=ae({searchBy:$().required("Select filter type"),entry:$().required("Enter the parameter")}),b=te({initialValues:{searchBy:"",entry:""},validationSchema:_,onSubmit:t=>{q(t)}}),q=t=>{A(!0),u({[t==null?void 0:t.searchBy]:t==null?void 0:t.entry}),H(s=>s+1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full  md:pt-10",children:e.jsxs("div",{className:" ",children:[e.jsx("div",{className:"text-3xl font-bold text-center mt-10",children:"Fines & Penalties"}),e.jsxs("div",{className:"w-full flex flex-col gap-5 justify-center items-center p-4 md:p-6 transition-all duration-200",children:[e.jsx("aside",{className:" w-full bg-slate-50 shadow-md h-max",children:e.jsxs("form",{onSubmit:b.handleSubmit,onChange:b.handleChange,className:"bg-white poppins p-4",children:[e.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Search Your Challan"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-x-4 items-center gap-y-2 pb-4 mb-2 border-b",children:[e.jsxs("div",{className:"w-full md:w-[25%]",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...b.getFieldProps("searchBy"),className:`${b.errors.searchBy?"text-red-400 font-semibold border border-solid border-red-400 placeholder-red-300 shadow-red-100 ":"text-gray-700 font-normal border border-solid border-gray-400 placeholder-gray-400 h-10"} cursor-pointer w-full px-3 py-1 text-sm  bg-white bg-clip-padding rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-sm`,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"applicationNo",children:"Application Number"}),e.jsx("option",{value:"mobile",children:"Mobile Number"}),e.jsx("option",{value:"challanNo",children:"Challan Number"})]})]}),e.jsxs("div",{className:"w-full md:w-[25%] ",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Parameter",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...b.getFieldProps("entry"),placeholder:"Enter the parameter",className:"h-10  w-full px-3 py-1 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-gray-400 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-400 shadow-md"})]}),e.jsx("div",{className:"mt-4 w-full  justify-center md:justify-start md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-6",children:e.jsx("div",{className:" ",children:D?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):e.jsxs("button",{type:"submit",className:"py-2 flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-md  text-sm px-5",children:[e.jsx("span",{className:"",children:e.jsx(re,{fontSize:""})}),e.jsx("span",{children:"Search Record"})]})})})]})]})}),e.jsx("aside",{className:"w-full overflow-clip transition-all duration-300 h-full",children:e.jsx(de,{api:a,columns:S,requestBody:k,changeData:f,search:!1,loader:t=>E(t),exportStatus:!1})})]})]})})})};export{we as default};
