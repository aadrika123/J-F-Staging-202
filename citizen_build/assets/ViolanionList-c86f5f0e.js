import{j as e}from"./mui-d8134288.js";import{r as l}from"./router-a70afc62.js";import{c as a,d as o,u as t,A as r,b as i,f as n,bO as s,L as d,P as c,n as m,aI as u}from"./index-1c8a2e08.js";import{a as p}from"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const v=()=>{const{api_violation_list:v,api_ulbList:b}=c(),[x,h]=l.useState(!1),[f,g]=l.useState([]),[w,N]=l.useState([]),[y,j]=l.useState(0),[S,C]=l.useState(null),[I,_]=l.useState(!1),[L,H]=l.useState(!1),V=a({ulbId:o().required("Select Your Ulb")}),k=t({initialValues:{ulbId:""},onSubmit:e=>{C({ulbId:e.ulbId}),j(e=>e+1),_(!0)},validationSchema:V});l.useEffect(()=>{h(!0),p.get(b,{},i()).then(e=>{var l,a;h(!1),1==(null==(l=null==e?void 0:e.data)?void 0:l.status)&&N(null==(a=null==e?void 0:e.data)?void 0:a.data)}).catch(e=>{h(!1)})},[]),l.useEffect(()=>{S&&(H(!0),r.post(v,{userType:"EO",...S},i()).then(e=>{var l,a;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(g(null==(a=null==e?void 0:e.data)?void 0:a.data),H(!1)):g([])}).catch(e=>{g([]),H(!1)}))},[S]);const U=[{Header:"#",Cell:({row:l})=>e.jsx("div",{className:"pr-2",children:(null==l?void 0:l.index)+1})},{Header:"Violation Name",accessor:"violation_name",Cell:({cell:e})=>{var l;return m(null==(l=e.row.original)?void 0:l.violation_name)}},{Header:"Violation Section",accessor:"violation_section",Cell:({cell:e})=>{var l;return m(null==(l=e.row.original)?void 0:l.violation_section)}},{Header:"Department",accessor:"department_name",Cell:({cell:e})=>{var l;return m(null==(l=e.row.original)?void 0:l.department_name)}},{Header:"Penalty Amount",accessor:"penalty_amount",Cell:({cell:e})=>{var l;return u(null==(l=e.row.original)?void 0:l.penalty_amount)}}];return e.jsxs(e.Fragment,{children:[L&&e.jsx(n,{}),e.jsxs("div",{className:"w-full  md:pt-10 bg-white shadow-lg rounded-md",children:[e.jsx("form",{onChange:k.handleChange,onSubmit:k.handleSubmit,className:"mb-4 ml-[30%]",children:e.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[e.jsx("div",{className:"col-span-6 font-semibold",children:"Select Ulb"}),e.jsx("div",{className:"col-span-6",children:e.jsxs("select",{name:"ulbId",id:"ulbId",className:"form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",value:k.values.ulbId,onChange:k.handleChange,children:[e.jsx("option",{value:"",children:"Select Your ULB"}),x?e.jsx("option",{value:"",disabled:!0,children:"Loading..."}):null==w?void 0:w.map(l=>e.jsx("option",{value:null==l?void 0:l.id,children:null==l?void 0:l.ulb_name},null==l?void 0:l.id))]})}),e.jsx("div",{className:"col-span-12 text-center",children:k.touched.ulbId&&k.errors.ulbId&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-red-600 text-xs",children:k.errors.ulbId})})})]}),e.jsx("div",{className:"w-full md:w-[20%] flex justify-start items-center mt-4",children:e.jsxs("button",{type:"submit",className:"flex flex-row items-center border border-green-600 bg-green-600 hover:bg-green-400 text-white hover:text-black shadow-lg rounded-sm text-sm font-semibold px-5 py-1 w-max",children:[" ",e.jsx("span",{className:"mr-2",children:e.jsx(s,{})}),"Search "]})})]})}),I&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"uppercase font-semibold text-gray-700 text-2xl py-2 text-center tracking-[0.5rem]",children:"Violation List"}),e.jsx(d,{columns:U,dataList:f,exportStatus:!0})]})]})]})};export{v as default};
