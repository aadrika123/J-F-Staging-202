import{j as e,I as l}from"./mui-d8134288.js";import{r,u as a}from"./router-a70afc62.js";import{aU as t,M as n,B as o,aV as i,aW as d,U as s,aX as c,A as m,b as u,h,E as v}from"./index-1c8a2e08.js";import"./sweetalert2.esm.all-cfc94e76.js";/* empty css              */import{w as g,t as b,a as p,s as f,b as N,p as y}from"./septic-0b8add4b.js";import{m as x,b as w}from"./marriage-98e794b9.js";import{l as k}from"./lodge-40c4a41c.js";import{a as _}from"./redux-c3344370.js";import{a as A}from"./index.esm-ecae21af.js";import{u as S}from"./useSetLogout-e0888de1.js";import{l as j}from"./localstorage-5eac2623.js";import{P as I}from"./PetRegAPIList-09ec3f04.js";import{a as P}from"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./i18next-524eea2d.js";const C="/assets/property-fbb4f386.png",O="/assets/swm-1b451a03.png";_(e=>({navCloseStatus:e.navCloseStatus}),e=>({NAV_OPEN:l=>e({type:"NAV_OPEN"}),NAV_CLOSE:l=>e({type:"NAV_CLOSE"}),NAV_OPEN_ORIGINAL_STATUS:l=>e({type:"NAV_OPEN_ORIGINAL_STATUS"}),NAV_CLOSE_ORIGINAL_STATUS:l=>e({type:"NAV_CLOSE_ORIGINAL_STATUS"})}))(function(l){return r.useState(!1),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full",children:[e.jsx("div",{className:"cursor-pointer bg-gray-100 p-2 rounded-lg",onClick:()=>{l.navCloseStatus||(l.NAV_CLOSE(),l.NAV_CLOSE_ORIGINAL_STATUS()),l.navCloseStatus&&(l.NAV_OPEN(),l.NAV_OPEN_ORIGINAL_STATUS())},children:e.jsx(t,{color:"black",size:16})}),e.jsx("div",{className:"col-span-10",children:e.jsx("h4",{className:"text-white font-bold text-sm text-xl text-center",children:"JUIDCO"})})]})})});const H={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};n.setAppElement("#root"),_(e=>({RightNavCloseStatus:e.RightNavCloseStatus,isLoggedIn:e.isLoggedIn}),e=>({RIGHT_NAV_OPEN:l=>e({type:"RIGHT_NAV_OPEN"}),LOGOUT:l=>e({type:"LOGOUT"}),RIGHT_NAV_CLOSE:l=>e({type:"RIGHT_NAV_CLOSE"})}))(function(l){const[t,s]=r.useState(!1),[c,m]=r.useState(!0),[u,h]=r.useState(!1);function v(){s(!1)}setTimeout(()=>{m(!1)},1e4);const g=a(),b=()=>{h(!1),j(),l.LOGOUT(),g("/")};return e.jsxs(e.Fragment,{children:[u&&e.jsx(o,{}),e.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full pr-12",children:[e.jsx("div",{className:"cursor-pointer",children:e.jsx("div",{onClick:function(){s(!0)},className:"bg-gray-100 p-2 rounded-lg relative",children:e.jsx(i,{color:"black",size:16})})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>{!l.RightNavCloseStatus&&l.RIGHT_NAV_CLOSE(),l.RightNavCloseStatus&&l.RIGHT_NAV_OPEN()},children:e.jsx("div",{className:"bg-gray-100 p-2 rounded-lg ml-16",children:e.jsx(d,{color:"black",size:16})})})]}),e.jsx(n,{isOpen:t,onRequestClose:v,style:H,contentLabel:"Example Modal",children:e.jsxs("div",{class:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:[e.jsx("button",{onClick:v,type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:e.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsxs("div",{class:"p-6 text-center",children:[e.jsxs("div",{className:"w-full flex h-10",children:[" ",e.jsx("span",{className:"mx-auto",children:e.jsx(A,{size:30})})]}),e.jsx("h3",{class:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure you want to logout ?"}),e.jsx("button",{type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:()=>{S(b)},children:"Yes, I'm sure"})]})]})})]})});const L=()=>{var t,n,i,d,_,A,S,j,H;const L=a(),{post_citizenDashboard:T,api_getProfileDetails:R,api_applicationCount:D,api_allModulePayment:E,generateDashboardOrderId:V,generateDashboardReceipt:z}=v(),{header:G}=I(),{handlePayment:U}=s(),[M,W]=r.useState([]),[F,B]=r.useState(null),[q,$]=r.useState([]),[J,X]=r.useState([]),[Y,K]=r.useState([]),[Q,Z]=r.useState(!1),[ee,le]=r.useState(0),[re,ae]=r.useState(!1),[te,ne]=r.useState([]),[oe,ie]=r.useState([]),[de,se]=r.useState([]),[ce,me]=r.useState([]),[ue,he]=r.useState();r.useEffect(()=>{Z(!0),m.post(T,{},u()).then(e=>{var l,r,a;(null==(l=null==e?void 0:e.data)?void 0:l.status)&&(W(null==(a=null==(r=null==e?void 0:e.data)?void 0:r.data)?void 0:a.property),Z(!1)),Z(!1)}).catch(e=>{}),Z(!1),Z(!0),m.post(R,{},u()).then(e=>{var l,r;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(B(null==(r=null==e?void 0:e.data)?void 0:r.data),Z(!1)):Z(!1)}).catch(e=>{}),Z(!1),Z(!0),m.post(D,{},u()).then(function(e){var l,r;(null==(l=null==e?void 0:e.data)?void 0:l.status)&&($(null==(r=null==e?void 0:e.data)?void 0:r.data),Z(!1)),Z(!1)}).catch(function(e){Z(!1)}),Z(!0),m.post(E,{},u()).then(e=>{var l,r;(null==(l=null==e?void 0:e.data)?void 0:l.status)&&(K(null==(r=null==e?void 0:e.data)?void 0:r.data),Z(!1)),Z(!1)}).catch(e=>{}),Z(!1)},[]),r.useEffect(()=>{localStorage.getItem("token")&&(()=>{const e=localStorage.getItem("token");Z(!0),P.get("https://aadrikainfomedia.com/grievance-api/v1/citizen-dashboard/get-citizen-dashboard",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{var l,r;(null==(l=null==e?void 0:e.data)?void 0:l.success)&&X(null==(r=null==e?void 0:e.data)?void 0:r.data),Z(!1)}).catch(e=>{Z(!1)})})()},[localStorage.getItem("token")]);let ve=[{navigation:"/propertyDashboard",image:C,total:(null==q?void 0:q.propDetails)??0,name:"Property",isHref:!1},{navigation:"/water-dashboard",image:g,total:(null==q?void 0:q.waterDetails)??0,name:"Water Connection(s)",isHref:!1},{navigation:"/trade-dashboard",image:b,total:(null==q?void 0:q.tradeDetails)??0,name:"Trade License(s)",isHref:!1},{navigation:"/swm-dashboard",image:O,total:(null==q?void 0:q.swmDetails)??0,name:"SWM",isHref:!1},{navigation:"/fines",image:"/assets/finesimg-e530d190.jpg",total:(null==q?void 0:q.finesDetails)??0,name:"Fines & Penalties",isHref:!1},{navigation:"/advertisement-dashboard",image:p,total:(null==q?void 0:q.advertisementDetails)??0,name:"Advertisement",isHref:!1},{name:"Lodge & Banquet Registration",navigation:"/marketingDashboard",image:k,total:(null==q?void 0:q.lodgeBanquetDetails)??0,isHref:!1},{navigation:"/marriage-index",image:x,total:(null==q?void 0:q.marriageDetails)??0,name:"Marriage Registration",isHref:!1},{navigation:"/septicTankDashboard",image:f,total:(null==q?void 0:q.septicTankerDetails)??0,name:"Septic Tank",isHref:!1},{navigation:"/waterTankerDashboard",image:N,total:(null==q?void 0:q.waterTankerDetails)??0,name:"Water Tank",isHref:!1},{navigation:"/pet-registration-dashboard",image:y,total:(null==q?void 0:q.petDetails)??0,name:"Pet Registration",isHref:!1},{navigation:"/vehicle-registration-dashboard",image:"/assets/rigmachine-fbcb41f9.jpeg",total:(null==q?void 0:q.rigDetails)??0,name:"Rig Registration",isHref:!1},{navigation:`${window.location.origin}/grievance/citizen-dashboard/home`,image:"/assets/grievancelogo-44b8f316.svg",total:(null==J?void 0:J.totalRegistrations)??0,name:"Grievance",isHref:!0}];const ge=(e,l,r)=>{const a=e.reduce((e,l)=>{var r;const a=null==(r=null==Y?void 0:Y.propDetails)?void 0:r.find(e=>e.id===l);return e+(parseFloat(null==a?void 0:a.total_demand_amount)||0)},0),t=l.reduce((e,l)=>{var r;const a=null==(r=null==Y?void 0:Y.waterDetails)?void 0:r.find(e=>e.id===l);return e+(parseFloat(null==a?void 0:a.total_demand_amount)||0)},0),n=r.reduce((e,l)=>{var r;const a=null==(r=null==Y?void 0:Y.swmDetails)?void 0:r.find(e=>e.id===l);return e+(parseFloat(null==a?void 0:a.total_demand_amount)||0)},0);return Number(a+t+n).toFixed(2)},be=async e=>{Z(!0);let l={applicationId:null==e?void 0:e.applicationId,departmentId:null==e?void 0:e.departmentId,status:"",captured:"1",card_id:"",amount:null==e?void 0:e.amount,payment_method:"upi/netbanking",workflow_id:null==e?void 0:e.workflowId,user_id:null==e?void 0:e.user_id,ulb_id:null==e?void 0:e.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:null==e?void 0:e.orderId,payment_id:null==e?void 0:e.razorpay_payment_id,created_at:""};m.post(z,l,G).then(e=>{he(!1),1==e.data.status?(L("/dashboardPaymentHistory"),Z(!1)):(notify(e.data.message,"error"),Z(!1))}).catch(e=>{he(!1),notify(e.message,"error"),Z(!1)})};return e.jsxs(e.Fragment,{children:[Q&&e.jsx(o,{}),e.jsxs("div",{className:"grid grid-cols-12 h-screen bg-white mx-4 md:mx-0 mb-4",children:[e.jsxs("div",{className:" md:ml-11 mt-12 col-span-12 md:col-span-8 order-last md:order-first",children:[e.jsx("h1",{className:"text-2xl font-semibold max-sm:text-center",children:"All E-Governance Services"}),e.jsxs("div",{className:"flex flex-wrap gap-x-[4rem] gap-y-3 mt-10 bg-white  max-sm:justify-center max-sm:mb-20",children:[void 0,Array.isArray(ve)&&(null==ve?void 0:ve.map(l=>e.jsx("div",{onClick:()=>{l.isHref?window.location.href=l.navigation:L(null==l?void 0:l.navigation)},className:"md:w-40 h-26 bg-white rounded-lg shadow-sm max-sm:w-full cursor-pointer",children:e.jsx("div",{className:"md:w-52 max-sm:w-full h-28 bg-white rounded-lg shadow-xl pl-2",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-3 ",children:[e.jsx("div",{className:"w-10 h-10 rounded-full m-2 flex justify-center items-center",children:e.jsx("img",{src:l.image,alt:"",className:"w-8 h-8 rounded-full"})}),e.jsx("div",{className:"w-10 h-10 rounded-full mt-4 font-semibold flex justify-center items-center",children:(null==l?void 0:l.total)??0})]}),e.jsx("div",{className:"col-span-9 ml-4 ",children:e.jsx("h1",{className:"font-semibold text-sm mt-1 cursor-pointer",children:null==l?void 0:l.name})})]})})},l.id))),e.jsx("div",{className:"w-52 h-28shadow-xl pl-2",children:e.jsx("div",{className:"flex justify-center items-center w-full h-full ",children:e.jsxs("span",{className:"hover:bg-gray-200 p-6 rounded-full cursor-pointer",onClick:()=>L("/propertyDashboard"),children:[" ",e.jsx(c,{className:"text-3xl"})]})})})]})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4 order-1 md:order-last pr-10 pt-5 ml-[2rem]",children:[e.jsx("div",{className:"flex justify-center items-center w-full mt-10 font-semibold text-xl",children:e.jsxs("div",{className:"w-full bg-white shadow-lg rounded-md px-4 py-2",children:[e.jsxs("div",{className:"bg-blue-500 px-4 py-2 rounded-lg text-white flex items-center justify-center space-x-2",children:[e.jsx("img",{src:w,alt:"Bell Icon",className:"w-6 h-6"}),e.jsx("h1",{className:"text-lg font-semibold",children:"Pending Demands"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[e.jsx("img",{src:C,alt:"Property Icon",className:"w-6 h-6 mr-2"}),"Property"]}),((null==(t=null==Y?void 0:Y.propDetails)?void 0:t.length)>0||(null==(n=null==Y?void 0:Y.waterDetails)?void 0:n.length)>0||(null==(i=null==Y?void 0:Y.swmDetails)?void 0:i.length)>0)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"selectAll",className:"font-semibold mr-2 text-lg",children:"Select All"}),e.jsx("input",{type:"checkbox",id:"selectAll",checked:re,onChange:()=>{var e,l,r;const a=!re;if(ae(a),a){const a=(null==(e=null==Y?void 0:Y.propDetails)?void 0:e.map(e=>e.id))||[],t=(null==(l=null==Y?void 0:Y.waterDetails)?void 0:l.map(e=>e.id))||[],n=(null==(r=null==Y?void 0:Y.swmDetails)?void 0:r.map(e=>e.id))||[];ne(a),ie(t),me(n);const o=ge(a,t,n);le(o)}else ne([]),ie([]),me([]),le("0.00")},className:"w-6 h-4"})]})]}),e.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[e.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-500 font-semibold ",children:"Holding No."}),e.jsx("th",{className:"border border-gray-500 font-semibold",children:"Payable Amount"}),e.jsx("th",{className:"border border-gray-500 font-semibold",children:"Select"})]})}),e.jsx("tbody",{className:"text-sm font-normal",children:(null==(d=null==Y?void 0:Y.propDetails)?void 0:d.length)>0?null==(_=null==Y?void 0:Y.propDetails)?void 0:_.map(l=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-500 ",children:null==l?void 0:l.holding_no}),e.jsxs("td",{className:"border border-gray-500 ",children:["₹",null==l?void 0:l.total_demand_amount]}),e.jsx("td",{className:"border border-gray-500 ",children:e.jsx("input",{type:"checkbox",checked:te.includes(l.id),onChange:()=>{return e=l.id,void ne(l=>{const r=l.includes(e)?l.filter(l=>l!==e):[...l,e],a=ge(r,oe,ce);return le(a),r});var e}})})]},l.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[e.jsx(l,{})," No Pending Dues"]})})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[e.jsx("img",{src:g,alt:"Water Icon",className:"w-6 h-6 mr-2"}),"Water"]}),e.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[e.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-500 font-semibold",children:"Consumer No."}),e.jsx("th",{className:"border border-gray-500 font-semibold",children:"Payable Amount"}),e.jsx("th",{className:"border border-gray-500 font-semibold",children:"Select"})]})}),e.jsx("tbody",{className:"text-sm font-normal",children:(null==(A=null==Y?void 0:Y.waterDetails)?void 0:A.length)>0?e.jsx(e.Fragment,{children:null==(S=null==Y?void 0:Y.waterDetails)?void 0:S.map(l=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-500 ",children:null==l?void 0:l.consumer_no}),e.jsxs("td",{className:"border border-gray-500 ",children:["₹",null==l?void 0:l.total_demand_amount]}),e.jsx("td",{className:"border border-gray-500 ",children:e.jsx("input",{type:"checkbox",checked:oe.includes(l.id)||de.includes(l),onChange:()=>{return e=l.id,void ie(l=>{const r=l.includes(e)?l.filter(l=>l!==e):[...l,e],a=ge(te,r,ce);return le(a),r});var e}})})]},l.id))}):e.jsx("tr",{children:e.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[e.jsx(l,{})," No Pending Dues"]})})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[e.jsx("img",{src:O,alt:"SWM Icon",className:"w-6 h-6 mr-2"}),"SWM"]}),e.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center ",children:[e.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-500 font-semibold",children:"Consumer No."}),e.jsx("th",{className:"border border-gray-500 font-semibold",children:"Payable Amount"}),e.jsx("th",{className:"border border-gray-500 font-semibold",children:"Select"})]})}),e.jsx("tbody",{className:"text-sm font-normal",children:(null==(j=null==Y?void 0:Y.swmDetails)?void 0:j.length)>0?e.jsx(e.Fragment,{children:null==(H=null==Y?void 0:Y.swmDetails)?void 0:H.map(l=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-500 ",children:l.consumer_no}),e.jsxs("td",{className:"border border-gray-500 ",children:["₹",l.total_demand_amount]}),e.jsx("td",{className:"border border-gray-500 ",children:e.jsx("input",{type:"checkbox",checked:ce.includes(l.id),onChange:()=>{return e=l.id,void me(l=>{const r=l.includes(e)?l.filter(l=>l!==e):[...l,e],a=ge(te,oe,r);return le(a),r});var e}})})]},l.id))}):e.jsx("tr",{children:e.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[e.jsx(l,{})," No Pending Dues"]})})})]})]}),(te.length>0||oe.length>0||ce.length>0)&&e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsxs("p",{className:"font-semibold text-lg flex-1",children:["Total Amount : ₹",ee]}),e.jsx("button",{onClick:()=>{var e,l,r;null==(e=(null==Y?void 0:Y.propDetails)||[])||e.filter(e=>te.includes(e.id)),((e,l=[])=>{Z(!0);const r=e.map(e=>({consumerId:e.id,amount:e.total_demand_amount,paymentMode:"Online",demandFrom:e.demand_from,demandUpto:e.demand_upto,remarks:"Ok"})),a=l.map(e=>({consumerId:e.id,amount:e.total_demand_amount,paymentMode:"Online",demandFrom:e.demand_from,demandUpto:e.demand_upto,remarks:"Ok"}));m.post(V,{propId:te,consumerDetails:r,swmDetails:a},u()).then(function(e){var l,r,a,t,n,o,i,d,s,c,m,u,v,g,b;(null==(l=null==e?void 0:e.data)?void 0:l.status)?(Z(!1),window.ReactNativeWebView?h({generatedOrder:null==(r=null==e?void 0:e.data)?void 0:r.data,payload:{applicationId:null==(t=null==(a=null==e?void 0:e.data)?void 0:a.data)?void 0:t.applicationId,departmentId:null==(o=null==(n=null==e?void 0:e.data)?void 0:n.data)?void 0:o.departmentId,status:"",captured:"1",card_id:"",amount:null==(d=null==(i=null==e?void 0:e.data)?void 0:i.data)?void 0:d.amount,payment_method:"upi/netbanking",workflow_id:null==(c=null==(s=null==e?void 0:e.data)?void 0:s.data)?void 0:c.workflowId,user_id:null==(u=null==(m=null==e?void 0:e.data)?void 0:m.data)?void 0:u.userId,ulb_id:null==(g=null==(v=null==e?void 0:e.data)?void 0:v.data)?void 0:g.ulbId,created_at:""},api:z,returnUrl:"/citizen/dashboardPaymentHistory",isParam:!0}):(U(null==(b=null==e?void 0:e.data)?void 0:b.data,be),Z(!1))):Z(!1)}).catch(function(e){Z(!1)})})(null==(l=(null==Y?void 0:Y.waterDetails)||[])?void 0:l.filter(e=>oe.includes(e.id)),null==(r=(null==Y?void 0:Y.swmDetails)||[])?void 0:r.filter(e=>ce.includes(e.id)))},className:"bg-green-500 text-white px-4 py-1 rounded-lg shadow-sm border-2 border-green-600 hover:bg-green-600 ",children:"Pay Now"})]})]})}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("button",{onClick:()=>L("/dashboardPaymentHistory"),className:"bg-blue-500 px-3 py-1.5 rounded-md text-white text-sm font-medium shadow-md hover:bg-blue-600 active:bg-blue-700 transition duration-200",children:"Payment History"})})]})]})]})};export{L as default};
