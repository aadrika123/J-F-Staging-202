class e{static changeHeightWidth(e,t,a,r,i,n){return a>r&&(e=Math.round(e*r/a),a=r),e>t&&(a=Math.round(a*t/e),e=t),i&&a<i&&(e=Math.round(e*i/a),a=i),n&&e<n&&(a=Math.round(a*n/e),e=n),{height:e,width:a}}static resizeAndRotateImage(e,t,a,r,i,n="jpeg",o=100,s=0){var l=o/100,c=document.createElement("canvas"),d=e.width,b=e.height,g=this.changeHeightWidth(b,a,d,t,r,i);!s||90!==s&&270!==s?(c.width=g.width,c.height=g.height):(c.width=g.height,c.height=g.width),d=g.width,b=g.height;var h=c.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,d,b),h.imageSmoothingEnabled&&h.imageSmoothingQuality&&(h.imageSmoothingQuality="high"),s&&(h.rotate(s*Math.PI/180),90===s?h.translate(0,-c.width):180===s?h.translate(-c.width,-c.height):270===s?h.translate(-c.height,0):0!==s&&360!==s||h.translate(0,0)),h.drawImage(e,0,0,d,b),c.toDataURL(`image/${n}`,l)}static b64toByteArrays(e,t){for(var a=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],i=0;i<a.length;i+=512){for(var n=a.slice(i,i+512),o=new Array(n.length),s=0;s<n.length;s++)o[s]=n.charCodeAt(s);var l=new Uint8Array(o);r.push(l)}return r}static b64toBlob(e,t){const a=this.b64toByteArrays(e,t);return new Blob(a,{type:t,lastModified:new Date})}static b64toFile(e,t,a){const r=this.b64toByteArrays(e,a);return new File(r,t,{type:a,lastModified:new Date})}static createResizedImage(t,a,r,i,n,o,s,l="base64",c=null,d=null){const b=new FileReader;if(!t)throw Error("File Not Found!");if(t.type&&!t.type.includes("image"))throw Error("File Is NOT Image!");b.readAsDataURL(t),b.onload=()=>{var g=new Image;g.src=b.result,g.onload=function(){var b=e.resizeAndRotateImage(g,a,r,c,d,i,n,o);const h=`image/${i}`;switch(l){case"blob":const a=e.b64toBlob(b,h);s(a);break;case"base64":default:s(b);break;case"file":let r=t.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(i.toString());const n=e.b64toFile(b,r,h);s(n)}}},b.onerror=e=>{throw Error(e)}}}const t=async t=>new Promise(a=>{e.createResizedImage(t,250,250,"JPEG",60,0,e=>{a(e)},"base64",void 0,void 0)}).then(e=>(e=>{var t,a,r;const i=null==e?void 0:e.split(","),n=(null==(t=i[0])?void 0:t.indexOf("base64"))>=0?atob(i[1]):decodeURI(i[1]),o=null==(r=null==(a=i[0])?void 0:a.split(":")[1])?void 0:r.split(";")[0],s=new Uint8Array(null==n?void 0:n.length);for(let l=0;l<(null==n?void 0:n.length);l++)s[l]=null==n?void 0:n.charCodeAt(l);return new Blob([s],{type:o})})(e));export{t as r};
