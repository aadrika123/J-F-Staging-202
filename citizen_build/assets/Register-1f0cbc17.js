import{j as e}from"./mui-d8134288.js";import{r as l,u as t}from"./router-a70afc62.js";import{z as s,c as a,d as r,aa as o,u as i,f as n,D as d,k as m,aL as c,r as u,a$ as b,E as p}from"./index-1c8a2e08.js";import{a as x}from"./axios-0f103e9d.js";import f from"./MobileNoCard-b107310f.js";import h from"./OtpCard-69be3233.js";import{G as g}from"./index.esm-aab86b89.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";function v(){const[v,w]=l.useState(),[N,y]=l.useState(null);l.useState(null),l.useState(null),l.useState(null);const[P,j]=l.useState("");l.useState(""),l.useState(""),l.useState("");const[k,C]=l.useState(!1),[E,_]=l.useState(!0),[M,O]=l.useState(!1),[S,z]=l.useState(null);l.useState(!1),l.useState(!1),l.useState(!1),l.useState(!1);const[D,R]=l.useState(!1),[T,F]=l.useState(null),[A,B]=l.useState(null),G=t(),{notify:L}=l.useContext(s),{api_citizenRegister:$,api_sendMobileOtp:I}=p(),Y=a().shape({name:r().required("Enter Your Name").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed"),mobile:r().required("Enter mobile no.").min(10,"Please Enter 10 Digit !").max(10,"Please Enter 10 Digit !"),email:r().min(8,"Minimum eight character"),password:r().min(6,"Minimum six character !").max(50,"Too Long!").required("Password required").matches(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password Must Contains (Capital, Smail, Number, Special) eg - Abc123#."),confirmPassword:r().label("confirm password").required().oneOf([o("password"),null],"Passwords must match"),dob:r().required("Select DOB"),gender:r().required("Select Gender")}),Z=i({initialValues:{name:"",mobile:"",email:"",password:"",confirmPassword:"",dob:"",gender:"",photo:""},onSubmit:(e,{setSubmitting:l})=>{l(!1),q(e)},validationSchema:Y}),q=e=>{C(!0);let l=new FormData;l.append("name",e.name),l.append("mobile",e.mobile),l.append("email",e.email),l.append("password",e.password),l.append("dob",e.dob),l.append("gender",e.gender),P&&l.append("photo",P),x.post($,l).then(function(e){var l,t,s;!0===(null==(l=null==e?void 0:e.data)?void 0:l.status)?(G("/login"),L("You have Registered successfully !","success")):(L(m(null==(t=null==e?void 0:e.data)?void 0:t.message),"error"),W(!0,m(null==(s=null==e?void 0:e.data)?void 0:s.message))),C(!1)}).catch(e=>{C(!1),W(!0,"Oops! Please try again later"),L("Oops! Please try again later","error")})};l.useEffect(()=>{Z.setFieldValue("mobile",S)},[S]);const U=new Date,V=new Date(U.getFullYear(),U.getMonth(),U.getDate()),W=(e,l)=>{F(l),R(e)};return l.useRef(null),E?e.jsx(f,{closeMobileModal:()=>{G("/login")},headTitle:"Citizen Registration",title:"Enter mobile to register account",desc:"Enter your mobile no, which is attached to a holding or will be attached.",cardFor:"Register",setverifedMobileNo:z,setmobileCardStatus:_,setotpCardStatus:O}):M?e.jsx(h,{closeOtpModal:()=>{G("/login")},bottomNaviation:!0,headTitle:"Citizen Registration",reSendOtp:()=>{C(!0),x.post(I,{mobileNo:S}).then(e=>{var l;(null==(l=null==e?void 0:e.data)?void 0:l.status)?L("OTP has been re-send to your mobile no.","success"):L("Problem in sending OTP","error"),C(!1)}).catch(e=>{L("Something went wrong...","error"),C(!1)})},verifedMobileNo:S,callback:()=>{L("Mobile no. has been verified successfully !","success"),O(!1)},setotpCardStatus:O}):e.jsxs(e.Fragment,{children:[k&&e.jsx(n,{}),D&&e.jsx(d,{activateBottomErrorCard:()=>{W(!1,"")},errorTitle:T}),e.jsxs("form",{className:"h-full w-full flex justify-between overflow-auto",onSubmit:e=>{e.preventDefault(),""===Z.values.name?(B("id_name"),W(!0,"Please enter your name")):""===Z.values.email?(B("id_email"),W(!0,"Please enter your email")):""===Z.values.password?(B("id_password"),W(!0,"Please enter password")):""===Z.values.confirmPassword?(B("id_confirmPassword"),W(!0,"Please confirm password")):""===Z.values.dob?(B("id_dob"),W(!0,"Please enter dob")):""===Z.values.gender&&(B("id_gender"),W(!0,"Please select gender")),Z.handleSubmit()},onChange:e=>{let l=e.target.name,t=e.target.value;"name"===l&&Z.setFieldValue("name",c(t,Z.values.name,100)),"mobile"===l&&Z.setFieldValue("mobile",u(t,Z.values.mobile,10)),"email"===l&&Z.setFieldValue("email",b(t,Z.values.email,50)),"password"===l&&Z.setFieldValue("password",b(t,Z.values.password,50)),"confirmPassword"===l&&Z.setFieldValue("confirmPassword",b(t,Z.values.confirmPassword,50)),"aadharDoc"!==l&&"armedForceDoc"!==l&&"speciallyAbledDoc"!==l&&"photo"!==l||(e=>{if("photo"===e.target.name){let l=e.target.files[0];y(URL.createObjectURL(e.target.files[0])),l&&j(e.target.files[0]),null==l&&j(null)}})(e)},children:[e.jsx("div",{className:"hidden w-[45%] bg-slate-100 md:py-10 md:px-10 md:flex justify-center items-center",children:e.jsx("img",{src:"/assets/register-08bf8665.svg",alt:"",srcset:"",className:"w-[60%] hue-rotate-[-38deg]"})}),e.jsx("div",{className:"w-full md:w-[55%] flex justify-center items-center",children:e.jsxs("div",{className:"md:py-10 px-4 md:px-10",children:[e.jsx("div",{className:"block text-center mb-0 md:mb-6 ",children:e.jsx("h1",{className:"font-bold text-xl text-gray-800 mt-2 md:mt-0",children:e.jsx("span",{className:" border-b-2 border-b-[#6c8351]",children:"Citizen Registration"})})}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{id:"id_name",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 md:relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-account-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"text",className:"w-full -ml-10 text-sm pl-2 h-10 pr-3 py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...Z.getFieldProps("name"),placeholder:"Enter your name"}),Z.errors.name&&Z.touched.name?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:Z.errors.name}):null]})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Mobile No.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex relative",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-account-outline text-gray-400 text-lg h-10"})}),e.jsx("input",{disabled:!0,type:"text",maxlength:"10",className:"w-full -ml-10 text-sm pl-2  pr-3 py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...Z.getFieldProps("mobile"),placeholder:"Enter your mobile no."}),e.jsx("span",{className:"absolute right-0 top-2",children:e.jsx(g,{className:"inline text-green-500 text-xl"})}),Z.errors.mobile&&Z.touched.mobile?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:Z.errors.mobile}):null]})]}),e.jsxs("div",{id:"id_email",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsx("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:"Email"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-email-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"text",className:"w-full -ml-10 text-sm pl-2 h-10  py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...Z.getFieldProps("email"),placeholder:"Enter your email"}),Z.errors.email&&Z.touched.email?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:Z.errors.email}):null]})]}),e.jsxs("div",{id:"id_password",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-6 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Password",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-lock-outline text-gray-400 text-lg"})}),e.jsx("input",{type:"password",className:"w-full -ml-10 text-sm pl-2 h-10  py-2 rounded-lg  outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...Z.getFieldProps("password"),placeholder:"Enter your password"}),Z.errors.password&&Z.touched.password?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:Z.errors.password}):null]})]}),e.jsxs("div",{id:"id_confirmPassword",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{for:"",className:"font-semibold px-1 text-gray-800 mb-1",children:["Confirm Password",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-10 z-10 pl-1 h-10 text-center pointer-events-none flex items-center justify-center",children:e.jsx("i",{className:"mdi mdi-lock-outline text-gray-400 text-lg shadow-sm "})}),e.jsx("input",{type:"password",className:"w-full -ml-10 text-sm pl-2  py-2 rounded-lg outline-none focus:border-b focus:border-b-indigo-500 shadow-md",...Z.getFieldProps("confirmPassword"),placeholder:"Renter your password"}),Z.errors.confirmPassword&&Z.touched.confirmPassword?e.jsx("div",{className:"text-red-600 absolute text-xs -bottom-4",children:Z.errors.confirmPassword}):null]})]}),e.jsxs("div",{id:"id_dob",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{className:"inline-block font-semibold mb-2",children:["DOB ",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{max:V.toISOString().split("T")[0],...Z.getFieldProps("dob"),type:"date",className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer"}),Z.errors.dob&&Z.touched.dob?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:Z.errors.dob}):null]}),e.jsxs("div",{id:"id_gender",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsxs("label",{className:"inline-block font-semibold mb-2",children:["Gender ",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...Z.getFieldProps("gender"),className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer",children:[e.jsx("option",{children:"select"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),Z.errors.gender&&Z.touched.gender?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:Z.errors.gender}):null]}),e.jsxs("div",{id:"id_photo",className:"col-span-12 md:col-span-6 w-full md:px-4 mb-3 relative",children:[e.jsx("label",{className:"inline-block font-semibold mb-2",children:"Photo"}),e.jsx("input",{...Z.getFieldProps("photo"),accept:".pdf,.jpg,.jpeg,.png",type:"file",className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600 cursor-pointer"}),Z.errors.photo&&Z.touched.photo?e.jsx("div",{className:"text-red-600 text-xs absolute -bottom-4",children:Z.errors.photo}):null]}),e.jsxs("div",{className:"col-span-12 ",children:[e.jsx("p",{className:"text-center text-red-600 font-semibold",children:v&&v}),e.jsx("div",{className:"w-full px-3 mb-5 text-center",children:e.jsx("button",{type:"submit",className:"mx-auto bg-[#99B37C] hover:scale-105 hover:bg-[#6c8351] focus:bg-[#6c8351] text-white rounded-lg px-12 py-3 font-semibold mt-5",children:"REGISTER NOW"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{onClick:()=>G("/login"),className:"hover:underline text-gray-600 font-semibold hover:bg-white px-3 py-1 cursor-pointer float-right",children:"Login"})})]})]})]})})]})]})}export{v as default};
