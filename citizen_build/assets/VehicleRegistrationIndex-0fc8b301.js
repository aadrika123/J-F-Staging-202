import{j as s}from"./mui-8e804a04.js";import{u as Y,r as i}from"./router-87042356.js";import{l as I,c as X,d as c,u as Z,A as N,B as G,i as J}from"./index-60dc323b.js";import"./PetAccordionPage-26a80458.js";import{W as Q}from"./WaterApiList-8dd4ef11.js";import{P as ee}from"./PetRegAPIList-51419674.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";const se=n=>{var p,d;const m=Y();return console.log("3",(p=n==null?void 0:n.data)==null?void 0:p.applicationNo),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-center",children:[" ","Your Application has submitted successfully"]}),s.jsxs("p",{className:"text-center",children:["Application No."," ",s.jsxs("span",{className:"font-semibold text-lg",children:[" ",(d=n==null?void 0:n.data)==null?void 0:d.applicationNo]})]}),s.jsx("div",{className:"flex justify-center gap-x-5",children:s.jsx("button",{onClick:()=>m("/vehicle-registration-dashboard"),className:"border border-indigo-600 px-2 py-1 rounded shadow hover:bg-indigo-500 hover:text-white",children:"Dashboard"})})]})},e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},ae=n=>{var q;const[m,p]=i.useState(),[d,b]=i.useState(),[x,L]=i.useState(),[j,S]=i.useState(!1),[P,f]=i.useState(!1),[y,v]=i.useState(!1),{notify:C}=i.useContext(I);i.useState(),i.useState();const[k,F]=i.useState(!1),[E,K]=i.useState(),[D,R]=i.useState(),[V,_]=i.useState(),{api_ulbList:B,header:w,api_wardList:W}=Q(),{api_RigRegistrationApplyForm:M,api_PetRegistrationMaster:U,api_ListOfSafHolding:re,api_getUserDetailsByHoldingSaf:le,header1:T}=ee(),$=X({ulb:c().required("Kindly enter a value."),address:c().required("Kindly enter a value."),applicantName:c().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),ownerCategory:c().required("Kindly enter a value."),ward:c().required("Kindly enter a value."),mobileNo:c().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:c().email().required("Kindly enter a value."),vehicleComapny:c().required("Kindly enter a value."),fitness:c().required("Kindly enter a value."),taxCopy:c().required("Kindly enter a value."),license:c().required("Kindly enter a value."),registrationNumber:c().required("Kindly enter a value.")}),H={ulb:"",ulbId:"",applicantName:"",ownerCategory:"",ward:"",mobileNo:"",email:"",address:"",vehicleComapny:"",fitness:"",taxCopy:"",license:"",registrationNumber:""};let o=new FormData;const r=Z({initialValues:H,enableReinitialize:!0,onSubmit:(a,t)=>{console.log("clicked"),console.log(a,"formSubmitValues==>"),O(a)},validationSchema:$}),z=a=>{let t=a.target.name,l=a.target.value;v(!1),t=="driverName"&&r.setFieldValue("driverName",J(l,r.values.driverName,20)),t=="fitness"&&K(a.target.files[0]),t=="taxCopy"&&R(a.target.files[0]),t=="license"&&_(a.target.files[0])},O=a=>{f(!0);const t={ulbId:a==null?void 0:a.ulb,applicantName:a==null?void 0:a.applicantName,ownerCategory:a==null?void 0:a.ownerCategory,ward:a==null?void 0:a.ward,mobileNo:a==null?void 0:a.mobileNo,email:a==null?void 0:a.email,address:a==null?void 0:a.address,vehicleComapny:a==null?void 0:a.vehicleComapny,vehicleFrom:a==null?void 0:a.vehicleFrom,registrationNumber:a==null?void 0:a.registrationNumber};console.log(t,"payload====>>");for(let l in t)o.append(l,t[l]);o.append("documents[0][image]",E),o.append("documents[0][docCode]","FITNESS"),o.append("documents[0][ownerDtlId]",""),o.append("documents[1][image]",D),o.append("documents[1][docCode]","TAX"),o.append("documents[1][ownerDtlId]",""),o.append("documents[2][image]",V),o.append("documents[2][docCode]","LICENSE"),o.append("documents[2][ownerDtlId]",""),console.log("complete payload",o),N.post(M,o,w).then(l=>{var u,h,g;f(!1),l.data.status?(console.log("Form applied successfully"),n.data(l.data.data),console.log("1",l.data.data),n.screen(2),C((u=l==null?void 0:l.data)==null?void 0:u.message,"success")):(C((h=l==null?void 0:l.data)==null?void 0:h.message,"error"),v((g=l==null?void 0:l.data)==null?void 0:g.message),console.log("Failed to apply pet registration"))}).catch(l=>{var u,h,g,A;v((h=(u=l==null?void 0:l.response)==null?void 0:u.data)==null?void 0:h.error),C("Something Went wrong","error"),f(!1),console.log("Error while applying for pet registration..",(A=(g=l==null?void 0:l.response)==null?void 0:g.data)==null?void 0:A.error)})};return i.useEffect(()=>{N.post(U,{},T).then(a=>{a.data.status?(L(a.data.data),console.log("vehicle master data",a.data)):console.log("Error fetching vehicle master list")}).catch(a=>{console.log("Error while getting vehicle master list")})},[]),i.useEffect(()=>{N.get(B,w).then(a=>{a.data.status?(p(a.data.data),console.log("ULB List",a.data)):console.log("Error fetching ulb list")}).catch(a=>{console.log("Error while getting ulb list")})},[]),i.useEffect(()=>{F(!0),N.post(W,{ulbId:r.values.ulb},w).then(a=>{F(!1),a.data.status?(b(a.data.data),console.log("Ward List",a.data)):console.log("Error fetching Ward list")}).catch(a=>{F(!1),console.log("Error while getting Ward list")})},[r.values.ulb]),console.log("formik.values.owner_type",r.values.ownerCategory),s.jsxs(s.Fragment,{children:[k&&s.jsx(G,{}),s.jsxs("form",{onSubmit:r.handleSubmit,onChange:z,className:"mb-20",children:[s.jsxs("div",{className:"overflow-y-auto ",children:[s.jsx("div",{className:"col-span-12 ml-2 my-2",children:s.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 bg-white shadow-md rounded-md py-2",children:[s.jsxs("div",{className:"m-2",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsxs("select",{...r.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[s.jsx("option",{value:"",children:"Select"}),m==null?void 0:m.map((a,t)=>s.jsx("option",{value:a.id,children:a.ulb_name},t))]}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.ulb&&r.errors.ulb?r.errors.ulb:null})]}),s.jsxs("div",{className:"m-2",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ownerCategory",children:["Category of Application",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsxs("select",{...r.getFieldProps("ownerCategory"),name:"ownerCategory",className:e==null?void 0:e.textFiled,children:[s.jsx("option",{value:"",children:"Select"}),(x==null?void 0:x.ownertype)&&((q=x==null?void 0:x.ownertype)==null?void 0:q.map((a,t)=>t===0?s.jsx("option",{value:a.id,children:a.owner_type},t):t===1?s.jsx("option",{value:a.id,children:a.owner_type},t):null))]}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.ownerCategory&&r.errors.ownerCategory?r.errors.ownerCategory:null})]}),s.jsxs("div",{className:"m-2",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsxs("select",{...r.getFieldProps("ward"),name:"ward",className:e==null?void 0:e.textFiled,children:[s.jsx("option",{value:"",children:"Select"}),(d==null?void 0:d.length)>0&&(d==null?void 0:d.map((a,t)=>s.jsx("option",{value:a.id,children:a.ward_name},t)))]}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.ward&&r.errors.ward?r.errors.ward:null})]})]}),s.jsx("div",{className:"col-span-12 ml-2 my-2",children:s.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),s.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 ",children:[s.jsxs("div",{className:"m-2",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...r.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.applicantName&&r.errors.applicantName?r.errors.applicantName:null})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...r.getFieldProps("mobileNo"),type:"text",maxLength:10,name:"mobileNo",id:"mobileNo",className:e==null?void 0:e.textFiled,onChange:r.handleChange,onBlur:r.handleBlur,onKeyPress:a=>{a.key>="0"&&a.key<="9"||a.preventDefault()}}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.mobileNo&&r.errors.mobileNo?r.errors.mobileNo:null})]}),s.jsxs("div",{className:"m-2",children:[s.jsx("label",{className:e==null?void 0:e.label,htmlFor:"email",children:"Email"}),s.jsx("input",{...r.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.email&&r.errors.email?r.errors.email:null})]})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("textarea",{...r.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.address&&r.errors.address?r.errors.address:null})]})]}),s.jsx("div",{className:"col-span-12 ml-2 my-2",children:s.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Vehicle Details"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 bg-white shadow-md rounded-md py-2",children:[s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"registrationNumber",children:["Registration No.",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...r.getFieldProps("registrationNumber"),maxLength:"10",type:"text",name:"registrationNumber",className:e==null?void 0:e.textFiled,onChange:a=>{const t=a.target.value.toUpperCase();r.setFieldValue("registrationNumber",t)}}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.registrationNumber&&r.errors.registrationNumber?r.errors.registrationNumber:null})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"vehicleComapny",children:["VIN Number",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...r.getFieldProps("vehicleComapny"),maxLength:"17",type:"text",name:"vehicleComapny",className:e==null?void 0:e.textFiled,onChange:a=>{const t=a.target.value.toUpperCase();r.setFieldValue("vehicleComapny",t)}}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.vehicleComapny&&r.errors.vehicleComapny?r.errors.vehicleComapny:null})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"fitness",children:["Pollution Certificate",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...r.getFieldProps("fitness"),maxLength:"50",type:"file",name:"fitness",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.fitness&&r.errors.fitness?r.errors.fitness:null})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"taxCopy",children:["Tax Copy",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...r.getFieldProps("taxCopy"),maxLength:"50",type:"file",name:"taxCopy",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.taxCopy&&r.errors.taxCopy?r.errors.taxCopy:null})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"license",children:["License",s.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),s.jsx("input",{...r.getFieldProps("license"),maxLength:"50",type:"file",name:"license",className:e==null?void 0:e.textFiled}),s.jsx("p",{className:"text-red-500 text-xs",children:r.touched.license&&r.errors.license?r.errors.license:null})]})]})]}),s.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>S(!j),children:[s.jsx("input",{type:"checkbox",checked:j,name:"",id:"",onChange:a=>S(a.target.checked)}),s.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),s.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:y&&y}),s.jsx("div",{className:"flex justify-center my-5 ",children:P?s.jsx("p",{children:"Form Submitting.."}):s.jsx("button",{type:"submit",disabled:!j,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},ge=()=>{const[n,m]=i.useState(1),[p,d]=i.useState(),{setBreadCrumbData:b}=i.useContext(I);return i.useEffect(()=>{b(["Apply Pet Registration"])},[]),s.jsx(s.Fragment,{children:s.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:s.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[s.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Rig (HYDT) Registration Application"}),s.jsxs("div",{className:"md:p-5 p-2",children:[s.jsxs("p",{className:`${n==1?"block":"hidden"}`,children:["  ",s.jsx(ae,{screen:m,data:d})," "]}),s.jsxs("p",{className:`${n==2?"block":"hidden"}`,children:[" ",s.jsx(se,{screen:m,data:p})]})]})]})})})};export{ge as default};
