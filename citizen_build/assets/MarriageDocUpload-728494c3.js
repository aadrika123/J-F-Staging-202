import{j as l}from"./mui-d8134288.js";import{r as e,f as i,u as d}from"./router-a70afc62.js";import{af as n,T as o,M as a,ag as r,A as s,X as t,Q as c,k as v,P as u,b as m,f as h,D as f,n as p,m as w}from"./index-1c8a2e08.js";import{F as x}from"./index.esm-d81e28d2.js";import{p as g}from"./photo-8f85a095.js";import{R as N}from"./index.esm-449e63b8.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const b=d=>{var m,h,f,p,w,b,y,j,_,C,k,E,D,U,$,A,P,B,I,M,R,F,L,S,T,G,O,q,z,Q,V,X,Y,H,J,K,W,Z,ll,el,il,dl,nl,ol,al,rl,sl,tl,cl,vl,ul,ml,hl,fl,pl,wl,xl,gl,Nl;const[bl,yl]=e.useState(""),[jl,_l]=e.useState(null),[Cl,kl]=e.useState(null),[El,Dl]=e.useState(!1),[Ul,$l]=e.useState([]),[Al,Pl]=e.useState(null),[Bl,Il]=e.useState(!1),[Ml,Rl]=e.useState(""),[Fl,Ll]=e.useState(""),Sl=()=>Il(!1),{id:Tl,btc:Gl}=i();let Ol="true"==Gl||1==Gl;const{api_docUpload:ql}=u(),zl=e.useRef([]),Ql=e.useRef([]),Vl=l=>null==Ul?void 0:Ul.some(e=>e==l);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center w-full flex-wrap gap-2 hover:bg-gray-50 border-b py-1.5",children:[l.jsx("div",{className:"w-[5%]",children:l.jsx("img",{src:n,alt:"rain",className:"w-4"})}),l.jsxs("div",{className:"w-[90%] md:w-[22%] font-semibold md:font-normal",children:[null==d?void 0:d.name," ",l.jsx("span",{className:"text-red-600 inline",children:"*"})]}),l.jsxs("div",{className:"w-full md:w-[20%] flex flex-row gap-2",children:[l.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Uploaded Preview :"}),l.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",onClick:()=>{var l,e,i,n,o,a,r,s,t,v,u,m,h,f;return m=null==(r=null==(e=null==(l=null==d?void 0:d.doc)?void 0:l.uploadedDoc)?void 0:e.docPath)?void 0:r.split(".")[(null==(a=null==(o=null==(n=null==(i=null==d?void 0:d.doc)?void 0:i.uploadedDoc)?void 0:n.docPath)?void 0:o.split("."))?void 0:a.length)-1],h=`${null==(t=null==(s=null==d?void 0:d.doc)?void 0:s.uploadedDoc)?void 0:t.docPath}`,f=null==(u=null==(v=null==d?void 0:d.doc)?void 0:v.uploadedDoc)?void 0:u.uploadedDocId,""==h&&c.error("File not uploaded !!!"),void(""!=h&&(Ll(m),Pl(f),Ll(m),Rl(h),Il(!0)))},children:""==(null==(m=null==d?void 0:d.doc)?void 0:m.uploadedDoc)?l.jsx("i",{className:"not-italic",children:"NA"}):l.jsxs(l.Fragment,{children:["pdf"==(null==(j=null==(f=null==(h=null==d?void 0:d.doc)?void 0:h.uploadedDoc)?void 0:f.docPath)?void 0:j.split(".")[(null==(y=null==(b=null==(w=null==(p=null==d?void 0:d.doc)?void 0:p.uploadedDoc)?void 0:w.docPath)?void 0:b.split("."))?void 0:y.length)-1])&&l.jsx("div",{className:"cursor-pointer flex-shrink-0 text-[28px]",children:l.jsx(x,{})}),"jpg"==(null==($=null==(C=null==(_=null==d?void 0:d.doc)?void 0:_.uploadedDoc)?void 0:C.docPath)?void 0:$.split(".")[(null==(U=null==(D=null==(E=null==(k=null==d?void 0:d.doc)?void 0:k.uploadedDoc)?void 0:E.docPath)?void 0:D.split("."))?void 0:U.length)-1])&&l.jsx("div",{className:"cursor-pointer flex-shrink-0",children:l.jsx("img",{onError:()=>$l(l=>{var e,i;return[...l,null==(i=null==(e=null==d?void 0:d.doc)?void 0:e.uploadedDoc)?void 0:i.uploadedDocId]}),src:Vl(null==(P=null==(A=null==d?void 0:d.doc)?void 0:A.uploadedDoc)?void 0:P.uploadedDocId)?g:`${null==(I=null==(B=null==d?void 0:d.doc)?void 0:B.uploadedDoc)?void 0:I.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"jpeg"==(null==(G=null==(R=null==(M=null==d?void 0:d.doc)?void 0:M.uploadedDoc)?void 0:R.docPath)?void 0:G.split(".")[(null==(T=null==(S=null==(L=null==(F=null==d?void 0:d.doc)?void 0:F.uploadedDoc)?void 0:L.docPath)?void 0:S.split("."))?void 0:T.length)-1])&&l.jsx("div",{className:"cursor-pointer flex-shrink-0",children:l.jsx("img",{onError:()=>$l(l=>{var e,i;return[...l,null==(i=null==(e=null==d?void 0:d.doc)?void 0:e.uploadedDoc)?void 0:i.uploadedDocId]}),src:Vl(null==(q=null==(O=null==d?void 0:d.doc)?void 0:O.uploadedDoc)?void 0:q.uploadedDocId)?g:`${null==(Q=null==(z=null==d?void 0:d.doc)?void 0:z.uploadedDoc)?void 0:Q.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"png"==(null==(W=null==(X=null==(V=null==d?void 0:d.doc)?void 0:V.uploadedDoc)?void 0:X.docPath)?void 0:W.split(".")[(null==(K=null==(J=null==(H=null==(Y=null==d?void 0:d.doc)?void 0:Y.uploadedDoc)?void 0:H.docPath)?void 0:J.split("."))?void 0:K.length)-1])&&l.jsx("div",{className:"cursor-pointer flex-shrink-0",children:l.jsx("img",{onError:()=>$l(l=>{var e,i;return[...l,null==(i=null==(e=null==d?void 0:d.doc)?void 0:e.uploadedDoc)?void 0:i.uploadedDocId]}),src:Vl(null==(ll=null==(Z=null==d?void 0:d.doc)?void 0:Z.uploadedDoc)?void 0:ll.uploadedDocId)?g:`${null==(il=null==(el=null==d?void 0:d.doc)?void 0:el.uploadedDoc)?void 0:il.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})]}),l.jsxs("div",{className:"w-full md:w-[15%] flex flex-row gap-2",children:[l.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Status :"}),l.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:""==(null==(dl=null==d?void 0:d.doc)?void 0:dl.uploadedDoc)?l.jsx("i",{className:"not-italic",children:"NA"}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"whitespace-no-wrap",children:0==(null==(ol=null==(nl=null==d?void 0:d.doc)?void 0:nl.uploadedDoc)?void 0:ol.verifyStatus)&&l.jsx(l.Fragment,{children:"Pending"})}),l.jsx("p",{className:"text-green-500 whitespace-no-wrap",children:1==(null==(rl=null==(al=null==d?void 0:d.doc)?void 0:al.uploadedDoc)?void 0:rl.verifyStatus)&&l.jsx(l.Fragment,{children:"Verified"})}),l.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:!0===(null==(sl=null==d?void 0:d.doc)?void 0:sl.btcStatus)&&l.jsx(l.Fragment,{children:"BTC"})}),l.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:2==(null==(cl=null==(tl=null==d?void 0:d.doc)?void 0:tl.uploadedDoc)?void 0:cl.verifyStatus)&&l.jsx(l.Fragment,{children:"Rejected"})})]})})]}),l.jsxs("div",{className:"w-full md:w-[13%] flex flex-row gap-2",children:[l.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Remarks :"}),l.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:""==(null==(ul=null==(vl=null==d?void 0:d.doc)?void 0:vl.uploadedDoc)?void 0:ul.remarks)||null==(null==(hl=null==(ml=null==d?void 0:d.doc)?void 0:ml.uploadedDoc)?void 0:hl.remarks)?l.jsx("i",{className:"not-italic",children:"NA"}):null==(pl=null==(fl=null==d?void 0:d.doc)?void 0:fl.uploadedDoc)?void 0:pl.remarks})]}),l.jsxs("div",{className:"w-full md:w-[20%] flex flex-row gap-2",children:[l.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Upload :"}),l.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:(null==(wl=null==d?void 0:d.doc)?void 0:wl.btcStatus)&&Ol||!(null==(xl=null==d?void 0:d.doc)?void 0:xl.btcStatus)&&!Ol&&""==(null==(gl=null==d?void 0:d.doc)?void 0:gl.uploadedDoc)||!(null==(Nl=null==d?void 0:d.doc)?void 0:Nl.btcStatus)&&!Ol?l.jsx(l.Fragment,{children:El?l.jsx(l.Fragment,{children:l.jsx(o,{radius:"9",color:"#6366f1",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClassName:"",visible:!0})}):l.jsxs(l.Fragment,{children:[l.jsx("input",{ref:l=>zl.current[null==d?void 0:d.index]=l,type:"file",name:"groom",id:"",className:"",onChange:l=>(l=>{var e;const i=l.target.name;if(!r(l.target.files[0]))return null==d||d.activateBottomErrorCard(!0,`File is too large for ${i} ${null==d?void 0:d.name}`),kl(null),yl(""),void _l("");Ql.current[void 0]=null==(e=l.target.files[0])?void 0:e.name,yl(l.target.name),_l(URL.createObjectURL(l.target.files[0])),kl(l.target.files[0])})(l)}),l.jsx("button",{disabled:El,onClick:()=>{var l;return(l=>{var e,i;if(Dl(!0),null==Cl)return null==d||d.activateBottomErrorCard(!0,`Select document for ${l} ${null==d?void 0:d.name}`),void Dl(!1);let n=new FormData;n.append("applicationId",Tl),n.append("document",Cl),n.append("docCode",null==(i=null==(e=null==d?void 0:d.doc)?void 0:e.masters[0])?void 0:i.documentCode),s.post(ql,n,t()).then(l=>{var e,i;(null==(e=null==l?void 0:l.data)?void 0:e.status)?(c.success(`${null==d?void 0:d.name} uploaded successfully !!!`),null==d||d.refresh()):null==d||d.activateBottomErrorCard(!0,v(null==(i=null==l?void 0:l.data)?void 0:i.message))}).catch(l=>{null==d||d.activateBottomErrorCard(!0,"Error getting document list, please try again later !")}).finally(()=>{Dl(!1)})})(null==(l=null==d?void 0:d.doc)?void 0:l.docName)},className:"cursor-pointer w-max bg-indigo-400 hover:bg-indigo-500 text-white px-8 py-1 rounded-sm border border-indigo-600",children:"Upload"})]})}):l.jsx(l.Fragment,{children:l.jsx("div",{className:"font-semibold text-sm text-green-500 text-center",children:"Uploaded"})})})]})]}),l.jsx(a,{isOpen:Bl,onAfterOpen:()=>{},onRequestClose:Sl,className:"w-screen h-screen flex justify-center items-center",contentLabel:"Example Modal",children:l.jsxs("div",{class:" rounded-lg shadow-xl border-2 border-gray-200 bg-white md:ml-32 p-4 animate__animated animate__zoomIn animate__faster w-full md:w-[60vw] h-[80vh]",children:[l.jsx("div",{className:"absolute top-2 font-normal bg-red-200 hover:bg-red-300 right-2 rounded-full p-2 cursor-pointer",onClick:Sl,children:l.jsx(N,{})}),Vl(Al)?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"w-full h-full bg-gray-700 flex items-center justify-center text-gray-200",children:[l.jsx("div",{className:"border-r-2 border-gray-200 pr-4",children:"Error"}),l.jsx("div",{className:"pl-4",children:"Document not visible"})]})}):l.jsxs(l.Fragment,{children:["pdf"==Fl&&l.jsx(l.Fragment,{children:l.jsx("iframe",{className:"w-full h-full",src:Ml,frameborder:"0"})}),"pdf"!=Fl&&l.jsx(l.Fragment,{children:l.jsx("div",{className:"w-full h-[77vh] overflow-auto flex flex-wrap items-center justify-center",children:l.jsx("img",{src:Ml,alt:"",srcset:"",className:""})})})]})]})})]})},y=()=>{const[n,o]=e.useState(!1),[a,r]=e.useState(""),[t,c]=e.useState([]),[x,g]=e.useState(!1),[N,y]=e.useState(null),{id:j}=i(),{api_getDocList:_,api_getDetails:C}=u(),k=d();e.useEffect(()=>{g(!0),D(),E()},[]);const E=()=>{s.post(C,{applicationId:j},m()).then(l=>{var e,i,d;(null==(e=null==l?void 0:l.data)?void 0:e.status)?y(null==(i=null==l?void 0:l.data)?void 0:i.data):U(!0,v(null==(d=null==l?void 0:l.data)?void 0:d.message))}).catch(l=>{U(!0,"Error getting document list, please try again later !")}).finally(()=>{g(!1)})},D=()=>{s.post(_,{applicationId:j},m()).then(l=>{var e,i,d,n;(null==(e=null==l?void 0:l.data)?void 0:e.status)?c(null==(d=null==(i=null==l?void 0:l.data)?void 0:i.data)?void 0:d.listDocs):U(!0,v(null==(n=null==l?void 0:l.data)?void 0:n.message))}).catch(l=>{U(!0,"Error getting document list, please try again later !")}).finally(()=>{g(!1)})},U=(l,e)=>{r(e),o(l)};return l.jsxs(l.Fragment,{children:[x&&l.jsx(h,{}),!x&&l.jsxs("div",{className:" animate__animated animate__fadeIn animate__faster overflow-x-hidden overflow-y-scroll w-[99%] mx-auto rounded-md gap-6 h-full p-4",children:[n&&l.jsx(f,{activateBottomErrorCard:U,errorTitle:a}),l.jsx("div",{className:"flex justify-center mb-6",children:l.jsx("h1",{className:"bg-white shadow-lg shadow-indigo-300 text-indigo-500 border-[0.17vw] border-indigo-500 px-[4vw] py-[1.5vh] w-max font-semibold text-[2.8vh]",children:"Document Upload For Marriage Registration"})}),l.jsxs("div",{className:"flex items-center flex-wrap w-full text-sm bg-white p-4 shadow-lg gap-2",children:[l.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[l.jsx("div",{children:"Application No. "}),l.jsx("div",{className:"font-semibold text-base",children:p(null==N?void 0:N.application_no)})]}),l.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[l.jsx("div",{children:"Groom Name "}),l.jsx("div",{className:"font-semibold text-base",children:p(null==N?void 0:N.groom_name)})]}),l.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[l.jsx("div",{children:"Bride Name "}),l.jsx("div",{className:"font-semibold text-base",children:p(null==N?void 0:N.bride_name)})]}),l.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[l.jsx("div",{children:"Marriage Date "}),l.jsx("div",{className:"font-semibold text-base",children:w(null==N?void 0:N.marriage_date)})]}),l.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[l.jsx("div",{children:"Marriage Place "}),l.jsx("div",{className:"font-semibold text-base",children:p(null==N?void 0:N.marriage_place)})]}),l.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[27%]",children:[l.jsx("div",{children:"Either of the Bride or Groom belongs to BPL category ? "}),l.jsx("div",{className:"font-semibold text-base",children:w(null==N?void 0:N.is_bpl)})]})]}),l.jsx("p",{className:"text-sm mt-4",children:"Note : Image must be less than 1Mb and pdf must be less than 10MB."}),1==(null==N?void 0:N.doc_upload_status)&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"font-semibold text-sm text-green-600 py-2 flex gap-4 items-center",children:["All Documents Uploaded Successfully.",0==(null==N?void 0:N.payment_status)?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-black",children:"Continue to payment "})," ",l.jsx("button",{className:"border-[0.15vw] border-indigo-500 hover:bg-indigo-600 hover:text-white text-indigo-500 shadow-indigo-200 shadow-md px-[2vw] py-[0.6vh] text-[1.8vh] hover:shadow-none",onClick:()=>k(`/marriage-payment/${j}`),children:"Pay Now"})]}):l.jsx(l.Fragment,{children:"Your application is in verification process. Please wait for appointment date."})]})}),0==(null==N?void 0:N.doc_upload_status)?l.jsxs("div",{className:"bg-white  mt-4 flex flex-col p-4 shadow-lg text-sm transition-all duration-150 gap-2",children:[l.jsxs("div",{className:"hidden md:visible md:flex items-center w-full flex-wrap gap-2 border-b-2 border-indigo-400 mb-2 font-semibold text-base",children:[l.jsx("div",{className:"w-[5%]",children:"#"}),l.jsx("div",{className:"w-[22%]",children:"Document"}),l.jsx("div",{className:"w-[20%]",children:"Uploaded Preview"}),l.jsx("div",{className:"w-[15%]",children:"Status"}),l.jsx("div",{className:"w-[13%]",children:"Remarks"}),l.jsx("div",{className:"w-[20%]",children:"Upload"})]}),(null==t?void 0:t.length)>0&&(null==t?void 0:t.map((e,i)=>l.jsx(l.Fragment,{children:l.jsx(b,{name:null==e?void 0:e.docName,doc:e,index:i,activateBottomErrorCard:U,refresh:()=>(D(),E())})})))]}):""]})]})};export{y as default};
