import{j as e}from"./mui-d8134288.js";import{a as l}from"./axios-0f103e9d.js";import{z as a,c as i,d as t,u as d,B as s,f as r,D as o,p as n,n as c,aw as m,b as x,A as v}from"./index-1c8a2e08.js";import{r as h,f as u,u as p}from"./router-a70afc62.js";import{P as f}from"./PropertyApiList-3d1b6323.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";function N(N){var g,b,y,w,j,D,P,k,H,T,A,E;const[I,R]=h.useState(),[S,B]=h.useState(),[C,U]=h.useState(!1),[q,L]=h.useState(!1),[O,V]=h.useState(),[W,_]=h.useState(!1),{id:z}=u(),{api_getHoldingDeactivationDetails:F,api_postHoldingDeactivationApply:M}=f(),{notify:Z}=h.useContext(a),[G,J]=h.useState(!1),[K,Q]=h.useState(null),[X,Y]=h.useState(!1),$=p(),ee=i({holdingDoc:t().required("Upload proof of deactivation"),remark:t().required("write comment for deactivation")}),le=d({initialValues:{holdingDoc:"",remark:""},onSubmit:(e,l)=>{e.remark.length<10?Z("Please write atleast 10 character comment","error"):ae()},validationSchema:ee}),ae=()=>{L(!0),J(!1);let e=new FormData;e.append("propertyId",z),e.append("document",I),e.append("comments",le.values.remark),l.post(M,e,x()).then(e=>{var l;e.data.status?(Z("Holding deactivation applied successfully !!","success"),Y(!0)):(Z(null==(l=null==e?void 0:e.data)?void 0:l.message,"error"),ie(!0,"Error occured. Please try again later.")),L(!1)}).catch(e=>{Z("something went wrong !!","error"),ie(!0,"Error occured. Please try again later."),L(!1)})};h.useEffect(()=>{J(!1),U(!0),v.post(F,{propertyId:z},x()).then(function(e){V(e.data),U(!1)}).catch(function(e){J(!0),U(!1)})},[]);const ie=(e,l)=>{Q(l),J(e)};return e.jsxs(e.Fragment,C?{children:[e.jsx(s,{}),e.jsx("div",{className:"min-h-screen"})]}:{children:[q&&e.jsx(r,{}),G&&e.jsx(o,{activateBottomErrorCard:ie,errorTitle:K}),e.jsx("div",{className:n,children:"Holding Deactivation"}),e.jsx("div",{className:"w-full bg-white shadow-xl mb-6",children:e.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:c(null==(g=null==O?void 0:O.data)?void 0:g.holding_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Holding No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:c(null==(b=null==O?void 0:O.data)?void 0:b.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:c(null==(y=null==O?void 0:O.data)?void 0:y.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"New Ward No"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:c(null==(w=null==O?void 0:O.data)?void 0:w.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:c(null==(j=null==O?void 0:O.data)?void 0:j.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property Type"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:c(null==(D=null==O?void 0:O.data)?void 0:D.zone_mstr_id)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Zone"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:c(null==(P=null==O?void 0:O.data)?void 0:P.is_mobile_tower)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Mobile Tower(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-md",children:[c(null==(k=null==O?void 0:O.data)?void 0:k.is_hoarding_board)," "]}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Hoarding Board(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:c(null==(H=null==O?void 0:O.data)?void 0:H.is_petrol_pump)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Is property a Petrol Pump ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:c(null==(T=null==O?void 0:O.data)?void 0:T.is_water_harvesting)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Rainwater harvesting provision ?"})]})]})]})}),e.jsxs("div",{children:[1!=(null==(A=null==O?void 0:O.data)?void 0:A.deactivationStatus)&&!X&&e.jsx("form",{onSubmit:le.handleSubmit,onChange:e=>{var l;"holdingDoc"==e.target.name&&(l=e,B(URL.createObjectURL(l.target.files[0])),R(l.target.files[0]))},encType:"multipart/form",className:"w-full bg-white shadow-xl py-5",children:e.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:justify-center pl-6 py-2",children:[e.jsx("label",{className:"",children:"Upload Document"}),e.jsxs("div",{className:"text-xs text-gray-700 md:ml-4",children:[e.jsx("input",{...le.getFieldProps("holdingDoc"),accept:".pdf,.png,.jpg,.jpeg",type:"file",className:"mt-2 form-control block w-full px-3 py-2 text-base font-normal bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-600 foc}us:outline-none cursor-pointer shadow-md w-40"}),e.jsx("div",{children:"Only pdf, jpg, jpeg or png allowed."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:le.touched.holdingDoc&&le.errors.holdingDoc?le.errors.holdingDoc:null})]}),e.jsx("div",{className:"mt-10 md:mt-0",children:e.jsx("label",{className:"",children:"Add Remarks"})}),e.jsxs("div",{className:"md:ml-4",children:[e.jsx("textarea",{...le.getFieldProps("remark"),className:"form-control block w-full px-3 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-600 foc}us:outline-none shadow-md w-60 ",placeholder:"Enter your remark"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:le.touched.remark&&le.errors.remark?le.errors.remark:null})]}),e.jsx("div",{className:"md:ml-4",children:e.jsx("button",{type:"submit",className:m,children:"Submit Deactivation Request"})})]})}),X&&e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"Deactivation for this property has been applied."}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{type:"button",className:m,onClick:()=>$("/propertyDashboard"),children:"View Dashboard"})})]})}),(1==(null==(E=null==O?void 0:O.data)?void 0:E.deactivationStatus)||W)&&e.jsx("div",{children:e.jsx("h1",{className:"w-full text-center text-red-500 text-2xl font-semibold",children:"Deactivation request already submitted !"})})]}),e.jsx("div",{className:"w-full h-40 md:none"})]})}export{N as default};
