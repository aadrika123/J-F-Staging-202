import{j as e}from"./mui-d8134288.js";import{r,u as a}from"./router-a70afc62.js";import{b as o,B as t,a5 as l,L as i,ad as n,n as s,aI as d,E as c}from"./index-1c8a2e08.js";import{T as u}from"./TitleBar-ee4c0a34.js";import{a as m}from"./axios-0f103e9d.js";import{S as p}from"./ServerErrorCard-e275c2e4.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";function v(a){var n;const[s,d]=r.useState(),[c,u]=r.useState(!1),[v,h]=r.useState(!1),[y,x]=r.useState(!1);let b=[...null==(n=null==a?void 0:a.transactionRules)?void 0:n.tableColumns];r.useEffect(()=>{g()},[]);const g=()=>{var e,r,t,l,i,n;x(!0),h(!1),u(!1),m[null==(t=null==(r=null==(e=null==a?void 0:a.transactionRules)?void 0:e.api)?void 0:r.api_getTranscationHistory)?void 0:t.method](null==(n=null==(i=null==(l=null==a?void 0:a.transactionRules)?void 0:l.api)?void 0:i.api_getTranscationHistory)?void 0:n.url,o()).then(function(e){var r,a;(null==(r=null==e?void 0:e.data)?void 0:r.status)?(d(null==(a=null==e?void 0:e.data)?void 0:a.data),u(!0)):h(!0),x(!1)}).catch(function(e){h(!0),u(!1),x(!1)})};return v?e.jsx(p,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"}):v?void 0:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-ful md:px-10 md:pt-5 mx-auto bg-white max-sm:mb-10",children:[e.jsx("h1",{className:"uppercase font-semibold text-center tracking-wider text-xl border-b pb-2 mb-4",children:"Property Payment History"}),y&&e.jsx(t,{}),c&&e.jsx(l,{errorMsg:"Some bug found",children:e.jsx("div",{className:"max-sm:px-2",children:e.jsx(i,{assessmentType:!1,columns:b,dataList:s,export:!1})})}),Array.isArray(s)&&0===(null==s?void 0:s.length)&&e.jsx("div",{className:"text-center mt-5 rounded py-2 font-semibold text-red-600",children:"No Transaction Found"})]})})}function h(){n("Property Payment History");const r=a(),{api_getTranscationHistory:o}=c(),t={api:{api_getTranscationHistory:{method:"get",url:o}},transactionInfo:{title:"Citizen Payment History"},tableColumns:[{Header:"#",Cell:({row:r})=>e.jsx("div",{className:"pr-2",children:r.index+1})},{Header:"Type",accessor:"application_type",Cell:({cell:r})=>{var a;return e.jsx("div",{className:"pr-2",children:s(null==(a=r.row.original)?void 0:a.application_type)})}},{Header:"SAF No.",accessor:"saf_no",Cell:({cell:r})=>{var a;return e.jsx("div",{className:"pr-2",children:s(null==(a=r.row.original)?void 0:a.saf_no)})}},{Header:"Holding No.",accessor:"holding_no",Cell:({cell:r})=>{var a;return e.jsx("div",{className:"pr-2",children:s(null==(a=r.row.original)?void 0:a.holding_no)})}},{Header:"Transaction No.",accessor:"tran_no",Cell:({cell:r})=>{var a;return e.jsx("div",{className:"pr-2",children:s(null==(a=r.row.original)?void 0:a.tran_no)})}},{Header:"Payment Mode",accessor:"payment_mode",Cell:({cell:r})=>{var a;return e.jsx("div",{className:"pr-2",children:s(null==(a=r.row.original)?void 0:a.payment_mode)})}},{Header:"Transaction Date",accessor:"tran_date",Cell:({cell:r})=>{var a;return e.jsx("div",{className:"pr-2",children:s(null==(a=r.row.original)?void 0:a.tran_date)})}},{Header:"Amount",accessor:"amount",Cell:({cell:r})=>{var a;return e.jsx("div",{className:"pr-2",children:d(null==(a=r.row.original)?void 0:a.amount)})}},{Header:"Receipt",Cell:({cell:a})=>e.jsx("button",{onClick:()=>{var e,o;r("SAF"==a.row.original.application_type?`/paymentReceipt/${null==(e=a.row.original)?void 0:e.tran_no}/saf`:`/paymentReceipt/${null==(o=a.row.original)?void 0:o.tran_no}/holding`)},type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight uppercase rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})}]};return e.jsxs(e.Fragment,{children:[e.jsx(u,{titleText:"Property Transaction History"}),e.jsx(l,{errorMsg:"Bug in TransactionHistoryFactory",children:e.jsx(v,{transactionRules:t})})]})}export{h as default};
