const t=t=>"string"==typeof t,s=()=>{let t,s;const i=new Promise((i,e)=>{t=i,s=e});return i.resolve=t,i.reject=s,i},i=t=>null==t?"":""+t,e=/###/g,n=t=>t&&t.indexOf("###")>-1?t.replace(e,"."):t,r=s=>!s||t(s),o=(s,i,e)=>{const o=t(i)?i.split("."):i;let h=0;for(;h<o.length-1;){if(r(s))return{};const t=n(o[h]);!s[t]&&e&&(s[t]=new e),s=Object.prototype.hasOwnProperty.call(s,t)?s[t]:{},++h}return r(s)?{}:{obj:s,k:n(o[h])}},h=(t,s,i)=>{const{obj:e,k:n}=o(t,s,Object);if(void 0!==e||1===s.length)return void(e[n]=i);let r=s[s.length-1],h=s.slice(0,s.length-1),a=o(t,h,Object);for(;void 0===a.obj&&h.length;)r=`${h[h.length-1]}.${r}`,h=h.slice(0,h.length-1),a=o(t,h,Object),a&&a.obj&&void 0!==a.obj[`${a.k}.${r}`]&&(a.obj=void 0);a.obj[`${a.k}.${r}`]=i},a=(t,s)=>{const{obj:i,k:e}=o(t,s);if(i)return i[e]},l=(s,i,e)=>{for(const n in i)"__proto__"!==n&&"constructor"!==n&&(n in s?t(s[n])||s[n]instanceof String||t(i[n])||i[n]instanceof String?e&&(s[n]=i[n]):l(s[n],i[n],e):s[n]=i[n]);return s},c=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const d=s=>t(s)?s.replace(/[&<>"'\/]/g,t=>u[t]):s,f=[" ",",","?","!",";"],g=new class{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const s=this.regExpMap.get(t);if(void 0!==s)return s;const i=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,i),this.regExpQueue.push(t),i}}(20),p=function(t,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!t)return;if(t[s])return t[s];const e=s.split(i);let n=t;for(let r=0;r<e.length;){if(!n||"object"!=typeof n)return;let t,s="";for(let o=r;o<e.length;++o)if(o!==r&&(s+=i),s+=e[o],t=n[s],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<e.length-1)continue;r+=o-r+1;break}n=t}return n},v=t=>t&&t.replace("_","-"),m={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,s){console&&console}};class y{constructor(t){this.init(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}init(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=t||m,this.options=s,this.debug=s.debug}log(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return this.forward(s,"log","",!0)}warn(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return this.forward(s,"warn","",!0)}error(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return this.forward(s,"error","")}deprecate(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,i,e,n){return n&&!this.debug?null:(t(s[0])&&(s[0]=`${e}${this.prefix} ${s[0]}`),this.logger[i](s))}create(t){return new y(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new y(this.logger,t)}}var b=new y;class ${constructor(){this.observers={}}on(t,s){return t.split(" ").forEach(t=>{this.observers[t]||(this.observers[t]=new Map);const i=this.observers[t].get(s)||0;this.observers[t].set(s,i+1)}),this}off(t,s){this.observers[t]&&(s?this.observers[t].delete(s):delete this.observers[t])}emit(t){for(var s=arguments.length,i=new Array(s>1?s-1:0),e=1;e<s;e++)i[e-1]=arguments[e];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(t=>{let[s,e]=t;for(let n=0;n<e;n++)s(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(s=>{let[e,n]=s;for(let r=0;r<n;r++)e.apply(e,[t,...i])})}}class w extends ${constructor(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=s,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const s=this.options.ns.indexOf(t);s>-1&&this.options.ns.splice(s,1)}getResource(s,i,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;s.indexOf(".")>-1?h=s.split("."):(h=[s,i],e&&(Array.isArray(e)?h.push(...e):t(e)&&r?h.push(...e.split(r)):h.push(e)));const l=a(this.data,h);return!l&&!i&&!e&&s.indexOf(".")>-1&&(s=h[0],i=h[1],e=h.slice(2).join(".")),!l&&o&&t(e)?p(this.data&&this.data[s]&&this.data[s][i],e,r):l}addResource(t,s,i,e){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let o=[t,s];i&&(o=o.concat(r?i.split(r):i)),t.indexOf(".")>-1&&(o=t.split("."),e=s,s=o[1]),this.addNamespaces(s),h(this.data,o,e),n.silent||this.emit("added",t,s,i,e)}addResources(s,i,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const r in e)(t(e[r])||Array.isArray(e[r]))&&this.addResource(s,i,r,e[r],{silent:!0});n.silent||this.emit("added",s,i,e)}addResourceBundle(t,s,i,e,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},o=[t,s];t.indexOf(".")>-1&&(o=t.split("."),e=i,i=s,s=o[1]),this.addNamespaces(s);let c=a(this.data,o)||{};r.skipCopy||(i=JSON.parse(JSON.stringify(i))),e?l(c,i,n):c={...c,...i},h(this.data,o,c),r.silent||this.emit("added",t,s,i)}removeResourceBundle(t,s){this.hasResourceBundle(t,s)&&delete this.data[t][s],this.removeNamespaces(s),this.emit("removed",t,s)}hasResourceBundle(t,s){return void 0!==this.getResource(t,s)}getResourceBundle(t,s){return s||(s=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(t,s)}:this.getResource(t,s)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const s=this.getDataByLanguage(t);return!!(s&&Object.keys(s)||[]).find(t=>s[t]&&Object.keys(s[t]).length>0)}toJSON(){return this.data}}var x={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,s,i,e,n){return t.forEach(t=>{this.processors[t]&&(s=this.processors[t].process(s,i,e,n))}),s}};const N={};class k extends ${constructor(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,e;super(),i=t,e=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(t=>{i[t]&&(e[t]=i[t])}),this.options=s,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=b.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){if(null==t)return!1;const s=this.resolve(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}});return s&&void 0!==s.res}extractFromKey(s,i){let e=void 0!==i.nsSeparator?i.nsSeparator:this.options.nsSeparator;void 0===e&&(e=":");const n=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let r=i.ns||this.options.defaultNS||[];const o=e&&s.indexOf(e)>-1,h=!(this.options.userDefinedKeySeparator||i.keySeparator||this.options.userDefinedNsSeparator||i.nsSeparator||((t,s,i)=>{s=s||"",i=i||"";const e=f.filter(t=>s.indexOf(t)<0&&i.indexOf(t)<0);if(0===e.length)return!0;const n=g.getRegExp(`(${e.map(t=>"?"===t?"\\?":t).join("|")})`);let r=!n.test(t);if(!r){const s=t.indexOf(i);s>0&&!n.test(t.substring(0,s))&&(r=!0)}return r})(s,e,n));if(o&&!h){const i=s.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:s,namespaces:t(r)?[r]:r};const o=s.split(e);(e!==n||e===n&&this.options.ns.indexOf(o[0])>-1)&&(r=o.shift()),s=o.join(n)}return{key:s,namespaces:t(r)?[r]:r}}translate(s,i,e){if("object"!=typeof i&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof i&&(i={...i}),i||(i={}),null==s)return"";Array.isArray(s)||(s=[String(s)]);const n=void 0!==i.returnDetails?i.returnDetails:this.options.returnDetails,r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,{key:o,namespaces:h}=this.extractFromKey(s[s.length-1],i),a=h[h.length-1],l=i.lng||this.language,c=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const t=i.nsSeparator||this.options.nsSeparator;return n?{res:`${a}${t}${o}`,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(i)}:`${a}${t}${o}`}return n?{res:o,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(i)}:o}const u=this.resolve(s,i);let d=u&&u.res;const f=u&&u.usedKey||o,g=u&&u.exactUsedKey||o,p=Object.prototype.toString.apply(d),v=void 0!==i.joinArrays?i.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!t(d)&&"boolean"!=typeof d&&"number"!=typeof d;if(!(m&&d&&y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(p)<0)||t(v)&&Array.isArray(d))if(m&&t(v)&&Array.isArray(d))d=d.join(v),d&&(d=this.extendTranslation(d,s,i,e));else{let n=!1,h=!1;const c=void 0!==i.count&&!t(i.count),f=k.hasDefaultValue(i),g=c?this.pluralResolver.getSuffix(l,i.count,i):"",p=i.ordinal&&c?this.pluralResolver.getSuffix(l,i.count,{ordinal:!1}):"",v=c&&!i.ordinal&&0===i.count&&this.pluralResolver.shouldUseIntlApi(),m=v&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${g}`]||i[`defaultValue${p}`]||i.defaultValue;!this.isValidLookup(d)&&f&&(n=!0,d=m),this.isValidLookup(d)||(h=!0,d=o);const y=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&h?void 0:d,b=f&&m!==d&&this.options.updateMissing;if(h||n||b){if(this.logger.log(b?"updateKey":"missingKey",l,a,o,b?m:d),r){const t=this.resolve(o,{...i,keySeparator:!1});t&&t.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let t=[];const s=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if("fallback"===this.options.saveMissingTo&&s&&s[0])for(let i=0;i<s.length;i++)t.push(s[i]);else"all"===this.options.saveMissingTo?t=this.languageUtils.toResolveHierarchy(i.lng||this.language):t.push(i.lng||this.language);const e=(t,s,e)=>{const n=f&&e!==d?e:y;this.options.missingKeyHandler?this.options.missingKeyHandler(t,a,s,n,b,i):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(t,a,s,n,b,i),this.emit("missingKey",t,a,s,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?t.forEach(t=>{const s=this.pluralResolver.getSuffixes(t,i);v&&i[`defaultValue${this.options.pluralSeparator}zero`]&&s.indexOf(`${this.options.pluralSeparator}zero`)<0&&s.push(`${this.options.pluralSeparator}zero`),s.forEach(s=>{e([t],o+s,i[`defaultValue${s}`]||m)})}):e(t,o,m))}d=this.extendTranslation(d,s,i,u,e),h&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${a}:${o}`),(h||n)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${o}`:o,n?d:void 0):this.options.parseMissingKeyHandler(d))}else{if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const t=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,d,{...i,ns:h}):`key '${o} (${this.language})' returned an object instead of string.`;return n?(u.res=t,u.usedParams=this.getUsedParamsDetails(i),u):t}if(r){const t=Array.isArray(d),s=t?[]:{},e=t?g:f;for(const n in d)if(Object.prototype.hasOwnProperty.call(d,n)){const t=`${e}${r}${n}`;s[n]=this.translate(t,{...i,joinArrays:!1,ns:h}),s[n]===t&&(s[n]=d[n])}d=s}}return n?(u.res=d,u.usedParams=this.getUsedParamsDetails(i),u):d}extendTranslation(s,i,e,n,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...e},e.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!e.skipInterpolation){e.interpolation&&this.interpolator.init({...e,interpolation:{...this.options.interpolation,...e.interpolation}});const h=t(s)&&(e&&e.interpolation&&void 0!==e.interpolation.skipOnVariables?e.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(h){const t=s.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=e.replace&&!t(e.replace)?e.replace:e;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),s=this.interpolator.interpolate(s,l,e.lng||this.language||n.usedLng,e),h){const t=s.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(e.nest=!1)}!e.lng&&"v1"!==this.options.compatibilityAPI&&n&&n.res&&(e.lng=this.language||n.usedLng),!1!==e.nest&&(s=this.interpolator.nest(s,function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return r&&r[0]===s[0]&&!e.context?(o.logger.warn(`It seems you are nesting recursively key: ${s[0]} in key: ${i[0]}`),null):o.translate(...s,i)},e)),e.interpolation&&this.interpolator.reset()}const h=e.postProcess||this.options.postProcess,a=t(h)?[h]:h;return null!=s&&a&&a.length&&!1!==e.applyPostProcessor&&(s=x.handle(a,s,i,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(e)},...e}:e,this)),s}resolve(s){let i,e,n,r,o,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(s)&&(s=[s]),s.forEach(s=>{if(this.isValidLookup(i))return;const a=this.extractFromKey(s,h),l=a.key;e=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==h.count&&!t(h.count),d=u&&!h.ordinal&&0===h.count&&this.pluralResolver.shouldUseIntlApi(),f=void 0!==h.context&&(t(h.context)||"number"==typeof h.context)&&""!==h.context,g=h.lngs?h.lngs:this.languageUtils.toResolveHierarchy(h.lng||this.language,h.fallbackLng);c.forEach(t=>{this.isValidLookup(i)||(o=t,!N[`${g[0]}-${t}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(N[`${g[0]}-${t}`]=!0,this.logger.warn(`key "${e}" for languages "${g.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(s=>{if(this.isValidLookup(i))return;r=s;const e=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(e,l,s,t,h);else{let t;u&&(t=this.pluralResolver.getSuffix(s,h.count,h));const i=`${this.options.pluralSeparator}zero`,n=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(e.push(l+t),h.ordinal&&0===t.indexOf(n)&&e.push(l+t.replace(n,this.options.pluralSeparator)),d&&e.push(l+i)),f){const s=`${l}${this.options.contextSeparator}${h.context}`;e.push(s),u&&(e.push(s+t),h.ordinal&&0===t.indexOf(n)&&e.push(s+t.replace(n,this.options.pluralSeparator)),d&&e.push(s+i))}}let o;for(;o=e.pop();)this.isValidLookup(i)||(n=o,i=this.getResource(s,t,o,h))}))})}),{res:i,usedKey:e,exactUsedKey:n,usedLng:r,usedNS:o}}isValidLookup(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}getResource(t,s,i){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,s,i,e):this.resourceStore.getResource(t,s,i,e)}getUsedParamsDetails(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],e=s.replace&&!t(s.replace);let n=e?s.replace:s;if(e&&void 0!==s.count&&(n.count=s.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!e){n={...n};for(const t of i)delete n[t]}return n}static hasDefaultValue(t){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&"defaultValue"===s.substring(0,12)&&void 0!==t[s])return!0;return!1}}const j=t=>t.charAt(0).toUpperCase()+t.slice(1);class O{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=b.create("languageUtils")}getScriptPartFromCode(t){if(!(t=v(t))||t.indexOf("-")<0)return null;const s=t.split("-");return 2===s.length?null:(s.pop(),"x"===s[s.length-1].toLowerCase()?null:this.formatLanguageCode(s.join("-")))}getLanguagePartFromCode(t){if(!(t=v(t))||t.indexOf("-")<0)return t;const s=t.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(s){if(t(s)&&s.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(s)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(i){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let e=s.split("-");return this.options.lowerCaseLng?e=e.map(t=>t.toLowerCase()):2===e.length?(e[0]=e[0].toLowerCase(),e[1]=e[1].toUpperCase(),t.indexOf(e[1].toLowerCase())>-1&&(e[1]=j(e[1].toLowerCase()))):3===e.length&&(e[0]=e[0].toLowerCase(),2===e[1].length&&(e[1]=e[1].toUpperCase()),"sgn"!==e[0]&&2===e[2].length&&(e[2]=e[2].toUpperCase()),t.indexOf(e[1].toLowerCase())>-1&&(e[1]=j(e[1].toLowerCase())),t.indexOf(e[2].toLowerCase())>-1&&(e[2]=j(e[2].toLowerCase()))),e.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let s;return t.forEach(t=>{if(s)return;const i=this.formatLanguageCode(t);this.options.supportedLngs&&!this.isSupportedCode(i)||(s=i)}),!s&&this.options.supportedLngs&&t.forEach(t=>{if(s)return;const i=this.getLanguagePartFromCode(t);if(this.isSupportedCode(i))return s=i;s=this.options.supportedLngs.find(t=>t===i?t:t.indexOf("-")<0&&i.indexOf("-")<0?void 0:t.indexOf("-")>0&&i.indexOf("-")<0&&t.substring(0,t.indexOf("-"))===i||0===t.indexOf(i)&&i.length>1?t:void 0)}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(s,i){if(!s)return[];if("function"==typeof s&&(s=s(i)),t(s)&&(s=[s]),Array.isArray(s))return s;if(!i)return s.default||[];let e=s[i];return e||(e=s[this.getScriptPartFromCode(i)]),e||(e=s[this.formatLanguageCode(i)]),e||(e=s[this.getLanguagePartFromCode(i)]),e||(e=s.default),e||[]}toResolveHierarchy(s,i){const e=this.getFallbackCodes(i||this.options.fallbackLng||[],s),n=[],r=t=>{t&&(this.isSupportedCode(t)?n.push(t):this.logger.warn(`rejecting language code not found in supportedLngs: ${t}`))};return t(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(s)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(s)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(s))):t(s)&&r(this.formatLanguageCode(s)),e.forEach(t=>{n.indexOf(t)<0&&r(this.formatLanguageCode(t))}),n}}let S=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],R={1:t=>Number(t>1),2:t=>Number(1!=t),3:t=>0,4:t=>Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2),5:t=>Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5),6:t=>Number(1==t?0:t>=2&&t<=4?1:2),7:t=>Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2),8:t=>Number(1==t?0:2==t?1:8!=t&&11!=t?2:3),9:t=>Number(t>=2),10:t=>Number(1==t?0:2==t?1:t<7?2:t<11?3:4),11:t=>Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3),12:t=>Number(t%10!=1||t%100==11),13:t=>Number(0!==t),14:t=>Number(1==t?0:2==t?1:3==t?2:3),15:t=>Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2),16:t=>Number(t%10==1&&t%100!=11?0:0!==t?1:2),17:t=>Number(1==t||t%10==1&&t%100!=11?0:1),18:t=>Number(0==t?0:1==t?1:2),19:t=>Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3),20:t=>Number(1==t?0:0==t||t%100>0&&t%100<20?1:2),21:t=>Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0),22:t=>Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)};const L=["v1","v2","v3"],P=["v4"],A={zero:0,one:1,two:2,few:3,many:4,other:5};class I{constructor(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=t,this.options=s,this.logger=b.create("pluralResolver"),this.options.compatibilityJSON&&!P.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const t={};return S.forEach(s=>{s.lngs.forEach(i=>{t[i]={numbers:s.nr,plurals:R[s.fc]}})}),t})(),this.pluralRulesCache={}}addRule(t,s){this.rules[t]=s}clearCache(){this.pluralRulesCache={}}getRule(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const e=v("dev"===t?"en":t),n=s.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:e,type:n});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let o;try{o=new Intl.PluralRules(e,{type:n})}catch(i){if(!t.match(/-|_/))return;const e=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(e,s)}return this.pluralRulesCache[r]=o,o}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){const s=this.getRule(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(t,s){return this.getSuffixes(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).map(t=>`${s}${t}`)}getSuffixes(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getRule(t,s);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((t,s)=>A[t]-A[s]).map(t=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${t}`):i.numbers.map(i=>this.getSuffix(t,i,s)):[]}getSuffix(t,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const e=this.getRule(t,i);return e?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${e.select(s)}`:this.getSuffixRetroCompatible(e,s):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,s){const i=t.plurals(t.noAbs?s:Math.abs(s));let e=t.numbers[i];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===e?e="plural":1===e&&(e=""));const n=()=>this.options.prepend&&e.toString()?this.options.prepend+e.toString():e.toString();return"v1"===this.options.compatibilityJSON?1===e?"":"number"==typeof e?`_plural_${e.toString()}`:n():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?n():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!L.includes(this.options.compatibilityJSON)}}const C=function(s,i,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=((t,s,i)=>{const e=a(t,i);return void 0!==e?e:a(s,i)})(s,i,e);return!o&&r&&t(e)&&(o=p(s,e,n),void 0===o&&(o=p(i,e,n))),o},E=t=>t.replace(/\$/g,"$$$$");class z{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=b.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(t=>t),this.init(t)}init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:s,escapeValue:i,useRawValueToEscape:e,prefix:n,prefixEscaped:r,suffix:o,suffixEscaped:h,formatSeparator:a,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:f,nestingPrefixEscaped:g,nestingSuffix:p,nestingSuffixEscaped:v,nestingOptionsSeparator:m,maxReplaces:y,alwaysFormat:b}=t.interpolation;this.escape=void 0!==s?s:d,this.escapeValue=void 0===i||i,this.useRawValueToEscape=void 0!==e&&e,this.prefix=n?c(n):r||"{{",this.suffix=o?c(o):h||"}}",this.formatSeparator=a||",",this.unescapePrefix=l?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=f?c(f):g||c("$t("),this.nestingSuffix=p?c(p):v||c(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=y||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(t,s)=>t&&t.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(s,e,n,r){let o,h,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=t=>{if(t.indexOf(this.formatSeparator)<0){const s=C(e,l,t,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,n,{...r,...e,interpolationkey:t}):s}const s=t.split(this.formatSeparator),i=s.shift().trim(),o=s.join(this.formatSeparator).trim();return this.format(C(e,l,i,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...r,...e,interpolationkey:i})};this.resetRegExp();const u=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:t=>E(t)},{regex:this.regexp,safeValue:t=>E(this.escapeValue?this.escape(t):t)}].forEach(e=>{for(a=0;o=e.regex.exec(s);){const n=o[1].trim();if(h=c(n),void 0===h)if("function"==typeof u){const i=u(s,o,r);h=t(i)?i:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))h="";else{if(d){h=o[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${s}`),h=""}else t(h)||this.useRawValueToEscape||(h=i(h));const l=e.safeValue(h);if(s=s.replace(o[0],l),d?(e.regex.lastIndex+=h.length,e.regex.lastIndex-=o[0].length):e.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),s}nest(s,e){let n,r,o,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(t,s)=>{const i=this.nestingOptionsSeparator;if(t.indexOf(i)<0)return t;const e=t.split(new RegExp(`${i}[ ]*{`));let n=`{${e[1]}`;t=e[0],n=this.interpolate(n,o);const r=n.match(/'/g),h=n.match(/"/g);(r&&r.length%2==0&&!h||h.length%2!=0)&&(n=n.replace(/'/g,'"'));try{o=JSON.parse(n),s&&(o={...s,...o})}catch(a){return this.logger.warn(`failed parsing options string in nesting for key ${t}`,a),`${t}${i}${n}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,t};for(;n=this.nestingRegexp.exec(s);){let l=[];o={...h},o=o.replace&&!t(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const t=n[1].split(this.formatSeparator).map(t=>t.trim());n[1]=t.shift(),l=t,c=!0}if(r=e(a.call(this,n[1].trim(),o),o),r&&n[0]===s&&!t(r))return r;t(r)||(r=i(r)),r||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${s}`),r=""),c&&(r=l.reduce((t,s)=>this.format(t,s,h.lng,{...h,interpolationkey:n[1].trim()}),r.trim())),s=s.replace(n[0],r),this.regexp.lastIndex=0}return s}}const V=t=>{const s={};return(i,e,n)=>{let r=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(r={...r,[n.interpolationkey]:void 0});const o=e+JSON.stringify(r);let h=s[o];return h||(h=t(v(e),n),s[o]=h),h(i)}};class T{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=b.create("formatter"),this.options=t,this.formats={number:V((t,s)=>{const i=new Intl.NumberFormat(t,{...s});return t=>i.format(t)}),currency:V((t,s)=>{const i=new Intl.NumberFormat(t,{...s,style:"currency"});return t=>i.format(t)}),datetime:V((t,s)=>{const i=new Intl.DateTimeFormat(t,{...s});return t=>i.format(t)}),relativetime:V((t,s)=>{const i=new Intl.RelativeTimeFormat(t,{...s});return t=>i.format(t,s.range||"day")}),list:V((t,s)=>{const i=new Intl.ListFormat(t,{...s});return t=>i.format(t)})},this.init(t)}init(t){this.formatSeparator=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation.formatSeparator||","}add(t,s){this.formats[t.toLowerCase().trim()]=s}addCached(t,s){this.formats[t.toLowerCase().trim()]=V(s)}format(t,s,i){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=s.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find(t=>t.indexOf(")")>-1)){const t=n.findIndex(t=>t.indexOf(")")>-1);n[0]=[n[0],...n.splice(1,t)].join(this.formatSeparator)}return n.reduce((t,s)=>{const{formatName:n,formatOptions:r}=(t=>{let s=t.toLowerCase().trim();const i={};if(t.indexOf("(")>-1){const e=t.split("(");s=e[0].toLowerCase().trim();const n=e[1].substring(0,e[1].length-1);"currency"===s&&n.indexOf(":")<0?i.currency||(i.currency=n.trim()):"relativetime"===s&&n.indexOf(":")<0?i.range||(i.range=n.trim()):n.split(";").forEach(t=>{if(t){const[s,...e]=t.split(":"),n=e.join(":").trim().replace(/^'+|'+$/g,""),r=s.trim();i[r]||(i[r]=n),"false"===n&&(i[r]=!1),"true"===n&&(i[r]=!0),isNaN(n)||(i[r]=parseInt(n,10))}})}return{formatName:s,formatOptions:i}})(s);if(this.formats[n]){let s=t;try{const o=e&&e.formatParams&&e.formatParams[e.interpolationkey]||{};s=this.formats[n](t,o.locale||o.lng||e.locale||e.lng||i,{...r,...e,...o})}catch(o){this.logger.warn(o)}return s}return this.logger.warn(`there was no format function for ${n}`),t},t)}}class K extends ${constructor(t,s,i){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=t,this.store=s,this.services=i,this.languageUtils=i.languageUtils,this.options=e,this.logger=b.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=e.maxParallelReads||10,this.readingCalls=0,this.maxRetries=e.maxRetries>=0?e.maxRetries:5,this.retryTimeout=e.retryTimeout>=1?e.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,e.backend,e)}queueLoad(t,s,i,e){const n={},r={},o={},h={};return t.forEach(t=>{let e=!0;s.forEach(s=>{const o=`${t}|${s}`;!i.reload&&this.store.hasResourceBundle(t,s)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===r[o]&&(r[o]=!0):(this.state[o]=1,e=!1,void 0===r[o]&&(r[o]=!0),void 0===n[o]&&(n[o]=!0),void 0===h[s]&&(h[s]=!0)))}),e||(o[t]=!0)}),(Object.keys(n).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:e}),{toLoad:Object.keys(n),pending:Object.keys(r),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(h)}}loaded(t,s,i){const e=t.split("|"),n=e[0],r=e[1];s&&this.emit("failedLoading",n,r,s),!s&&i&&this.store.addResourceBundle(n,r,i,void 0,void 0,{skipCopy:!0}),this.state[t]=s?-1:2,s&&i&&(this.state[t]=0);const h={};this.queue.forEach(i=>{var e,a;((t,s,i)=>{const{obj:e,k:n}=o(t,s,Object);e[n]=e[n]||[],e[n].push(i)})(i.loaded,[n],r),void 0!==(e=i).pending[a=t]&&(delete e.pending[a],e.pendingCount--),s&&i.errors.push(s),0!==i.pendingCount||i.done||(Object.keys(i.loaded).forEach(t=>{h[t]||(h[t]={});const s=i.loaded[t];s.length&&s.forEach(s=>{void 0===h[t][s]&&(h[t][s]=!0)})}),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(t=>!t.done)}read(t,s,i){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!t.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:t,ns:s,fcName:i,tried:e,wait:n,callback:r});this.readingCalls++;const o=(o,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const t=this.waitingReads.shift();this.read(t.lng,t.ns,t.fcName,t.tried,t.wait,t.callback)}o&&h&&e<this.maxRetries?setTimeout(()=>{this.read.call(this,t,s,i,e+1,2*n,r)},n):r(o,h)},h=this.backend[i].bind(this.backend);if(2!==h.length)return h(t,s,o);try{const i=h(t,s);i&&"function"==typeof i.then?i.then(t=>o(null,t)).catch(o):o(null,i)}catch(a){o(a)}}prepareLoading(s,i){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();t(s)&&(s=this.languageUtils.toResolveHierarchy(s)),t(i)&&(i=[i]);const r=this.queueLoad(s,i,e,n);if(!r.toLoad.length)return r.pending.length||n(),null;r.toLoad.forEach(t=>{this.loadOne(t)})}load(t,s,i){this.prepareLoading(t,s,{},i)}reload(t,s,i){this.prepareLoading(t,s,{reload:!0},i)}loadOne(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=t.split("|"),e=i[0],n=i[1];this.read(e,n,"read",void 0,void 0,(i,r)=>{i&&this.logger.warn(`${s}loading namespace ${n} for language ${e} failed`,i),!i&&r&&this.logger.log(`${s}loaded namespace ${n} for language ${e}`,r),this.loaded(t,i,r)})}saveMissing(t,s,i,e,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s))this.logger.warn(`did not save key "${i}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=i&&""!==i){if(this.backend&&this.backend.create){const a={...r,isUpdate:n},l=this.backend.create.bind(this.backend);if(l.length<6)try{let n;n=5===l.length?l(t,s,i,e,a):l(t,s,i,e),n&&"function"==typeof n.then?n.then(t=>o(null,t)).catch(o):o(null,n)}catch(h){o(h)}else l(t,s,i,e,o,a)}t&&t[0]&&this.store.addResource(t[0],s,i,e)}}}const B=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let i={};if("object"==typeof s[1]&&(i=s[1]),t(s[1])&&(i.defaultValue=s[1]),t(s[2])&&(i.tDescription=s[2]),"object"==typeof s[2]||"object"==typeof s[3]){const t=s[3]||s[2];Object.keys(t).forEach(s=>{i[s]=t[s]})}return i},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),F=s=>(t(s.ns)&&(s.ns=[s.ns]),t(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),t(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs&&s.supportedLngs.indexOf("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),s),M=()=>{};class _ extends ${constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;var i;if(super(),this.options=F(t),this.services={},this.logger=b,this.modules={external:[]},i=this,Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(t=>{"function"==typeof i[t]&&(i[t]=i[t].bind(i))}),s&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,s),this;setTimeout(()=>{this.init(t,s)},0)}}init(){var i=this;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof e&&(n=e,e={}),!e.defaultNS&&!1!==e.defaultNS&&e.ns&&(t(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=B();this.options={...r,...this.options,...F(e)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const o=t=>t?"function"==typeof t?new t:t:null;if(!this.options.isClone){let t;b.init(this.modules.logger?o(this.modules.logger):null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=T);const s=new O(this.options);this.store=new w(this.options.resources,this.options);const e=this.services;e.logger=b,e.resourceStore=this.store,e.languageUtils=s,e.pluralResolver=new I(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(e.formatter=o(t),e.formatter.init(e,this.options),this.options.interpolation.format=e.formatter.format.bind(e.formatter)),e.interpolator=new z(this.options),e.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},e.backendConnector=new K(o(this.modules.backend),e.resourceStore,e,this.options),e.backendConnector.on("*",function(t){for(var s=arguments.length,e=new Array(s>1?s-1:0),n=1;n<s;n++)e[n-1]=arguments[n];i.emit(t,...e)}),this.modules.languageDetector&&(e.languageDetector=o(this.modules.languageDetector),e.languageDetector.init&&e.languageDetector.init(e,this.options.detection,this.options)),this.modules.i18nFormat&&(e.i18nFormat=o(this.modules.i18nFormat),e.i18nFormat.init&&e.i18nFormat.init(this)),this.translator=new k(this.services,this.options),this.translator.on("*",function(t){for(var s=arguments.length,e=new Array(s>1?s-1:0),n=1;n<s;n++)e[n-1]=arguments[n];i.emit(t,...e)}),this.modules.external.forEach(t=>{t.init&&t.init(this)})}if(this.format=this.options.interpolation.format,n||(n=M),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const t=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);t.length>0&&"dev"!==t[0]&&(this.options.lng=t[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return i.store[t](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return i.store[t](...arguments),i}});const h=s(),a=()=>{const t=(t,s)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(s),n(t,s)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return t(null,this.t.bind(this));this.changeLanguage(this.options.lng,t)};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),h}loadResources(s){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;const e=t(s)?s:this.language;if("function"==typeof s&&(i=s),!this.options.resources||this.options.partialBundledLanguages){if(e&&"cimode"===e.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return i();const t=[],s=s=>{s&&"cimode"!==s&&this.services.languageUtils.toResolveHierarchy(s).forEach(s=>{"cimode"!==s&&t.indexOf(s)<0&&t.push(s)})};e?s(e):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(t=>s(t)),this.options.preload&&this.options.preload.forEach(t=>s(t)),this.services.backendConnector.load(t,this.options.ns,t=>{t||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),i(t)})}else i(null)}reloadResources(t,i,e){const n=s();return"function"==typeof t&&(e=t,t=void 0),"function"==typeof i&&(e=i,i=void 0),t||(t=this.languages),i||(i=this.options.ns),e||(e=M),this.services.backendConnector.reload(t,i,t=>{n.resolve(),e(t)}),n}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&x.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}setResolvedLanguage(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(let s=0;s<this.languages.length;s++){const t=this.languages[s];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(i,e){var n=this;this.isLanguageChangingTo=i;const r=s();this.emit("languageChanging",i);const o=t=>{this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.resolvedLanguage=void 0,this.setResolvedLanguage(t)},h=(t,s)=>{s?(o(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,r.resolve(function(){return n.t(...arguments)}),e&&e(t,function(){return n.t(...arguments)})},a=s=>{i||s||!this.services.languageDetector||(s=[]);const e=t(s)?s:this.services.languageUtils.getBestMatchFromCodes(s);e&&(this.language||o(e),this.translator.language||this.translator.changeLanguage(e),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(e)),this.loadResources(e,t=>{h(t,e)})};return i||!this.services.languageDetector||this.services.languageDetector.async?!i&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(i):a(this.services.languageDetector.detect()),r}getFixedT(s,i,e){var n=this;const r=function(t,s){let i;if("object"!=typeof s){for(var o=arguments.length,h=new Array(o>2?o-2:0),a=2;a<o;a++)h[a-2]=arguments[a];i=n.options.overloadTranslationOptionHandler([t,s].concat(h))}else i={...s};i.lng=i.lng||r.lng,i.lngs=i.lngs||r.lngs,i.ns=i.ns||r.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||e||r.keyPrefix);const l=n.options.keySeparator||".";let c;return c=i.keyPrefix&&Array.isArray(t)?t.map(t=>`${i.keyPrefix}${l}${t}`):i.keyPrefix?`${i.keyPrefix}${l}${t}`:t,n.t(c,i)};return t(s)?r.lng=s:r.lngs=s,r.ns=i,r.keyPrefix=e,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=s.lng||this.resolvedLanguage||this.languages[0],e=!!this.options&&this.options.fallbackLng,n=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;const r=(t,s)=>{const i=this.services.backendConnector.state[`${t}|${s}`];return-1===i||0===i||2===i};if(s.precheck){const t=s.precheck(this,r);if(void 0!==t)return t}return!(!this.hasResourceBundle(i,t)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!r(i,t)||e&&!r(n,t)))}loadNamespaces(i,e){const n=s();return this.options.ns?(t(i)&&(i=[i]),i.forEach(t=>{this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}),this.loadResources(t=>{n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}loadLanguages(i,e){const n=s();t(i)&&(i=[i]);const r=this.options.preload||[],o=i.filter(t=>r.indexOf(t)<0&&this.services.languageUtils.isSupportedCode(t));return o.length?(this.options.preload=r.concat(o),this.loadResources(t=>{n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const s=this.services&&this.services.languageUtils||new O(B());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new _(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;const i=t.forkResourceStore;i&&delete t.forkResourceStore;const e={...this.options,...t,isClone:!0},n=new _(e);return void 0===t.debug&&void 0===t.prefix||(n.logger=n.logger.clone(t)),["store","services","language"].forEach(t=>{n[t]=this[t]}),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},i&&(n.store=new w(this.store.data,e),n.services.resourceStore=n.store),n.translator=new k(n.services,e),n.translator.on("*",function(t){for(var s=arguments.length,i=new Array(s>1?s-1:0),e=1;e<s;e++)i[e-1]=arguments[e];n.emit(t,...i)}),n.init(e,s),n.translator.options=e,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const D=_.createInstance();D.createInstance=_.createInstance;export{D as i};
