import{j as e}from"./mui-d8134288.js";import{u as l,r as a}from"./router-a70afc62.js";import{z as i,W as n,c as s,d as t,u as d,A as r,B as o,t as c}from"./index-1c8a2e08.js";import"./PetAccordionPage-c80dfee3.js";import{P as m}from"./PetRegAPIList-09ec3f04.js";import{r as u}from"./UseImgResizer-21ab55be.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const h=a=>{var i;const n=l();return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-center",children:[" ","Your Application has submitted successfully"]}),e.jsxs("p",{className:"text-center",children:["Application No."," ",e.jsxs("span",{className:"font-semibold text-lg",children:[" ",null==(i=null==a?void 0:a.data)?void 0:i.applicationNo]})]}),e.jsx("div",{className:"flex justify-center gap-x-5",children:e.jsx("button",{onClick:()=>n("/vehicle-registration-dashboard"),className:"border border-indigo-600 px-2 py-1 rounded shadow hover:bg-indigo-500 hover:text-white",children:"Dashboard"})})]})},p="text-red-700 font-semibold",N="text-sm",v="block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",x=l=>{const[h,x]=a.useState(),[b,g]=a.useState(),[y,f]=a.useState(),[C,w]=a.useState(!1),[F,j]=a.useState(!1),[A,L]=a.useState(!1),{notify:I}=a.useContext(i);a.useState(),a.useState();const[K,R]=a.useState(!1),[S,D]=a.useState(),[P,k]=a.useState(),[E,T]=a.useState(),[z,B]=a.useState(""),{api_ulbList:_,header:M,api_wardList:V}=n(),{api_RigRegistrationApplyForm:H,api_PetRegistrationMaster:O,header1:U}=m(),W=s({ulb:t().required("Kindly enter a value."),address:t().required("Kindly enter a value."),applicantName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),mobileNo:t().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:t().email().required("Kindly enter a value."),vehicleComapny:t().required("Kindly enter a value."),fitness:t().required("Kindly enter a value."),taxCopy:t().required("Kindly enter a value."),license:t().required("Kindly enter a value."),registrationNumber:t().required("Kindly enter a value.")});let Y=new FormData;const $=d({initialValues:{ulb:"",ulbId:"",applicantName:"",mobileNo:"",email:"",address:"",vehicleComapny:"",fitness:"",taxCopy:"",license:"",registrationNumber:""},enableReinitialize:!0,onSubmit:(e,l)=>{X(e)},validationSchema:W}),X=e=>{var a,i,n;j(!0);const s={ulbId:null==e?void 0:e.ulb,applicantName:null==e?void 0:e.applicantName,mobileNo:null==e?void 0:e.mobileNo,email:null==e?void 0:e.email,address:null==e?void 0:e.address,vehicleComapny:null==e?void 0:e.vehicleComapny,registrationNumber:null==e?void 0:e.registrationNumber};for(let l in s)Y.append(l,s[l]);Y.append("documents[0][image]",null==(a=null==$?void 0:$.values)?void 0:a.fitness),Y.append("documents[0][docCode]","FITNESS"),Y.append("documents[0][ownerDtlId]",""),Y.append("documents[1][image]",null==(i=null==$?void 0:$.values)?void 0:i.taxCopy),Y.append("documents[1][docCode]","TAX"),Y.append("documents[1][ownerDtlId]",""),Y.append("documents[2][image]",null==(n=null==$?void 0:$.values)?void 0:n.license),Y.append("documents[2][docCode]","LICENSE"),Y.append("documents[2][ownerDtlId]",""),r.post(H,Y,M).then(e=>{var a,i,n;j(!1),e.data.status?(l.data(e.data.data),l.screen(2),I(null==(a=null==e?void 0:e.data)?void 0:a.message,"success")):(I(null==(i=null==e?void 0:e.data)?void 0:i.message,"error"),L(null==(n=null==e?void 0:e.data)?void 0:n.message))}).catch(e=>{var l,a;L(null==(a=null==(l=null==e?void 0:e.response)?void 0:l.data)?void 0:a.error),I("Something Went wrong","error"),j(!1)})};return a.useEffect(()=>{r.post(O,{},U).then(e=>{e.data.status&&f(e.data.data)}).catch(e=>{})},[]),a.useEffect(()=>{r.get(_,M).then(e=>{e.data.status&&x(e.data.data)}).catch(e=>{})},[]),a.useEffect(()=>{R(!0),r.post(V,{ulbId:$.values.ulb},M).then(e=>{R(!1),e.data.status&&g(e.data.data)}).catch(e=>{R(!1)})},[$.values.ulb]),e.jsxs(e.Fragment,{children:[K&&e.jsx(o,{}),e.jsxs("form",{onSubmit:$.handleSubmit,onChange:e=>{let l=e.target.name,a=e.target.value;L(!1),"driverName"==l&&$.setFieldValue("driverName",c(a,$.values.driverName,20)),"fitness"==l&&D(e.target.files[0]),"taxCopy"==l&&k(e.target.files[0]),"license"==l&&T(e.target.files[0])},className:"mb-20",children:[e.jsxs("div",{className:"overflow-y-auto ",children:[e.jsx("div",{className:"col-span-12 ml-2 my-2"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 bg-white shadow-md rounded-md py-2",children:e.jsxs("div",{className:"m-2",children:[e.jsxs("label",{className:N,htmlFor:"ulb",children:["Select ULB ",e.jsx("span",{className:p,children:"*"})]}),e.jsxs("select",{...$.getFieldProps("ulb"),name:"ulb",className:v,children:[e.jsx("option",{value:"",children:"Select"}),null==h?void 0:h.map((l,a)=>e.jsx("option",{value:l.id,children:l.ulb_name},a))]}),e.jsx("p",{className:"text-red-500 text-xs",children:$.touched.ulb&&$.errors.ulb?$.errors.ulb:null})]})}),e.jsx("div",{className:"col-span-12 ml-2 my-2",children:e.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),e.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 ",children:[e.jsxs("div",{className:"m-2",children:[e.jsxs("label",{className:N,htmlFor:"applicantName",children:["Name of Applicant",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...$.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:v}),e.jsx("p",{className:"text-red-500 text-xs",children:$.touched.applicantName&&$.errors.applicantName?$.errors.applicantName:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:N,htmlFor:"mobileNo",children:["Mobile No",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...$.getFieldProps("mobileNo"),type:"text",maxLength:10,name:"mobileNo",id:"mobileNo",className:v,onChange:$.handleChange,onBlur:$.handleBlur,onKeyPress:e=>{e.key>="0"&&e.key<="9"||e.preventDefault()}}),e.jsx("p",{className:"text-red-500 text-xs",children:$.touched.mobileNo&&$.errors.mobileNo?$.errors.mobileNo:null})]}),e.jsxs("div",{className:"m-2",children:[e.jsx("label",{className:N,htmlFor:"email",children:"Email"}),e.jsx("input",{...$.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:v}),e.jsx("p",{className:"text-red-500 text-xs",children:$.touched.email&&$.errors.email?$.errors.email:null})]})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:N,htmlFor:"address",children:["Address",e.jsx("span",{className:p,children:"*"})]}),e.jsx("textarea",{...$.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:"block w-full border px-2 border-gray-300 rounded shadow"}),e.jsx("p",{className:"text-red-500 text-xs",children:$.touched.address&&$.errors.address?$.errors.address:null})]})]}),e.jsx("div",{className:"col-span-12 ml-2 my-2",children:e.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Vehicle Details"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 bg-white shadow-md rounded-md py-2",children:[e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:N,htmlFor:"registrationNumber",children:["Registration No.",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...$.getFieldProps("registrationNumber"),maxLength:"10",type:"text",name:"registrationNumber",className:v,onChange:e=>{const l=e.target.value.toUpperCase();$.setFieldValue("registrationNumber",l)}}),e.jsx("p",{className:"text-red-500 text-xs",children:$.touched.registrationNumber&&$.errors.registrationNumber?$.errors.registrationNumber:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:N,htmlFor:"vehicleComapny",children:["VIN Number /CH No",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{...$.getFieldProps("vehicleComapny"),maxLength:"17",type:"text",name:"vehicleComapny",className:v,onChange:e=>{const l=e.target.value.toUpperCase();$.setFieldValue("vehicleComapny",l)}}),e.jsx("p",{className:"text-red-500 text-xs",children:$.touched.vehicleComapny&&$.errors.vehicleComapny?$.errors.vehicleComapny:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:N,htmlFor:"fitness",children:["Pollution Certificate",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{onChange:async e=>{var l,a,i,n;const s=e.target.files[0];if(s){const t=await u(s),d=new File([t],null==(a=null==(l=null==e?void 0:e.target)?void 0:l.files[0])?void 0:a.name,{type:null==(n=null==(i=null==e?void 0:e.target)?void 0:i.files[0])?void 0:n.type});$.setFieldValue("fitness",d)}else $.setFieldValue("fitness",null)},maxLength:"50",type:"file",name:"fitness",className:v}),e.jsx("p",{className:"text-red-500 text-xs",children:z})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:N,htmlFor:"taxCopy",children:["Tax Copy",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{onChange:async e=>{var l,a,i,n;const s=e.target.files[0];if(s){const t=await u(s),d=new File([t],null==(a=null==(l=null==e?void 0:e.target)?void 0:l.files[0])?void 0:a.name,{type:null==(n=null==(i=null==e?void 0:e.target)?void 0:i.files[0])?void 0:n.type});$.setFieldValue("taxCopy",d)}else $.setFieldValue("taxCopy",null)},maxLength:"50",type:"file",name:"taxCopy",className:v}),e.jsx("p",{className:"text-red-500 text-xs",children:z})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:N,htmlFor:"license",children:["Registration Of Certificate",e.jsx("span",{className:p,children:"*"})]}),e.jsx("input",{onChange:async e=>{var l,a,i,n;const s=e.target.files[0];if(s){const t=await u(s),d=new File([t],null==(a=null==(l=null==e?void 0:e.target)?void 0:l.files[0])?void 0:a.name,{type:null==(n=null==(i=null==e?void 0:e.target)?void 0:i.files[0])?void 0:n.type});$.setFieldValue("license",d)}else $.setFieldValue("license",null)},maxLength:"50",type:"file",name:"license",className:v}),e.jsx("p",{className:"text-red-500 text-xs",children:z})]})]})]}),e.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>w(!C),children:[e.jsx("input",{type:"checkbox",checked:C,name:"",id:"",onChange:e=>w(e.target.checked)}),e.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),e.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:A&&A}),e.jsx("div",{className:"flex justify-center my-5 ",children:F?e.jsx("p",{children:"Form Submitting.."}):e.jsx("button",{type:"submit",disabled:!C,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},b=()=>{const[l,n]=a.useState(1),[s,t]=a.useState(),{setBreadCrumbData:d}=a.useContext(i);return a.useEffect(()=>{d(["Apply Pet Registration"])},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:e.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[e.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Rig (HYDT) Registration Application"}),e.jsxs("div",{className:"md:p-5 p-2",children:[e.jsxs("p",{className:1==l?"block":"hidden",children:["  ",e.jsx(x,{screen:n,data:t})," "]}),e.jsxs("p",{className:2==l?"block":"hidden",children:[" ",e.jsx(h,{screen:n,data:s})]})]})]})})})};export{b as default};
