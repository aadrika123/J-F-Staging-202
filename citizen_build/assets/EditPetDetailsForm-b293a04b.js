import{j as e}from"./mui-d8134288.js";import{b as a,r as t,f as l,u as n}from"./router-a70afc62.js";import{M as s,z as r,W as i,b as d,c as o,d as c,u as m,A as p,ak as h}from"./index-1c8a2e08.js";import{P as u}from"./PetRegAPIList-09ec3f04.js";import{a as N}from"./axios-0f103e9d.js";const x="/assets/pet-house-eb86d7fa.png",v={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",background:"transparent"}},b="text-red-700 font-semibold",f="text-sm",y="block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700";function g(g){var w,F;const R=null==g?void 0:g.applicationData,[D,O]=a.useState(!1);t.useState(),t.useState();const[L,S]=t.useState();t.useState(!1);const[V,K]=t.useState(!1),[T,A]=t.useState(!1),{notify:B}=t.useContext(r);t.useState(),t.useState();const{id:P}=l();n();const{api_PetRegistrationMaster:G,api_peteditdetails:j,header1:z}=u();i();const C=d();function Z(){O(!1),g.clear()}t.useEffect(()=>{O(!0)},[]),t.useEffect(()=>{k.setFieldValue("petType",null==R?void 0:R.pet_type),k.setFieldValue("petName",null==R?void 0:R.pet_name),k.setFieldValue("petGender",null==R?void 0:R.sex),k.setFieldValue("petBirthDate",null==R?void 0:R.dob),k.setFieldValue("breed",null==R?void 0:R.breed),k.setFieldValue("color",null==R?void 0:R.color),k.setFieldValue("doctorName",null==R?void 0:R.vet_doctor_name),k.setFieldValue("doctorRegNo",null==R?void 0:R.doctor_registration_no),k.setFieldValue("dateOfRabies",null==R?void 0:R.rabies_vac_date),k.setFieldValue("dateOfLepVaccine",null==R?void 0:R.leptospirosis_vac_date),k.setFieldValue("petFrom",null==R?void 0:R.occurrence_type_id)},[R]);const $=o({petType:c().required("Kindly enter a value."),petName:c().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),petGender:c().required("Kindly enter a value."),petBirthDate:c().required("Kindly enter a value."),breed:c().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),color:c().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorName:c().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorRegNo:c().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),dateOfRabies:c().required("Kindly enter a value."),dateOfLepVaccine:c().required("Kindly enter a value."),petFrom:c().required("Kindly enter a value.")}),k=m({initialValues:{petType:"",petName:"",petGender:"",petBirthDate:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(e,a)=>{E(e),M(e)},validationSchema:$}),M=e=>{K(!0),N.post(j,{id:P,petType:e.petType,petName:e.petName,petGender:e.petGender,petBirthDate:e.petBirthDate,breed:e.breed,color:e.color,doctorName:e.doctorName,doctorRegNo:e.doctorRegNo,dateOfRabies:e.dateOfRabies,dateOfLepVaccine:e.dateOfLepVaccine,petFrom:e.petFrom},C).then(e=>{var a,t,l;K(!1),e.data.status?(Z(),B(null==(a=null==e?void 0:e.data)?void 0:a.message,"success"),window.location.reload(),g.data(e.data.data),g.screen(2),Z()):(B(null==(t=null==e?void 0:e.data)?void 0:t.message,"error"),A(null==(l=null==e?void 0:e.data)?void 0:l.message))}).catch(e=>{var a,t;A(null==(t=null==(a=null==e?void 0:e.response)?void 0:a.data)?void 0:t.error),K(!1)})},E=e=>(K(!0),K(!1));return t.useEffect(()=>{p.post(G,{},z).then(e=>{e.data.status&&S(e.data.data)}).catch(e=>{})},[]),e.jsx("div",{className:"overflow-auto",children:e.jsx(s,{isOpen:D,onAfterOpen:function(){},onRequestClose:Z,style:v,contentLabel:"Example Modal",children:e.jsxs("div",{className:"bg-white shadow-xl max-sm:h-[35rem] p-4 border border-gray-200 my-3 relative rounded-md overflow-auto",children:[e.jsx("div",{onClick:()=>Z(),className:"absolute top-2 right-3 cursor-pointer hover:underline",children:e.jsx(h,{className:"text-2xl hover:bg-slate-300 shadow-lg"})}),e.jsxs("h1",{className:"px-1 font-semibold font-serif text-xs mt-2 text-[#37517e]",children:[e.jsx("img",{src:x,alt:"Pet Detail",className:"w-5 inline text-[#37517e]"})," Pet Details"]}),e.jsxs("form",{onSubmit:k.handleSubmit,onChange:e=>{A(!1)},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 py-2",children:[e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"petType",children:["Pet Type",e.jsx("span",{className:b,children:"*"})]}),e.jsxs("select",{...k.getFieldProps("petType"),type:"text",name:"petType",className:y,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"1",children:"Dog"})]}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.petType&&k.errors.petType?k.errors.petType:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"petName",children:["Name of Pet",e.jsx("span",{className:b,children:"*"})]}),e.jsx("input",{...k.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:y}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.petName&&k.errors.petName?k.errors.petName:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"petGender",children:["Gender",e.jsx("span",{className:b,children:"*"})]}),e.jsxs("select",{...k.getFieldProps("petGender"),type:"text",name:"petGender",className:y,children:[e.jsx("option",{value:"",children:"Select"}),null==(w=null==L?void 0:L.petGender)?void 0:w.map((a,t)=>e.jsx("option",{value:a.id,children:a.pet_gender},t))]}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.petGender&&k.errors.petGender?k.errors.petGender:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"petBirthDate",children:["Date of Birth",e.jsx("span",{className:b,children:"*"})]}),e.jsx("input",{...k.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:(new Date).toISOString().split("T")[0],className:y}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.petBirthDate&&k.errors.petBirthDate?k.errors.petBirthDate:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"breed",children:["Breed",e.jsx("span",{className:b,children:"*"})]}),e.jsx("input",{...k.getFieldProps("breed"),type:"text",maxLength:"20",name:"breed",className:y}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.breed&&k.errors.breed?k.errors.breed:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"color",children:["Color",e.jsx("span",{className:b,children:"*"})]}),e.jsx("input",{...k.getFieldProps("color"),type:"text",maxLength:"20",name:"color",className:y}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.color&&k.errors.color?k.errors.color:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"doctorName",children:["Veterinary Doctor Name",e.jsx("span",{className:b,children:"*"})]}),e.jsx("input",{...k.getFieldProps("doctorName"),type:"text",maxLength:"70",name:"doctorName",className:y}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.doctorName&&k.errors.doctorName?k.errors.doctorName:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"doctorRegNo",children:["Doctorâ€™s MSVC/VCI number ",e.jsx("span",{className:b,children:"*"})]}),e.jsx("input",{...k.getFieldProps("doctorRegNo"),type:"text",maxLength:"70",name:"doctorRegNo",className:y}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.doctorRegNo&&k.errors.doctorRegNo?k.errors.doctorRegNo:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"dateOfRabies",children:["Date of Rabies",e.jsx("span",{className:b,children:"*"})]}),e.jsx("input",{...k.getFieldProps("dateOfRabies"),type:"date",name:"dateOfRabies",className:y,max:(new Date).toISOString().split("T")[0]}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.dateOfRabies&&k.errors.dateOfRabies?k.errors.dateOfRabies:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"dateOfLepVaccine",children:["Leptospirosis Vaccination Date",e.jsx("span",{className:b,children:"*"})]}),e.jsx("input",{...k.getFieldProps("dateOfLepVaccine"),type:"date",name:"dateOfLepVaccine",className:y,max:(new Date).toISOString().split("T")[0]}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.dateOfLepVaccine&&k.errors.dateOfLepVaccine?k.errors.dateOfLepVaccine:null})]}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{className:f,htmlFor:"petFrom",children:["Pet From",e.jsx("span",{className:b,children:"*"})]}),e.jsxs("select",{...k.getFieldProps("petFrom"),name:"petFrom",className:y,children:[e.jsx("option",{value:"",children:"Select"}),null==(F=null==L?void 0:L.occurenceType)?void 0:F.map((a,t)=>e.jsx("option",{value:a.id,children:a.occurrence_types},t))]}),e.jsx("p",{className:"text-red-500 text-xs",children:k.touched.petFrom&&k.errors.petFrom?k.errors.petFrom:null})]})]}),e.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:T}),e.jsx("div",{className:"flex justify-center my-5",children:V?e.jsx("p",{children:"Form Submitting.."}):e.jsx("button",{type:"submit",className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow",children:"Submit Application"})})]})]})})})}s.setAppElement("#root");export{g as E,x as p};
