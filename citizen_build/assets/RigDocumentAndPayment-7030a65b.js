import{j as e}from"./mui-d8134288.js";import{r as l,b as t,f as a,u as r}from"./router-a70afc62.js";import{z as o,M as s,a1 as i,A as d,a6 as n}from"./index-1c8a2e08.js";import{F as c}from"./index.esm-ecae21af.js";import{P as m}from"./PetRegAPIList-09ec3f04.js";import{u as p}from"./upload-e931b2e1.js";import{R as h}from"./RigRegTopButtons-53e69e17.js";import{V as u}from"./ViewUploadedDoc-4509c4de.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const b={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function x(a){var r,n;const[h,u]=l.useState(),[x,g]=t.useState(!1),[y,N]=l.useState(null==(r=null==a?void 0:a.payloadData)?void 0:r.doc_code);l.useState();const[v,f]=l.useState(),[w,j]=l.useState(!1),{notify:k}=l.useContext(o),{api_RigReUploadDocument:D,header1:C}=m(),R=null==a?void 0:a.payloadData,[P,U]=l.useState([{label:"License",value:"LICENSE"},{label:"Tax Copy",value:"TAX"},{label:"Pollution",value:"POLLUTION"}]);function S(){g(!1),N(),f(),a.close(!1)}return l.useEffect(()=>{g(!0)},[]),e.jsx("div",{className:" overflow-auto",children:e.jsx(s,{isOpen:x,onAfterOpen:function(){},onRequestClose:S,style:b,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:e=>{var l,t;if(e.preventDefault(),null==y||""==y||null==v||""==v)return u("Please Select Correct File and Type");const r=null==(l=null==v?void 0:v.name)?void 0:l.split(".").pop().toLowerCase();if(!["jpg","jpeg","png","pdf"].includes(r))return void u("Invalid file extension");let o=new FormData;o.append("image",v),o.append("id",null==(t=null==a?void 0:a.payloadData)?void 0:t.id),j(!0),d.post(D,o,C).then(e=>{1==e.data.status?(k("Document Uploaded Successfully","success"),j(!1),S(),a.refetch()):(j(!1),k("Failed to Upload Document","error"),u("Failed to upload file. Please Select Proper File."))}).catch(e=>{j(!1),k("Something went wrong","error"),u("Failed to upload file. Please Select Proper File.")})},children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:S,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(i,{})]}),e.jsx("h1",{className:"font-semibold md:text-xl text-sm text-gray-700",children:"Upload Document"})]}),e.jsxs("div",{className:"md:inline-block max-sm:w-[20rem] overflow-auto p-4",children:[e.jsxs("table",{className:"leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap capitalize",children:null==(n=null==R?void 0:R.doc_code)?void 0:n.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:e=>N(e.target.value),disabled:!0,className:"outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{value:"",children:"Select Document"}),void 0,P.map(l=>e.jsx("option",{value:l.value,selected:(null==R?void 0:R.doc_code)==l.value,children:l.label},l.value))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:w,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:e=>f(e.target.files[0])}),e.jsxs("label",{className:` ${w?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(c,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:w?e.jsx("img",{className:"h-8",src:p,alt:"Uploading"}):e.jsx("button",{disabled:w,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:h})})]})]})})})})}const g=t=>{l.useState(0);const[s,i]=l.useState(!1),[p,b]=l.useState(),[g,y]=l.useState(),[N,v]=l.useState(!0),[f,w]=l.useState(0),[j,k]=l.useState(!1),[D,C]=l.useState(0),[R,P]=l.useState(),[U,S]=l.useState(!1);l.useContext(o);const{id:F}=a(),{api_RigRegistrationDocUploadList:I,header1:L}=m(),{setBreadCrumbData:T}=l.useContext(o),[A,V]=l.useState("");l.useEffect(()=>{T(["Vehicle Registration","Upload Document"])},[]);const z=r(),B=()=>{v(!0),d.post(I,{applicationId:F},L).then(e=>{var l,t;v(!1),(null==(l=null==e?void 0:e.data)?void 0:l.status)?b(null==(t=null==e?void 0:e.data)?void 0:t.data):k(!0)}).catch(e=>{v(!1),k(!0)})};return l.useEffect(()=>{B()},[f]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-3",children:[e.jsx(h,{active:"document",consumerNo:null==p?void 0:p.ApplicationNo}),e.jsx(u,{openDocviewModal:D,documentUrl:R}),s&&e.jsx(x,{payloadData:g,refetch:B,applicationId:F,close:i}),e.jsxs("div",{className:"bg-white rounded-md shadow-sm py-2",children:[e.jsx("div",{className:"my-3",children:e.jsx("p",{className:"text-center text-2xl font-medium text-gray-800",children:"Vehicle Registration Document Upload"})}),N?e.jsxs("p",{className:"w-full",children:[" ",e.jsx(n,{})," "]}):e.jsxs("div",{className:"overflow-auto",children:[1==j?e.jsx("p",{className:"m-auto font-semibold border border-gray-300 text-red-700 bg-red-100 px-5 py-2 rounded shadow w-fit",children:"Failed to Get Data"}):e.jsxs("table",{className:"w-full text-left text-gray-600",children:[e.jsx("thead",{className:"text-lg bg-gray-300 border-b-2",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"px-3 py-2",children:"Sl."}),e.jsx("th",{className:"px-3 py-2",children:"Document Name"}),e.jsx("th",{className:"px-3 py-2",children:"Remarks"}),e.jsx("th",{className:"px-3 py-2",children:"View "}),e.jsx("th",{className:"px-3 py-2",children:"Status"}),e.jsx("th",{className:"px-3 py-2",children:"Action"})]})}),e.jsx("tbody",{children:p.map((l,t)=>{const a=(null==l?void 0:l.remarks)&&l.remarks.length>10?l.remarks.slice(0,10)+"...":(null==l?void 0:l.remarks)||"-";return e.jsxs("tr",{className:"hover:bg-sky-100 border-b",children:[e.jsx("td",{className:"px-3 py-2",children:t+1}),e.jsx("td",{className:"px-3 py-2",children:l.doc_code}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:(null==l?void 0:l.remarks)?e.jsx("span",{className:"cursor-pointer hover:underline",onClick:()=>{V(l.remarks),S(!0)},title:"Click to view full remarks",children:a}):"-"}),e.jsx("td",{className:"px-3 py-2",children:(null==l?void 0:l.doc_path)?e.jsx("img",{className:"h-8 cursor-pointer",onClick:()=>{var e;(e=l.doc_path)&&(P(e),C(e=>e+1))},src:l.doc_path,alt:"document"}):"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-sm text-[#37517e]",children:[0===(null==l?void 0:l.verify_status)&&e.jsx("p",{className:"text-orange-400 font-semibold",children:"Pending"}),1===(null==l?void 0:l.verify_status)&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Verified"}),2===(null==l?void 0:l.verify_status)&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Rejected"})]}),e.jsx("td",{className:"py-2 text-sm",children:1===(null==l?void 0:l.verify_status)?e.jsx("p",{className:"text-base",children:"Submitted"}):e.jsxs("label",{className:"cursor-pointer rounded-sm hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800 bg-blue-500 shadow-lg flex pl-4 pr-5 py-2 text-white font-medium",onClick:()=>{return e=l,i(!0),void y(e);var e},children:[e.jsx(c,{size:16,className:"mr-2"}),(null==l?void 0:l.doc_path)?"Re-Upload":"Upload"]})})]},t)})})]}),(null==p?void 0:p.docUploadStatus)&&e.jsx("p",{className:"text-center mt-5 text-green-600 font-semibold",children:"All Documents are uploaded."})]}),e.jsxs("div",{className:"flex justify-center my-6 space-x-5",children:[e.jsx("button",{type:"button",onClick:()=>z("/vehicle-registration-dashboard"),className:"bg-indigo-500 px-5 py-1 text-white rounded shadow",children:"Back"}),(null==p?void 0:p.docUploadStatus)&&0==(null==p?void 0:p.paymentStatus)&&e.jsx("button",{onClick:()=>z(`/petPayment/${F}`),type:"submit",className:"bg-indigo-700 px-8 py-2 text-white rounded font-sans font-semibold shadow",children:"Pay Now"})]})]})]}),U&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Remarks"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap break-words",children:A}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:()=>S(!1),children:"Close"})]})})]})};export{g as default};
