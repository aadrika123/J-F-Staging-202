import{j as e}from"./mui-105b4636.js";import{r as l,u as X}from"./router-894402c5.js";import{ag as Z,ah as ee,b as L,c as ae,d as $,u as te,R as ne,ai as re,P as se,n as k,x as ie,S as le}from"./index-c2bdde3d.js";import{a as I}from"./axios-67d8a945.js";import{a as oe,b as V}from"./index.esm-1006e7d2.js";import{f as de}from"./index.esm-2c8074cb.js";import{b as ce}from"./index.esm-247d95e3.js";import"./react-40db4358.js";import"./reactIcons-58c2a0d8.js";import"./redux-b8f144fa.js";import"./i18next-e2c66b9b.js";const me=t=>{const[f,P]=l.useState(10),[D,c]=l.useState(1),[b,E]=l.useState(0),[_,H]=l.useState(0),[N,p]=l.useState(0),[B,A]=l.useState(),[q,h]=l.useState(!1),[R,a]=l.useState(!1),[s,y]=l.useState([]),[v,u]=l.useState(!1),d=()=>{a(!1),u(!0),Object.keys(t==null?void 0:t.requestBody).length!==0&&typeof t.loader=="function"&&t.loader(!0),I.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:f,page:D},L()).then(n=>{var i,o,j,w,g,r,S,x,C,F;((i=n==null?void 0:n.data)==null?void 0:i.status)==!0?(t!=null&&t.getData&&(t==null||t.allData((o=n==null?void 0:n.data)==null?void 0:o.data)),y((w=(j=n==null?void 0:n.data)==null?void 0:j.data)==null?void 0:w.data),p((r=(g=n==null?void 0:n.data)==null?void 0:g.data)==null?void 0:r.total),E((x=(S=n==null?void 0:n.data)==null?void 0:S.data)==null?void 0:x.current_page),H((F=(C=n==null?void 0:n.data)==null?void 0:C.data)==null?void 0:F.last_page),a(!1)):a(!0)}).catch(n=>a(!0)).finally(()=>{u(!1),Object.keys(t==null?void 0:t.requestBody).length!==0&&typeof t.loader=="function"&&t.loader(!1),a(!1)})},m=()=>{c(b+1)},M=()=>{c(b-1)},z=n=>{let i=parseInt(N/n),o=parseInt(N%n);if(o==0){i<b&&c(i),P(n);return}if(o!=0){i+1<b&&c(i+1),P(n);return}},U=()=>{c(1)},W=()=>{c(_)},Y=n=>{c(n)},O=n=>n==null?void 0:n.map((o,j)=>{var g;const w=(g=t==null?void 0:t.columns)==null?void 0:g.map((r,S)=>{var C,F;var x=o[r==null?void 0:r.accessor];if(r!=null&&r.option&&((C=r==null?void 0:r.option)==null?void 0:C.length)>0){const T=(F=r==null?void 0:r.option)==null?void 0:F.find(Q=>Q.hasOwnProperty(o[r==null?void 0:r.accessor]));T?x=T[o[r==null?void 0:r.accessor]]:x=o[r==null?void 0:r.accessor]}return(r==null?void 0:r.Header.toLowerCase())!="action"&&{[r==null?void 0:r.Header]:r!=null&&r.accessor?x:j+1}});return Object.assign({},...w)}),G=n=>{},J=n=>{u(!0),h(!1),I.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:N},L()).then(i=>{var o,j,w,g,r,S,x;((o=i==null?void 0:i.data)==null?void 0:o.status)==!0&&(n=="csv"&&(A(O((w=(j=i==null?void 0:i.data)==null?void 0:j.data)==null?void 0:w.data)),K()),n=="excel"&&G(O((r=(g=i==null?void 0:i.data)==null?void 0:g.data)==null?void 0:r.data)),n=="pdf"&&exportToPDF(O((x=(S=i==null?void 0:i.data)==null?void 0:S.data)==null?void 0:x.data))),u(!1)}).catch(i=>{u(!1)})},K=()=>{h(!0)};return l.useEffect(()=>{(t==null?void 0:t.requestBody)!=null&&(c(1),P(10),d())},[t==null?void 0:t.changeData]),l.useEffect(()=>{u(!0),d()},[D,f]),e.jsxs(e.Fragment,{children:[R&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Sorry! "}),e.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),q&&e.jsx(Z,{data:B}),v,!v&&(s==null?void 0:s.length)>0?e.jsx(e.Fragment,{children:e.jsx(ee,{search:t==null?void 0:t.search,currentPage:b,lastPage:_,goFirst:U,goLast:W,count1:N,columns:t==null?void 0:t.columns,dataList:s,exportStatus:t==null?void 0:t.exportStatus,perPage:f,perPageC:z,totalCount:N,nextPage:m,prevPage:M,exportDataF:J,exportData:B,gotoPage:n=>Y(n)})}):e.jsx(e.Fragment,{children:!v&&(t==null?void 0:t.searchParams)!=""&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})},Se=()=>{const{api_searchChallanDirect:t}=se(),f=X(),P=[{Header:"Sl.No.",Cell:({row:a})=>e.jsx("div",{children:(a==null?void 0:a.index)+1})},{Header:"Name",accessor:"full_name",Cell:({cell:a})=>{var s;return k((s=a.row.original)==null?void 0:s.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:a})=>{var s;return k((s=a.row.original)==null?void 0:s.mobile)}},{Header:"Application No",accessor:"application_no",Cell:({cell:a})=>{var s;return k((s=a.row.original)==null?void 0:s.application_no)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:a})=>{var s;return k((s=a.row.original)==null?void 0:s.challan_no)}},{Header:"Challan Date",accessor:"challan_date",Cell:({cell:a})=>{var s;return ie((s=a.row.original)==null?void 0:s.challan_date)},className:"w-[7%]"},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:a})=>{var s;return le((s=a.row.original)==null?void 0:s.total_amount)}},{Header:"ULB Name",accessor:"ulb_name",Cell:({cell:a})=>{var s;return k((s=a.row.original)==null?void 0:s.ulb_name)}},{Header:"Validity",accessor:"hasExpired",Cell:({cell:a})=>{var s,y;return e.jsxs("div",{className:(s=a.row.original)!=null&&s.hasExpired?" text-red-700 pl-4 pr-16 py-3 rounded relative ":" text-green-700 pl-4 pr-16 py-3 rounded relative ",children:[(y=a.row.original)!=null&&y.hasExpired?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"inline mr-2 font-bold text-2xl"}),e.jsx("span",{className:"block sm:inline font-semibold",children:"Expired"})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"inline mr-2 font-bold text-2xl"}),e.jsx("span",{className:"block sm:inline font-semibold",children:"LIVE"})]}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})}},{Header:"Action",Cell:({cell:a})=>{var s,y,v,u;return e.jsxs("div",{className:"flex items-center flex-wrap md:flex-nowrap flex-row gap-2 ",children:[e.jsxs("button",{onClick:()=>{var d,m;f(`/challan-show/${(m=(d=a==null?void 0:a.row)==null?void 0:d.original)==null?void 0:m.id}/direct`)},className:`border border-sky-700 text-sky-700 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-sky-700 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(V,{})," Challan"]}),!((y=(s=a==null?void 0:a.row)==null?void 0:s.original)!=null&&y.payment_status)&&e.jsxs("button",{onClick:()=>{var d,m;f(`/fp-pay/${(m=(d=a==null?void 0:a.row)==null?void 0:d.original)==null?void 0:m.id}/direct`)},className:`border border-orange-600 text-orange-500 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-orange-600 \r
                            hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(de,{})," Pay"]}),((u=(v=a==null?void 0:a.row)==null?void 0:v.original)==null?void 0:u.payment_status)&&e.jsxs("button",{onClick:()=>{var d,m;f(`/payment-receipt/${(m=(d=a==null?void 0:a.row)==null?void 0:d.original)==null?void 0:m.transaction_no}/direct`)},className:`border border-green-600 text-green-600 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-green-600 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(V,{})," Receipt"]})]})}}],[D,c]=l.useState({}),[b,E]=l.useState(0),[_,H]=l.useState(!1),[N,p]=l.useState(!1),[B,A]=l.useState(""),q=ae({searchBy:$().required("Select filter type"),entry:$().required("Enter the parameter")}),h=te({initialValues:{searchBy:"",entry:""},validationSchema:q,onSubmit:a=>{A(a==null?void 0:a.entry),R(a)}}),R=a=>{p(!0),c({[a==null?void 0:a.searchBy]:a==null?void 0:a.entry}),E(s=>s+1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full  md:pt-10",children:e.jsxs("div",{className:" ",children:[e.jsx("div",{className:"text-3xl font-bold text-center mt-10",children:"Fines & Penalties"}),e.jsxs("div",{className:"w-full flex flex-col gap-5 justify-center items-center p-4 md:p-6 transition-all duration-200",children:[e.jsx("aside",{className:" w-full bg-slate-50 shadow-md h-max",children:e.jsxs("form",{onSubmit:h.handleSubmit,onChange:h.handleChange,className:"bg-white poppins p-4",children:[e.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Search Your Challan"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-x-4 items-center gap-y-2 pb-4 mb-2 border-b",children:[e.jsxs("div",{className:"w-full md:w-[25%]",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...h.getFieldProps("searchBy"),className:`${h.errors.searchBy?"text-red-400 font-semibold border border-solid border-red-400 placeholder-red-300 shadow-red-100 ":"text-gray-700 font-normal border border-solid border-gray-400 placeholder-gray-400 h-10"} cursor-pointer w-full px-3 py-1 text-sm  bg-white bg-clip-padding rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-sm`,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"applicationNo",children:"Application Number"}),e.jsx("option",{value:"mobile",children:"Mobile Number"}),e.jsx("option",{value:"challanNo",children:"Challan Number"})]})]}),e.jsxs("div",{className:"w-full md:w-[25%] ",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Parameter",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...h.getFieldProps("entry"),placeholder:"Enter the parameter",className:"h-10  w-full px-3 py-1 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-gray-400 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-400 shadow-md"})]}),e.jsx("div",{className:"mt-4 w-full  justify-center md:justify-start md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-6",children:e.jsx("div",{className:" ",children:_?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):e.jsxs("button",{type:"submit",className:"py-2 flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-md  text-sm px-5",children:[e.jsx("span",{className:"",children:e.jsx(re,{fontSize:""})}),e.jsx("span",{children:"Search Record"})]})})})]})]})}),e.jsx("aside",{className:"w-full overflow-clip transition-all duration-300 h-full",children:e.jsx(me,{api:t,columns:P,requestBody:D,changeData:b,search:!1,loader:a=>H(a),exportStatus:!1,searchParams:B})})]})]})})})};export{Se as default};
