import{j as e}from"./mui-d8134288.js";import{b as a,r as l,u as i}from"./router-a70afc62.js";import{M as o,A as n,R as d,Q as s,b as r,B as t,C as c}from"./index-1c8a2e08.js";import{H as m}from"./HoardingApplicationFullDetail-7eea7e47.js";import{A as p}from"./AdvertisementApiList-98f872e1.js";import{A as h}from"./ReuploadDocumentModal-0fcdf499.js";import{S as g}from"./ServerErrorCard-e275c2e4.js";import{A as v}from"./AdvtListTablePagination-f4228aa9.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const u={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}};function x(r){var t,c,m,g,v,x;const[N,b]=a.useState(!1),{api_getHoardingOrderIdForPayment:f}=p(),[y,w]=l.useState(),A=i();function P(){b(!1)}l.useEffect(()=>{r.openPaymentModal>0&&b(!0)},[r.openPaymentModal]);const j=(e,a)=>{s.dismiss(),"success"==a&&s.success(e),"error"==a&&s.error(e)},C=e=>{var a;1==(null==e?void 0:e.status)?(A(`/paymentScreen/${e.data.razorpay_payment_id}/${null==(a=null==r?void 0:r.applicationDetails)?void 0:a.workflow_id}`),j("Payment Successfull","success")):(s.error("Payment failed...."),j("Payment Failed","error"),A("/advertDashboard"))};return e.jsx("div",{className:"",children:e.jsx(o,{isOpen:N,onAfterOpen:function(){},onRequestClose:P,style:u,contentLabel:"Example Modal",children:e.jsx("div",{className:"bg-violet-200 text-slate-50 drop-shadow-2xl border border-violet-500 p-5 m-5 rounded-md",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"shadow-md shadow-violet-300 py-1 pl-3 bg-white border-gray-400 text-gray-600 flex",children:["Make Payment For",e.jsxs("span",{className:"font-bold text-md ml-4 uppercase ",children:[null==(t=null==r?void 0:r.applicationDetails)?void 0:t.type," "]})]}),e.jsxs("div",{className:"md:flex block w-full h-56",children:[e.jsxs("div",{className:"grid grid-cols-12 px-8 pt-3 leading-8 ",children:[e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("p",{children:"Application No. -"}),e.jsx("p",{children:"Applied date -"})]}),e.jsxs("div",{className:"col-span-6 text-gray-500 font-bold",children:[e.jsxs("p",{children:[null==(c=null==r?void 0:r.applicationDetails)?void 0:c.application_no," "]}),e.jsx("p",{children:null==(m=null==r?void 0:r.applicationDetails)?void 0:m.application_date})]})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("p",{children:"Approve Date -"})}),e.jsx("div",{className:"col-span-6 text-gray-500 font-bold",children:e.jsxs("p",{children:[null==(g=null==r?void 0:r.applicationDetails)?void 0:g.approve_date,"  "]})})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg ",children:"Payable Amount"})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg bg-violet-300 px-2 ",children:null==(v=null==r?void 0:r.applicationDetails)?void 0:v.payment_amount})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("button",{onClick:P,className:"mx-2 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:e=>{n.post(`${f}`,{id:e.target.id},h()).then(function(e){1==e.data.status&&d(e.data.data,C),w(e)}).catch(function(e){alert("Backend Server error. Unable to Generate Order Id")})},id:null==(x=null==r?void 0:r.applicationDetails)?void 0:x.id,className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/256/7057/7057515.png",className:"h-16"})})})})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:""})})]})]})})})})}function N(){const[a,i]=l.useState(),[d,s]=l.useState(),{api_getHoardingUnpaidApplicationList:u,api_getHoardingApplicationDetailForPayment:N}=p(),[b,f]=l.useState([]),[y,w]=l.useState(),[A,P]=l.useState(!1),[j,C]=l.useState(!1),[D,I]=l.useState(!1),H=()=>C(!1),[L,k]=l.useState(0);l.useState(!1);const[S,O]=l.useState(!1),[M,F]=l.useState(!1),[R,T]=l.useState(!1),[_,U]=l.useState(0),[V,$]=l.useState(1),[q,E]=l.useState(0),[B,G]=l.useState(10),[Q,z]=l.useState(""),[J,K]=l.useState(!1),W=[{Header:"#",Cell:({row:a})=>e.jsx("div",{className:"pr-2",children:a.index+1})},{Header:"Application No",accessor:"application_no"},{Header:"Apply Date",accessor:"application_date"},{Header:"Payment Amount",accessor:"payment_amount"},{Header:"Action",accessor:"id",Cell:({cell:a})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>X(a.row.values.id,"Approve"),className:"bg-indigo-500 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r\n                    hover:text-white text-white",children:"View"}),e.jsx("button",{onClick:()=>Y(a.row.values.id),className:"bg-indigo-500 ml-4 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r\n                 hover:text-white text-white",children:"Pay"})]})}],X=(e,a)=>{s(e),i(a),C(!0)},Y=e=>{n.post(`${N}`,{applicationId:e},h()).then(function(e){w(e.data.data),k(e=>e+1)}).catch(function(e){})};l.useEffect(()=>{Z(V,B,Q)},[V,Q,B]);const Z=(e,a,l="")=>{K(!0),T(!0),n.post(u,{page:e,perPage:a,key:l},r()).then(e=>{var a,l,i,o,n,d;O(null==(l=null==(a=e.data)?void 0:a.data)?void 0:l.data),F(!0),T(!1),U(null==(o=null==(i=e.data)?void 0:i.data)?void 0:o.total),E(null==(d=null==(n=e.data)?void 0:n.data)?void 0:d.last_page)}).catch(e=>{F(!1),T(!1)}),setTimeout(()=>{K(!1)},[500])},ee={totalDataCount:_,currentPageIndex:V,setcurrentPageIndex:$,pageLength:B,setpageLength:G,lastPageIndex:q,setlastPageIndex:E,fetchInboxList:Z,searchValue:Q,setsearchValue:z,refreshStatus:J};return R?e.jsx(e.Fragment,{children:e.jsx(t,{})}):D?e.jsx(c,{children:e.jsx(g,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"container bg-white text-gray-600 h-screen mx-auto mt-16",children:e.jsxs("div",{children:[e.jsx(x,{openPaymentModal:L,applicationDetails:y}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-4 container mx-auto pt-4 ",children:e.jsx("div",{className:"col-span-12 p-2",children:e.jsxs("div",{className:"flex flex-row bg-white mb-4 rounded leading-5 shadow-md shadow-violet-100 ",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3288/3288006.png",className:"h-10 ml-3 mt-2"}),e.jsx("h1",{className:"text-xl text-gray-700 font-semibold p-4",children:"HOARDING UNPAID APPLICATIONS"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 p-2",children:[M&&0!=(null==S?void 0:S.length)&&e.jsx(v,{columns:W,dataList:S,values:ee}),M&&0==(null==S?void 0:S.length)&&e.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx(o,{isOpen:j,onAfterOpen:()=>{},onRequestClose:H,contentLabel:"Example Modal",children:e.jsx("div",{class:" rounded-lg shadow-xl border-2 border-gray-50 mx-auto px-0 ",style:{width:"80vw",height:"100%"},children:e.jsx("div",{className:"h-[44rem] bg-white overflow-y-auto",children:e.jsx(m,{data:d,applicationType:a,showLoader:e=>{P(e)},closeModal:H})})})})})]})})})}export{N as default};
