import{j as e}from"./mui-d8134288.js";import{r as t,b as l,f as a,u as r}from"./router-a70afc62.js";import{z as o,M as s,a1 as d,A as i,a6 as n,F as c}from"./index-1c8a2e08.js";import{F as m}from"./index.esm-ecae21af.js";import{P as p}from"./PetRegAPIList-09ec3f04.js";import{u as h}from"./upload-e931b2e1.js";import{P as u}from"./PetRegTopButtons-38d58602.js";import{V as b}from"./ViewUploadedDoc-4509c4de.js";import"./axios-0f103e9d.js";import"./reactIcons-65f093d4.js";import"./materialTailwind-01b55b4e.js";import"./moment-494dae31.js";/* empty css                */import"./redux-c3344370.js";import"./i18next-524eea2d.js";const x={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function g(a){var r,n;const[c,u]=t.useState(),[b,g]=l.useState(!1),[y,N]=t.useState();t.useState();const[f,v]=t.useState(),[w,j]=t.useState(!1),{notify:k}=t.useContext(o),{api_PetRegUploadDocument:D,header1:P}=p(),C=null==a?void 0:a.payloadData;function F(){g(!1),N(),v(),a.close(!1)}return t.useEffect(()=>{g(!0)},[]),e.jsx("div",{className:" overflow-auto",children:e.jsx(s,{isOpen:b,onAfterOpen:function(){},onRequestClose:F,style:x,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:e=>{var t,l;if(e.preventDefault(),null==y||""==y||null==f||""==f)return u("Please Select Correct File and Type");const r=null==(t=null==f?void 0:f.name)?void 0:t.split(".").pop().toLowerCase();if(!["jpg","jpeg","png","pdf"].includes(r))return void u("Invalid file extension");let o=new FormData;o.append("applicationId",null==a?void 0:a.applicationId),o.append("docCategory",null==(l=null==a?void 0:a.payloadData)?void 0:l.docName),o.append("document",f),o.append("docCode",y),j(!0),i.post(D,o,P).then(e=>{1==e.data.status?(k("Document Uploaded Successfully","success"),j(!1),F(),a.refetch()):(j(!1),k("Failed to Upload Document","error"),u("Failed to upload file. Please Select Proper File."))}).catch(e=>{j(!1),k("Something went wrong","error"),u("Failed to upload file. Please Select Proper File.")})},children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:F,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(d,{})]}),e.jsx("h1",{className:"font-semibold md:text-xl text-sm text-gray-700",children:"Upload Document"})]}),e.jsxs("div",{className:"md:inline-block max-sm:w-[20rem] overflow-auto p-4",children:[e.jsxs("table",{className:"leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap capitalize",children:null==(r=null==C?void 0:C.docName)?void 0:r.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:e=>N(e.target.value),className:" outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{children:"Select Document"}),null==(n=null==C?void 0:C.masters)?void 0:n.map(t=>e.jsx("option",{value:t.documentCode,children:t.docVal}))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:w,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:e=>v(e.target.files[0])}),e.jsxs("label",{className:` ${w?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(m,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:w?e.jsx("img",{className:"h-8",src:h,alt:"Uploading"}):e.jsx("button",{disabled:w,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:c})})]})]})})})})}const y=l=>{var s;t.useState(0);const[d,h]=t.useState(!1),[x,y]=t.useState(),[N,f]=t.useState(),[v,w]=t.useState(!0),[j,k]=t.useState(0),[D,P]=t.useState(!1),[C,F]=t.useState(0),[U,R]=t.useState(),[S,I]=t.useState(!1),[A,z]=t.useState("");t.useContext(o);const{id:T}=a(),{api_PetRegistrationDocUploadList:V,header1:B}=p(),{setBreadCrumbData:L}=t.useContext(o);t.useEffect(()=>{L(["Pet Registration","Upload Document"])},[]);const M=r(),_=e=>{e&&(R(e),F(e=>e+1))},E=()=>{w(!0),i.post(V,{applicationId:T},B).then(e=>{w(!1),e.data.status?y(e.data.data):P(!0)}).catch(e=>{w(!1),P(!0)})};return t.useEffect(()=>{E()},[j]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-3",children:[e.jsx(u,{active:"document",consumerNo:null==x?void 0:x.ApplicationNo}),e.jsx(b,{openDocviewModal:C,documentUrl:U}),d&&e.jsx(g,{payloadData:N,refetch:E,applicationId:T,close:h}),e.jsxs("div",{className:"bg-white rounded-md shadow-sm py-2",children:[e.jsx("div",{className:"my-3",children:e.jsx("p",{className:"text-center text-2xl font-medium text-gray-800",children:"Pet Registration Document Upload"})}),v?e.jsxs("p",{className:"w-full",children:[" ",e.jsx(n,{})," "]}):e.jsxs("div",{className:"overflow-auto",children:[1==D?e.jsx("p",{className:"m-auto font-semibold border border-gray-300 text-red-700 bg-red-100 px-5 py-2 rounded shadow w-fit",children:"Failed to Get Data"}):e.jsxs("table",{className:"w-full text-left text-gray-600",children:[e.jsx("thead",{className:"text-lg bg-gray-300 border-b-2",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"px-3 py-2",children:"Sl."}),e.jsx("th",{className:"px-3 py-2",children:"Document Name"}),e.jsx("th",{className:"px-3 py-2",children:"Remarks"}),e.jsx("th",{className:"px-3 py-2",children:"View"}),e.jsx("th",{className:"px-3 py-2",children:"Status"}),e.jsx("th",{className:"px-3 py-2",children:"Action"})]})}),e.jsx("tbody",{className:"",children:x&&(null==(s=null==x?void 0:x.listDocs)?void 0:s.map((t,l)=>{const a=null==t?void 0:t.uploadedDoc,r=(null==a?void 0:a.remarks)&&a.remarks.length>10?a.remarks.slice(0,10)+"...":(null==a?void 0:a.remarks)||"-";return e.jsxs("tr",{className:"hover:bg-sky-100 border-b",children:[e.jsx("td",{className:"px-3 py-2",children:l+1}),e.jsxs("td",{className:"px-3 py-2",children:[t.docName," ",1==t.isMandatory&&e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:(null==a?void 0:a.remarks)?e.jsx("span",{className:"cursor-pointer hover:underline",onClick:()=>{z(a.remarks),I(!0)},title:"Click to view full remarks",children:r}):"-"}),e.jsx("td",{className:"px-3 py-2",children:(null==a?void 0:a.docPath)?a.docPath.endsWith(".pdf")?e.jsx(c,{className:"text-red-600 text-3xl cursor-pointer",onClick:()=>_(null==a?void 0:a.docPath)}):e.jsx("img",{className:"h-8 cursor-pointer",onClick:()=>_(null==a?void 0:a.docPath),src:null==a?void 0:a.docPath,alt:"images"}):"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-sm text-[#37517e]",children:[0===(null==a?void 0:a.verifyStatus)&&e.jsx("p",{className:"text-orange-400 font-semibold",children:"Pending"}),1===(null==a?void 0:a.verifyStatus)&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Verified"}),2===(null==a?void 0:a.verifyStatus)&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Rejected"}),!a&&e.jsx("p",{className:"text-gray-400 font-semibold",children:"Not Uploaded"})]}),e.jsx("td",{className:"py-2 border-b border-gray-200 text-sm",children:1===(null==a?void 0:a.verifyStatus)?e.jsx("p",{className:"text-base text-green-600",children:"Verified"}):e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsx("span",{className:"relative ",onClick:()=>{return e=t,h(!0),void f(e);var e},children:e.jsxs("label",{className:"cursor-pointer rounded-sm hover:rounded-sm hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800 bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium",htmlFor:"contained-button-file",children:[e.jsx(m,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),a?"Re-Upload":"Upload"]})})]})})]},l)}))})]}),(null==x?void 0:x.docUploadStatus)&&e.jsx("p",{className:"text-center mt-5 text-green-600 font-semibold",children:"All Documents are uploaded."})]}),e.jsxs("div",{className:"flex justify-center my-6 space-x-5",children:[e.jsx("button",{type:"button",onClick:()=>M("/pet-registration-dashboard"),className:"bg-indigo-500 px-5 py-1 text-white rounded shadow",children:"Back"}),(null==x?void 0:x.docUploadStatus)&&0==(null==x?void 0:x.paymentStatus)&&e.jsx("button",{onClick:()=>M(`/petPayment/${T}`),type:"submit",className:"bg-indigo-700 px-8 py-2 text-white rounded font-sans font-semibold shadow",children:"Pay Now"})]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Remarks"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap break-words",children:A}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:()=>I(!1),children:"Close"})]})})]})};export{y as default};
