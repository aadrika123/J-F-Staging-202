import{a as P,r as u,j as s,A as j,n as w,P as v}from"./index-3a64a6ea.js";import{c as S,a as c,b as C,u as A}from"./formik.esm-fcb998c5.js";/* empty css              */import{R as E}from"./Hourglass-2b88097c.js";import{a as k,C as a}from"./PowerupFunctions-f42f75f7.js";import{A as L}from"./AxiosInterceptors-cfe6b385.js";import{u as F}from"./useSetTitle-4fcf0de3.js";const T=()=>{const{api_changePassword:f,api_forgotPassword:$}=v(),h=P(),[m,n]=u.useState(!1),[g,x]=u.useState();F("Change Password");const b=S().shape({oldPassword:c().required("Enter old password"),newPassword:c().min(6,"Minimum six character !").max(50,"Too Long!").required("Enter new password !").matches(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password Must Contains (Capital, Smail, Number, Special) eg - Abc123#."),matchNewPassword:c().required("Confirm your new password").oneOf([C("newPassword"),null],"Password not match")}),e=A({initialValues:{oldPassword:"",newPassword:"",matchNewPassword:""},validationSchema:b,onSubmit:r=>{y()}});function p(r){const o="c2ec6f788fb85720bf48c8cc7c2db572596c585a15df18583e1234f147b1c2897aad12e7bebbc4c03c765d0e878427ba6370439d38f39340d7e",t=a.enc.Latin1.parse(a.SHA256(o).toString(a.enc.Latin1)),d=a.SHA256(o).toString().substring(0,16),l=a.enc.Latin1.parse(d),i=a.AES.encrypt(r,t,{iv:l,mode:a.mode.CBC,padding:a.pad.Pkcs7});return a.enc.Base64.stringify(i.ciphertext)}const y=r=>{let o={password:p(e.values.oldPassword),newPassword:p(e.values.newPassword)};n(!0),L.post(f,o,j()).then(t=>{var d,l,i;((d=t==null?void 0:t.data)==null?void 0:d.status)==!0&&(w.success("Password changed successfully !!!"),h("/login")),((l=t==null?void 0:t.data)==null?void 0:l.status)==!1&&(w.error("Please try after sometime !!!"),x((i=t==null?void 0:t.data)==null?void 0:i.message)),n(!1)}).catch(t=>{n(!1),x("Server Error !!!")})},N=r=>{let o=r.target.name,t=r.target.value;o=="mobile"&&e.setFieldValue("mobile",k(t,e.values.mobile,10))};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex justify-center items-center mt-10",children:s.jsx("form",{onChange:N,className:"w-[30rem] px-8 rounded-lg bg-white shadow-xl mx-4 md:mx-0",children:s.jsx("div",{className:"grid grid-cols-12  md:px-0 ",children:s.jsx("div",{className:"w-full col-span-12 md:col-span-12 md:shadow-none py-10",children:s.jsxs("div",{className:"w-full  py-6  text-gray-700",children:[s.jsx("h1",{className:"text-center font-semibold my-1 flex justify-center",children:s.jsx("span",{className:"px-1 text-indigo-500 text-semibold text-2xl poppins uppercase",children:"Change Password"})}),s.jsxs("div",{className:"my-3 relative text-sm",children:[s.jsx("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"Old Password"}),s.jsxs("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[s.jsx("input",{type:"password",...e.getFieldProps("oldPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Enter Your Old Password"}),s.jsx("div",{className:"w-full text-start",children:s.jsx("span",{className:"text-red-600 text-xs poppins text-start",children:e.touched.oldPassword&&e.errors.oldPassword?e.errors.oldPassword:null})})," "]})]}),s.jsxs("div",{className:"my-3 relative text-sm",children:[s.jsx("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"New Password"}),s.jsxs("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[s.jsx("input",{type:"password",...e.getFieldProps("newPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Enter Your New Password"}),s.jsx("div",{className:"w-full text-start",children:s.jsx("span",{className:"text-red-600 text-xs poppins text-start",children:e.touched.newPassword&&e.errors.newPassword?e.errors.newPassword:null})})," "]})]}),s.jsxs("div",{className:"my-3 relative text-sm",children:[s.jsx("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"Confirm New Password"}),s.jsxs("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[s.jsx("input",{type:"password",...e.getFieldProps("matchNewPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Confirm your new password"}),s.jsx("div",{className:"w-full text-start",children:s.jsx("span",{className:"text-red-600 text-xs poppins text-start",children:e.touched.matchNewPassword&&e.errors.matchNewPassword?e.errors.matchNewPassword:null})})," "]})]}),s.jsx("div",{className:" my-10"}),s.jsx("div",{className:"text-center mt-3 text-xs"}),s.jsxs("div",{className:"my-5 relative",children:[s.jsxs("div",{className:"text-red-600 text-sm font-semibold my-3 ",children:[" ",s.jsxs("span",{className:"",children:[" ",g]})]}),m?s.jsx("div",{className:"flex w-full justify-center",children:s.jsx(E,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):s.jsx("button",{type:"submit",onClick:e.handleSubmit,disabled:m,className:" bg-indigo-500 hover:bg-indigo-700 px-5 shadow-xl py-2 w-full  rounded-md text-white text-lg font-semibold",children:"Submit"})]})]})})})})})})};export{T as default};
