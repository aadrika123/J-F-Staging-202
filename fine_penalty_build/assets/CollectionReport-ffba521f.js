import{r as n,a as $,j as e}from"./index-355c1414.js";import{L as z}from"./ListTableConnect-b6a69134.js";import{c as T,a as E,u as L}from"./formik.esm-71344143.js";import{R as V}from"./index.esm-c5e95527.js";import{R as B}from"./Hourglass-a56b5361.js";import{P as O}from"./ProjectApiList-aaddad78.js";import{g as w,d as v,n as i,i as U}from"./PowerupFunctions-18c30270.js";import{u as W}from"./useSetTitle-5ba5c534.js";import"./index-68d0ef88.js";import"./index-5a98ad19.js";import"./index.esm-630f33be.js";import"./iconBase-c4c465c9.js";import"./index.esm-e2e9a222.js";import"./ApiHeader-6d683756.js";import"./ShimmerEffectInline-edb12807.js";import"./AxiosInterceptors-2f6d1df4.js";const lt=()=>{W("Collection Report");const[l,y]=n.useState(null),[N,C]=n.useState(0),{api_CollectionReport:_}=O(),h=$(),D=[{Header:"Sl.No.",Cell:({row:t})=>e.jsx("div",{children:(t==null?void 0:t.index)+1})},{Header:"Name",accessor:"full_name",Cell:({cell:t})=>{var o;return i((o=t.row.original)==null?void 0:o.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:t})=>{var o;return i((o=t.row.original)==null?void 0:o.mobile)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:t})=>{var o;return e.jsx("div",{className:"underline cursor-pointer",onClick:()=>{var r,s,d,u;return((s=(r=t==null?void 0:t.row)==null?void 0:r.original)==null?void 0:s.challan_id)&&h(`/challan/${(u=(d=t==null?void 0:t.row)==null?void 0:d.original)==null?void 0:u.challan_id}`)},children:i((o=t.row.original)==null?void 0:o.challan_no)})}},{Header:"Violation Made",accessor:"violation_name",Cell:({cell:t})=>{var o;return i((o=t.row.original)==null?void 0:o.violation_name)}},{Header:"Violation Section",accessor:"violation_section",Cell:({cell:t})=>{var o;return i((o=t.row.original)==null?void 0:o.violation_section)}},{Header:"Violation Place",accessor:"violation_place",Cell:({cell:t})=>{var o;return i((o=t.row.original)==null?void 0:o.violation_place)}},{Header:"Transaction No",accessor:"tran_no",Cell:({cell:t})=>{var o;return e.jsx("div",{className:"underline cursor-pointer",onClick:()=>{var r,s;return((r=t.row.original)==null?void 0:r.tran_no)&&h(`/fp-receipt/${(s=t.row.original)==null?void 0:s.tran_no}`)},children:i((o=t.row.original)==null?void 0:o.tran_no)})}},{Header:"Transaction Date",accessor:"tran_date",Cell:({cell:t})=>{var o;return U((o=t.row.original)==null?void 0:o.tran_date)}},{Header:"Payment Mode",accessor:"payment_mode",Cell:({cell:t})=>{var o;return i((o=t.row.original)==null?void 0:o.payment_mode)}},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:t})=>{var o;return v((o=t.row.original)==null?void 0:o.total_amount)}}],[x,S]=n.useState({}),[m,H]=n.useState(0),[R,k]=n.useState(!1),A="text-gray-800 text-sm",f="border focus:outline-none drop-shadow-sm focus:drop-shadow-md px-4 py-1 text-gray-700 shadow-black placeholder:text-sm",c=[{title:"From Date",key:"fromDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Upto Date",key:"uptoDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Payment Mode",key:"paymentMode",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:[{id:"CASH",value:"Cash"}],okey:"id",ovalue:"value"}],F=(t,o="",r,s="",d="",u=!1,p=[],P="",q="")=>e.jsxs("div",{className:`flex flex-col ${s} `,children:[o!=""&&e.jsxs("label",{htmlFor:t,className:A,children:[o," ",u&&e.jsx("span",{className:"text-red-500 text-xs font-bold",children:"*"})," : "]}),r!="select"&&r!="file"&&e.jsx("input",{...a.getFieldProps(t),type:r,className:f+` ${a.touched[t]&&a.errors[t]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,name:t,id:"",placeholder:d}),r=="select"&&e.jsxs("select",{...a.getFieldProps(t),className:f+` ${a.touched[t]&&a.errors[t]?" border-red-200 placeholder:text-red-400 text-red-400":" focus:border-zinc-300 border-zinc-200 "}`,children:[e.jsx("option",{value:"",children:"All"}),p==null?void 0:p.map(j=>e.jsx("option",{className:"",value:j[P],children:j[q]}))]})]}),M=T().shape([...c].reduce((t,o)=>(o!=null&&o.required&&(t[o.key]=E().required(o==null?void 0:o.hint)),t),{})),g={fromDate:w(),uptoDate:w(),paymentMode:""},a=L({initialValues:g,enableReinitialize:!0,validationSchema:M,onSubmit:t=>{b(t)}}),b=t=>{S({fromDate:t==null?void 0:t.fromDate,uptoDate:t==null?void 0:t.uptoDate,paymentMode:t==null?void 0:t.paymentMode}),H(o=>o+1)};return n.useEffect(()=>{b(g)},[]),n.useEffect(()=>{C(l==null?void 0:l.total_amount)},[l,m]),e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:a.handleSubmit,onChange:a.handleChange,className:"bg-white poppins p-4 mb-8",children:[e.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Collection Report"}),e.jsxs("section",{className:"flex gap-4 flex-wrap my-6",children:[c==null?void 0:c.map(t=>F(t==null?void 0:t.key,t==null?void 0:t.title,t==null?void 0:t.type,t==null?void 0:t.width,t==null?void 0:t.hint,t==null?void 0:t.required,t==null?void 0:t.options,t==null?void 0:t.okey,t==null?void 0:t.ovalue)),e.jsx("div",{className:"mt-4 w-full md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-4",children:e.jsx("div",{className:" ",children:R?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(B,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):e.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[e.jsx("span",{className:"",children:e.jsx(V,{fontSize:""})}),e.jsx("span",{children:"Search Record"})]})})})]})]}),Object.keys(x).length!==0&&e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-0 grid grid-cols-3 right-0",children:e.jsxs("div",{children:["Total Amount:",e.jsx("span",{className:"font-semibold",children:v(N)})]})})}),e.jsx(z,{getData:!0,api:_,columns:D,requestBody:x,allData:t=>y(t),changeData:m,search:!1,loader:t=>k(t)})]})};export{lt as default};
